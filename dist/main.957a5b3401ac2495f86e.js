(self.webpackChunktegamar=self.webpackChunktegamar||[]).push([[179],{8255:Jn=>{function Lt(ne){return Promise.resolve().then(()=>{var x=new Error("Cannot find module '"+ne+"'");throw x.code="MODULE_NOT_FOUND",x})}Lt.keys=()=>[],Lt.resolve=Lt,Lt.id=8255,Jn.exports=Lt},7238:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{l3:()=>Se,_j:()=>x,LC:()=>I,ZN:()=>Kt,jt:()=>Xe,vP:()=>_,SB:()=>xe,oB:()=>ve,eR:()=>Ke,X$:()=>c,ZE:()=>Ft,k1:()=>Mn});class x{}class I{}const Se="*";function c(Jt,qt){return{type:7,name:Jt,definitions:qt,options:{}}}function Xe(Jt,qt=null){return{type:4,styles:qt,timings:Jt}}function _(Jt,qt=null){return{type:2,steps:Jt,options:qt}}function ve(Jt){return{type:6,styles:Jt,offset:null}}function xe(Jt,qt,dn){return{type:0,name:Jt,styles:qt,options:dn}}function Ke(Jt,qt,dn=null){return{type:1,expr:Jt,animation:qt,options:dn}}function kt(Jt){Promise.resolve(null).then(Jt)}class Kt{constructor(qt=0,dn=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=qt+dn}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qt=>qt()),this._onDoneFns=[])}onStart(qt){this._onStartFns.push(qt)}onDone(qt){this._onDoneFns.push(qt)}onDestroy(qt){this._onDestroyFns.push(qt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){kt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(qt=>qt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(qt=>qt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(qt){this._position=this.totalTime?qt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(qt){const dn="start"==qt?this._onStartFns:this._onDoneFns;dn.forEach(Hn=>Hn()),dn.length=0}}class Ft{constructor(qt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=qt;let dn=0,Hn=0,Ai=0;const Ri=this.players.length;0==Ri?kt(()=>this._onFinish()):this.players.forEach(ci=>{ci.onDone(()=>{++dn==Ri&&this._onFinish()}),ci.onDestroy(()=>{++Hn==Ri&&this._onDestroy()}),ci.onStart(()=>{++Ai==Ri&&this._onStart()})}),this.totalTime=this.players.reduce((ci,ni)=>Math.max(ci,ni.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qt=>qt()),this._onDoneFns=[])}init(){this.players.forEach(qt=>qt.init())}onStart(qt){this._onStartFns.push(qt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(qt=>qt()),this._onStartFns=[])}onDone(qt){this._onDoneFns.push(qt)}onDestroy(qt){this._onDestroyFns.push(qt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(qt=>qt.play())}pause(){this.players.forEach(qt=>qt.pause())}restart(){this.players.forEach(qt=>qt.restart())}finish(){this._onFinish(),this.players.forEach(qt=>qt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(qt=>qt.destroy()),this._onDestroyFns.forEach(qt=>qt()),this._onDestroyFns=[])}reset(){this.players.forEach(qt=>qt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(qt){const dn=qt*this.totalTime;this.players.forEach(Hn=>{const Ai=Hn.totalTime?Math.min(1,dn/Hn.totalTime):1;Hn.setPosition(Ai)})}getPosition(){const qt=this.players.reduce((dn,Hn)=>null===dn||Hn.totalTime>dn.totalTime?Hn:dn,null);return null!=qt?qt.getPosition():0}beforeDestroy(){this.players.forEach(qt=>{qt.beforeDestroy&&qt.beforeDestroy()})}triggerCallback(qt){const dn="start"==qt?this._onStartFns:this._onDoneFns;dn.forEach(Hn=>Hn()),dn.length=0}}const Mn="!"},369:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Em:()=>Et,tE:()=>oe,qV:()=>at,qm:()=>O,X6:()=>Ui,yG:()=>Kn});var x=ne(8583),I=ne(7716),Se=ne(9765),c=ne(5319),Xe=ne(6215),Ie=ne(5917),_=ne(6461),ve=ne(7393);class Oe{constructor(W){this.total=W}call(W,$){return $.subscribe(new Ke(W,this.total))}}class Ke extends ve.L{constructor(W,$){super(W),this.total=$,this.count=0}_next(W){++this.count>this.total&&this.destination.next(W)}}var st=ne(3342),Pt=ne(4395),Qt=ne(5435),Dt=ne(8002),St=ne(5257),kt=ne(7519),Kt=ne(6782),Ft=ne(9490),Mn=ne(521);ne(7574);class Et extends class{constructor(W){this._items=W,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Se.xQ,this._typeaheadSubscription=c.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=$=>$.disabled,this._pressedLetters=[],this.tabOut=new Se.xQ,this.change=new Se.xQ,W instanceof I.n_E&&W.changes.subscribe($=>{if(this._activeItem){const Ge=$.toArray().indexOf(this._activeItem);Ge>-1&&Ge!==this._activeItemIndex&&(this._activeItemIndex=Ge)}})}skipPredicate(W){return this._skipPredicateFn=W,this}withWrap(W=!0){return this._wrap=W,this}withVerticalOrientation(W=!0){return this._vertical=W,this}withHorizontalOrientation(W){return this._horizontal=W,this}withAllowedModifierKeys(W){return this._allowedModifierKeys=W,this}withTypeAhead(W=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,st.b)($=>this._pressedLetters.push($)),(0,Pt.b)(W),(0,Qt.h)(()=>this._pressedLetters.length>0),(0,Dt.U)(()=>this._pressedLetters.join(""))).subscribe($=>{const Ee=this._getItemsArray();for(let Ge=1;Ge<Ee.length+1;Ge++){const mt=(this._activeItemIndex+Ge)%Ee.length,nn=Ee[mt];if(!this._skipPredicateFn(nn)&&0===nn.getLabel().toUpperCase().trim().indexOf($)){this.setActiveItem(mt);break}}this._pressedLetters=[]}),this}withHomeAndEnd(W=!0){return this._homeAndEnd=W,this}setActiveItem(W){const $=this._activeItem;this.updateActiveItem(W),this._activeItem!==$&&this.change.next(this._activeItemIndex)}onKeydown(W){const $=W.keyCode,Ge=["altKey","ctrlKey","metaKey","shiftKey"].every(mt=>!W[mt]||this._allowedModifierKeys.indexOf(mt)>-1);switch($){case _.Mf:return void this.tabOut.next();case _.JH:if(this._vertical&&Ge){this.setNextItemActive();break}return;case _.LH:if(this._vertical&&Ge){this.setPreviousItemActive();break}return;case _.SV:if(this._horizontal&&Ge){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case _.oh:if(this._horizontal&&Ge){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case _.Sd:if(this._homeAndEnd&&Ge){this.setFirstItemActive();break}return;case _.uR:if(this._homeAndEnd&&Ge){this.setLastItemActive();break}return;default:return void((Ge||(0,_.Vb)(W,"shiftKey"))&&(W.key&&1===W.key.length?this._letterKeyStream.next(W.key.toLocaleUpperCase()):($>=_.A&&$<=_.Z||$>=_.xE&&$<=_.aO)&&this._letterKeyStream.next(String.fromCharCode($))))}this._pressedLetters=[],W.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(W){const $=this._getItemsArray(),Ee="number"==typeof W?W:$.indexOf(W),Ge=$[Ee];this._activeItem=null==Ge?null:Ge,this._activeItemIndex=Ee}_setActiveItemByDelta(W){this._wrap?this._setActiveInWrapMode(W):this._setActiveInDefaultMode(W)}_setActiveInWrapMode(W){const $=this._getItemsArray();for(let Ee=1;Ee<=$.length;Ee++){const Ge=(this._activeItemIndex+W*Ee+$.length)%$.length;if(!this._skipPredicateFn($[Ge]))return void this.setActiveItem(Ge)}}_setActiveInDefaultMode(W){this._setActiveItemByIndex(this._activeItemIndex+W,W)}_setActiveItemByIndex(W,$){const Ee=this._getItemsArray();if(Ee[W]){for(;this._skipPredicateFn(Ee[W]);)if(!Ee[W+=$])return;this.setActiveItem(W)}}_getItemsArray(){return this._items instanceof I.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(W){return this._origin=W,this}setActiveItem(W){super.setActiveItem(W),this.activeItem&&this.activeItem.focus(this._origin)}}let pn=(()=>{class J{constructor($){this._platform=$}isDisabled($){return $.hasAttribute("disabled")}isVisible($){return function(J){return!!(J.offsetWidth||J.offsetHeight||"function"==typeof J.getClientRects&&J.getClientRects().length)}($)&&"visible"===getComputedStyle($).visibility}isTabbable($){if(!this._platform.isBrowser)return!1;const Ee=function(J){try{return J.frameElement}catch(W){return null}}(function(J){return J.ownerDocument&&J.ownerDocument.defaultView||window}($));if(Ee&&(-1===er(Ee)||!this.isVisible(Ee)))return!1;let Ge=$.nodeName.toLowerCase(),mt=er($);return $.hasAttribute("contenteditable")?-1!==mt:!("iframe"===Ge||"object"===Ge||this._platform.WEBKIT&&this._platform.IOS&&!function(J){let W=J.nodeName.toLowerCase(),$="input"===W&&J.type;return"text"===$||"password"===$||"select"===W||"textarea"===W}($))&&("audio"===Ge?!!$.hasAttribute("controls")&&-1!==mt:"video"===Ge?-1!==mt&&(null!==mt||this._platform.FIREFOX||$.hasAttribute("controls")):$.tabIndex>=0)}isFocusable($,Ee){return function(J){return!function(J){return function(J){return"input"==J.nodeName.toLowerCase()}(J)&&"hidden"==J.type}(J)&&(function(J){let W=J.nodeName.toLowerCase();return"input"===W||"select"===W||"button"===W||"textarea"===W}(J)||function(J){return function(J){return"a"==J.nodeName.toLowerCase()}(J)&&J.hasAttribute("href")}(J)||J.hasAttribute("contenteditable")||Ti(J))}($)&&!this.isDisabled($)&&((null==Ee?void 0:Ee.ignoreVisibility)||this.isVisible($))}}return J.\u0275fac=function($){return new($||J)(I.LFG(Mn.t4))},J.\u0275prov=I.Yz7({factory:function(){return new J(I.LFG(Mn.t4))},token:J,providedIn:"root"}),J})();function Ti(J){if(!J.hasAttribute("tabindex")||void 0===J.tabIndex)return!1;let W=J.getAttribute("tabindex");return"-32768"!=W&&!(!W||isNaN(parseInt(W,10)))}function er(J){if(!Ti(J))return null;const W=parseInt(J.getAttribute("tabindex")||"",10);return isNaN(W)?-1:W}class en{constructor(W,$,Ee,Ge,mt=!1){this._element=W,this._checker=$,this._ngZone=Ee,this._document=Ge,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,mt||this.attachAnchors()}get enabled(){return this._enabled}set enabled(W){this._enabled=W,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(W,this._startAnchor),this._toggleAnchorTabIndex(W,this._endAnchor))}destroy(){const W=this._startAnchor,$=this._endAnchor;W&&(W.removeEventListener("focus",this.startAnchorListener),W.parentNode&&W.parentNode.removeChild(W)),$&&($.removeEventListener("focus",this.endAnchorListener),$.parentNode&&$.parentNode.removeChild($)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(W){return new Promise($=>{this._executeOnStable(()=>$(this.focusInitialElement(W)))})}focusFirstTabbableElementWhenReady(W){return new Promise($=>{this._executeOnStable(()=>$(this.focusFirstTabbableElement(W)))})}focusLastTabbableElementWhenReady(W){return new Promise($=>{this._executeOnStable(()=>$(this.focusLastTabbableElement(W)))})}_getRegionBoundary(W){let $=this._element.querySelectorAll(`[cdk-focus-region-${W}], [cdkFocusRegion${W}], [cdk-focus-${W}]`);for(let Ee=0;Ee<$.length;Ee++)$[Ee].hasAttribute(`cdk-focus-${W}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${W}', use 'cdkFocusRegion${W}' instead. The deprecated attribute will be removed in 8.0.0.`,$[Ee]):$[Ee].hasAttribute(`cdk-focus-region-${W}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${W}', use 'cdkFocusRegion${W}' instead. The deprecated attribute will be removed in 8.0.0.`,$[Ee]);return"start"==W?$.length?$[0]:this._getFirstTabbableElement(this._element):$.length?$[$.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(W){const $=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if($){if($.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",$),!this._checker.isFocusable($)){const Ee=this._getFirstTabbableElement($);return null==Ee||Ee.focus(W),!!Ee}return $.focus(W),!0}return this.focusFirstTabbableElement(W)}focusFirstTabbableElement(W){const $=this._getRegionBoundary("start");return $&&$.focus(W),!!$}focusLastTabbableElement(W){const $=this._getRegionBoundary("end");return $&&$.focus(W),!!$}hasAttached(){return this._hasAttached}_getFirstTabbableElement(W){if(this._checker.isFocusable(W)&&this._checker.isTabbable(W))return W;let $=W.children||W.childNodes;for(let Ee=0;Ee<$.length;Ee++){let Ge=$[Ee].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement($[Ee]):null;if(Ge)return Ge}return null}_getLastTabbableElement(W){if(this._checker.isFocusable(W)&&this._checker.isTabbable(W))return W;let $=W.children||W.childNodes;for(let Ee=$.length-1;Ee>=0;Ee--){let Ge=$[Ee].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement($[Ee]):null;if(Ge)return Ge}return null}_createAnchor(){const W=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,W),W.classList.add("cdk-visually-hidden"),W.classList.add("cdk-focus-trap-anchor"),W.setAttribute("aria-hidden","true"),W}_toggleAnchorTabIndex(W,$){W?$.setAttribute("tabindex","0"):$.removeAttribute("tabindex")}toggleAnchors(W){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(W,this._startAnchor),this._toggleAnchorTabIndex(W,this._endAnchor))}_executeOnStable(W){this._ngZone.isStable?W():this._ngZone.onStable.pipe((0,St.q)(1)).subscribe(W)}}let at=(()=>{class J{constructor($,Ee,Ge){this._checker=$,this._ngZone=Ee,this._document=Ge}create($,Ee=!1){return new en($,this._checker,this._ngZone,this._document,Ee)}}return J.\u0275fac=function($){return new($||J)(I.LFG(pn),I.LFG(I.R0b),I.LFG(x.K0))},J.\u0275prov=I.Yz7({factory:function(){return new J(I.LFG(pn),I.LFG(I.R0b),I.LFG(x.K0))},token:J,providedIn:"root"}),J})();function Ui(J){return 0===J.offsetX&&0===J.offsetY}function Kn(J){const W=J.touches&&J.touches[0]||J.changedTouches&&J.changedTouches[0];return!(!W||-1!==W.identifier||null!=W.radiusX&&1!==W.radiusX||null!=W.radiusY&&1!==W.radiusY)}"undefined"!=typeof Element&&Element;const vt=new I.OlP("cdk-input-modality-detector-options"),Wt={ignoreKeys:[_.zL,_.jx,_.b2,_.MW,_.JU]},ke=(0,Mn.i$)({passive:!0,capture:!0});let gt=(()=>{class J{constructor($,Ee,Ge,mt){this._platform=$,this._mostRecentTarget=null,this._modality=new Xe.X(null),this._lastTouchMs=0,this._onKeydown=nn=>{var Qe,It;(null===(It=null===(Qe=this._options)||void 0===Qe?void 0:Qe.ignoreKeys)||void 0===It?void 0:It.some(Bt=>Bt===nn.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Mn.sA)(nn))},this._onMousedown=nn=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ui(nn)?"keyboard":"mouse"),this._mostRecentTarget=(0,Mn.sA)(nn))},this._onTouchstart=nn=>{Kn(nn)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Mn.sA)(nn))},this._options=Object.assign(Object.assign({},Wt),mt),this.modalityDetected=this._modality.pipe(W=>W.lift(new Oe(1))),this.modalityChanged=this.modalityDetected.pipe((0,kt.x)()),$.isBrowser&&Ee.runOutsideAngular(()=>{Ge.addEventListener("keydown",this._onKeydown,ke),Ge.addEventListener("mousedown",this._onMousedown,ke),Ge.addEventListener("touchstart",this._onTouchstart,ke)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,ke),document.removeEventListener("mousedown",this._onMousedown,ke),document.removeEventListener("touchstart",this._onTouchstart,ke))}}return J.\u0275fac=function($){return new($||J)(I.LFG(Mn.t4),I.LFG(I.R0b),I.LFG(x.K0),I.LFG(vt,8))},J.\u0275prov=I.Yz7({factory:function(){return new J(I.LFG(Mn.t4),I.LFG(I.R0b),I.LFG(x.K0),I.LFG(vt,8))},token:J,providedIn:"root"}),J})();const Ce=new I.OlP("cdk-focus-monitor-default-options"),me=(0,Mn.i$)({passive:!0,capture:!0});let oe=(()=>{class J{constructor($,Ee,Ge,mt,nn){this._ngZone=$,this._platform=Ee,this._inputModalityDetector=Ge,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Se.xQ,this._rootNodeFocusAndBlurListener=Qe=>{const It=(0,Mn.sA)(Qe),Bt="focus"===Qe.type?this._onFocus:this._onBlur;for(let Sn=It;Sn;Sn=Sn.parentElement)Bt.call(this,Qe,Sn)},this._document=mt,this._detectionMode=(null==nn?void 0:nn.detectionMode)||0}monitor($,Ee=!1){const Ge=(0,Ft.fI)($);if(!this._platform.isBrowser||1!==Ge.nodeType)return(0,Ie.of)(null);const mt=(0,Mn.kV)(Ge)||this._getDocument(),nn=this._elementInfo.get(Ge);if(nn)return Ee&&(nn.checkChildren=!0),nn.subject;const Qe={checkChildren:Ee,subject:new Se.xQ,rootNode:mt};return this._elementInfo.set(Ge,Qe),this._registerGlobalListeners(Qe),Qe.subject}stopMonitoring($){const Ee=(0,Ft.fI)($),Ge=this._elementInfo.get(Ee);Ge&&(Ge.subject.complete(),this._setClasses(Ee),this._elementInfo.delete(Ee),this._removeGlobalListeners(Ge))}focusVia($,Ee,Ge){const mt=(0,Ft.fI)($);mt===this._getDocument().activeElement?this._getClosestElementsInfo(mt).forEach(([Qe,It])=>this._originChanged(Qe,Ee,It)):(this._setOrigin(Ee),"function"==typeof mt.focus&&mt.focus(Ge))}ngOnDestroy(){this._elementInfo.forEach(($,Ee)=>this.stopMonitoring(Ee))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass($,Ee,Ge){Ge?$.classList.add(Ee):$.classList.remove(Ee)}_getFocusOrigin($){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch($)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch($){return 1===this._detectionMode||!!(null==$?void 0:$.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses($,Ee){this._toggleClass($,"cdk-focused",!!Ee),this._toggleClass($,"cdk-touch-focused","touch"===Ee),this._toggleClass($,"cdk-keyboard-focused","keyboard"===Ee),this._toggleClass($,"cdk-mouse-focused","mouse"===Ee),this._toggleClass($,"cdk-program-focused","program"===Ee)}_setOrigin($,Ee=!1){this._ngZone.runOutsideAngular(()=>{this._origin=$,this._originFromTouchInteraction="touch"===$&&Ee,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus($,Ee){const Ge=this._elementInfo.get(Ee),mt=(0,Mn.sA)($);!Ge||!Ge.checkChildren&&Ee!==mt||this._originChanged(Ee,this._getFocusOrigin(mt),Ge)}_onBlur($,Ee){const Ge=this._elementInfo.get(Ee);!Ge||Ge.checkChildren&&$.relatedTarget instanceof Node&&Ee.contains($.relatedTarget)||(this._setClasses(Ee),this._emitOrigin(Ge.subject,null))}_emitOrigin($,Ee){this._ngZone.run(()=>$.next(Ee))}_registerGlobalListeners($){if(!this._platform.isBrowser)return;const Ee=$.rootNode,Ge=this._rootNodeFocusListenerCount.get(Ee)||0;Ge||this._ngZone.runOutsideAngular(()=>{Ee.addEventListener("focus",this._rootNodeFocusAndBlurListener,me),Ee.addEventListener("blur",this._rootNodeFocusAndBlurListener,me)}),this._rootNodeFocusListenerCount.set(Ee,Ge+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Kt.R)(this._stopInputModalityDetector)).subscribe(mt=>{this._setOrigin(mt,!0)}))}_removeGlobalListeners($){const Ee=$.rootNode;if(this._rootNodeFocusListenerCount.has(Ee)){const Ge=this._rootNodeFocusListenerCount.get(Ee);Ge>1?this._rootNodeFocusListenerCount.set(Ee,Ge-1):(Ee.removeEventListener("focus",this._rootNodeFocusAndBlurListener,me),Ee.removeEventListener("blur",this._rootNodeFocusAndBlurListener,me),this._rootNodeFocusListenerCount.delete(Ee))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged($,Ee,Ge){this._setClasses($,Ee),this._emitOrigin(Ge.subject,Ee),this._lastFocusOrigin=Ee}_getClosestElementsInfo($){const Ee=[];return this._elementInfo.forEach((Ge,mt)=>{(mt===$||Ge.checkChildren&&mt.contains($))&&Ee.push([mt,Ge])}),Ee}}return J.\u0275fac=function($){return new($||J)(I.LFG(I.R0b),I.LFG(Mn.t4),I.LFG(gt),I.LFG(x.K0,8),I.LFG(Ce,8))},J.\u0275prov=I.Yz7({factory:function(){return new J(I.LFG(I.R0b),I.LFG(Mn.t4),I.LFG(gt),I.LFG(x.K0,8),I.LFG(Ce,8))},token:J,providedIn:"root"}),J})();const N="cdk-high-contrast-black-on-white",Q="cdk-high-contrast-white-on-black",z="cdk-high-contrast-active";let O=(()=>{class J{constructor($,Ee){this._platform=$,this._document=Ee}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const $=this._document.createElement("div");$.style.backgroundColor="rgb(1,2,3)",$.style.position="absolute",this._document.body.appendChild($);const Ee=this._document.defaultView||window,Ge=Ee&&Ee.getComputedStyle?Ee.getComputedStyle($):null,mt=(Ge&&Ge.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild($),mt){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const $=this._document.body.classList;$.remove(z),$.remove(N),$.remove(Q),this._hasCheckedHighContrastMode=!0;const Ee=this.getHighContrastMode();1===Ee?($.add(z),$.add(N)):2===Ee&&($.add(z),$.add(Q))}}}return J.\u0275fac=function($){return new($||J)(I.LFG(Mn.t4),I.LFG(x.K0))},J.\u0275prov=I.Yz7({factory:function(){return new J(I.LFG(Mn.t4),I.LFG(x.K0))},token:J,providedIn:"root"}),J})()},946:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{vT:()=>_,Is:()=>Xe});var x=ne(7716),I=ne(8583);const Se=new x.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,x.f3M)(I.K0)}});let Xe=(()=>{class ve{constructor(Oe){if(this.value="ltr",this.change=new x.vpe,Oe){const st=Oe.documentElement?Oe.documentElement.dir:null,Pt=(Oe.body?Oe.body.dir:null)||st;this.value="ltr"===Pt||"rtl"===Pt?Pt:"ltr"}}ngOnDestroy(){this.change.complete()}}return ve.\u0275fac=function(Oe){return new(Oe||ve)(x.LFG(Se,8))},ve.\u0275prov=x.Yz7({factory:function(){return new ve(x.LFG(Se,8))},token:ve,providedIn:"root"}),ve})(),_=(()=>{class ve{}return ve.\u0275fac=function(Oe){return new(Oe||ve)},ve.\u0275mod=x.oAB({type:ve}),ve.\u0275inj=x.cJS({}),ve})()},8345:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{P3:()=>_,Ov:()=>Oe,eX:()=>xe,k:()=>Pt,Z9:()=>Ie});var x=ne(5639),I=ne(5917),Se=ne(9765),c=ne(7716);function Ie(Qt){return Qt&&"function"==typeof Qt.connect}class _ extends class{}{constructor(Dt){super(),this._data=Dt}connect(){return(0,x.b)(this._data)?this._data:(0,I.of)(this._data)}disconnect(){}}class xe{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(Dt,St,kt,Kt,Ft){Dt.forEachOperation((Mn,Jt,qt)=>{let dn,Hn;null==Mn.previousIndex?(dn=this._insertView(()=>kt(Mn,Jt,qt),qt,St,Kt(Mn)),Hn=dn?1:0):null==qt?(this._detachAndCacheView(Jt,St),Hn=3):(dn=this._moveView(Jt,qt,St,Kt(Mn)),Hn=2),Ft&&Ft({context:null==dn?void 0:dn.context,operation:Hn,record:Mn})})}detach(){for(const Dt of this._viewCache)Dt.destroy();this._viewCache=[]}_insertView(Dt,St,kt,Kt){const Ft=this._insertViewFromCache(St,kt);if(Ft)return void(Ft.context.$implicit=Kt);const Mn=Dt();return kt.createEmbeddedView(Mn.templateRef,Mn.context,Mn.index)}_detachAndCacheView(Dt,St){const kt=St.detach(Dt);this._maybeCacheView(kt,St)}_moveView(Dt,St,kt,Kt){const Ft=kt.get(Dt);return kt.move(Ft,St),Ft.context.$implicit=Kt,Ft}_maybeCacheView(Dt,St){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(Dt);else{const kt=St.indexOf(Dt);-1===kt?Dt.destroy():St.remove(kt)}}_insertViewFromCache(Dt,St){const kt=this._viewCache.pop();return kt&&St.insert(kt,Dt),kt||null}}class Oe{constructor(Dt=!1,St,kt=!0){this._multiple=Dt,this._emitChanges=kt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Se.xQ,St&&St.length&&(Dt?St.forEach(Kt=>this._markSelected(Kt)):this._markSelected(St[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...Dt){this._verifyValueAssignment(Dt),Dt.forEach(St=>this._markSelected(St)),this._emitChangeEvent()}deselect(...Dt){this._verifyValueAssignment(Dt),Dt.forEach(St=>this._unmarkSelected(St)),this._emitChangeEvent()}toggle(Dt){this.isSelected(Dt)?this.deselect(Dt):this.select(Dt)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(Dt){return this._selection.has(Dt)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(Dt){this._multiple&&this.selected&&this._selected.sort(Dt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(Dt){this.isSelected(Dt)||(this._multiple||this._unmarkAll(),this._selection.add(Dt),this._emitChanges&&this._selectedToEmit.push(Dt))}_unmarkSelected(Dt){this.isSelected(Dt)&&(this._selection.delete(Dt),this._emitChanges&&this._deselectedToEmit.push(Dt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(Dt=>this._unmarkSelected(Dt))}_verifyValueAssignment(Dt){}}const Pt=new c.OlP("_ViewRepeater")},6461:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{A:()=>an,zL:()=>ve,jx:()=>_,JH:()=>Mn,uR:()=>Dt,K5:()=>Xe,hY:()=>Ke,Sd:()=>St,oh:()=>kt,b2:()=>pi,MW:()=>Zn,aO:()=>xi,SV:()=>Ft,JU:()=>Ie,L_:()=>st,Mf:()=>Se,LH:()=>Kt,Z:()=>Xt,xE:()=>Ai,Vb:()=>ji});const Se=9,Xe=13,Ie=16,_=17,ve=18,Ke=27,st=32,Dt=35,St=36,kt=37,Kt=38,Ft=39,Mn=40,Ai=48,xi=57,an=65,Xt=90,Zn=91,pi=224;function ji(Vi,..._i){return _i.length?_i.some(zr=>Vi[zr]):Vi.altKey||Vi.shiftKey||Vi.ctrlKey||Vi.metaKey}},521:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{t4:()=>c,ud:()=>Xe,sA:()=>Mn,ht:()=>Ft,kV:()=>Kt,_i:()=>Dt,i$:()=>Ke,Mq:()=>Qt});var x=ne(7716),I=ne(8583);let Se;try{Se="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Jt){Se=!1}let xe,st,Pt,St,c=(()=>{class Jt{constructor(dn){this._platformId=dn,this.isBrowser=this._platformId?(0,I.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Se)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Jt.\u0275fac=function(dn){return new(dn||Jt)(x.LFG(x.Lbi))},Jt.\u0275prov=x.Yz7({factory:function(){return new Jt(x.LFG(x.Lbi))},token:Jt,providedIn:"root"}),Jt})(),Xe=(()=>{class Jt{}return Jt.\u0275fac=function(dn){return new(dn||Jt)},Jt.\u0275mod=x.oAB({type:Jt}),Jt.\u0275inj=x.cJS({}),Jt})();function Ke(Jt){return function(){if(null==xe&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xe=!0}))}finally{xe=xe||!1}return xe}()?Jt:!!Jt.capture}function Qt(){if(null==Pt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Pt=!1,Pt;if("scrollBehavior"in document.documentElement.style)Pt=!0;else{const Jt=Element.prototype.scrollTo;Pt=!!Jt&&!/\{\s*\[native code\]\s*\}/.test(Jt.toString())}}return Pt}function Dt(){if("object"!=typeof document||!document)return 0;if(null==st){const Jt=document.createElement("div"),qt=Jt.style;Jt.dir="rtl",qt.width="1px",qt.overflow="auto",qt.visibility="hidden",qt.pointerEvents="none",qt.position="absolute";const dn=document.createElement("div"),Hn=dn.style;Hn.width="2px",Hn.height="1px",Jt.appendChild(dn),document.body.appendChild(Jt),st=0,0===Jt.scrollLeft&&(Jt.scrollLeft=1,st=0===Jt.scrollLeft?1:2),Jt.parentNode.removeChild(Jt)}return st}function Kt(Jt){if(function(){if(null==St){const Jt="undefined"!=typeof document?document.head:null;St=!(!Jt||!Jt.createShadowRoot&&!Jt.attachShadow)}return St}()){const qt=Jt.getRootNode?Jt.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&qt instanceof ShadowRoot)return qt}return null}function Ft(){let Jt="undefined"!=typeof document&&document?document.activeElement:null;for(;Jt&&Jt.shadowRoot;){const qt=Jt.shadowRoot.activeElement;if(qt===Jt)break;Jt=qt}return Jt}function Mn(Jt){return Jt.composedPath?Jt.composedPath()[0]:Jt.target}},1306:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{PQ:()=>jt,ZD:()=>K,mF:()=>gt,Cl:()=>N,rL:()=>ri});var x=ne(9490),I=ne(7716),Se=ne(6465),Xe=ne(6102);new class extends Xe.v{flush(z){this.active=!0,this.scheduled=void 0;const{actions:O}=this;let le,J=-1,W=O.length;z=z||O.shift();do{if(le=z.execute(z.state,z.delay))break}while(++J<W&&(z=O.shift()));if(this.active=!1,le){for(;++J<W&&(z=O.shift());)z.unsubscribe();throw le}}}(class extends Se.o{constructor(z,O){super(z,O),this.scheduler=z,this.work=O}requestAsyncId(z,O,le=0){return null!==le&&le>0?super.requestAsyncId(z,O,le):(z.actions.push(this),z.scheduled||(z.scheduled=requestAnimationFrame(()=>z.flush(null))))}recycleAsyncId(z,O,le=0){if(null!==le&&le>0||null===le&&this.delay>0)return super.recycleAsyncId(z,O,le);0===z.actions.length&&(cancelAnimationFrame(O),z.scheduled=void 0)}});let xe=1;const Oe=Promise.resolve(),Ke={};function st(Q){return Q in Ke&&(delete Ke[Q],!0)}const Pt={setImmediate(Q){const z=xe++;return Ke[z]=!0,Oe.then(()=>st(z)&&Q()),z},clearImmediate(Q){st(Q)}};new class extends Xe.v{flush(z){this.active=!0,this.scheduled=void 0;const{actions:O}=this;let le,J=-1,W=O.length;z=z||O.shift();do{if(le=z.execute(z.state,z.delay))break}while(++J<W&&(z=O.shift()));if(this.active=!1,le){for(;++J<W&&(z=O.shift());)z.unsubscribe();throw le}}}(class extends Se.o{constructor(z,O){super(z,O),this.scheduler=z,this.work=O}requestAsyncId(z,O,le=0){return null!==le&&le>0?super.requestAsyncId(z,O,le):(z.actions.push(this),z.scheduled||(z.scheduled=Pt.setImmediate(z.flush.bind(z,null))))}recycleAsyncId(z,O,le=0){if(null!==le&&le>0||null===le&&this.delay>0)return super.recycleAsyncId(z,O,le);0===z.actions.length&&(Pt.clearImmediate(O),z.scheduled=void 0)}});var Ft=ne(9765),Mn=ne(5917),Jt=ne(7574),qt=ne(2759),Ai=(ne(5319),ne(5639),ne(3637)),Ri=ne(5345);class ni{constructor(z){this.durationSelector=z}call(z,O){return O.subscribe(new zn(z,this.durationSelector))}}class zn extends Ri.Ds{constructor(z,O){super(z),this.durationSelector=O,this.hasValue=!1}_next(z){if(this.value=z,this.hasValue=!0,!this.throttled){let O;try{const{durationSelector:J}=this;O=J(z)}catch(J){return this.destination.error(J)}const le=(0,Ri.ft)(O,new Ri.IY(this));!le||le.closed?this.clearThrottle():this.add(this.throttled=le)}}clearThrottle(){const{value:z,hasValue:O,throttled:le}=this;le&&(this.remove(le),this.throttled=void 0,le.unsubscribe()),O&&(this.value=void 0,this.hasValue=!1,this.destination.next(z))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Ln=ne(9796);function ii(Q){return!(0,Ln.k)(Q)&&Q-parseFloat(Q)+1>=0}var On=ne(4869);function xi(Q){const{index:z,period:O,subscriber:le}=Q;if(le.next(z),!le.closed){if(-1===O)return le.complete();Q.index=z+1,this.schedule(Q,O)}}function fi(Q,z=Ai.P){return function(Q){return function(O){return O.lift(new ni(Q))}}(()=>function(Q=0,z,O){let le=-1;return ii(z)?le=Number(z)<1?1:Number(z):(0,On.K)(z)&&(O=z),(0,On.K)(O)||(O=Ai.P),new Jt.y(J=>{const W=ii(Q)?Q:+Q-O.now();return O.schedule(xi,W,{index:0,period:le,subscriber:J})})}(Q,z))}ne(7393),new class extends Xe.v{}(class extends Se.o{constructor(z,O){super(z,O),this.scheduler=z,this.work=O}schedule(z,O=0){return O>0?super.schedule(z,O):(this.delay=O,this.state=z,this.scheduler.flush(this),this)}execute(z,O){return O>0||this.closed?super.execute(z,O):this._execute(z,O)}requestAsyncId(z,O,le=0){return null!==le&&le>0||null===le&&this.delay>0?super.requestAsyncId(z,O,le):z.flush(this)}});var An=ne(9193),Bn=ne(205);class Ei{constructor(z,O,le){this.kind=z,this.value=O,this.error=le,this.hasValue="N"===z}observe(z){switch(this.kind){case"N":return z.next&&z.next(this.value);case"E":return z.error&&z.error(this.error);case"C":return z.complete&&z.complete()}}do(z,O,le){switch(this.kind){case"N":return z&&z(this.value);case"E":return O&&O(this.error);case"C":return le&&le()}}accept(z,O,le){return z&&"function"==typeof z.next?this.observe(z):this.do(z,O,le)}toObservable(){switch(this.kind){case"N":return(0,Mn.of)(this.value);case"E":return(0,Bn._)(this.error);case"C":return(0,An.c)()}throw new Error("unexpected notification kind value")}static createNext(z){return void 0!==z?new Ei("N",z):Ei.undefinedValueNotification}static createError(z){return new Ei("E",void 0,z)}static createComplete(){return Ei.completeNotification}}Ei.completeNotification=new Ei("C"),Ei.undefinedValueNotification=new Ei("N",void 0),ne(7971),ne(8858),ne(7519);var xn=ne(5435),sn=ne(6782),Xn=(ne(9761),ne(3190),ne(521)),Xt=ne(8583),Zn=ne(946);ne(8345);let gt=(()=>{class Q{constructor(O,le,J){this._ngZone=O,this._platform=le,this._scrolled=new Ft.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=J}register(O){this.scrollContainers.has(O)||this.scrollContainers.set(O,O.elementScrolled().subscribe(()=>this._scrolled.next(O)))}deregister(O){const le=this.scrollContainers.get(O);le&&(le.unsubscribe(),this.scrollContainers.delete(O))}scrolled(O=20){return this._platform.isBrowser?new Jt.y(le=>{this._globalSubscription||this._addGlobalListener();const J=O>0?this._scrolled.pipe(fi(O)).subscribe(le):this._scrolled.subscribe(le);return this._scrolledCount++,()=>{J.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Mn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((O,le)=>this.deregister(le)),this._scrolled.complete()}ancestorScrolled(O,le){const J=this.getAncestorScrollContainers(O);return this.scrolled(le).pipe((0,xn.h)(W=>!W||J.indexOf(W)>-1))}getAncestorScrollContainers(O){const le=[];return this.scrollContainers.forEach((J,W)=>{this._scrollableContainsElement(W,O)&&le.push(W)}),le}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(O,le){let J=(0,x.fI)(le),W=O.getElementRef().nativeElement;do{if(J==W)return!0}while(J=J.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const O=this._getWindow();return(0,qt.R)(O.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Q.\u0275fac=function(O){return new(O||Q)(I.LFG(I.R0b),I.LFG(Xn.t4),I.LFG(Xt.K0,8))},Q.\u0275prov=I.Yz7({factory:function(){return new Q(I.LFG(I.R0b),I.LFG(Xn.t4),I.LFG(Xt.K0,8))},token:Q,providedIn:"root"}),Q})(),jt=(()=>{class Q{constructor(O,le,J,W){this.elementRef=O,this.scrollDispatcher=le,this.ngZone=J,this.dir=W,this._destroyed=new Ft.xQ,this._elementScrolled=new Jt.y($=>this.ngZone.runOutsideAngular(()=>(0,qt.R)(this.elementRef.nativeElement,"scroll").pipe((0,sn.R)(this._destroyed)).subscribe($)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(O){const le=this.elementRef.nativeElement,J=this.dir&&"rtl"==this.dir.value;null==O.left&&(O.left=J?O.end:O.start),null==O.right&&(O.right=J?O.start:O.end),null!=O.bottom&&(O.top=le.scrollHeight-le.clientHeight-O.bottom),J&&0!=(0,Xn._i)()?(null!=O.left&&(O.right=le.scrollWidth-le.clientWidth-O.left),2==(0,Xn._i)()?O.left=O.right:1==(0,Xn._i)()&&(O.left=O.right?-O.right:O.right)):null!=O.right&&(O.left=le.scrollWidth-le.clientWidth-O.right),this._applyScrollToOptions(O)}_applyScrollToOptions(O){const le=this.elementRef.nativeElement;(0,Xn.Mq)()?le.scrollTo(O):(null!=O.top&&(le.scrollTop=O.top),null!=O.left&&(le.scrollLeft=O.left))}measureScrollOffset(O){const le="left",J="right",W=this.elementRef.nativeElement;if("top"==O)return W.scrollTop;if("bottom"==O)return W.scrollHeight-W.clientHeight-W.scrollTop;const $=this.dir&&"rtl"==this.dir.value;return"start"==O?O=$?J:le:"end"==O&&(O=$?le:J),$&&2==(0,Xn._i)()?O==le?W.scrollWidth-W.clientWidth-W.scrollLeft:W.scrollLeft:$&&1==(0,Xn._i)()?O==le?W.scrollLeft+W.scrollWidth-W.clientWidth:-W.scrollLeft:O==le?W.scrollLeft:W.scrollWidth-W.clientWidth-W.scrollLeft}}return Q.\u0275fac=function(O){return new(O||Q)(I.Y36(I.SBq),I.Y36(gt),I.Y36(I.R0b),I.Y36(Zn.Is,8))},Q.\u0275dir=I.lG2({type:Q,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Q})(),ri=(()=>{class Q{constructor(O,le,J){this._platform=O,this._change=new Ft.xQ,this._changeListener=W=>{this._change.next(W)},this._document=J,le.runOutsideAngular(()=>{if(O.isBrowser){const W=this._getWindow();W.addEventListener("resize",this._changeListener),W.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const O=this._getWindow();O.removeEventListener("resize",this._changeListener),O.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const O={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),O}getViewportRect(){const O=this.getViewportScrollPosition(),{width:le,height:J}=this.getViewportSize();return{top:O.top,left:O.left,bottom:O.top+J,right:O.left+le,height:J,width:le}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const O=this._document,le=this._getWindow(),J=O.documentElement,W=J.getBoundingClientRect();return{top:-W.top||O.body.scrollTop||le.scrollY||J.scrollTop||0,left:-W.left||O.body.scrollLeft||le.scrollX||J.scrollLeft||0}}change(O=20){return O>0?this._change.pipe(fi(O)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const O=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:O.innerWidth,height:O.innerHeight}:{width:0,height:0}}}return Q.\u0275fac=function(O){return new(O||Q)(I.LFG(Xn.t4),I.LFG(I.R0b),I.LFG(Xt.K0,8))},Q.\u0275prov=I.Yz7({factory:function(){return new Q(I.LFG(Xn.t4),I.LFG(I.R0b),I.LFG(Xt.K0,8))},token:Q,providedIn:"root"}),Q})(),K=(()=>{class Q{}return Q.\u0275fac=function(O){return new(O||Q)},Q.\u0275mod=I.oAB({type:Q}),Q.\u0275inj=I.cJS({}),Q})(),N=(()=>{class Q{}return Q.\u0275fac=function(O){return new(O||Q)},Q.\u0275mod=I.oAB({type:Q}),Q.\u0275inj=I.cJS({imports:[[Zn.vT,Xn.ud,K],Zn.vT,K]}),Q})()},9490:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Eq:()=>Xe,Ig:()=>I,HM:()=>Ie,fI:()=>_,su:()=>Se});var x=ne(7716);function I(xe){return null!=xe&&"false"!=`${xe}`}function Se(xe,Oe=0){return function(xe){return!isNaN(parseFloat(xe))&&!isNaN(Number(xe))}(xe)?Number(xe):Oe}function Xe(xe){return Array.isArray(xe)?xe:[xe]}function Ie(xe){return null==xe?"":"string"==typeof xe?xe:`${xe}px`}function _(xe){return xe instanceof x.SBq?xe.nativeElement:xe}},8583:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{mr:()=>Ft,ez:()=>Is,K0:()=>_,JJ:()=>xo,Do:()=>Jt,V_:()=>Oe,Ye:()=>qt,S$:()=>kt,mk:()=>be,sg:()=>$t,O5:()=>ji,PC:()=>ts,b0:()=>Mn,lw:()=>ve,EM:()=>Nt,JF:()=>Da,NF:()=>Zo,PM:()=>ce,w_:()=>Ie,bD:()=>to,q:()=>Se,Mx:()=>q,HT:()=>Xe});var x=ne(7716);let I=null;function Se(){return I}function Xe(X){I||(I=X)}class Ie{}const _=new x.OlP("DocumentToken");let ve=(()=>{class X{historyGo(ie){throw new Error("Not implemented")}}return X.\u0275fac=function(ie){return new(ie||X)},X.\u0275prov=(0,x.Yz7)({factory:xe,token:X,providedIn:"platform"}),X})();function xe(){return(0,x.LFG)(Ke)}const Oe=new x.OlP("Location Initialized");let Ke=(()=>{class X extends ve{constructor(ie){super(),this._doc=ie,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Se().getBaseHref(this._doc)}onPopState(ie){const Pe=Se().getGlobalEventTarget(this._doc,"window");return Pe.addEventListener("popstate",ie,!1),()=>Pe.removeEventListener("popstate",ie)}onHashChange(ie){const Pe=Se().getGlobalEventTarget(this._doc,"window");return Pe.addEventListener("hashchange",ie,!1),()=>Pe.removeEventListener("hashchange",ie)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(ie){this.location.pathname=ie}pushState(ie,Pe,pt){st()?this._history.pushState(ie,Pe,pt):this.location.hash=pt}replaceState(ie,Pe,pt){st()?this._history.replaceState(ie,Pe,pt):this.location.hash=pt}forward(){this._history.forward()}back(){this._history.back()}historyGo(ie=0){this._history.go(ie)}getState(){return this._history.state}}return X.\u0275fac=function(ie){return new(ie||X)(x.LFG(_))},X.\u0275prov=(0,x.Yz7)({factory:Pt,token:X,providedIn:"platform"}),X})();function st(){return!!window.history.pushState}function Pt(){return new Ke((0,x.LFG)(_))}function Qt(X,De){if(0==X.length)return De;if(0==De.length)return X;let ie=0;return X.endsWith("/")&&ie++,De.startsWith("/")&&ie++,2==ie?X+De.substring(1):1==ie?X+De:X+"/"+De}function Dt(X){const De=X.match(/#|\?|$/),ie=De&&De.index||X.length;return X.slice(0,ie-("/"===X[ie-1]?1:0))+X.slice(ie)}function St(X){return X&&"?"!==X[0]?"?"+X:X}let kt=(()=>{class X{historyGo(ie){throw new Error("Not implemented")}}return X.\u0275fac=function(ie){return new(ie||X)},X.\u0275prov=(0,x.Yz7)({factory:Kt,token:X,providedIn:"root"}),X})();function Kt(X){const De=(0,x.LFG)(_).location;return new Mn((0,x.LFG)(ve),De&&De.origin||"")}const Ft=new x.OlP("appBaseHref");let Mn=(()=>{class X extends kt{constructor(ie,Pe){if(super(),this._platformLocation=ie,this._removeListenerFns=[],null==Pe&&(Pe=this._platformLocation.getBaseHrefFromDOM()),null==Pe)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Pe}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ie){this._removeListenerFns.push(this._platformLocation.onPopState(ie),this._platformLocation.onHashChange(ie))}getBaseHref(){return this._baseHref}prepareExternalUrl(ie){return Qt(this._baseHref,ie)}path(ie=!1){const Pe=this._platformLocation.pathname+St(this._platformLocation.search),pt=this._platformLocation.hash;return pt&&ie?`${Pe}${pt}`:Pe}pushState(ie,Pe,pt,cn){const Rn=this.prepareExternalUrl(pt+St(cn));this._platformLocation.pushState(ie,Pe,Rn)}replaceState(ie,Pe,pt,cn){const Rn=this.prepareExternalUrl(pt+St(cn));this._platformLocation.replaceState(ie,Pe,Rn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ie=0){var Pe,pt;null===(pt=(Pe=this._platformLocation).historyGo)||void 0===pt||pt.call(Pe,ie)}}return X.\u0275fac=function(ie){return new(ie||X)(x.LFG(ve),x.LFG(Ft,8))},X.\u0275prov=x.Yz7({token:X,factory:X.\u0275fac}),X})(),Jt=(()=>{class X extends kt{constructor(ie,Pe){super(),this._platformLocation=ie,this._baseHref="",this._removeListenerFns=[],null!=Pe&&(this._baseHref=Pe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ie){this._removeListenerFns.push(this._platformLocation.onPopState(ie),this._platformLocation.onHashChange(ie))}getBaseHref(){return this._baseHref}path(ie=!1){let Pe=this._platformLocation.hash;return null==Pe&&(Pe="#"),Pe.length>0?Pe.substring(1):Pe}prepareExternalUrl(ie){const Pe=Qt(this._baseHref,ie);return Pe.length>0?"#"+Pe:Pe}pushState(ie,Pe,pt,cn){let Rn=this.prepareExternalUrl(pt+St(cn));0==Rn.length&&(Rn=this._platformLocation.pathname),this._platformLocation.pushState(ie,Pe,Rn)}replaceState(ie,Pe,pt,cn){let Rn=this.prepareExternalUrl(pt+St(cn));0==Rn.length&&(Rn=this._platformLocation.pathname),this._platformLocation.replaceState(ie,Pe,Rn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ie=0){var Pe,pt;null===(pt=(Pe=this._platformLocation).historyGo)||void 0===pt||pt.call(Pe,ie)}}return X.\u0275fac=function(ie){return new(ie||X)(x.LFG(ve),x.LFG(Ft,8))},X.\u0275prov=x.Yz7({token:X,factory:X.\u0275fac}),X})(),qt=(()=>{class X{constructor(ie,Pe){this._subject=new x.vpe,this._urlChangeListeners=[],this._platformStrategy=ie;const pt=this._platformStrategy.getBaseHref();this._platformLocation=Pe,this._baseHref=Dt(Ai(pt)),this._platformStrategy.onPopState(cn=>{this._subject.emit({url:this.path(!0),pop:!0,state:cn.state,type:cn.type})})}path(ie=!1){return this.normalize(this._platformStrategy.path(ie))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(ie,Pe=""){return this.path()==this.normalize(ie+St(Pe))}normalize(ie){return X.stripTrailingSlash(function(X,De){return X&&De.startsWith(X)?De.substring(X.length):De}(this._baseHref,Ai(ie)))}prepareExternalUrl(ie){return ie&&"/"!==ie[0]&&(ie="/"+ie),this._platformStrategy.prepareExternalUrl(ie)}go(ie,Pe="",pt=null){this._platformStrategy.pushState(pt,"",ie,Pe),this._notifyUrlChangeListeners(this.prepareExternalUrl(ie+St(Pe)),pt)}replaceState(ie,Pe="",pt=null){this._platformStrategy.replaceState(pt,"",ie,Pe),this._notifyUrlChangeListeners(this.prepareExternalUrl(ie+St(Pe)),pt)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(ie=0){var Pe,pt;null===(pt=(Pe=this._platformStrategy).historyGo)||void 0===pt||pt.call(Pe,ie)}onUrlChange(ie){this._urlChangeListeners.push(ie),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Pe=>{this._notifyUrlChangeListeners(Pe.url,Pe.state)}))}_notifyUrlChangeListeners(ie="",Pe){this._urlChangeListeners.forEach(pt=>pt(ie,Pe))}subscribe(ie,Pe,pt){return this._subject.subscribe({next:ie,error:Pe,complete:pt})}}return X.\u0275fac=function(ie){return new(ie||X)(x.LFG(kt),x.LFG(ve))},X.normalizeQueryParams=St,X.joinWithSlash=Qt,X.stripTrailingSlash=Dt,X.\u0275prov=(0,x.Yz7)({factory:dn,token:X,providedIn:"root"}),X})();function dn(){return new qt((0,x.LFG)(kt),(0,x.LFG)(ve))}function Ai(X){return X.replace(/\/index.html$/,"")}var ci=(()=>((ci=ci||{})[ci.Decimal=0]="Decimal",ci[ci.Percent=1]="Percent",ci[ci.Currency=2]="Currency",ci[ci.Scientific=3]="Scientific",ci))(),ni=(()=>((ni=ni||{})[ni.Zero=0]="Zero",ni[ni.One=1]="One",ni[ni.Two=2]="Two",ni[ni.Few=3]="Few",ni[ni.Many=4]="Many",ni[ni.Other=5]="Other",ni))(),On=(()=>((On=On||{})[On.Decimal=0]="Decimal",On[On.Group=1]="Group",On[On.List=2]="List",On[On.PercentSign=3]="PercentSign",On[On.PlusSign=4]="PlusSign",On[On.MinusSign=5]="MinusSign",On[On.Exponential=6]="Exponential",On[On.SuperscriptingExponent=7]="SuperscriptingExponent",On[On.PerMille=8]="PerMille",On[On.Infinity=9]="Infinity",On[On.NaN=10]="NaN",On[On.TimeSeparator=11]="TimeSeparator",On[On.CurrencyDecimal=12]="CurrencyDecimal",On[On.CurrencyGroup=13]="CurrencyGroup",On))();function An(X,De){const ie=(0,x.cg1)(X),Pe=ie[x.wAp.NumberSymbols][De];if(void 0===Pe){if(De===On.CurrencyDecimal)return ie[x.wAp.NumberSymbols][On.Decimal];if(De===On.CurrencyGroup)return ie[x.wAp.NumberSymbols][On.Group]}return Pe}const Mi=x.kL8,$=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function In(X){const De=parseInt(X);if(isNaN(De))throw new Error("Invalid integer literal when parsing "+X);return De}class dt{}let ae=(()=>{class X extends dt{constructor(ie){super(),this.locale=ie}getPluralCategory(ie,Pe){switch(Mi(Pe||this.locale)(ie)){case ni.Zero:return"zero";case ni.One:return"one";case ni.Two:return"two";case ni.Few:return"few";case ni.Many:return"many";default:return"other"}}}return X.\u0275fac=function(ie){return new(ie||X)(x.LFG(x.soG))},X.\u0275prov=x.Yz7({token:X,factory:X.\u0275fac}),X})();function q(X,De){De=encodeURIComponent(De);for(const ie of X.split(";")){const Pe=ie.indexOf("="),[pt,cn]=-1==Pe?[ie,""]:[ie.slice(0,Pe),ie.slice(Pe+1)];if(pt.trim()===De)return decodeURIComponent(cn)}return null}let be=(()=>{class X{constructor(ie,Pe,pt,cn){this._iterableDiffers=ie,this._keyValueDiffers=Pe,this._ngEl=pt,this._renderer=cn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(ie){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof ie?ie.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(ie){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof ie?ie.split(/\s+/):ie,this._rawClass&&((0,x.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const ie=this._iterableDiffer.diff(this._rawClass);ie&&this._applyIterableChanges(ie)}else if(this._keyValueDiffer){const ie=this._keyValueDiffer.diff(this._rawClass);ie&&this._applyKeyValueChanges(ie)}}_applyKeyValueChanges(ie){ie.forEachAddedItem(Pe=>this._toggleClass(Pe.key,Pe.currentValue)),ie.forEachChangedItem(Pe=>this._toggleClass(Pe.key,Pe.currentValue)),ie.forEachRemovedItem(Pe=>{Pe.previousValue&&this._toggleClass(Pe.key,!1)})}_applyIterableChanges(ie){ie.forEachAddedItem(Pe=>{if("string"!=typeof Pe.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,x.AaK)(Pe.item)}`);this._toggleClass(Pe.item,!0)}),ie.forEachRemovedItem(Pe=>this._toggleClass(Pe.item,!1))}_applyClasses(ie){ie&&(Array.isArray(ie)||ie instanceof Set?ie.forEach(Pe=>this._toggleClass(Pe,!0)):Object.keys(ie).forEach(Pe=>this._toggleClass(Pe,!!ie[Pe])))}_removeClasses(ie){ie&&(Array.isArray(ie)||ie instanceof Set?ie.forEach(Pe=>this._toggleClass(Pe,!1)):Object.keys(ie).forEach(Pe=>this._toggleClass(Pe,!1)))}_toggleClass(ie,Pe){(ie=ie.trim())&&ie.split(/\s+/g).forEach(pt=>{Pe?this._renderer.addClass(this._ngEl.nativeElement,pt):this._renderer.removeClass(this._ngEl.nativeElement,pt)})}}return X.\u0275fac=function(ie){return new(ie||X)(x.Y36(x.ZZ4),x.Y36(x.aQg),x.Y36(x.SBq),x.Y36(x.Qsj))},X.\u0275dir=x.lG2({type:X,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),X})();class Mt{constructor(De,ie,Pe,pt){this.$implicit=De,this.ngForOf=ie,this.index=Pe,this.count=pt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $t=(()=>{class X{constructor(ie,Pe,pt){this._viewContainer=ie,this._template=Pe,this._differs=pt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ie){this._ngForOf=ie,this._ngForOfDirty=!0}set ngForTrackBy(ie){this._trackByFn=ie}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(ie){ie&&(this._template=ie)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ie=this._ngForOf;if(!this._differ&&ie)try{this._differ=this._differs.find(ie).create(this.ngForTrackBy)}catch(Pe){throw new Error(`Cannot find a differ supporting object '${ie}' of type '${function(X){return X.name||typeof X}(ie)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const ie=this._differ.diff(this._ngForOf);ie&&this._applyChanges(ie)}}_applyChanges(ie){const Pe=[];ie.forEachOperation((pt,cn,Rn)=>{if(null==pt.previousIndex){const Ci=this._viewContainer.createEmbeddedView(this._template,new Mt(null,this._ngForOf,-1,-1),null===Rn?void 0:Rn),qi=new ti(pt,Ci);Pe.push(qi)}else if(null==Rn)this._viewContainer.remove(null===cn?void 0:cn);else if(null!==cn){const Ci=this._viewContainer.get(cn);this._viewContainer.move(Ci,Rn);const qi=new ti(pt,Ci);Pe.push(qi)}});for(let pt=0;pt<Pe.length;pt++)this._perViewChange(Pe[pt].view,Pe[pt].record);for(let pt=0,cn=this._viewContainer.length;pt<cn;pt++){const Rn=this._viewContainer.get(pt);Rn.context.index=pt,Rn.context.count=cn,Rn.context.ngForOf=this._ngForOf}ie.forEachIdentityChange(pt=>{this._viewContainer.get(pt.currentIndex).context.$implicit=pt.item})}_perViewChange(ie,Pe){ie.context.$implicit=Pe.item}static ngTemplateContextGuard(ie,Pe){return!0}}return X.\u0275fac=function(ie){return new(ie||X)(x.Y36(x.s_b),x.Y36(x.Rgc),x.Y36(x.ZZ4))},X.\u0275dir=x.lG2({type:X,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),X})();class ti{constructor(De,ie){this.record=De,this.view=ie}}let ji=(()=>{class X{constructor(ie,Pe){this._viewContainer=ie,this._context=new Vi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Pe}set ngIf(ie){this._context.$implicit=this._context.ngIf=ie,this._updateView()}set ngIfThen(ie){_i("ngIfThen",ie),this._thenTemplateRef=ie,this._thenViewRef=null,this._updateView()}set ngIfElse(ie){_i("ngIfElse",ie),this._elseTemplateRef=ie,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ie,Pe){return!0}}return X.\u0275fac=function(ie){return new(ie||X)(x.Y36(x.s_b),x.Y36(x.Rgc))},X.\u0275dir=x.lG2({type:X,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),X})();class Vi{constructor(){this.$implicit=null,this.ngIf=null}}function _i(X,De){if(De&&!De.createEmbeddedView)throw new Error(`${X} must be a TemplateRef, but received '${(0,x.AaK)(De)}'.`)}let ts=(()=>{class X{constructor(ie,Pe,pt){this._ngEl=ie,this._differs=Pe,this._renderer=pt,this._ngStyle=null,this._differ=null}set ngStyle(ie){this._ngStyle=ie,!this._differ&&ie&&(this._differ=this._differs.find(ie).create())}ngDoCheck(){if(this._differ){const ie=this._differ.diff(this._ngStyle);ie&&this._applyChanges(ie)}}_setStyle(ie,Pe){const[pt,cn]=ie.split(".");null!=(Pe=null!=Pe&&cn?`${Pe}${cn}`:Pe)?this._renderer.setStyle(this._ngEl.nativeElement,pt,Pe):this._renderer.removeStyle(this._ngEl.nativeElement,pt)}_applyChanges(ie){ie.forEachRemovedItem(Pe=>this._setStyle(Pe.key,null)),ie.forEachAddedItem(Pe=>this._setStyle(Pe.key,Pe.currentValue)),ie.forEachChangedItem(Pe=>this._setStyle(Pe.key,Pe.currentValue))}}return X.\u0275fac=function(ie){return new(ie||X)(x.Y36(x.SBq),x.Y36(x.aQg),x.Y36(x.Qsj))},X.\u0275dir=x.lG2({type:X,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),X})();let xo=(()=>{class X{constructor(ie){this._locale=ie}transform(ie,Pe,pt){if(!function(X){return!(null==X||""===X||X!=X)}(ie))return null;pt=pt||this._locale;try{return function(X,De,ie){return function(X,De,ie,Pe,pt,cn,Rn=!1){let Ci="",qi=!1;if(isFinite(X)){let hr=function(X){let Pe,pt,cn,Rn,Ci,De=Math.abs(X)+"",ie=0;for((pt=De.indexOf("."))>-1&&(De=De.replace(".","")),(cn=De.search(/e/i))>0?(pt<0&&(pt=cn),pt+=+De.slice(cn+1),De=De.substring(0,cn)):pt<0&&(pt=De.length),cn=0;"0"===De.charAt(cn);cn++);if(cn===(Ci=De.length))Pe=[0],pt=1;else{for(Ci--;"0"===De.charAt(Ci);)Ci--;for(pt-=cn,Pe=[],Rn=0;cn<=Ci;cn++,Rn++)Pe[Rn]=Number(De.charAt(cn))}return pt>22&&(Pe=Pe.splice(0,21),ie=pt-1,pt=1),{digits:Pe,exponent:ie,integerLen:pt}}(X);Rn&&(hr=function(X){if(0===X.digits[0])return X;const De=X.digits.length-X.integerLen;return X.exponent?X.exponent+=2:(0===De?X.digits.push(0,0):1===De&&X.digits.push(0),X.integerLen+=2),X}(hr));let Cr=De.minInt,Wi=De.minFrac,br=De.maxFrac;if(cn){const ws=cn.match($);if(null===ws)throw new Error(`${cn} is not a valid digit info`);const Oi=ws[1],na=ws[3],Po=ws[5];null!=Oi&&(Cr=In(Oi)),null!=na&&(Wi=In(na)),null!=Po?br=In(Po):null!=na&&Wi>br&&(br=Wi)}!function(X,De,ie){if(De>ie)throw new Error(`The minimum number of digits after fraction (${De}) is higher than the maximum (${ie}).`);let Pe=X.digits,pt=Pe.length-X.integerLen;const cn=Math.min(Math.max(De,pt),ie);let Rn=cn+X.integerLen,Ci=Pe[Rn];if(Rn>0){Pe.splice(Math.max(X.integerLen,Rn));for(let Wi=Rn;Wi<Pe.length;Wi++)Pe[Wi]=0}else{pt=Math.max(0,pt),X.integerLen=1,Pe.length=Math.max(1,Rn=cn+1),Pe[0]=0;for(let Wi=1;Wi<Rn;Wi++)Pe[Wi]=0}if(Ci>=5)if(Rn-1<0){for(let Wi=0;Wi>Rn;Wi--)Pe.unshift(0),X.integerLen++;Pe.unshift(1),X.integerLen++}else Pe[Rn-1]++;for(;pt<Math.max(0,cn);pt++)Pe.push(0);let qi=0!==cn;const hr=De+X.integerLen,Cr=Pe.reduceRight(function(Wi,br,tr,ss){return ss[tr]=(br+=Wi)<10?br:br-10,qi&&(0===ss[tr]&&tr>=hr?ss.pop():qi=!1),br>=10?1:0},0);Cr&&(Pe.unshift(Cr),X.integerLen++)}(hr,Wi,br);let tr=hr.digits,ss=hr.integerLen;const Io=hr.exponent;let os=[];for(qi=tr.every(ws=>!ws);ss<Cr;ss++)tr.unshift(0);for(;ss<0;ss++)tr.unshift(0);ss>0?os=tr.splice(ss,tr.length):(os=tr,tr=[0]);const ao=[];for(tr.length>=De.lgSize&&ao.unshift(tr.splice(-De.lgSize,tr.length).join(""));tr.length>De.gSize;)ao.unshift(tr.splice(-De.gSize,tr.length).join(""));tr.length&&ao.unshift(tr.join("")),Ci=ao.join(An(ie,Pe)),os.length&&(Ci+=An(ie,pt)+os.join("")),Io&&(Ci+=An(ie,On.Exponential)+"+"+Io)}else Ci=An(ie,On.Infinity);return Ci=X<0&&!qi?De.negPre+Ci+De.negSuf:De.posPre+Ci+De.posSuf,Ci}(X,function(X,De="-"){const ie={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Pe=X.split(";"),pt=Pe[0],cn=Pe[1],Rn=-1!==pt.indexOf(".")?pt.split("."):[pt.substring(0,pt.lastIndexOf("0")+1),pt.substring(pt.lastIndexOf("0")+1)],Ci=Rn[0],qi=Rn[1]||"";ie.posPre=Ci.substr(0,Ci.indexOf("#"));for(let Cr=0;Cr<qi.length;Cr++){const Wi=qi.charAt(Cr);"0"===Wi?ie.minFrac=ie.maxFrac=Cr+1:"#"===Wi?ie.maxFrac=Cr+1:ie.posSuf+=Wi}const hr=Ci.split(",");if(ie.gSize=hr[1]?hr[1].length:0,ie.lgSize=hr[2]||hr[1]?(hr[2]||hr[1]).length:0,cn){const Cr=pt.length-ie.posPre.length-ie.posSuf.length,Wi=cn.indexOf("#");ie.negPre=cn.substr(0,Wi).replace(/'/g,""),ie.negSuf=cn.substr(Wi+Cr).replace(/'/g,"")}else ie.negPre=De+ie.posPre,ie.negSuf=ie.posSuf;return ie}(function(X,De){return(0,x.cg1)(X)[x.wAp.NumberFormats][De]}(De,ci.Decimal),An(De,On.MinusSign)),De,On.Group,On.Decimal,ie)}(function(X){if("string"==typeof X&&!isNaN(Number(X)-parseFloat(X)))return Number(X);if("number"!=typeof X)throw new Error(`${X} is not a number`);return X}(ie),pt,Pe)}catch(cn){throw function(X,De){return Error(`InvalidPipeArgument: '${De}' for pipe '${(0,x.AaK)(X)}'`)}(X,cn.message)}}}return X.\u0275fac=function(ie){return new(ie||X)(x.Y36(x.soG,16))},X.\u0275pipe=x.Yjl({name:"number",type:X,pure:!0}),X})();let Is=(()=>{class X{}return X.\u0275fac=function(ie){return new(ie||X)},X.\u0275mod=x.oAB({type:X}),X.\u0275inj=x.cJS({providers:[{provide:dt,useClass:ae}]}),X})();const to="browser";function Zo(X){return X===to}function ce(X){return"server"===X}let Nt=(()=>{class X{}return X.\u0275prov=(0,x.Yz7)({token:X,providedIn:"root",factory:()=>new ai((0,x.LFG)(_),window)}),X})();class ai{constructor(De,ie){this.document=De,this.window=ie,this.offset=()=>[0,0]}setOffset(De){this.offset=Array.isArray(De)?()=>De:De}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(De){this.supportsScrolling()&&this.window.scrollTo(De[0],De[1])}scrollToAnchor(De){if(!this.supportsScrolling())return;const ie=function(X,De){const ie=X.getElementById(De)||X.getElementsByName(De)[0];if(ie)return ie;if("function"==typeof X.createTreeWalker&&X.body&&(X.body.createShadowRoot||X.body.attachShadow)){const Pe=X.createTreeWalker(X.body,NodeFilter.SHOW_ELEMENT);let pt=Pe.currentNode;for(;pt;){const cn=pt.shadowRoot;if(cn){const Rn=cn.getElementById(De)||cn.querySelector(`[name="${De}"]`);if(Rn)return Rn}pt=Pe.nextNode()}}return null}(this.document,De);ie&&(this.scrollToElement(ie),this.attemptFocus(ie))}setHistoryScrollRestoration(De){if(this.supportScrollRestoration()){const ie=this.window.history;ie&&ie.scrollRestoration&&(ie.scrollRestoration=De)}}scrollToElement(De){const ie=De.getBoundingClientRect(),Pe=ie.left+this.window.pageXOffset,pt=ie.top+this.window.pageYOffset,cn=this.offset();this.window.scrollTo(Pe-cn[0],pt-cn[1])}attemptFocus(De){return De.focus(),this.document.activeElement===De}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const De=Sr(this.window.history)||Sr(Object.getPrototypeOf(this.window.history));return!(!De||!De.writable&&!De.set)}catch(De){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(De){return!1}}}function Sr(X){return Object.getOwnPropertyDescriptor(X,"scrollRestoration")}class Da{}},1841:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{eN:()=>Ln,JF:()=>Zi});var x=ne(8583),I=ne(7716),Se=ne(5917),c=ne(7574),Xe=ne(4612),Ie=ne(5435),_=ne(8002);class ve{}class xe{}class Oe{constructor(at){this.normalizedNames=new Map,this.lazyUpdate=null,at?this.lazyInit="string"==typeof at?()=>{this.headers=new Map,at.split("\n").forEach(xt=>{const xn=xt.indexOf(":");if(xn>0){const sn=xt.slice(0,xn),Un=sn.toLowerCase(),ui=xt.slice(xn+1).trim();this.maybeSetNormalizedName(sn,Un),this.headers.has(Un)?this.headers.get(Un).push(ui):this.headers.set(Un,[ui])}})}:()=>{this.headers=new Map,Object.keys(at).forEach(xt=>{let xn=at[xt];const sn=xt.toLowerCase();"string"==typeof xn&&(xn=[xn]),xn.length>0&&(this.headers.set(sn,xn),this.maybeSetNormalizedName(xt,sn))})}:this.headers=new Map}has(at){return this.init(),this.headers.has(at.toLowerCase())}get(at){this.init();const xt=this.headers.get(at.toLowerCase());return xt&&xt.length>0?xt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(at){return this.init(),this.headers.get(at.toLowerCase())||null}append(at,xt){return this.clone({name:at,value:xt,op:"a"})}set(at,xt){return this.clone({name:at,value:xt,op:"s"})}delete(at,xt){return this.clone({name:at,value:xt,op:"d"})}maybeSetNormalizedName(at,xt){this.normalizedNames.has(xt)||this.normalizedNames.set(xt,at)}init(){this.lazyInit&&(this.lazyInit instanceof Oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(at=>this.applyUpdate(at)),this.lazyUpdate=null))}copyFrom(at){at.init(),Array.from(at.headers.keys()).forEach(xt=>{this.headers.set(xt,at.headers.get(xt)),this.normalizedNames.set(xt,at.normalizedNames.get(xt))})}clone(at){const xt=new Oe;return xt.lazyInit=this.lazyInit&&this.lazyInit instanceof Oe?this.lazyInit:this,xt.lazyUpdate=(this.lazyUpdate||[]).concat([at]),xt}applyUpdate(at){const xt=at.name.toLowerCase();switch(at.op){case"a":case"s":let xn=at.value;if("string"==typeof xn&&(xn=[xn]),0===xn.length)return;this.maybeSetNormalizedName(at.name,xt);const sn=("a"===at.op?this.headers.get(xt):void 0)||[];sn.push(...xn),this.headers.set(xt,sn);break;case"d":const Un=at.value;if(Un){let ui=this.headers.get(xt);if(!ui)return;ui=ui.filter(Xn=>-1===Un.indexOf(Xn)),0===ui.length?(this.headers.delete(xt),this.normalizedNames.delete(xt)):this.headers.set(xt,ui)}else this.headers.delete(xt),this.normalizedNames.delete(xt)}}forEach(at){this.init(),Array.from(this.normalizedNames.keys()).forEach(xt=>at(this.normalizedNames.get(xt),this.headers.get(xt)))}}class Ke{encodeKey(at){return Pt(at)}encodeValue(at){return Pt(at)}decodeKey(at){return decodeURIComponent(at)}decodeValue(at){return decodeURIComponent(at)}}function Pt(en){return encodeURIComponent(en).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Qt(en){return`${en}`}class Dt{constructor(at={}){if(this.updates=null,this.cloneFrom=null,this.encoder=at.encoder||new Ke,at.fromString){if(at.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(en,at){const xt=new Map;return en.length>0&&en.replace(/^\?/,"").split("&").forEach(sn=>{const Un=sn.indexOf("="),[ui,Xn]=-1==Un?[at.decodeKey(sn),""]:[at.decodeKey(sn.slice(0,Un)),at.decodeValue(sn.slice(Un+1))],Xt=xt.get(ui)||[];Xt.push(Xn),xt.set(ui,Xt)}),xt}(at.fromString,this.encoder)}else at.fromObject?(this.map=new Map,Object.keys(at.fromObject).forEach(xt=>{const xn=at.fromObject[xt];this.map.set(xt,Array.isArray(xn)?xn:[xn])})):this.map=null}has(at){return this.init(),this.map.has(at)}get(at){this.init();const xt=this.map.get(at);return xt?xt[0]:null}getAll(at){return this.init(),this.map.get(at)||null}keys(){return this.init(),Array.from(this.map.keys())}append(at,xt){return this.clone({param:at,value:xt,op:"a"})}appendAll(at){const xt=[];return Object.keys(at).forEach(xn=>{const sn=at[xn];Array.isArray(sn)?sn.forEach(Un=>{xt.push({param:xn,value:Un,op:"a"})}):xt.push({param:xn,value:sn,op:"a"})}),this.clone(xt)}set(at,xt){return this.clone({param:at,value:xt,op:"s"})}delete(at,xt){return this.clone({param:at,value:xt,op:"d"})}toString(){return this.init(),this.keys().map(at=>{const xt=this.encoder.encodeKey(at);return this.map.get(at).map(xn=>xt+"="+this.encoder.encodeValue(xn)).join("&")}).filter(at=>""!==at).join("&")}clone(at){const xt=new Dt({encoder:this.encoder});return xt.cloneFrom=this.cloneFrom||this,xt.updates=(this.updates||[]).concat(at),xt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(at=>this.map.set(at,this.cloneFrom.map.get(at))),this.updates.forEach(at=>{switch(at.op){case"a":case"s":const xt=("a"===at.op?this.map.get(at.param):void 0)||[];xt.push(Qt(at.value)),this.map.set(at.param,xt);break;case"d":if(void 0===at.value){this.map.delete(at.param);break}{let xn=this.map.get(at.param)||[];const sn=xn.indexOf(Qt(at.value));-1!==sn&&xn.splice(sn,1),xn.length>0?this.map.set(at.param,xn):this.map.delete(at.param)}}}),this.cloneFrom=this.updates=null)}}class kt{constructor(){this.map=new Map}set(at,xt){return this.map.set(at,xt),this}get(at){return this.map.has(at)||this.map.set(at,at.defaultValue()),this.map.get(at)}delete(at){return this.map.delete(at),this}keys(){return this.map.keys()}}function Ft(en){return"undefined"!=typeof ArrayBuffer&&en instanceof ArrayBuffer}function Mn(en){return"undefined"!=typeof Blob&&en instanceof Blob}function Jt(en){return"undefined"!=typeof FormData&&en instanceof FormData}class dn{constructor(at,xt,xn,sn){let Un;if(this.url=xt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=at.toUpperCase(),function(en){switch(en){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||sn?(this.body=void 0!==xn?xn:null,Un=sn):Un=xn,Un&&(this.reportProgress=!!Un.reportProgress,this.withCredentials=!!Un.withCredentials,Un.responseType&&(this.responseType=Un.responseType),Un.headers&&(this.headers=Un.headers),Un.context&&(this.context=Un.context),Un.params&&(this.params=Un.params)),this.headers||(this.headers=new Oe),this.context||(this.context=new kt),this.params){const ui=this.params.toString();if(0===ui.length)this.urlWithParams=xt;else{const Xn=xt.indexOf("?");this.urlWithParams=xt+(-1===Xn?"?":Xn<xt.length-1?"&":"")+ui}}else this.params=new Dt,this.urlWithParams=xt}serializeBody(){return null===this.body?null:Ft(this.body)||Mn(this.body)||Jt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Dt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jt(this.body)?null:Mn(this.body)?this.body.type||null:Ft(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Dt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(at={}){var xt;const xn=at.method||this.method,sn=at.url||this.url,Un=at.responseType||this.responseType,ui=void 0!==at.body?at.body:this.body,Xn=void 0!==at.withCredentials?at.withCredentials:this.withCredentials,Xt=void 0!==at.reportProgress?at.reportProgress:this.reportProgress;let Zn=at.headers||this.headers,Bi=at.params||this.params;const cr=null!==(xt=at.context)&&void 0!==xt?xt:this.context;return void 0!==at.setHeaders&&(Zn=Object.keys(at.setHeaders).reduce((Ui,Kn)=>Ui.set(Kn,at.setHeaders[Kn]),Zn)),at.setParams&&(Bi=Object.keys(at.setParams).reduce((Ui,Kn)=>Ui.set(Kn,at.setParams[Kn]),Bi)),new dn(xn,sn,ui,{params:Bi,headers:Zn,context:cr,reportProgress:Xt,responseType:Un,withCredentials:Xn})}}var Hn=(()=>((Hn=Hn||{})[Hn.Sent=0]="Sent",Hn[Hn.UploadProgress=1]="UploadProgress",Hn[Hn.ResponseHeader=2]="ResponseHeader",Hn[Hn.DownloadProgress=3]="DownloadProgress",Hn[Hn.Response=4]="Response",Hn[Hn.User=5]="User",Hn))();class Ai{constructor(at,xt=200,xn="OK"){this.headers=at.headers||new Oe,this.status=void 0!==at.status?at.status:xt,this.statusText=at.statusText||xn,this.url=at.url||null,this.ok=this.status>=200&&this.status<300}}class Ri extends Ai{constructor(at={}){super(at),this.type=Hn.ResponseHeader}clone(at={}){return new Ri({headers:at.headers||this.headers,status:void 0!==at.status?at.status:this.status,statusText:at.statusText||this.statusText,url:at.url||this.url||void 0})}}class ci extends Ai{constructor(at={}){super(at),this.type=Hn.Response,this.body=void 0!==at.body?at.body:null}clone(at={}){return new ci({body:void 0!==at.body?at.body:this.body,headers:at.headers||this.headers,status:void 0!==at.status?at.status:this.status,statusText:at.statusText||this.statusText,url:at.url||this.url||void 0})}}class ni extends Ai{constructor(at){super(at,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${at.url||"(unknown url)"}`:`Http failure response for ${at.url||"(unknown url)"}: ${at.status} ${at.statusText}`,this.error=at.error||null}}function zn(en,at){return{body:at,headers:en.headers,context:en.context,observe:en.observe,params:en.params,reportProgress:en.reportProgress,responseType:en.responseType,withCredentials:en.withCredentials}}let Ln=(()=>{class en{constructor(xt){this.handler=xt}request(xt,xn,sn={}){let Un;if(xt instanceof dn)Un=xt;else{let Xt,Zn;Xt=sn.headers instanceof Oe?sn.headers:new Oe(sn.headers),sn.params&&(Zn=sn.params instanceof Dt?sn.params:new Dt({fromObject:sn.params})),Un=new dn(xt,xn,void 0!==sn.body?sn.body:null,{headers:Xt,context:sn.context,params:Zn,reportProgress:sn.reportProgress,responseType:sn.responseType||"json",withCredentials:sn.withCredentials})}const ui=(0,Se.of)(Un).pipe((0,Xe.b)(Xt=>this.handler.handle(Xt)));if(xt instanceof dn||"events"===sn.observe)return ui;const Xn=ui.pipe((0,Ie.h)(Xt=>Xt instanceof ci));switch(sn.observe||"body"){case"body":switch(Un.responseType){case"arraybuffer":return Xn.pipe((0,_.U)(Xt=>{if(null!==Xt.body&&!(Xt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Xt.body}));case"blob":return Xn.pipe((0,_.U)(Xt=>{if(null!==Xt.body&&!(Xt.body instanceof Blob))throw new Error("Response is not a Blob.");return Xt.body}));case"text":return Xn.pipe((0,_.U)(Xt=>{if(null!==Xt.body&&"string"!=typeof Xt.body)throw new Error("Response is not a string.");return Xt.body}));case"json":default:return Xn.pipe((0,_.U)(Xt=>Xt.body))}case"response":return Xn;default:throw new Error(`Unreachable: unhandled observe type ${sn.observe}}`)}}delete(xt,xn={}){return this.request("DELETE",xt,xn)}get(xt,xn={}){return this.request("GET",xt,xn)}head(xt,xn={}){return this.request("HEAD",xt,xn)}jsonp(xt,xn){return this.request("JSONP",xt,{params:(new Dt).append(xn,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(xt,xn={}){return this.request("OPTIONS",xt,xn)}patch(xt,xn,sn={}){return this.request("PATCH",xt,zn(sn,xn))}post(xt,xn,sn={}){return this.request("POST",xt,zn(sn,xn))}put(xt,xn,sn={}){return this.request("PUT",xt,zn(sn,xn))}}return en.\u0275fac=function(xt){return new(xt||en)(I.LFG(ve))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})();class ii{constructor(at,xt){this.next=at,this.interceptor=xt}handle(at){return this.interceptor.intercept(at,this.next)}}const On=new I.OlP("HTTP_INTERCEPTORS");let vi=(()=>{class en{intercept(xt,xn){return xn.handle(xt)}}return en.\u0275fac=function(xt){return new(xt||en)},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})();const Et=/^\)\]\}',?\n/;let pn=(()=>{class en{constructor(xt){this.xhrFactory=xt}handle(xt){if("JSONP"===xt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new c.y(xn=>{const sn=this.xhrFactory.build();if(sn.open(xt.method,xt.urlWithParams),xt.withCredentials&&(sn.withCredentials=!0),xt.headers.forEach((Kn,vt)=>sn.setRequestHeader(Kn,vt.join(","))),xt.headers.has("Accept")||sn.setRequestHeader("Accept","application/json, text/plain, */*"),!xt.headers.has("Content-Type")){const Kn=xt.detectContentTypeHeader();null!==Kn&&sn.setRequestHeader("Content-Type",Kn)}if(xt.responseType){const Kn=xt.responseType.toLowerCase();sn.responseType="json"!==Kn?Kn:"text"}const Un=xt.serializeBody();let ui=null;const Xn=()=>{if(null!==ui)return ui;const Kn=1223===sn.status?204:sn.status,vt=sn.statusText||"OK",Wt=new Oe(sn.getAllResponseHeaders()),pe=function(en){return"responseURL"in en&&en.responseURL?en.responseURL:/^X-Request-URL:/m.test(en.getAllResponseHeaders())?en.getResponseHeader("X-Request-URL"):null}(sn)||xt.url;return ui=new Ri({headers:Wt,status:Kn,statusText:vt,url:pe}),ui},Xt=()=>{let{headers:Kn,status:vt,statusText:Wt,url:pe}=Xn(),ke=null;204!==vt&&(ke=void 0===sn.response?sn.responseText:sn.response),0===vt&&(vt=ke?200:0);let gt=vt>=200&&vt<300;if("json"===xt.responseType&&"string"==typeof ke){const jt=ke;ke=ke.replace(Et,"");try{ke=""!==ke?JSON.parse(ke):null}catch(Dn){ke=jt,gt&&(gt=!1,ke={error:Dn,text:ke})}}gt?(xn.next(new ci({body:ke,headers:Kn,status:vt,statusText:Wt,url:pe||void 0})),xn.complete()):xn.error(new ni({error:ke,headers:Kn,status:vt,statusText:Wt,url:pe||void 0}))},Zn=Kn=>{const{url:vt}=Xn(),Wt=new ni({error:Kn,status:sn.status||0,statusText:sn.statusText||"Unknown Error",url:vt||void 0});xn.error(Wt)};let Bi=!1;const cr=Kn=>{Bi||(xn.next(Xn()),Bi=!0);let vt={type:Hn.DownloadProgress,loaded:Kn.loaded};Kn.lengthComputable&&(vt.total=Kn.total),"text"===xt.responseType&&!!sn.responseText&&(vt.partialText=sn.responseText),xn.next(vt)},Ui=Kn=>{let vt={type:Hn.UploadProgress,loaded:Kn.loaded};Kn.lengthComputable&&(vt.total=Kn.total),xn.next(vt)};return sn.addEventListener("load",Xt),sn.addEventListener("error",Zn),sn.addEventListener("timeout",Zn),sn.addEventListener("abort",Zn),xt.reportProgress&&(sn.addEventListener("progress",cr),null!==Un&&sn.upload&&sn.upload.addEventListener("progress",Ui)),sn.send(Un),xn.next({type:Hn.Sent}),()=>{sn.removeEventListener("error",Zn),sn.removeEventListener("abort",Zn),sn.removeEventListener("load",Xt),sn.removeEventListener("timeout",Zn),xt.reportProgress&&(sn.removeEventListener("progress",cr),null!==Un&&sn.upload&&sn.upload.removeEventListener("progress",Ui)),sn.readyState!==sn.DONE&&sn.abort()}})}}return en.\u0275fac=function(xt){return new(xt||en)(I.LFG(x.JF))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})();const An=new I.OlP("XSRF_COOKIE_NAME"),Bn=new I.OlP("XSRF_HEADER_NAME");class di{}let Ei=(()=>{class en{constructor(xt,xn,sn){this.doc=xt,this.platform=xn,this.cookieName=sn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const xt=this.doc.cookie||"";return xt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,x.Mx)(xt,this.cookieName),this.lastCookieString=xt),this.lastToken}}return en.\u0275fac=function(xt){return new(xt||en)(I.LFG(x.K0),I.LFG(I.Lbi),I.LFG(An))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})(),Vn=(()=>{class en{constructor(xt,xn){this.tokenService=xt,this.headerName=xn}intercept(xt,xn){const sn=xt.url.toLowerCase();if("GET"===xt.method||"HEAD"===xt.method||sn.startsWith("http://")||sn.startsWith("https://"))return xn.handle(xt);const Un=this.tokenService.getToken();return null!==Un&&!xt.headers.has(this.headerName)&&(xt=xt.clone({headers:xt.headers.set(this.headerName,Un)})),xn.handle(xt)}}return en.\u0275fac=function(xt){return new(xt||en)(I.LFG(di),I.LFG(Bn))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})(),ki=(()=>{class en{constructor(xt,xn){this.backend=xt,this.injector=xn,this.chain=null}handle(xt){if(null===this.chain){const xn=this.injector.get(On,[]);this.chain=xn.reduceRight((sn,Un)=>new ii(sn,Un),this.backend)}return this.chain.handle(xt)}}return en.\u0275fac=function(xt){return new(xt||en)(I.LFG(xe),I.LFG(I.zs3))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac}),en})(),er=(()=>{class en{static disable(){return{ngModule:en,providers:[{provide:Vn,useClass:vi}]}}static withOptions(xt={}){return{ngModule:en,providers:[xt.cookieName?{provide:An,useValue:xt.cookieName}:[],xt.headerName?{provide:Bn,useValue:xt.headerName}:[]]}}}return en.\u0275fac=function(xt){return new(xt||en)},en.\u0275mod=I.oAB({type:en}),en.\u0275inj=I.cJS({providers:[Vn,{provide:On,useExisting:Vn,multi:!0},{provide:di,useClass:Ei},{provide:An,useValue:"XSRF-TOKEN"},{provide:Bn,useValue:"X-XSRF-TOKEN"}]}),en})(),Zi=(()=>{class en{}return en.\u0275fac=function(xt){return new(xt||en)},en.\u0275mod=I.oAB({type:en}),en.\u0275inj=I.cJS({providers:[Ln,{provide:ve,useClass:ki},pn,{provide:xe,useExisting:pn}],imports:[[er.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),en})()},7716:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{deG:()=>il,tb:()=>H0,AFp:()=>j0,ip1:()=>z_,CZH:()=>eh,hGG:()=>wD,z2F:()=>zf,sBO:()=>hC,Sil:()=>Nf,_Vd:()=>Fu,EJc:()=>q0,SBq:()=>lc,qLn:()=>$c,vpe:()=>cc,gxx:()=>rc,tBr:()=>Lo,XFs:()=>ei,OlP:()=>Xr,zs3:()=>H,ZZ4:()=>gm,aQg:()=>_m,soG:()=>Sm,YKP:()=>Px,v3s:()=>tD,h0i:()=>Ru,PXZ:()=>YA,R0b:()=>Qa,FiY:()=>ka,Lbi:()=>$0,g9A:()=>G0,n_E:()=>Lf,Qsj:()=>Q1,FYo:()=>mm,JOm:()=>Na,Tiy:()=>f_,q3G:()=>Os,tp0:()=>Qo,EAV:()=>sD,Rgc:()=>Af,dDg:()=>Q0,DyG:()=>v,GfV:()=>Cx,s_b:()=>xm,ifc:()=>Xt,eFA:()=>nb,G48:()=>jA,Gpc:()=>Ke,f3M:()=>Dr,X6Q:()=>Z_,_c5:()=>mD,VLi:()=>UA,c2e:()=>Z0,zSh:()=>ea,wAp:()=>Qi,vHH:()=>Dt,EiD:()=>vh,mCW:()=>yc,qzn:()=>Nc,JVY:()=>Qf,pB0:()=>$m,eBb:()=>Za,L6k:()=>$u,LAX:()=>Gm,cg1:()=>r_,Tjo:()=>fD,kL8:()=>Hv,yhl:()=>Kf,dqk:()=>Kn,sIi:()=>Tc,CqO:()=>qg,QGY:()=>Zg,F4k:()=>Jy,RDi:()=>gs,AaK:()=>ve,z3N:()=>Sl,qOj:()=>ms,TTD:()=>Is,_Bn:()=>yx,xp6:()=>Fp,uIk:()=>Bg,ekj:()=>Jg,Suo:()=>x0,Xpm:()=>oe,lG2:()=>W,Yz7:()=>tn,cJS:()=>An,oAB:()=>O,Yjl:()=>$,Y36:()=>yf,_UZ:()=>Yy,qZA:()=>Hg,TgZ:()=>$g,EpF:()=>Xy,n5z:()=>lt,Ikx:()=>n_,LFG:()=>ar,$8M:()=>mn,$Z:()=>Wy,NdJ:()=>Wg,CRH:()=>b0,oxw:()=>nv,ALo:()=>p0,xi3:()=>m0,Hsn:()=>rv,F$t:()=>iv,Q6J:()=>jg,VKq:()=>o0,WLB:()=>a0,kEZ:()=>l0,iGM:()=>y0,Jf7:()=>Sh,CHM:()=>ml,LSH:()=>Ku,kYT:()=>le,Udp:()=>Xg,WFA:()=>Yg,d8E:()=>i_,YNc:()=>Ly,_uU:()=>Sv,Oqu:()=>t_,hij:()=>lm,Gf:()=>v0});var x=ne(9765),I=ne(5319),Se=ne(7574),c=ne(6682),Xe=ne(8819);function Ie(t){for(let n in t)if(t[n]===Ie)return n;throw Error("Could not find renamed property on target object.")}function _(t,n){for(const r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function xe(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Oe=Ie({__forward_ref__:Ie});function Ke(t){return t.__forward_ref__=Ke,t.toString=function(){return ve(this())},t}function st(t){return Pt(t)?t():t}function Pt(t){return"function"==typeof t&&t.hasOwnProperty(Oe)&&t.__forward_ref__===Ke}class Dt extends Error{constructor(n,r){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,r)),this.code=n}}function Kt(t){return"string"==typeof t?t:null==t?"":String(t)}function Ft(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Kt(t)}function dn(t,n){const r=n?` in ${n}`:"";throw new Dt("201",`No provider for ${Ft(t)} found${r}`)}function rn(t,n){null==t&&function(t,n,r,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${r} ${a} ${n} <=Actual]`))}(n,t,null,"!=")}function tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function An(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bn(t){return di(t,Mi)||di(t,er)}function di(t,n){return t.hasOwnProperty(n)?t[n]:null}function ki(t){return t&&(t.hasOwnProperty(Ti)||t.hasOwnProperty(Zi))?t[Ti]:null}const Mi=Ie({\u0275prov:Ie}),Ti=Ie({\u0275inj:Ie}),er=Ie({ngInjectableDef:Ie}),Zi=Ie({ngInjectorDef:Ie});var ei=(()=>((ei=ei||{})[ei.Default=0]="Default",ei[ei.Host=1]="Host",ei[ei.Self=2]="Self",ei[ei.SkipSelf=4]="SkipSelf",ei[ei.Optional=8]="Optional",ei))();let oi;function at(t){const n=oi;return oi=t,n}function xt(t,n,r){const a=Bn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:r&ei.Optional?null:void 0!==n?n:void dn(ve(t),"Injector")}function sn(t){return{toString:t}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),Xt=(()=>((Xt=Xt||{})[Xt.Emulated=0]="Emulated",Xt[Xt.None=2]="None",Xt[Xt.ShadowDom=3]="ShadowDom",Xt))();const Zn="undefined"!=typeof globalThis&&globalThis,Bi="undefined"!=typeof window&&window,cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ui="undefined"!=typeof global&&global,Kn=Zn||Ui||Bi||cr,pe={},ke=[],gt=Ie({\u0275cmp:Ie}),jt=Ie({\u0275dir:Ie}),Dn=Ie({\u0275pipe:Ie}),ri=Ie({\u0275mod:Ie}),Ze=Ie({\u0275loc:Ie}),ze=Ie({\u0275fac:Ie}),Ce=Ie({__NG_ELEMENT_ID__:Ie});let me=0;function oe(t){return sn(()=>{const r={},a={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ke,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Xt.Emulated,id:"c",styles:t.styles||ke,_:null,setInput:null,schemas:t.schemas||null,tView:null},d=t.directives,g=t.features,b=t.pipes;return a.id+=me++,a.inputs=J(t.inputs,r),a.outputs=J(t.outputs),g&&g.forEach(E=>E(a)),a.directiveDefs=d?()=>("function"==typeof d?d():d).map(N):null,a.pipeDefs=b?()=>("function"==typeof b?b():b).map(Q):null,a})}function N(t){return Ee(t)||function(t){return t[jt]||null}(t)}function Q(t){return function(t){return t[Dn]||null}(t)}const z={};function O(t){return sn(()=>{const n={type:t.type,bootstrap:t.bootstrap||ke,declarations:t.declarations||ke,imports:t.imports||ke,exports:t.exports||ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(z[t.id]=t.type),n})}function le(t,n){return sn(()=>{const r=nn(t,!0);r.declarations=n.declarations||ke,r.imports=n.imports||ke,r.exports=n.exports||ke})}function J(t,n){if(null==t)return pe;const r={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),r[d]=a,n&&(n[d]=g)}return r}const W=oe;function $(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ee(t){return t[gt]||null}function nn(t,n){const r=t[ri]||null;if(!r&&!0===n)throw new Error(`Type ${ve(t)} does not have '\u0275mod' property.`);return r}const q=16;function Or(t){return Array.isArray(t)&&"object"==typeof t[1]}function vr(t){return Array.isArray(t)&&!0===t[1]}function wr(t){return 0!=(8&t.flags)}function ts(t){return 2==(2&t.flags)}function Ne(t){return 1==(1&t.flags)}function it(t){return null!==t.template}function se(t){return 0!=(512&t[2])}function so(t,n){return t.hasOwnProperty(ze)?t[ze]:null}class So{constructor(n,r,a){this.previousValue=n,this.currentValue=r,this.firstChange=a}isFirstChange(){return this.firstChange}}function Is(){return to}function to(t){return t.type.prototype.ngOnChanges&&(t.setInput=Mo),oo}function oo(){const t=Zo(this),n=null==t?void 0:t.current;if(n){const r=t.previous;if(r===pe)t.previous=n;else for(let a in n)r[a]=n[a];t.current=null,this.ngOnChanges(n)}}function Mo(t,n,r,a){const d=Zo(t)||function(t,n){return t[Ji]=n}(t,{previous:pe,current:null}),g=d.current||(d.current={}),b=d.previous,E=this.declaredInputs[r],F=b[E];g[E]=new So(F&&F.currentValue,n,b===pe),t[a]=n}Is.ngInherit=!0;const Ji="__ngSimpleChanges__";function Zo(t){return t[Ji]||null}let Sr;function gs(t){Sr=t}function X(t){return!!t.listen}const ie={createRenderer:(t,n)=>void 0!==Sr?Sr:"undefined"!=typeof document?document:void 0};function pt(t){for(;Array.isArray(t);)t=t[0];return t}function Ci(t,n){return pt(n[t])}function qi(t,n){return pt(n[t.index])}function Cr(t,n){return t.data[n]}function br(t,n){const r=n[t];return Or(r)?r:r[0]}function tr(t){return 4==(4&t[2])}function ss(t){return 128==(128&t[2])}function os(t,n){return null==n?null:t[n]}function ao(t){t[18]=0}function ws(t,n){t[5]+=n;let r=t,a=t[3];for(;null!==a&&(1===n&&1===r[5]||-1===n&&0===r[5]);)a[5]+=n,r=a,a=a[3]}const Oi={lFrame:ds(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xa(){return Oi.bindingsEnabled}function Pn(){return Oi.lFrame.lView}function gr(){return Oi.lFrame.tView}function ml(t){return Oi.lFrame.contextLView=t,t[8]}function ns(){let t=gl();for(;null!==t&&64===t.type;)t=t.parent;return t}function gl(){return Oi.lFrame.currentTNode}function zs(t,n){const r=Oi.lFrame;r.currentTNode=t,r.isParent=n}function ye(){return Oi.lFrame.isParent}function A(){Oi.lFrame.isParent=!1}function ge(){return Oi.isInCheckNoChangesMode}function Be(t){Oi.isInCheckNoChangesMode=t}function tt(){const t=Oi.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function hn(){return Oi.lFrame.bindingIndex++}function _r(t,n){const r=Oi.lFrame;r.bindingIndex=r.bindingRootIndex=t,Gi(n)}function Gi(t){Oi.lFrame.currentDirectiveIndex=t}function sr(t){const n=Oi.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Ur(){return Oi.lFrame.currentQueryIndex}function Yr(t){Oi.lFrame.currentQueryIndex=t}function Ps(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Fr(t,n,r){if(r&ei.SkipSelf){let d=n,g=t;for(;!(d=d.parent,null!==d||r&ei.Host||(d=Ps(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;n=d,t=g}const a=Oi.lFrame=Cs();return a.currentTNode=n,a.lView=t,!0}function no(t){const n=Cs(),r=t[1];Oi.lFrame=n,n.currentTNode=r.firstChild,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Cs(){const t=Oi.lFrame,n=null===t?null:t.child;return null===n?ds(t):n}function ds(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Ro(){const t=Oi.lFrame;return Oi.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Bs=Ro;function hs(){const t=Ro();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Kr(){return Oi.lFrame.selectedIndex}function lo(t){Oi.lFrame.selectedIndex=t}function Tr(){const t=Oi.lFrame;return Cr(t.tView,t.selectedIndex)}function as(t,n){for(let r=n.directiveStart,a=n.directiveEnd;r<a;r++){const g=t.data[r].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:F,ngAfterViewChecked:Z,ngOnDestroy:fe}=g;b&&(t.contentHooks||(t.contentHooks=[])).push(-r,b),E&&((t.contentHooks||(t.contentHooks=[])).push(r,E),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,E)),F&&(t.viewHooks||(t.viewHooks=[])).push(-r,F),Z&&((t.viewHooks||(t.viewHooks=[])).push(r,Z),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,Z)),null!=fe&&(t.destroyHooks||(t.destroyHooks=[])).push(r,fe)}}function Ys(t,n,r){Ks(t,n,3,r)}function Br(t,n,r,a){(3&t[2])===r&&Ks(t,n,r,a)}function Wo(t,n){let r=t[2];(3&r)===n&&(r&=2047,r+=1,t[2]=r)}function Ks(t,n,r,a){const g=null!=a?a:-1,b=n.length-1;let E=0;for(let F=void 0!==a?65535&t[18]:0;F<b;F++)if("number"==typeof n[F+1]){if(E=n[F],null!=a&&E>=a)break}else n[F]<0&&(t[18]+=65536),(E<g||-1==g)&&(Oo(t,r,n,F),t[18]=(4294901760&t[18])+F+2),F++}function Oo(t,n,r,a){const d=r[a]<0,g=r[a+1],E=t[d?-r[a]:r[a]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Qr{constructor(n,r,a){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=a}}function el(t,n,r){const a=X(t);let d=0;for(;d<r.length;){const g=r[d];if("number"==typeof g){if(0!==g)break;d++;const b=r[d++],E=r[d++],F=r[d++];a?t.setAttribute(n,E,F,b):n.setAttributeNS(b,E,F)}else{const b=g,E=r[++d];Fs(b)?a&&t.setProperty(n,b,E):a?t.setAttribute(n,b,E):n.setAttribute(b,E),d++}}return d}function _l(t){return 3===t||4===t||6===t}function Fs(t){return 64===t.charCodeAt(0)}function yl(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let r=-1;for(let a=0;a<n.length;a++){const d=n[a];"number"==typeof d?r=d:0===r||Yo(t,r,d,null,-1===r||2===r?n[++a]:null)}}return t}function Yo(t,n,r,a,d){let g=0,b=t.length;if(-1===n)b=-1;else for(;g<t.length;){const E=t[g++];if("number"==typeof E){if(E===n){b=-1;break}if(E>n){b=g-1;break}}}for(;g<t.length;){const E=t[g];if("number"==typeof E)break;if(E===r){if(null===a)return void(null!==d&&(t[g+1]=d));if(a===t[g+1])return void(t[g+2]=d)}g++,null!==a&&g++,null!==d&&g++}-1!==b&&(t.splice(b,0,n),g=b+1),t.splice(g++,0,r),null!==a&&t.splice(g++,0,a),null!==d&&t.splice(g++,0,d)}function vl(t){return-1!==t}function co(t){return 32767&t}function Pa(t,n){let r=function(t){return t>>16}(t),a=n;for(;r>0;)a=a[15],r--;return a}let sa=!0;function xl(t){const n=sa;return sa=t,n}let oa=0;function tl(t,n){const r=si(t,n);if(-1!==r)return r;const a=n[1];a.firstCreatePass&&(t.injectorIndex=n.length,$a(a.data,t),$a(n,null),$a(a.blueprint,null));const d=bl(t,n),g=t.injectorIndex;if(vl(d)){const b=co(d),E=Pa(d,n),F=E[1].data;for(let Z=0;Z<8;Z++)n[g+Z]=E[b+Z]|F[b+Z]}return n[g+8]=d,g}function $a(t,n){t.push(0,0,0,0,0,0,0,0,n)}function si(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function bl(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,a=null,d=n;for(;null!==d;){const g=d[1],b=g.type;if(a=2===b?g.declTNode:1===b?d[6]:null,null===a)return-1;if(r++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|r<<16}return-1}function wl(t,n,r){!function(t,n,r){let a;"string"==typeof r?a=r.charCodeAt(0)||0:r.hasOwnProperty(Ce)&&(a=r[Ce]),null==a&&(a=r[Ce]=oa++);const d=255&a;n.data[t+(d>>5)]|=1<<d}(t,n,r)}function Ra(t,n,r){if(r&ei.Optional)return t;dn(n,"NodeInjector")}function hc(t,n,r,a){if(r&ei.Optional&&void 0===a&&(a=null),0==(r&(ei.Self|ei.Host))){const d=t[9],g=at(void 0);try{return d?d.get(n,a,r&ei.Optional):xt(n,a,r&ei.Optional)}finally{at(g)}}return Ra(a,n,r)}function fc(t,n,r,a=ei.Default,d){if(null!==t){const g=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ce)?t[Ce]:void 0;return"number"==typeof n?n>=0?255&n:El:n}(r);if("function"==typeof g){if(!Fr(n,t,a))return a&ei.Host?Ra(d,r,a):hc(n,r,a,d);try{const b=g(a);if(null!=b||a&ei.Optional)return b;dn(r)}finally{Bs()}}else if("number"==typeof g){let b=null,E=si(t,n),F=-1,Z=a&ei.Host?n[q][6]:null;for((-1===E||a&ei.SkipSelf)&&(F=-1===E?bl(t,n):n[E+8],-1!==F&&ue(a,!1)?(b=n[1],E=co(F),n=Pa(F,n)):E=-1);-1!==E;){const fe=n[1];if(Y(g,E,fe.data)){const Fe=su(E,n,r,b,a,Z);if(Fe!==$l)return Fe}F=n[E+8],-1!==F&&ue(a,n[1].data[E+8]===Z)&&Y(g,E,n)?(b=fe,E=co(F),n=Pa(F,n)):E=-1}}}return hc(n,r,a,d)}const $l={};function El(){return new Te(ns(),Pn())}function su(t,n,r,a,d,g){const b=n[1],E=b.data[t+8],fe=L(E,b,r,null==a?ts(E)&&sa:a!=b&&0!=(3&E.type),d&ei.Host&&g===E);return null!==fe?P(n,b,fe,E):$l}function L(t,n,r,a,d){const g=t.providerIndexes,b=n.data,E=1048575&g,F=t.directiveStart,fe=g>>20,Ve=d?E+fe:t.directiveEnd;for(let yt=a?E:E+fe;yt<Ve;yt++){const Tt=b[yt];if(yt<F&&r===Tt||yt>=F&&Tt.type===r)return yt}if(d){const yt=b[F];if(yt&&it(yt)&&yt.type===r)return F}return null}function P(t,n,r,a){let d=t[r];const g=n.data;if(function(t){return t instanceof Qr}(d)){const b=d;b.resolving&&function(t,n){throw new Dt("200",`Circular dependency in DI detected for ${t}`)}(Ft(g[r]));const E=xl(b.canSeeViewProviders);b.resolving=!0;const F=b.injectImpl?at(b.injectImpl):null;Fr(t,a,ei.Default);try{d=t[r]=b.factory(void 0,g,t,a),n.firstCreatePass&&r>=a.directiveStart&&function(t,n,r){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:g}=n.type.prototype;if(a){const b=to(n);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,b),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,b)}d&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,d),g&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,g),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,g))}(r,g[r],n)}finally{null!==F&&at(F),xl(E),b.resolving=!1,Bs()}}return d}function Y(t,n,r){return!!(r[n+(t>>5)]&1<<t)}function ue(t,n){return!(t&ei.Self||t&ei.Host&&n)}class Te{constructor(n,r){this._tNode=n,this._lView=r}get(n,r){return fc(this._tNode,this._lView,n,void 0,r)}}function lt(t){return sn(()=>{const n=t.prototype.constructor,r=n[ze]||At(n),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const g=d[ze]||At(d);if(g&&g!==r)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function At(t){return Pt(t)?()=>{const n=At(st(t));return n&&n()}:so(t)}function mn(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const r=t.attrs;if(r){const a=r.length;let d=0;for(;d<a;){const g=r[d];if(_l(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<a&&"string"==typeof r[d];)d++;else{if(g===n)return r[d+1];d+=2}}}return null}(ns(),t)}const Di="__parameters__";function io(t,n,r){return sn(()=>{const a=function(t){return function(...r){if(t){const a=t(...r);for(const d in a)this[d]=a[d]}}}(n);function d(...g){if(this instanceof d)return a.apply(this,g),this;const b=new d(...g);return E.annotation=b,E;function E(F,Z,fe){const Fe=F.hasOwnProperty(Di)?F[Di]:Object.defineProperty(F,Di,{value:[]})[Di];for(;Fe.length<=fe;)Fe.push(null);return(Fe[fe]=Fe[fe]||[]).push(b),F}}return r&&(d.prototype=Object.create(r.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class Xr{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=tn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const il=new Xr("AnalyzeForEntryComponents"),v=Function;function G(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let a=t[r];Array.isArray(a)?(n===t&&(n=t.slice(0,r)),G(a,n)):n!==t&&n.push(a)}return n}function te(t,n){t.forEach(r=>Array.isArray(r)?te(r,n):n(r))}function he(t,n,r){n>=t.length?t.push(r):t.splice(n,0,r)}function _e(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function we(t,n){const r=[];for(let a=0;a<t;a++)r.push(n);return r}function nt(t,n,r){let a=Je(t,n);return a>=0?t[1|a]=r:(a=~a,function(t,n,r,a){let d=t.length;if(d==n)t.push(r,a);else if(1===d)t.push(a,t[0]),t[0]=r;else{for(d--,t.push(t[d-1],t[d]);d>n;)t[d]=t[d-2],d--;t[n]=r,t[n+1]=a}}(t,a,n,r)),a}function Ct(t,n){const r=Je(t,n);if(r>=0)return t[1|r]}function Je(t,n){return function(t,n,r){let a=0,d=t.length>>r;for(;d!==a;){const g=a+(d-a>>1),b=t[g<<r];if(n===b)return g<<r;b>n?d=g:a=g+1}return~(d<<r)}(t,n,1)}const Si={},Er="__NG_DI_FLAG__",Ir="ngTempTokenPath",or=/\n/gm,ls="__source",wo=Ie({provide:String,useValue:Ie});let Us;function ro(t){const n=Us;return Us=t,n}function Oa(t,n=ei.Default){if(void 0===Us)throw new Error("inject() must be called from an injection context");return null===Us?xt(t,void 0,n):Us.get(t,n&ei.Optional?null:void 0,n)}function ar(t,n=ei.Default){return(oi||Oa)(st(t),n)}const Dr=ar;function qr(t){const n=[];for(let r=0;r<t.length;r++){const a=st(t[r]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let d,g=ei.Default;for(let b=0;b<a.length;b++){const E=a[b],F=is(E);"number"==typeof F?-1===F?d=E.token:g|=F:d=E}n.push(ar(d,g))}else n.push(ar(a))}return n}function Rs(t,n){return t[Er]=n,t.prototype[Er]=n,t}function is(t){return t[Er]}function ko(t,n,r,a){const d=t[Ir];throw n[ls]&&d.unshift(n[ls]),t.message=function(t,n,r,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let d=ve(n);if(Array.isArray(n))d=n.map(ve).join(" -> ");else if("object"==typeof n){let g=[];for(let b in n)if(n.hasOwnProperty(b)){let E=n[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):ve(E)))}d=`{${g.join(", ")}}`}return`${r}${a?"("+a+")":""}[${d}]: ${t.replace(or,"\n  ")}`}("\n"+t.message,d,r,a),t.ngTokenPath=d,t[Ir]=null,t}const Lo=Rs(io("Inject",t=>({token:t})),-1),ka=Rs(io("Optional"),8),Qo=Rs(io("SkipSelf"),4);let kc;function va(t){var n;return(null===(n=function(){if(void 0===kc&&(kc=null,Kn.trustedTypes))try{kc=Kn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return kc}())||void 0===n?void 0:n.createHTML(t))||t}class Xo{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ha extends Xo{getTypeName(){return"HTML"}}class Yl extends Xo{getTypeName(){return"Style"}}class Dl extends Xo{getTypeName(){return"Script"}}class gc extends Xo{getTypeName(){return"URL"}}class jm extends Xo{getTypeName(){return"ResourceURL"}}function Sl(t){return t instanceof Xo?t.changingThisBreaksApplicationSecurity:t}function Nc(t,n){const r=Kf(t);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===n}function Kf(t){return t instanceof Xo&&t.getTypeName()||null}function Qf(t){return new Ha(t)}function $u(t){return new Yl(t)}function Za(t){return new Dl(t)}function Gm(t){return new gc(t)}function $m(t){return new jm(t)}class Lr{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(va(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class fh{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const a=this.inertDocument.createElement("body");r.appendChild(a)}}getInertBodyElement(n){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=va(n),r;const a=this.inertDocument.createElement("body");return a.innerHTML=va(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(n){const r=n.attributes;for(let d=r.length-1;0<d;d--){const b=r.item(d).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&n.removeAttribute(b)}let a=n.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const _c=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yc(t){return(t=String(t)).match(_c)||t.match(Hu)?t:"unsafe:"+t}function sl(t){const n={};for(const r of t.split(","))n[r]=!0;return n}function Vc(...t){const n={};for(const r of t)for(const a in r)r.hasOwnProperty(a)&&(n[a]=!0);return n}const Jf=sl("area,br,col,hr,img,wbr"),Zu=sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ep=sl("rp,rt"),Kl=Vc(Jf,Vc(Zu,sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vc(ep,sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vc(ep,Zu)),qu=sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mh=sl("srcset"),_h=Vc(qu,mh,sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),np=sl("script,style,template");class qm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,a=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?a=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,a&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let d=this.checkClobberedElement(r,r.nextSibling);if(d){r=d;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(n){const r=n.nodeName.toLowerCase();if(!Kl.hasOwnProperty(r))return this.sanitizedSomething=!0,!np.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const a=n.attributes;for(let d=0;d<a.length;d++){const g=a.item(d),b=g.name,E=b.toLowerCase();if(!_h.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let F=g.value;qu[E]&&(F=yc(F)),mh[E]&&(t=F,F=(t=String(t)).split(",").map(n=>yc(n.trim())).join(", ")),this.buf.push(" ",b,'="',yh(F),'"')}var t;return this.buf.push(">"),!0}endElement(n){const r=n.nodeName.toLowerCase();Kl.hasOwnProperty(r)&&!Jf.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(yh(n))}checkClobberedElement(n,r){if(r&&(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return r}}const Wm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ua=/([^\#-~ |!])/g;function yh(t){return t.replace(/&/g,"&amp;").replace(Wm,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(ua,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Uc;function vh(t,n){let r=null;try{Uc=Uc||function(t){const n=new fh(t);return function(){try{return!!(new window.DOMParser).parseFromString(va(""),"text/html")}catch(t){return!1}}()?new Lr(n):n}(t);let a=n?String(n):"";r=Uc.getInertBodyElement(a);let d=5,g=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=g,g=r.innerHTML,r=Uc.getInertBodyElement(a)}while(a!==g);return va((new qm).sanitizeChildren(xh(r)||r))}finally{if(r){const a=xh(r)||r;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function xh(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Os=(()=>((Os=Os||{})[Os.NONE=0]="NONE",Os[Os.HTML=1]="HTML",Os[Os.STYLE=2]="STYLE",Os[Os.SCRIPT=3]="SCRIPT",Os[Os.URL=4]="URL",Os[Os.RESOURCE_URL=5]="RESOURCE_URL",Os))();function Ku(t){const n=function(){const t=Pn();return t&&t[12]}();return n?n.sanitize(Os.URL,t)||"":Nc(t,"URL")?Sl(t):yc(Kt(t))}const wh="__ngContext__";function No(t,n){t[wh]=n}function Ju(t){const n=function(t){return t[wh]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function id(t){return t.ngOriginalError}function ng(t,...n){t.error(...n)}class $c{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n),a=this._findContext(n),d=(t=n)&&t.ngErrorLogger||ng;var t;d(this._console,"ERROR",n),r&&d(this._console,"ORIGINAL ERROR",r),a&&d(this._console,"ERROR CONTEXT",a)}_findContext(n){return n?n.ngDebugContext||this._findContext(id(n)):null}_findOriginalError(n){let r=n&&id(n);for(;r&&id(r);)r=id(r);return r||null}}const Hc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Kn))();function Sh(t){return t.ownerDocument.defaultView}function Ba(t){return t instanceof Function?t():t}var Na=(()=>((Na=Na||{})[Na.Important=1]="Important",Na[Na.DashCase=2]="DashCase",Na))();function fu(t,n){return undefined(t,n)}function pu(t){const n=t[3];return vr(n)?n[3]:n}function Ih(t){return Fh(t[13])}function Ph(t){return Fh(t[4])}function Fh(t){for(;null!==t&&!vr(t);)t=t[4];return t}function qc(t,n,r,a,d){if(null!=a){let g,b=!1;vr(a)?g=a:Or(a)&&(b=!0,a=a[0]);const E=pt(a);0===t&&null!==r?null==d?xp(n,r,E):Cc(n,r,E,d||null,!0):1===t&&null!==r?Cc(n,r,E,d||null,!0):2===t?function(t,n,r){const a=ad(t,n);a&&function(t,n,r,a){X(t)?t.removeChild(n,r,a):n.removeChild(r)}(t,a,n,r)}(n,E,b):3===t&&n.destroyNode(E),null!=g&&function(t,n,r,a,d){const g=r[7];g!==pt(r)&&qc(n,t,a,g,d);for(let E=10;E<r.length;E++){const F=r[E];ha(F[1],F,t,n,a,g)}}(n,t,g,r,d)}}function kh(t,n,r){return X(t)?t.createElement(n,r):null===r?t.createElement(n):t.createElementNS(r,n)}function od(t,n){const r=t[9],a=r.indexOf(n),d=n[3];1024&n[2]&&(n[2]&=-1025,ws(d,-1)),r.splice(a,1)}function Lh(t,n){if(t.length<=10)return;const r=10+n,a=t[r];if(a){const d=a[17];null!==d&&d!==t&&od(d,a),n>0&&(t[r-1][4]=a[4]);const g=_e(t,10+n);!function(t,n){ha(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(a[1],a);const b=g[19];null!==b&&b.detachView(g[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function mp(t,n){if(!(256&n[2])){const r=n[11];X(r)&&r.destroyNode&&ha(t,n,r,3,null,null),function(t){let n=t[13];if(!n)return wc(t[1],t);for(;n;){let r=null;if(Or(n))r=n[13];else{const a=n[10];a&&(r=a)}if(!r){for(;n&&!n[4]&&n!==t;)Or(n)&&wc(n[1],n),n=n[3];null===n&&(n=t),Or(n)&&wc(n[1],n),r=n&&n[4]}n=r}}(n)}}function wc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let a=0;a<r.length;a+=2){const d=n[r[a]];if(!(d instanceof Qr)){const g=r[a+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=d[g[b]],F=g[b+1];try{F.call(E)}finally{}}else try{g.call(d)}finally{}}}}(t,n),function(t,n){const r=t.cleanup,a=n[7];let d=-1;if(null!==r)for(let g=0;g<r.length-1;g+=2)if("string"==typeof r[g]){const b=r[g+1],E="function"==typeof b?b(n):pt(n[b]),F=a[d=r[g+2]],Z=r[g+3];"boolean"==typeof Z?E.removeEventListener(r[g],F,Z):Z>=0?a[d=Z]():a[d=-Z].unsubscribe(),g+=2}else{const b=a[d=r[g+1]];r[g].call(b)}if(null!==a){for(let g=d+1;g<a.length;g++)a[g]();n[7]=null}}(t,n),1===n[1].type&&X(n[11])&&n[11].destroy();const r=n[17];if(null!==r&&vr(n[3])){r!==n[3]&&od(r,n);const a=n[19];null!==a&&a.detachView(t)}}}function yp(t,n,r){return function(t,n,r){let a=n;for(;null!==a&&40&a.type;)a=(n=a).parent;if(null===a)return r[0];if(2&a.flags){const d=t.data[a.directiveStart].encapsulation;if(d===Xt.None||d===Xt.Emulated)return null}return qi(a,r)}(t,n.parent,r)}function Cc(t,n,r,a,d){X(t)?t.insertBefore(n,r,a,d):n.insertBefore(r,a,d)}function xp(t,n,r){X(t)?t.appendChild(n,r):n.appendChild(r)}function bp(t,n,r,a,d){null!==a?Cc(t,n,r,a,d):xp(t,n,r)}function ad(t,n){return X(t)?t.parentNode(n):n.parentNode}function wp(t,n,r){return zh(t,n,r)}let zh=function(t,n,r){return 40&t.type?qi(t,r):null};function cd(t,n,r,a){const d=yp(t,a,n),g=n[11],E=wp(a.parent||n[6],a,n);if(null!=d)if(Array.isArray(r))for(let F=0;F<r.length;F++)bp(g,d,r[F],E,!1);else bp(g,d,r,E,!1)}function ud(t,n){if(null!==n){const r=n.type;if(3&r)return qi(n,t);if(4&r)return dd(-1,t[n.index]);if(8&r){const a=n.child;if(null!==a)return ud(t,a);{const d=t[n.index];return vr(d)?dd(-1,d):pt(d)}}if(32&r)return fu(n,t)()||pt(t[n.index]);{const a=Ep(t,n);return null!==a?Array.isArray(a)?a[0]:ud(pu(t[q]),a):ud(t,n.next)}}return null}function Ep(t,n){return null!==n?t[q][6].projection[n.projection]:null}function dd(t,n){const r=10+t+1;if(r<n.length){const a=n[r],d=a[1].firstChild;if(null!==d)return ud(a,d)}return n[7]}function js(t,n,r,a,d,g,b){for(;null!=r;){const E=a[r.index],F=r.type;if(b&&0===n&&(E&&No(pt(E),a),r.flags|=4),64!=(64&r.flags))if(8&F)js(t,n,r.child,a,d,g,!1),qc(n,t,d,E,g);else if(32&F){const Z=fu(r,a);let fe;for(;fe=Z();)qc(n,t,d,fe,g);qc(n,t,d,E,g)}else 16&F?_u(t,n,a,r,d,g):qc(n,t,d,E,g);r=b?r.projectionNext:r.next}}function ha(t,n,r,a,d,g){js(r,a,t.firstChild,n,d,g,!1)}function _u(t,n,r,a,d,g){const b=r[q],F=b[6].projection[a.projection];if(Array.isArray(F))for(let Z=0;Z<F.length;Z++)qc(n,t,d,F[Z],g);else js(t,n,F,b[3],d,g,!0)}function Dp(t,n,r){X(t)?t.setAttribute(n,"style",r):n.style.cssText=r}function Ec(t,n,r){X(t)?""===r?t.removeAttribute(n,"class"):t.setAttribute(n,"class",r):n.className=r}function Sp(t,n,r){let a=t.length;for(;;){const d=t.indexOf(n,r);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=n.length;if(d+g===a||t.charCodeAt(d+g)<=32)return d}r=d+1}}const Uh="ng-template";function Mp(t,n,r){let a=0;for(;a<t.length;){let d=t[a++];if(r&&"class"===d){if(d=t[a],-1!==Sp(d.toLowerCase(),n,0))return!0}else if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===n)return!0;return!1}}return!1}function Yc(t){return 4===t.type&&t.value!==Uh}function jr(t,n,r){return n===(4!==t.type||r?t.value:Uh)}function jh(t,n,r){let a=4;const d=t.attrs||[],g=function(t){for(let n=0;n<t.length;n++)if(_l(t[n]))return n;return t.length}(d);let b=!1;for(let E=0;E<n.length;E++){const F=n[E];if("number"!=typeof F){if(!b)if(4&a){if(a=2|1&a,""!==F&&!jr(t,F,r)||""===F&&1===n.length){if(za(a))return!1;b=!0}}else{const Z=8&a?F:n[++E];if(8&a&&null!==t.attrs){if(!Mp(t.attrs,Z,r)){if(za(a))return!1;b=!0}continue}const Fe=Tp(8&a?"class":F,d,Yc(t),r);if(-1===Fe){if(za(a))return!1;b=!0;continue}if(""!==Z){let Ve;Ve=Fe>g?"":d[Fe+1].toLowerCase();const yt=8&a?Ve:null;if(yt&&-1!==Sp(yt,Z,0)||2&a&&Z!==Ve){if(za(a))return!1;b=!0}}}}else{if(!b&&!za(a)&&!za(F))return!1;if(b&&za(F))continue;b=!1,a=F|1&a}}return za(a)||b}function za(t){return 0==(1&t)}function Tp(t,n,r,a){if(null===n)return-1;let d=0;if(a||!r){let g=!1;for(;d<n.length;){const b=n[d];if(b===t)return d;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=n[++d];for(;"string"==typeof E;)E=n[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=g?1:2}return-1}return function(t,n){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const a=t[r];if("number"==typeof a)return-1;if(a===n)return r;r++}return-1}(n,t)}function ol(t,n,r=!1){for(let a=0;a<n.length;a++)if(jh(t,n[a],r))return!0;return!1}function pg(t,n){e:for(let r=0;r<n.length;r++){const a=n[r];if(t.length===a.length){for(let d=0;d<t.length;d++)if(t[d]!==a[d])continue e;return!0}}return!1}function Pp(t,n){return t?":not("+n.trim()+")":n}function mg(t){let n=t[0],r=1,a=2,d="",g=!1;for(;r<t.length;){let b=t[r];if("string"==typeof b)if(2&a){const E=t[++r];d+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!za(b)&&(n+=Pp(g,d),d=""),a=b,g=g||!za(a);r++}return""!==d&&(n+=Pp(g,d)),n}const ur={};function Fp(t){Rp(gr(),Pn(),Kr()+t,ge())}function Rp(t,n,r,a){if(!a)if(3==(3&n[2])){const g=t.preOrderCheckHooks;null!==g&&Ys(n,g,r)}else{const g=t.preOrderHooks;null!==g&&Br(n,g,0,r)}lo(r)}function Ac(t,n){return t<<17|n<<2}function zo(t){return t>>17&32767}function $h(t){return 2|t}function Tl(t){return(131068&t)>>2}function yu(t,n){return-131069&t|n<<2}function fd(t){return 1|t}function zp(t,n){const r=t.contentQueries;if(null!==r)for(let a=0;a<r.length;a+=2){const d=r[a],g=r[a+1];if(-1!==g){const b=t.data[g];Yr(d),b.contentQueries(2,n[g],g)}}}function wu(t,n,r,a,d,g,b,E,F,Z){const fe=n.blueprint.slice();return fe[0]=d,fe[2]=140|a,ao(fe),fe[3]=fe[15]=t,fe[8]=r,fe[10]=b||t&&t[10],fe[11]=E||t&&t[11],fe[12]=F||t&&t[12]||null,fe[9]=Z||t&&t[9]||null,fe[6]=g,fe[q]=2==n.type?t[q]:fe,fe}function Sc(t,n,r,a,d){let g=t.data[n];if(null===g)g=function(t,n,r,a,d){const g=gl(),b=ye(),F=t.data[n]=function(t,n,r,a,d,g){return{type:r,index:a,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,r,n,a,d);return null===t.firstChild&&(t.firstChild=F),null!==g&&(b?null==g.child&&null!==F.parent&&(g.child=F):null===g.next&&(g.next=F)),F}(t,n,r,a,d),Oi.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=r,g.value=a,g.attrs=d;const b=function(){const t=Oi.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return zs(g,!0),g}function ec(t,n,r,a){if(0===r)return-1;const d=n.length;for(let g=0;g<r;g++)n.push(a),t.blueprint.push(a),t.data.push(null);return d}function Cu(t,n,r){no(n);try{const a=t.viewQuery;null!==a&&Td(1,a,r);const d=t.template;null!==d&&Xh(t,n,d,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&zp(t,n),t.staticViewQueries&&Td(2,t.viewQuery,r);const g=t.components;null!==g&&function(t,n){for(let r=0;r<n.length;r++)Xp(t,n[r])}(n,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{n[2]&=-5,hs()}}function xa(t,n,r,a){const d=n[2];if(256==(256&d))return;no(n);const g=ge();try{ao(n),function(t){Oi.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&Xh(t,n,r,2,a);const b=3==(3&d);if(!g)if(b){const Z=t.preOrderCheckHooks;null!==Z&&Ys(n,Z,null)}else{const Z=t.preOrderHooks;null!==Z&&Br(n,Z,0,null),Wo(n,0)}if(function(t){for(let n=Ih(t);null!==n;n=Ph(n)){if(!n[2])continue;const r=n[9];for(let a=0;a<r.length;a++){const d=r[a],g=d[3];0==(1024&d[2])&&ws(g,1),d[2]|=1024}}}(n),function(t){for(let n=Ih(t);null!==n;n=Ph(n))for(let r=10;r<n.length;r++){const a=n[r],d=a[1];ss(a)&&xa(d,a,d.template,a[8])}}(n),null!==t.contentQueries&&zp(t,n),!g)if(b){const Z=t.contentCheckHooks;null!==Z&&Ys(n,Z)}else{const Z=t.contentHooks;null!==Z&&Br(n,Z,1),Wo(n,1)}!function(t,n){const r=t.hostBindingOpCodes;if(null!==r)try{for(let a=0;a<r.length;a++){const d=r[a];if(d<0)lo(~d);else{const g=d,b=r[++a],E=r[++a];_r(b,g),E(2,n[g])}}}finally{lo(-1)}}(t,n);const E=t.components;null!==E&&function(t,n){for(let r=0;r<n.length;r++)Qp(t,n[r])}(n,E);const F=t.viewQuery;if(null!==F&&Td(2,F,a),!g)if(b){const Z=t.viewCheckHooks;null!==Z&&Ys(n,Z)}else{const Z=t.viewHooks;null!==Z&&Br(n,Z,2),Wo(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),g||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,ws(n[3],-1))}finally{hs()}}function Vp(t,n,r,a){const d=n[10],g=!ge(),b=tr(n);try{g&&!b&&d.begin&&d.begin(),b&&Cu(t,n,a),xa(t,n,r,a)}finally{g&&!b&&d.end&&d.end()}}function Xh(t,n,r,a,d){const g=Kr(),b=2&a;try{lo(-1),b&&n.length>20&&Rp(t,n,20,ge()),r(a,d)}finally{lo(g)}}function Au(t,n,r){!Xa()||(function(t,n,r,a){const d=r.directiveStart,g=r.directiveEnd;t.firstCreatePass||tl(r,n),No(a,n);const b=r.initialInputs;for(let E=d;E<g;E++){const F=t.data[E],Z=it(F);Z&&sf(n,r,F);const fe=P(n,t,E,r);No(fe,n),null!==b&&eu(0,E-d,fe,F,0,b),Z&&(br(r.index,n)[8]=fe)}}(t,n,r,qi(r,n)),128==(128&r.flags)&&function(t,n,r){const a=r.directiveStart,d=r.directiveEnd,b=r.index,E=Oi.lFrame.currentDirectiveIndex;try{lo(b);for(let F=a;F<d;F++){const Z=t.data[F],fe=n[F];Gi(F),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&nc(Z,fe)}}finally{lo(-1),Gi(E)}}(t,n,r))}function Jh(t,n,r=qi){const a=n.localNames;if(null!==a){let d=n.index+1;for(let g=0;g<a.length;g+=2){const b=a[g+1],E=-1===b?r(n,t):t[b];t[d++]=E}}}function Up(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=yd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function yd(t,n,r,a,d,g,b,E,F,Z){const fe=20+a,Fe=fe+d,Ve=function(t,n){const r=[];for(let a=0;a<n;a++)r.push(a<t?null:ur);return r}(fe,Fe),yt="function"==typeof Z?Z():Z;return Ve[1]={type:t,blueprint:Ve,template:r,queries:null,viewQuery:E,declTNode:n,data:Ve.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:F,consts:yt,incompleteFirstPass:!1}}function wd(t,n,r,a){const d=cf(n);null===r?d.push(a):(d.push(r),t.firstCreatePass&&uf(t).push(a,d.length-1))}function jp(t,n,r){for(let a in t)if(t.hasOwnProperty(a)){const d=t[a];(r=null===r?{}:r).hasOwnProperty(a)?r[a].push(n,d):r[a]=[n,d]}return r}function Vo(t,n,r,a,d,g,b,E){const F=qi(n,r);let fe,Z=n.inputs;!E&&null!=Z&&(fe=Z[a])?(Mu(t,r,fe,a,d),ts(n)&&function(t,n){const r=br(n,t);16&r[2]||(r[2]|=64)}(r,n.index)):3&n.type&&(a=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=b?b(d,n.value||"",a):d,X(g)?g.setProperty(F,a,d):Fs(a)||(F.setProperty?F.setProperty(a,d):F[a]=d))}function Ed(t,n,r,a){let d=!1;if(Xa()){const g=function(t,n,r){const a=t.directiveRegistry;let d=null;if(a)for(let g=0;g<a.length;g++){const b=a[g];ol(r,b.selectors,!1)&&(d||(d=[]),wl(tl(r,n),t,b.type),it(b)?(ys(t,r),d.unshift(b)):d.push(b))}return d}(t,n,r),b=null===a?null:{"":-1};if(null!==g){d=!0,nf(r,t.data.length,g.length);for(let fe=0;fe<g.length;fe++){const Fe=g[fe];Fe.providersResolver&&Fe.providersResolver(Fe)}let E=!1,F=!1,Z=ec(t,n,g.length,null);for(let fe=0;fe<g.length;fe++){const Fe=g[fe];r.mergedAttrs=yl(r.mergedAttrs,Fe.hostAttrs),rf(t,r,n,Z,Fe),Wp(Z,Fe,b),null!==Fe.contentQueries&&(r.flags|=8),(null!==Fe.hostBindings||null!==Fe.hostAttrs||0!==Fe.hostVars)&&(r.flags|=128);const Ve=Fe.type.prototype;!E&&(Ve.ngOnChanges||Ve.ngOnInit||Ve.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),E=!0),!F&&(Ve.ngOnChanges||Ve.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),F=!0),Z++}!function(t,n){const a=n.directiveEnd,d=t.data,g=n.attrs,b=[];let E=null,F=null;for(let Z=n.directiveStart;Z<a;Z++){const fe=d[Z],Fe=fe.inputs,Ve=null===g||Yc(n)?null:af(Fe,g);b.push(Ve),E=jp(Fe,Z,E),F=jp(fe.outputs,Z,F)}null!==E&&(E.hasOwnProperty("class")&&(n.flags|=16),E.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=b,n.inputs=E,n.outputs=F}(t,r)}b&&function(t,n,r){if(n){const a=t.localNames=[];for(let d=0;d<n.length;d+=2){const g=r[n[d+1]];if(null==g)throw new Dt("301",`Export of name '${n[d+1]}' not found!`);a.push(n[d],g)}}}(r,a,b)}return r.mergedAttrs=yl(r.mergedAttrs,r.attrs),d}function tf(t,n,r,a,d,g){const b=g.hostBindings;if(b){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const F=~n.index;(function(t){let n=t.length;for(;n>0;){const r=t[--n];if("number"==typeof r&&r<0)return r}return 0})(E)!=F&&E.push(F),E.push(a,d,b)}}function nc(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function ys(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Wp(t,n,r){if(r){if(n.exportAs)for(let a=0;a<n.exportAs.length;a++)r[n.exportAs[a]]=t;it(n)&&(r[""]=t)}}function nf(t,n,r){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+r,t.providerIndexes=n}function rf(t,n,r,a,d){t.data[a]=d;const g=d.factory||(d.factory=so(d.type)),b=new Qr(g,it(d),null);t.blueprint[a]=b,r[a]=b,tf(t,n,0,a,ec(t,r,d.hostVars,ur),d)}function sf(t,n,r){const a=qi(n,t),d=Up(r),g=t[10],b=ic(t,wu(t,d,null,r.onPush?64:16,a,n,g,g.createRenderer(a,r),null,null));t[n.index]=b}function ba(t,n,r,a,d,g){const b=qi(t,n);!function(t,n,r,a,d,g,b){if(null==g)X(t)?t.removeAttribute(n,d,r):n.removeAttribute(d);else{const E=null==b?Kt(g):b(g,a||"",d);X(t)?t.setAttribute(n,d,E,r):r?n.setAttributeNS(r,d,E):n.setAttribute(d,E)}}(n[11],b,g,t.value,r,a,d)}function eu(t,n,r,a,d,g){const b=g[n];if(null!==b){const E=a.setInput;for(let F=0;F<b.length;){const Z=b[F++],fe=b[F++],Fe=b[F++];null!==E?a.setInput(r,Fe,Z,fe):r[fe]=Fe}}}function af(t,n){let r=null,a=0;for(;a<n.length;){const d=n[a];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===r&&(r=[]),r.push(d,t[d],n[a+1])),a+=2}else a+=2;else a+=4}return r}function Yp(t,n,r,a){return new Array(t,!0,!1,n,null,0,a,r,null,null)}function Qp(t,n){const r=br(n,t);if(ss(r)){const a=r[1];80&r[2]?xa(a,r,a.template,r[8]):r[5]>0&&Su(r)}}function Su(t){for(let a=Ih(t);null!==a;a=Ph(a))for(let d=10;d<a.length;d++){const g=a[d];if(1024&g[2]){const b=g[1];xa(b,g,b.template,g[8])}else g[5]>0&&Su(g)}const r=t[1].components;if(null!==r)for(let a=0;a<r.length;a++){const d=br(r[a],t);ss(d)&&d[5]>0&&Su(d)}}function Xp(t,n){const r=br(n,t),a=r[1];(function(t,n){for(let r=n.length;r<t.blueprint.length;r++)n.push(t.blueprint[r])})(a,r),Cu(a,r,r[8])}function ic(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Sd(t){for(;t;){t[2]|=64;const n=pu(t);if(se(t)&&!n)return t;t=n}return null}function Md(t,n,r){const a=n[10];a.begin&&a.begin();try{xa(t,n,t.template,r)}catch(d){throw df(n,d),d}finally{a.end&&a.end()}}function em(t){!function(t){for(let n=0;n<t.components.length;n++){const r=t.components[n],a=Ju(r),d=a[1];Vp(d,a,d.template,r)}}(t[8])}function Td(t,n,r){Yr(0),n(t,r)}const im=(()=>Promise.resolve(null))();function cf(t){return t[7]||(t[7]=[])}function uf(t){return t.cleanup||(t.cleanup=[])}function Il(t,n,r){return(null===t||it(t))&&(r=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(r[n.index])),r[11]}function df(t,n){const r=t[9],a=r?r.get($c,null):null;a&&a.handleError(n)}function Mu(t,n,r,a,d){for(let g=0;g<r.length;){const b=r[g++],E=r[g++],F=n[b],Z=t.data[b];null!==Z.setInput?Z.setInput(F,d,a,E):F[E]=d}}function Pl(t,n,r){const a=Ci(n,t);!function(t,n,r){X(t)?t.setValue(n,r):n.textContent=r}(t[11],a,r)}function Fl(t,n,r){let a=r?t.styles:null,d=r?t.classes:null,g=0;if(null!==n)for(let b=0;b<n.length;b++){const E=n[b];"number"==typeof E?g=E:1==g?d=xe(d,E):2==g&&(a=xe(a,E+": "+n[++b]+";"))}r?t.styles=a:t.stylesWithoutHost=a,r?t.classes=d:t.classesWithoutHost=d}const rc=new Xr("INJECTOR",-1);class Id{get(n,r=Si){if(r===Si){const a=new Error(`NullInjectorError: No provider for ${ve(n)}!`);throw a.name="NullInjectorError",a}return r}}const ea=new Xr("Set Injector scope."),Ya={},rm={};let Pd;function Tu(){return void 0===Pd&&(Pd=new Id),Pd}function pf(t,n=null,r=null,a){return new kg(t,r,n||Tu(),a)}class kg{constructor(n,r,a,d=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];r&&te(r,E=>this.processProvider(E,n,r)),te([n],E=>this.processInjectorType(E,[],g)),this.records.set(rc,Mc(void 0,this));const b=this.records.get(ea);this.scope=null!=b?b.value:null,this.source=d||("object"==typeof n?null:ve(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,r=Si,a=ei.Default){this.assertNotDestroyed();const d=ro(this),g=at(void 0);try{if(!(a&ei.SkipSelf)){let E=this.records.get(n);if(void 0===E){const F=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Xr)&&Bn(n);E=F&&this.injectableDefInScope(F)?Mc(Fd(n),Ya):null,this.records.set(n,E)}if(null!=E)return this.hydrate(n,E)}return(a&ei.Self?Tu():this.parent).get(n,r=a&ei.Optional&&r===Si?null:r)}catch(b){if("NullInjectorError"===b.name){if((b[Ir]=b[Ir]||[]).unshift(ve(n)),d)throw b;return ko(b,n,"R3InjectorError",this.source)}throw b}finally{at(g),ro(d)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((a,d)=>n.push(ve(d))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,r,a){if(!(n=st(n)))return!1;let d=ki(n);const g=null==d&&n.ngModule||void 0,b=void 0===g?n:g,E=-1!==a.indexOf(b);if(void 0!==g&&(d=ki(g)),null==d)return!1;if(null!=d.imports&&!E){let fe;a.push(b);try{te(d.imports,Fe=>{this.processInjectorType(Fe,r,a)&&(void 0===fe&&(fe=[]),fe.push(Fe))})}finally{}if(void 0!==fe)for(let Fe=0;Fe<fe.length;Fe++){const{ngModule:Ve,providers:yt}=fe[Fe];te(yt,Tt=>this.processProvider(Tt,Ve,yt||ke))}}this.injectorDefTypes.add(b);const F=so(b)||(()=>new b);this.records.set(b,Mc(F,Ya));const Z=d.providers;if(null!=Z&&!E){const fe=n;te(Z,Fe=>this.processProvider(Fe,fe,Z))}return void 0!==g&&void 0!==n.providers}processProvider(n,r,a){let d=l(n=st(n))?n:st(n&&n.provide);const g=s(t=n)?Mc(void 0,t.useValue):Mc(gf(t),Ya);var t;if(l(n)||!0!==n.multi)this.records.get(d);else{let b=this.records.get(d);b||(b=Mc(void 0,Ya,!0),b.factory=()=>qr(b.multi),this.records.set(d,b)),d=n,b.multi.push(n)}this.records.set(d,g)}hydrate(n,r){return r.value===Ya&&(r.value=rm,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(t=r.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const r=st(n.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function Fd(t){const n=Bn(t),r=null!==n?n.factory:so(t);if(null!==r)return r;if(t instanceof Xr)throw new Error(`Token ${ve(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const a=we(n,"?");throw new Error(`Can't resolve all parameters for ${ve(t)}: (${a.join(", ")}).`)}const r=function(t){const n=t&&(t[Mi]||t[er]);if(n){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),n}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function gf(t,n,r){let a;if(l(t)){const d=st(t);return so(d)||Fd(d)}if(s(t))a=()=>st(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...qr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))a=()=>ar(st(t.useExisting));else{const d=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return so(d)||Fd(d);a=()=>new d(...qr(t.deps))}return a}function Mc(t,n,r=!1){return{factory:t,value:n,multi:r?[]:void 0}}function s(t){return null!==t&&"object"==typeof t&&wo in t}function l(t){return"function"==typeof t}const V=function(t,n,r){return function(t,n=null,r=null,a){const d=pf(t,n,r,a);return d._resolveInjectorDefTypes(),d}({name:r},n,t,r)};class H{static create(n,r){return Array.isArray(n)?V(n,r,""):V(n.providers,n.parent,n.name||"")}}function wa(t,n){as(Ju(t)[1],ns())}function ms(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const a=[t];for(;n;){let d;if(it(t))d=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");d=n.\u0275dir}if(d){if(r){a.push(d);const b=t;b.inputs=Uo(t.inputs),b.declaredInputs=Uo(t.declaredInputs),b.outputs=Uo(t.outputs);const E=d.hostBindings;E&&sc(t,E);const F=d.viewQuery,Z=d.contentQueries;if(F&&ll(t,F),Z&&Ka(t,Z),_(t.inputs,d.inputs),_(t.declaredInputs,d.declaredInputs),_(t.outputs,d.outputs),it(d)&&d.data.animation){const fe=t.data;fe.animation=(fe.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(t),E===ms&&(r=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,r=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=n+=d.hostVars,d.hostAttrs=yl(d.hostAttrs,r=yl(r,d.hostAttrs))}}(a)}function Uo(t){return t===pe?{}:t===ke?[]:t}function ll(t,n){const r=t.viewQuery;t.viewQuery=r?(a,d)=>{n(a,d),r(a,d)}:n}function Ka(t,n){const r=t.contentQueries;t.contentQueries=r?(a,d,g)=>{n(a,d,g),r(a,d,g)}:n}function sc(t,n){const r=t.hostBindings;t.hostBindings=r?(a,d)=>{n(a,d),r(a,d)}:n}H.THROW_IF_NOT_FOUND=Si,H.NULL=new Id,H.\u0275prov=tn({token:H,providedIn:"any",factory:()=>ar(rc)}),H.__NG_ELEMENT_ID__=-1;let dl=null;function go(){if(!dl){const t=Kn.Symbol;if(t&&t.iterator)dl=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<n.length;++r){const a=n[r];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(dl=a)}}}return dl}class Ca{constructor(n){this.wrapped=n}static wrap(n){return new Ca(n)}static unwrap(n){return Ca.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof Ca}}function Tc(t){return!!Rd(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function Rd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ls(t,n,r){return t[n]=r}function Xs(t,n,r){return!Object.is(t[n],r)&&(t[n]=r,!0)}function kl(t,n,r,a){const d=Xs(t,n,r);return Xs(t,n+1,a)||d}function Bg(t,n,r,a){const d=Pn();return Xs(d,hn(),n)&&(gr(),ba(Tr(),d,t,n,r,a)),Bg}function Ly(t,n,r,a,d,g,b,E){const F=Pn(),Z=gr(),fe=t+20,Fe=Z.firstCreatePass?function(t,n,r,a,d,g,b,E,F){const Z=n.consts,fe=Sc(n,t,4,b||null,os(Z,E));Ed(n,r,fe,os(Z,F)),as(n,fe);const Fe=fe.tViews=yd(2,fe,a,d,g,n.directiveRegistry,n.pipeRegistry,null,n.schemas,Z);return null!==n.queries&&(n.queries.template(n,fe),Fe.queries=n.queries.embeddedTView(fe)),fe}(fe,Z,F,n,r,a,d,g,b):Z.data[fe];zs(Fe,!1);const Ve=F[11].createComment("");cd(Z,F,Ve,Fe),No(Ve,F),ic(F,F[fe]=Yp(Ve,F,Ve,Fe)),Ne(Fe)&&Au(Z,F,Fe),null!=b&&Jh(F,Fe,E)}function yf(t,n=ei.Default){const r=Pn();return null===r?ar(t,n):fc(ns(),r,st(t),n)}function Wy(){throw new Error("invalid")}function jg(t,n,r){const a=Pn();return Xs(a,hn(),n)&&Vo(gr(),Tr(),a,t,n,a[11],r,!1),jg}function Gg(t,n,r,a,d){const b=d?"class":"style";Mu(t,r,n.inputs[b],b,a)}function $g(t,n,r,a){const d=Pn(),g=gr(),b=20+t,E=d[11],F=d[b]=kh(E,n,Oi.lFrame.currentNamespace),Z=g.firstCreatePass?function(t,n,r,a,d,g,b){const E=n.consts,Z=Sc(n,t,2,d,os(E,g));return Ed(n,r,Z,os(E,b)),null!==Z.attrs&&Fl(Z,Z.attrs,!1),null!==Z.mergedAttrs&&Fl(Z,Z.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,Z),Z}(b,g,d,0,n,r,a):g.data[b];zs(Z,!0);const fe=Z.mergedAttrs;null!==fe&&el(E,F,fe);const Fe=Z.classes;null!==Fe&&Ec(E,F,Fe);const Ve=Z.styles;null!==Ve&&Dp(E,F,Ve),64!=(64&Z.flags)&&cd(g,d,F,Z),0===Oi.lFrame.elementDepthCount&&No(F,d),Oi.lFrame.elementDepthCount++,Ne(Z)&&(Au(g,d,Z),function(t,n,r){if(wr(n)){const d=n.directiveEnd;for(let g=n.directiveStart;g<d;g++){const b=t.data[g];b.contentQueries&&b.contentQueries(1,r[g],g)}}}(g,Z,d)),null!==a&&Jh(d,Z)}function Hg(){let t=ns();ye()?A():(t=t.parent,zs(t,!1));const n=t;Oi.lFrame.elementDepthCount--;const r=gr();r.firstCreatePass&&(as(r,t),wr(t)&&r.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Gg(r,n,Pn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Gg(r,n,Pn(),n.stylesWithoutHost,!1)}function Yy(t,n,r,a){$g(t,n,r,a),Hg()}function Xy(){return Pn()}function Zg(t){return!!t&&"function"==typeof t.then}function Jy(t){return!!t&&"function"==typeof t.subscribe}const qg=Jy;function Wg(t,n,r,a){const d=Pn(),g=gr(),b=ns();return ev(g,d,d[11],b,t,n,!!r,a),Wg}function Yg(t,n){const r=ns(),a=Pn(),d=gr();return ev(d,a,Il(sr(d.data),r,a),r,t,n,!1),Yg}function ev(t,n,r,a,d,g,b,E){const F=Ne(a),fe=t.firstCreatePass&&uf(t),Fe=n[8],Ve=cf(n);let yt=!0;if(3&a.type||E){const Zt=qi(a,n),Yn=E?E(Zt):Zt,wn=Ve.length,Li=E?rr=>E(pt(rr[a.index])):a.index;if(X(r)){let rr=null;if(!E&&F&&(rr=function(t,n,r,a){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const b=d[g];if(b===r&&d[g+1]===a){const E=n[7],F=d[g+2];return E.length>F?E[F]:null}"string"==typeof b&&(g+=2)}return null}(t,n,d,a.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=g,rr.__ngLastListenerFn__=g,yt=!1;else{g=Kg(a,n,Fe,g,!1);const Pr=r.listen(Yn,d,g);Ve.push(g,Pr),fe&&fe.push(d,Li,wn,wn+1)}}else g=Kg(a,n,Fe,g,!0),Yn.addEventListener(d,g,b),Ve.push(g),fe&&fe.push(d,Li,wn,b)}else g=Kg(a,n,Fe,g,!1);const Tt=a.outputs;let on;if(yt&&null!==Tt&&(on=Tt[d])){const Zt=on.length;if(Zt)for(let Yn=0;Yn<Zt;Yn+=2){const Ao=n[on[Yn]][on[Yn+1]].subscribe(g),pl=Ve.length;Ve.push(g,Ao),fe&&fe.push(d,a.index,pl,-(pl+1))}}}function tv(t,n,r,a){try{return!1!==r(a)}catch(d){return df(t,d),!1}}function Kg(t,n,r,a,d){return function g(b){if(b===Function)return a;const E=2&t.flags?br(t.index,n):n;0==(32&n[2])&&Sd(E);let F=tv(n,0,a,b),Z=g.__ngNextListenerFn__;for(;Z;)F=tv(n,0,Z,b)&&F,Z=Z.__ngNextListenerFn__;return d&&!1===F&&(b.preventDefault(),b.returnValue=!1),F}}function nv(t=1){return function(t){return(Oi.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Oi.lFrame.contextLView))[8]}(t)}function cw(t,n){let r=null;const a=function(t){const n=t.attrs;if(null!=n){const r=n.indexOf(5);if(0==(1&r))return n[r+1]}return null}(t);for(let d=0;d<n.length;d++){const g=n[d];if("*"!==g){if(null===a?ol(t,g,!0):pg(a,g))return d}else r=d}return r}function iv(t){const n=Pn()[q][6];if(!n.projection){const a=n.projection=we(t?t.length:1,null),d=a.slice();let g=n.child;for(;null!==g;){const b=t?cw(g,t):0;null!==b&&(d[b]?d[b].projectionNext=g:a[b]=g,d[b]=g),g=g.next}}}function rv(t,n=0,r){const a=Pn(),d=gr(),g=Sc(d,20+t,16,null,r||null);null===g.projection&&(g.projection=n),A(),64!=(64&g.flags)&&function(t,n,r){_u(n[11],0,n,r,yp(t,r,n),wp(r.parent||n[6],r,n))}(d,a,g)}function pv(t,n,r,a,d){const g=t[r+1],b=null===n;let E=a?zo(g):Tl(g),F=!1;for(;0!==E&&(!1===F||b);){const fe=t[E+1];hw(t[E],n)&&(F=!0,t[E+1]=a?fd(fe):$h(fe)),E=a?zo(fe):Tl(fe)}F&&(t[r+1]=a?$h(g):fd(g))}function hw(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Je(t,n)>=0}function Xg(t,n,r){return Ll(t,n,r,!1),Xg}function Jg(t,n){return Ll(t,n,null,!0),Jg}function Ll(t,n,r,a){const d=Pn(),g=gr(),b=function(t){const n=Oi.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,r}(2);g.firstUpdatePass&&function(t,n,r,a){const d=t.data;if(null===d[r+1]){const g=d[Kr()],b=function(t,n){return n>=t.expandoStartIndex}(t,r);(function(t,n){return 0!=(t.flags&(n?16:32))})(g,a)&&null===n&&!b&&(n=!1),n=function(t,n,r,a){const d=sr(t);let g=a?n.residualClasses:n.residualStyles;if(null===d)0===(a?n.classBindings:n.styleBindings)&&(r=vf(r=e_(null,t,n,r,a),n.attrs,a),g=null);else{const b=n.directiveStylingLast;if(-1===b||t[b]!==d)if(r=e_(d,t,n,r,a),null===g){let F=function(t,n,r){const a=r?n.classBindings:n.styleBindings;if(0!==Tl(a))return t[zo(a)]}(t,n,a);void 0!==F&&Array.isArray(F)&&(F=e_(null,t,n,F[1],a),F=vf(F,n.attrs,a),function(t,n,r,a){t[zo(r?n.classBindings:n.styleBindings)]=a}(t,n,a,F))}else g=function(t,n,r){let a;const d=n.directiveEnd;for(let g=1+n.directiveStylingLast;g<d;g++)a=vf(a,t[g].hostAttrs,r);return vf(a,n.attrs,r)}(t,n,a)}return void 0!==g&&(a?n.residualClasses=g:n.residualStyles=g),r}(d,g,n,a),function(t,n,r,a,d,g){let b=g?n.classBindings:n.styleBindings,E=zo(b),F=Tl(b);t[a]=r;let fe,Z=!1;if(Array.isArray(r)){const Fe=r;fe=Fe[1],(null===fe||Je(Fe,fe)>0)&&(Z=!0)}else fe=r;if(d)if(0!==F){const Ve=zo(t[E+1]);t[a+1]=Ac(Ve,E),0!==Ve&&(t[Ve+1]=yu(t[Ve+1],a)),t[E+1]=function(t,n){return 131071&t|n<<17}(t[E+1],a)}else t[a+1]=Ac(E,0),0!==E&&(t[E+1]=yu(t[E+1],a)),E=a;else t[a+1]=Ac(F,0),0===E?E=a:t[F+1]=yu(t[F+1],a),F=a;Z&&(t[a+1]=$h(t[a+1])),pv(t,fe,a,!0),pv(t,fe,a,!1),function(t,n,r,a,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof n&&Je(g,n)>=0&&(r[a+1]=fd(r[a+1]))}(n,fe,t,a,g),b=Ac(E,F),g?n.classBindings=b:n.styleBindings=b}(d,g,n,r,b,a)}}(g,t,b,a),n!==ur&&Xs(d,b,n)&&function(t,n,r,a,d,g,b,E){if(!(3&n.type))return;const F=t.data,Z=F[E+1];am(function(t){return 1==(1&t)}(Z)?Av(F,n,r,d,Tl(Z),b):void 0)||(am(g)||function(t){return 2==(2&t)}(Z)&&(g=Av(F,null,r,d,E,b)),function(t,n,r,a,d){const g=X(t);if(n)d?g?t.addClass(r,a):r.classList.add(a):g?t.removeClass(r,a):r.classList.remove(a);else{let b=-1===a.indexOf("-")?void 0:Na.DashCase;if(null==d)g?t.removeStyle(r,a,b):r.style.removeProperty(a);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),b|=Na.Important),g?t.setStyle(r,a,d,b):r.style.setProperty(a,d,E?"important":"")}}}(a,b,Ci(Kr(),r),d,g))}(g,g.data[Kr()],d,d[11],t,d[b+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ve(Sl(t)))),t}(n,r),a,b)}function e_(t,n,r,a,d){let g=null;const b=r.directiveEnd;let E=r.directiveStylingLast;for(-1===E?E=r.directiveStart:E++;E<b&&(g=n[E],a=vf(a,g.hostAttrs,d),g!==t);)E++;return null!==t&&(r.directiveStylingLast=E),a}function vf(t,n,r){const a=r?1:2;let d=-1;if(null!==n)for(let g=0;g<n.length;g++){const b=n[g];"number"==typeof b?d=b:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),nt(t,b,!!r||n[++g]))}return void 0===t?null:t}function Av(t,n,r,a,d,g){const b=null===n;let E;for(;d>0;){const F=t[d],Z=Array.isArray(F),fe=Z?F[1]:F,Fe=null===fe;let Ve=r[d+1];Ve===ur&&(Ve=Fe?ke:void 0);let yt=Fe?Ct(Ve,a):fe===a?Ve:void 0;if(Z&&!am(yt)&&(yt=Ct(F,a)),am(yt)&&(E=yt,b))return E;const Tt=t[d+1];d=b?zo(Tt):Tl(Tt)}if(null!==n){let F=g?n.residualClasses:n.residualStyles;null!=F&&(E=Ct(F,a))}return E}function am(t){return void 0!==t}function Sv(t,n=""){const r=Pn(),a=gr(),d=t+20,g=a.firstCreatePass?Sc(a,d,1,n,null):a.data[d],b=r[d]=function(t,n){return X(t)?t.createText(n):t.createTextNode(n)}(r[11],n);cd(a,r,b,g),zs(g,!1)}function t_(t){return lm("",t,""),t_}function lm(t,n,r){const a=Pn(),d=function(t,n,r,a){return Xs(t,hn(),r)?n+Kt(r)+a:ur}(a,t,n,r);return d!==ur&&Pl(a,Kr(),d),lm}function n_(t,n,r){const a=Pn();return Xs(a,hn(),n)&&Vo(gr(),Tr(),a,t,n,a[11],r,!0),n_}function i_(t,n,r){const a=Pn();if(Xs(a,hn(),n)){const g=gr(),b=Tr();Vo(g,b,a,t,n,Il(sr(g.data),b,a),r,!0)}return i_}const Pu=void 0;var qw=["en",[["a","p"],["AM","PM"],Pu],[["AM","PM"],Pu,Pu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pu,"{1} 'at' {0}",Pu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Hd={};function r_(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=Zv(n);if(r)return r;const a=n.split("-")[0];if(r=Zv(a),r)return r;if("en"===a)return qw;throw new Error(`Missing locale data for the locale "${t}".`)}function Hv(t){return r_(t)[Qi.PluralCase]}function Zv(t){return t in Hd||(Hd[t]=Kn.ng&&Kn.ng.common&&Kn.ng.common.locales&&Kn.ng.common.locales[t]),Hd[t]}var Qi=(()=>((Qi=Qi||{})[Qi.LocaleId=0]="LocaleId",Qi[Qi.DayPeriodsFormat=1]="DayPeriodsFormat",Qi[Qi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qi[Qi.DaysFormat=3]="DaysFormat",Qi[Qi.DaysStandalone=4]="DaysStandalone",Qi[Qi.MonthsFormat=5]="MonthsFormat",Qi[Qi.MonthsStandalone=6]="MonthsStandalone",Qi[Qi.Eras=7]="Eras",Qi[Qi.FirstDayOfWeek=8]="FirstDayOfWeek",Qi[Qi.WeekendRange=9]="WeekendRange",Qi[Qi.DateFormat=10]="DateFormat",Qi[Qi.TimeFormat=11]="TimeFormat",Qi[Qi.DateTimeFormat=12]="DateTimeFormat",Qi[Qi.NumberSymbols=13]="NumberSymbols",Qi[Qi.NumberFormats=14]="NumberFormats",Qi[Qi.CurrencyCode=15]="CurrencyCode",Qi[Qi.CurrencySymbol=16]="CurrencySymbol",Qi[Qi.CurrencyName=17]="CurrencyName",Qi[Qi.Currencies=18]="Currencies",Qi[Qi.Directionality=19]="Directionality",Qi[Qi.PluralCase=20]="PluralCase",Qi[Qi.ExtraData=21]="ExtraData",Qi))();const cm="en-US";let qv=cm;function s_(t){rn(t,"Expected localeId to be defined"),"string"==typeof t&&(qv=t.toLowerCase().replace(/_/g,"-"))}function l_(t,n,r,a,d){if(t=st(t),Array.isArray(t))for(let g=0;g<t.length;g++)l_(t[g],n,r,a,d);else{const g=gr(),b=Pn();let E=l(t)?t:st(t.provide),F=gf(t);const Z=ns(),fe=1048575&Z.providerIndexes,Fe=Z.directiveStart,Ve=Z.providerIndexes>>20;if(l(t)||!t.multi){const yt=new Qr(F,d,yf),Tt=u_(E,n,d?fe:fe+Ve,Fe);-1===Tt?(wl(tl(Z,b),g,E),c_(g,t,n.length),n.push(E),Z.directiveStart++,Z.directiveEnd++,d&&(Z.providerIndexes+=1048576),r.push(yt),b.push(yt)):(r[Tt]=yt,b[Tt]=yt)}else{const yt=u_(E,n,fe+Ve,Fe),Tt=u_(E,n,fe,fe+Ve),on=yt>=0&&r[yt],Zt=Tt>=0&&r[Tt];if(d&&!Zt||!d&&!on){wl(tl(Z,b),g,E);const Yn=function(t,n,r,a,d){const g=new Qr(t,r,yf);return g.multi=[],g.index=n,g.componentProviders=0,_x(g,d,a&&!r),g}(d?$1:G1,r.length,d,a,F);!d&&Zt&&(r[Tt].providerFactory=Yn),c_(g,t,n.length,0),n.push(E),Z.directiveStart++,Z.directiveEnd++,d&&(Z.providerIndexes+=1048576),r.push(Yn),b.push(Yn)}else c_(g,t,yt>-1?yt:Tt,_x(r[d?Tt:yt],F,!d&&a));!d&&a&&Zt&&r[Tt].componentProviders++}}}function c_(t,n,r,a){const d=l(n);if(d||function(t){return!!t.useClass}(n)){const b=(n.useClass||n).prototype.ngOnDestroy;if(b){const E=t.destroyHooks||(t.destroyHooks=[]);if(!d&&n.multi){const F=E.indexOf(r);-1===F?E.push(r,[a,b]):E[F+1].push(a,b)}else E.push(r,b)}}}function _x(t,n,r){return r&&t.componentProviders++,t.multi.push(n)-1}function u_(t,n,r,a){for(let d=r;d<a;d++)if(n[d]===t)return d;return-1}function G1(t,n,r,a){return d_(this.multi,[])}function $1(t,n,r,a){const d=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=P(r,r[1],this.providerFactory.index,a);g=E.slice(0,b),d_(d,g);for(let F=b;F<E.length;F++)g.push(E[F])}else g=[],d_(d,g);return g}function d_(t,n){for(let r=0;r<t.length;r++)n.push((0,t[r])());return n}function yx(t,n=[]){return r=>{r.providersResolver=(a,d)=>function(t,n,r){const a=gr();if(a.firstCreatePass){const d=it(t);l_(r,a.data,a.blueprint,d,!0),l_(n,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,n)}}class vx{}const bx="ngComponent";class q1{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${ve(t)}. Did you add it to @NgModule.entryComponents?`);return n[bx]=t,n}(n)}}class Fu{}function pm(...t){}function qd(t,n){return new lc(qi(t,n))}Fu.NULL=new q1;const K1=function(){return qd(ns(),Pn())};let lc=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=K1,t})();function wx(t){return t instanceof lc?t.nativeElement:t}class mm{}let Q1=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>J1(),t})();const J1=function(){const t=Pn(),r=br(ns().index,t);return function(t){return t[11]}(Or(r)?r:t)};let f_=(()=>{class t{}return t.\u0275prov=tn({token:t,providedIn:"root",factory:()=>null}),t})();class Cx{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Ex=new Cx("12.2.0");class Ax{constructor(){}supports(n){return Tc(n)}create(n){return new iC(n)}}const nC=(t,n)=>n;class iC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||nC}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,a=this._removalsHead,d=0,g=null;for(;r||a;){const b=!a||r&&r.currentIndex<Sx(a,d,g)?r:a,E=Sx(b,d,g),F=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(r=r._next,null==b.previousIndex)d++;else{g||(g=[]);const Z=E-d,fe=F-d;if(Z!=fe){for(let Ve=0;Ve<Z;Ve++){const yt=Ve<g.length?g[Ve]:g[Ve]=0,Tt=yt+Ve;fe<=Tt&&Tt<Z&&(g[Ve]=yt+1)}g[b.previousIndex]=fe-Z}}E!==F&&n(b,E,F)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!Tc(n))throw new Error(`Error trying to diff '${ve(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let d,g,b,r=this._itHead,a=!1;if(Array.isArray(n)){this.length=n.length;for(let E=0;E<this.length;E++)g=n[E],b=this._trackByFn(E,g),null!==r&&Object.is(r.trackById,b)?(a&&(r=this._verifyReinsertion(r,g,b,E)),Object.is(r.item,g)||this._addIdentityChange(r,g)):(r=this._mismatch(r,g,b,E),a=!0),r=r._next}else d=0,function(t,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)n(t[r]);else{const r=t[go()]();let a;for(;!(a=r.next()).done;)n(a.value)}}(n,E=>{b=this._trackByFn(d,E),null!==r&&Object.is(r.trackById,b)?(a&&(r=this._verifyReinsertion(r,E,b,d)),Object.is(r.item,E)||this._addIdentityChange(r,E)):(r=this._mismatch(r,E,b,d),a=!0),r=r._next,d++}),this.length=d;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,a,d){let g;return null===n?g=this._itTail:(g=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,g,d)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,g,d)):n=this._addAfter(new rC(r,a),g,d),n}_verifyReinsertion(n,r,a,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?n=this._reinsertAfter(g,n._prev,d):n.currentIndex!=d&&(n.currentIndex=d,this._addToMoves(n,d)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const d=n._prevRemoved,g=n._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(n,r,a),this._addToMoves(n,a),n}_moveAfter(n,r,a){return this._unlink(n),this._insertAfter(n,r,a),this._addToMoves(n,a),n}_addAfter(n,r,a){return this._insertAfter(n,r,a),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,a){const d=null===r?this._itHead:r._next;return n._next=d,n._prev=r,null===d?this._itTail=n:d._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new Dx),this._linkedRecords.put(n),n.currentIndex=a,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,a=n._next;return null===r?this._itHead=a:r._next=a,null===a?this._itTail=r:a._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Dx),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class rC{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===r||r<=a.currentIndex)&&Object.is(a.trackById,n))return a;return null}remove(n){const r=n._prevDup,a=n._nextDup;return null===r?this._head=a:r._nextDup=a,null===a?this._tail=r:a._prevDup=r,null===this._head}}class Dx{constructor(){this.map=new Map}put(n){const r=n.trackById;let a=this.map.get(r);a||(a=new sC,this.map.set(r,a)),a.add(n)}get(n,r){const d=this.map.get(n);return d?d.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sx(t,n,r){const a=t.previousIndex;if(null===a)return a;let d=0;return r&&a<r.length&&(d=r[a]),a+n+d}class Mx{constructor(){}supports(n){return n instanceof Map||Rd(n)}create(){return new oC}}class oC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||Rd(n)))throw new Error(`Error trying to diff '${ve(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(a,d)=>{if(r&&r.key===d)this._maybeAddToChanges(r,a),this._appendAfter=r,r=r._next;else{const g=this._getOrCreateRecordForKey(d,a);r=this._insertBeforeOrAppend(r,g)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let a=r;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const a=n._prev;return r._next=n,r._prev=a,n._prev=r,a&&(a._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const d=this._records.get(n);this._maybeAddToChanges(d,r);const g=d._prev,b=d._next;return g&&(g._next=b),b&&(b._prev=g),d._next=null,d._prev=null,d}const a=new aC(n);return this._records.set(n,a),a.currentValue=r,this._addToAdditions(a),a}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(a=>r(n[a],a))}}class aC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tx(){return new gm([new Ax])}let gm=(()=>{class t{constructor(r){this.factories=r}static create(r,a){if(null!=a){const d=a.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:a=>t.create(r,a||Tx()),deps:[[t,new Qo,new ka]]}}find(r){const a=this.factories.find(d=>d.supports(r));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'`)}}return t.\u0275prov=tn({token:t,providedIn:"root",factory:Tx}),t})();function Ix(){return new _m([new Mx])}let _m=(()=>{class t{constructor(r){this.factories=r}static create(r,a){if(a){const d=a.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:a=>t.create(r,a||Ix()),deps:[[t,new Qo,new ka]]}}find(r){const a=this.factories.find(d=>d.supports(r));if(a)return a;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return t.\u0275prov=tn({token:t,providedIn:"root",factory:Ix}),t})();function ym(t,n,r,a,d=!1){for(;null!==r;){const g=n[r.index];if(null!==g&&a.push(pt(g)),vr(g))for(let E=10;E<g.length;E++){const F=g[E],Z=F[1].firstChild;null!==Z&&ym(F[1],F,Z,a)}const b=r.type;if(8&b)ym(t,n,r.child,a);else if(32&b){const E=fu(r,n);let F;for(;F=E();)a.push(F)}else if(16&b){const E=Ep(n,r);if(Array.isArray(E))a.push(...E);else{const F=pu(n[q]);ym(F[1],F,E,a,!0)}}r=d?r.projectionNext:r.next}return a}class Ef{constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,r=n[1];return ym(r,n,r.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(vr(n)){const r=n[8],a=r?r.indexOf(this):-1;a>-1&&(Lh(n,a),_e(r,a))}this._attachedToViewContainer=!1}mp(this._lView[1],this._lView)}onDestroy(n){wd(this._lView[1],this._lView,null,n)}markForCheck(){Sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Md(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,r){Be(!0);try{Md(t,n,r)}finally{Be(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,ha(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class cC extends Ef{constructor(n){super(n),this._view=n}detectChanges(){em(this._view)}checkNoChanges(){!function(t){Be(!0);try{em(t)}finally{Be(!1)}}(this._view)}get context(){return null}}const dC=function(t){return function(t,n,r){if(ts(t)&&!r){const a=br(t.index,n);return new Ef(a,a)}return 47&t.type?new Ef(n[q],n):null}(ns(),Pn(),16==(16&t))};let hC=(()=>{class t{}return t.__NG_ELEMENT_ID__=dC,t})();const mC=[new Mx],_C=new gm([new Ax]),yC=new _m(mC),xC=function(){return vm(ns(),Pn())};let Af=(()=>{class t{}return t.__NG_ELEMENT_ID__=xC,t})();const bC=Af,wC=class extends bC{constructor(n,r,a){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=a}createEmbeddedView(n){const r=this._declarationTContainer.tViews,a=wu(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(a[19]=g.createEmbeddedView(r)),Cu(r,a,n),new Ef(a)}};function vm(t,n){return 4&t.type?new wC(n,t,qd(t,n)):null}class Ru{}class Px{}const AC=function(){return Ox(ns(),Pn())};let xm=(()=>{class t{}return t.__NG_ELEMENT_ID__=AC,t})();const SC=xm,Fx=class extends SC{constructor(n,r,a){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=a}get element(){return qd(this._hostTNode,this._hostLView)}get injector(){return new Te(this._hostTNode,this._hostLView)}get parentInjector(){const n=bl(this._hostTNode,this._hostLView);if(vl(n)){const r=Pa(n,this._hostLView),a=co(n);return new Te(r[1].data[a+8],r)}return new Te(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=Rx(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,r,a){const d=n.createEmbeddedView(r||{});return this.insert(d,a),d}createComponent(n,r,a,d,g){const b=a||this.parentInjector;if(!g&&null==n.ngModule&&b){const F=b.get(Ru,null);F&&(g=F)}const E=n.create(b,d,void 0,g);return this.insert(E.hostView,r),E}insert(n,r){const a=n._lView,d=a[1];if(vr(a[3])){const fe=this.indexOf(n);if(-1!==fe)this.detach(fe);else{const Fe=a[3],Ve=new Fx(Fe,Fe[6],Fe[3]);Ve.detach(Ve.indexOf(n))}}const g=this._adjustIndex(r),b=this._lContainer;!function(t,n,r,a){const d=10+a,g=r.length;a>0&&(r[d-1][4]=n),a<g-10?(n[4]=r[d],he(r,10+a,n)):(r.push(n),n[4]=null),n[3]=r;const b=n[17];null!==b&&r!==b&&function(t,n){const r=t[9];n[q]!==n[3][3][q]&&(t[2]=!0),null===r?t[9]=[n]:r.push(n)}(b,n);const E=n[19];null!==E&&E.insertView(t),n[2]|=128}(d,a,b,g);const E=dd(g,b),F=a[11],Z=ad(F,b[7]);return null!==Z&&function(t,n,r,a,d,g){a[0]=d,a[6]=n,ha(t,a,r,1,d,g)}(d,b[6],F,a,Z,E),n.attachToViewContainerRef(),he(p_(b),g,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=Rx(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),a=Lh(this._lContainer,r);a&&(_e(p_(this._lContainer),r),mp(a[1],a))}detach(n){const r=this._adjustIndex(n,-1),a=Lh(this._lContainer,r);return a&&null!=_e(p_(this._lContainer),r)?new Ef(a):null}_adjustIndex(n,r=0){return null==n?this.length+r:n}};function Rx(t){return t[8]}function p_(t){return t[8]||(t[8]=[])}function Ox(t,n){let r;const a=n[t.index];if(vr(a))r=a;else{let d;if(8&t.type)d=pt(a);else{const g=n[11];d=g.createComment("");const b=qi(t,n);Cc(g,ad(g,b),d,function(t,n){return X(t)?t.nextSibling(n):n.nextSibling}(g,b),!1)}n[t.index]=r=Yp(a,n,d,t),ic(n,r)}return new Fx(r,t,n)}const Qd={};class e0 extends Fu{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=Ee(n);return new n0(r,this.ngModule)}}function t0(t){const n=[];for(let r in t)t.hasOwnProperty(r)&&n.push({propName:t[r],templateName:r});return n}const CE=new Xr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Hc});class n0 extends vx{constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=n.selectors.map(mg).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return t0(this.componentDef.inputs)}get outputs(){return t0(this.componentDef.outputs)}create(n,r,a,d){const g=(d=d||this.ngModule)?function(t,n){return{get:(r,a,d)=>{const g=t.get(r,Qd,d);return g!==Qd||a===Qd?g:n.get(r,a,d)}}}(n,d.injector):n,b=g.get(mm,ie),E=g.get(f_,null),F=b.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",fe=a?function(t,n,r){if(X(t))return t.selectRootElement(n,r===Xt.ShadowDom);let a="string"==typeof n?t.querySelector(n):n;return a.textContent="",a}(F,a,this.componentDef.encapsulation):kh(b.createRenderer(null,this.componentDef),Z,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(Z)),Fe=this.componentDef.onPush?576:528,Ve=function(t,n){return{components:[],scheduler:t||Hc,clean:im,playerHandler:n||null,flags:0}}(),yt=yd(0,null,null,1,0,null,null,null,null,null),Tt=wu(null,yt,Ve,Fe,null,null,b,F,E,g);let on,Zt;no(Tt);try{const Yn=function(t,n,r,a,d,g){const b=r[1];r[20]=t;const F=Sc(b,20,2,"#host",null),Z=F.mergedAttrs=n.hostAttrs;null!==Z&&(Fl(F,Z,!0),null!==t&&(el(d,t,Z),null!==F.classes&&Ec(d,t,F.classes),null!==F.styles&&Dp(d,t,F.styles)));const fe=a.createRenderer(t,n),Fe=wu(r,Up(n),null,n.onPush?64:16,r[20],F,a,fe,g||null,null);return b.firstCreatePass&&(wl(tl(F,r),b,n.type),ys(b,F),nf(F,r.length,1)),ic(r,Fe),r[20]=Fe}(fe,this.componentDef,Tt,b,F);if(fe)if(a)el(F,fe,["ng-version",Ex.full]);else{const{attrs:wn,classes:Li}=function(t){const n=[],r=[];let a=1,d=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===d?""!==g&&n.push(g,t[++a]):8===d&&r.push(g);else{if(!za(d))break;d=g}a++}return{attrs:n,classes:r}}(this.componentDef.selectors[0]);wn&&el(F,fe,wn),Li&&Li.length>0&&Ec(F,fe,Li.join(" "))}if(Zt=Cr(yt,20),void 0!==r){const wn=Zt.projection=[];for(let Li=0;Li<this.ngContentSelectors.length;Li++){const rr=r[Li];wn.push(null!=rr?Array.from(rr):null)}}on=function(t,n,r,a,d){const g=r[1],b=function(t,n,r){const a=ns();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),rf(t,a,n,ec(t,n,1,null),r));const d=P(n,t,a.directiveStart,a);No(d,n);const g=qi(a,n);return g&&No(g,n),d}(g,r,n);if(a.components.push(b),t[8]=b,d&&d.forEach(F=>F(b,n)),n.contentQueries){const F=ns();n.contentQueries(1,b,F.directiveStart)}const E=ns();return!g.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(lo(E.index),tf(r[1],E,0,E.directiveStart,E.directiveEnd,n),nc(n,b)),b}(Yn,this.componentDef,Tt,Ve,[wa]),Cu(yt,Tt,null)}finally{hs()}return new DE(this.componentType,on,qd(Zt,Tt),Tt,Zt)}}class DE extends class{}{constructor(n,r,a,d,g){super(),this.location=a,this._rootLView=d,this._tNode=g,this.instance=r,this.hostView=this.changeDetectorRef=new cC(d),this.componentType=n}get injector(){return new Te(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Xd=new Map;class TE extends Ru{constructor(n,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new e0(this);const a=nn(n),d=n[Ze]||null;d&&s_(d),this._bootstrapComponents=Ba(a.bootstrap),this._r3Injector=pf(n,r,[{provide:Ru,useValue:this},{provide:Fu,useValue:this.componentFactoryResolver}],ve(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,r=H.THROW_IF_NOT_FOUND,a=ei.Default){return n===H||n===Ru||n===rc?this:this._r3Injector.get(n,r,a)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class S_ extends Px{constructor(n){super(),this.moduleType=n,null!==nn(n)&&function(t){const n=new Set;!function r(a){const d=nn(a,!0),g=d.id;null!==g&&(function(t,n,r){if(n&&n!==r)throw new Error(`Duplicate module registered for ${t} - ${ve(n)} vs ${ve(n.name)}`)}(g,Xd.get(g),a),Xd.set(g,a));const b=Ba(d.imports);for(const E of b)n.has(E)||(n.add(E),r(E))}(t)}(n)}create(n){return new TE(this.moduleType,n)}}function o0(t,n,r,a){return function(t,n,r,a,d,g){const b=n+r;return Xs(t,b,d)?Ls(t,b+1,g?a.call(g,d):a(d)):Rf(t,b+1)}(Pn(),tt(),t,n,r,a)}function a0(t,n,r,a,d){return u0(Pn(),tt(),t,n,r,a,d)}function l0(t,n,r,a,d,g){return function(t,n,r,a,d,g,b,E){const F=n+r;return function(t,n,r,a,d){const g=kl(t,n,r,a);return Xs(t,n+2,d)||g}(t,F,d,g,b)?Ls(t,F+3,E?a.call(E,d,g,b):a(d,g,b)):Rf(t,F+3)}(Pn(),tt(),t,n,r,a,d,g)}function Rf(t,n){const r=t[n];return r===ur?void 0:r}function u0(t,n,r,a,d,g,b){const E=n+r;return kl(t,E,d,g)?Ls(t,E+2,b?a.call(b,d,g):a(d,g)):Rf(t,E+2)}function p0(t,n){const r=gr();let a;const d=t+20;r.firstCreatePass?(a=function(t,n){if(n)for(let r=n.length-1;r>=0;r--){const a=n[r];if(t===a.name)return a}throw new Dt("302",`The pipe '${t}' could not be found!`)}(n,r.pipeRegistry),r.data[d]=a,a.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(d,a.onDestroy)):a=r.data[d];const g=a.factory||(a.factory=so(a.type)),b=at(yf);try{const E=xl(!1),F=g();return xl(E),function(t,n,r,a){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),n[r]=a}(r,Pn(),d,F),F}finally{at(b)}}function m0(t,n,r,a){const d=t+20,g=Pn(),b=function(t,n){return t[n]}(g,d);return function(t,n){Ca.isWrapped(n)&&(n=Ca.unwrap(n),t[Oi.lFrame.bindingIndex]=ur);return n}(g,function(t,n){return t[1].data[n].pure}(g,d)?u0(g,tt(),n,b.transform,r,a,b):b.transform(r,a))}function M_(t){return n=>{setTimeout(t,void 0,n)}}const cc=class extends x.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,a){var d,g,b;let E=n,F=r||(()=>null),Z=a;if(n&&"object"==typeof n){const Fe=n;E=null===(d=Fe.next)||void 0===d?void 0:d.bind(Fe),F=null===(g=Fe.error)||void 0===g?void 0:g.bind(Fe),Z=null===(b=Fe.complete)||void 0===b?void 0:b.bind(Fe)}this.__isAsync&&(F=M_(F),E&&(E=M_(E)),Z&&(Z=M_(Z)));const fe=super.subscribe({next:E,error:F,complete:Z});return n instanceof I.w&&n.add(fe),fe}};function GE(){return this._results[go()]()}class Lf{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=go(),a=Lf.prototype;a[r]||(a[r]=GE)}get changes(){return this._changes||(this._changes=new cc)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){const a=this;a.dirty=!1;const d=G(n);(this._changesDetected=!function(t,n,r){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],g=n[a];if(r&&(d=r(d),g=r(g)),g!==d)return!1}return!0}(a._results,d,r))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class T_{constructor(n){this.queryList=n,this.matches=null}clone(){return new T_(this.queryList)}setDirty(){this.queryList.setDirty()}}class I_{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const a=null!==n.contentQueries?n.contentQueries[0]:r.length,d=[];for(let g=0;g<a;g++){const b=r.getByIndex(g);d.push(this.queries[b.indexInDeclarationView].clone())}return new I_(d)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==E0(n,r).matches&&this.queries[r].setDirty()}}class g0{constructor(n,r,a=null){this.predicate=n,this.flags=r,this.read=a}}class P_{constructor(n=[]){this.queries=n}elementStart(n,r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let a=0;a<this.length;a++){const d=null!==r?r.length:0,g=this.getByIndex(a).embeddedTView(n,d);g&&(g.indexInDeclarationView=a,null!==r?r.push(g):r=[g])}return null!==r?new P_(r):null}template(n,r){for(let a=0;a<this.queries.length;a++)this.queries[a].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class F_{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new F_(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let a=n.parent;for(;null!==a&&8&a.type&&a.index!==r;)a=a.parent;return r===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const g=a[d];this.matchTNodeWithReadOption(n,r,ZE(r,g)),this.matchTNodeWithReadOption(n,r,L(r,n,g,!1,!1))}else a===Af?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,L(r,n,a,!1,!1))}matchTNodeWithReadOption(n,r,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===lc||d===xm||d===Af&&4&r.type)this.addMatch(r.index,-2);else{const g=L(r,n,d,!1,!1);null!==g&&this.addMatch(r.index,g)}else this.addMatch(r.index,a)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function ZE(t,n){const r=t.localNames;if(null!==r)for(let a=0;a<r.length;a+=2)if(r[a]===n)return r[a+1];return null}function WE(t,n,r,a){return-1===r?function(t,n){return 11&t.type?qd(t,n):4&t.type?vm(t,n):null}(n,t):-2===r?function(t,n,r){return r===lc?qd(n,t):r===Af?vm(n,t):r===xm?Ox(n,t):void 0}(t,n,a):P(t,t[1],r,n)}function _0(t,n,r,a){const d=n[19].queries[a];if(null===d.matches){const g=t.data,b=r.matches,E=[];for(let F=0;F<b.length;F+=2){const Z=b[F];E.push(Z<0?null:WE(n,g[Z],b[F+1],r.metadata.read))}d.matches=E}return d.matches}function R_(t,n,r,a){const d=t.queries.getByIndex(r),g=d.matches;if(null!==g){const b=_0(t,n,d,r);for(let E=0;E<g.length;E+=2){const F=g[E];if(F>0)a.push(b[E/2]);else{const Z=g[E+1],fe=n[-F];for(let Fe=10;Fe<fe.length;Fe++){const Ve=fe[Fe];Ve[17]===Ve[3]&&R_(Ve[1],Ve,Z,a)}if(null!==fe[9]){const Fe=fe[9];for(let Ve=0;Ve<Fe.length;Ve++){const yt=Fe[Ve];R_(yt[1],yt,Z,a)}}}}}return a}function y0(t){const n=Pn(),r=gr(),a=Ur();Yr(a+1);const d=E0(r,a);if(t.dirty&&tr(n)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const g=d.crossesNgTemplate?R_(r,n,a,[]):_0(r,n,d,a);t.reset(g,wx),t.notifyOnChanges()}return!0}return!1}function v0(t,n,r){const a=gr();a.firstCreatePass&&(C0(a,new g0(t,n,r),-1),2==(2&n)&&(a.staticViewQueries=!0)),w0(a,Pn(),n)}function x0(t,n,r,a){const d=gr();if(d.firstCreatePass){const g=ns();C0(d,new g0(n,r,a),g.index),function(t,n){const r=t.contentQueries||(t.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,n)}(d,t),2==(2&r)&&(d.staticContentQueries=!0)}w0(d,Pn(),r)}function b0(){return t=Pn(),n=Ur(),t[19].queries[n].queryList;var t,n}function w0(t,n,r){const a=new Lf(4==(4&r));wd(t,n,a,a.destroy),null===n[19]&&(n[19]=new I_),n[19].queries.push(new T_(a))}function C0(t,n,r){null===t.queries&&(t.queries=new P_),t.queries.track(new F_(n,r))}function E0(t,n){return t.queries.getByIndex(n)}const z_=new Xr("Application Initializer");let eh=(()=>{class t{constructor(r){this.appInits=r,this.resolve=pm,this.reject=pm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const r=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Zg(g))r.push(g);else if(qg(g)){const b=new Promise((E,F)=>{g.subscribe({complete:E,error:F})});r.push(b)}}Promise.all(r).then(()=>{a()}).catch(d=>{this.reject(d)}),0===r.length&&a(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(ar(z_,8))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const j0=new Xr("AppId"),AA={provide:j0,useFactory:function(){return`${V_()}${V_()}${V_()}`},deps:[]};function V_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const G0=new Xr("Platform Initializer"),$0=new Xr("Platform ID"),H0=new Xr("appBootstrapListener");let Z0=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const Sm=new Xr("LocaleId"),q0=new Xr("DefaultCurrencyCode");class SA{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}const U_=function(t){return new S_(t)},MA=U_,TA=function(t){return Promise.resolve(U_(t))},W0=function(t){const n=U_(t),a=Ba(nn(t).declarations).reduce((d,g)=>{const b=Ee(g);return b&&d.push(new n0(b)),d},[]);return new SA(n,a)},IA=W0,PA=function(t){return Promise.resolve(W0(t))};let Nf=(()=>{class t{constructor(){this.compileModuleSync=MA,this.compileModuleAsync=TA,this.compileModuleAndAllComponentsSync=IA,this.compileModuleAndAllComponentsAsync=PA}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();const OA=(()=>Promise.resolve(0))();function j_(t){"undefined"==typeof Zone?OA.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Qa{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cc(!1),this.onMicrotaskEmpty=new cc(!1),this.onStable=new cc(!1),this.onError=new cc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&r,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let t=Kn.requestAnimationFrame,n=Kn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Kn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$_(t),t.isCheckStableRunning=!0,G_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$_(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,a,d,g,b,E)=>{try{return Y0(t),r.invokeTask(d,g,b,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&n(),K0(t)}},onInvoke:(r,a,d,g,b,E,F)=>{try{return Y0(t),r.invoke(d,g,b,E,F)}finally{t.shouldCoalesceRunChangeDetection&&n(),K0(t)}},onHasTask:(r,a,d,g)=>{r.hasTask(d,g),a===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,$_(t),G_(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(r,a,d,g)=>(r.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,r,a){return this._inner.run(n,r,a)}runTask(n,r,a,d){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+d,n,LA,pm,pm);try{return g.runTask(b,r,a)}finally{g.cancelTask(b)}}runGuarded(n,r,a){return this._inner.runGuarded(n,r,a)}runOutsideAngular(n){return this._outer.run(n)}}const LA={};function G_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Y0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function K0(t){t._nesting--,G_(t)}class zA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cc,this.onMicrotaskEmpty=new cc,this.onStable=new cc,this.onError=new cc}run(n,r,a){return n.apply(r,a)}runGuarded(n,r,a){return n.apply(r,a)}runOutsideAngular(n){return n()}runTask(n,r,a,d){return n.apply(r,a)}}let Q0=(()=>{class t{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qa.assertNotInAngularZone(),j_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())j_(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(r)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,a,d){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),r(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:r,timeoutId:g,updateCb:d})}whenStable(r,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,a,d){return[]}}return t.\u0275fac=function(r){return new(r||t)(ar(Qa))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})(),X0=(()=>{class t{constructor(){this._applications=new Map,H_.addToWindow(this)}registerApplication(r,a){this._applications.set(r,a)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,a=!0){return H_.findTestabilityInTree(this,r,a)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();class VA{addToWindow(n){}findTestabilityInTree(n,r,a){return null}}function UA(t){H_=t}let H_=new VA,J0=!0,eb=!1;function Z_(){return eb=!0,J0}function jA(){if(eb)throw new Error("Cannot enable prod mode after platform setup.");J0=!1}let Vl;const tb=new Xr("AllowMultipleToken");class YA{constructor(n,r){this.name=n,this.token=r}}function nb(t,n,r=[]){const a=`Platform: ${n}`,d=new Xr(a);return(g=[])=>{let b=ib();if(!b||b.injector.get(tb,!1))if(t)t(r.concat(g).concat({provide:d,useValue:!0}));else{const E=r.concat(g).concat({provide:d,useValue:!0},{provide:ea,useValue:"platform"});!function(t){if(Vl&&!Vl.destroyed&&!Vl.injector.get(tb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Vl=t.get(rb);const n=t.get(G0,null);n&&n.forEach(r=>r())}(H.create({providers:E,name:a}))}return function(t){const n=ib();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(d)}}function ib(){return Vl&&!Vl.destroyed?Vl:null}let rb=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,a){const E=function(t,n){let r;return r="noop"===t?new zA:("zone.js"===t?void 0:t)||new Qa({enableLongStackTrace:Z_(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),r}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),F=[{provide:Qa,useValue:E}];return E.run(()=>{const Z=H.create({providers:F,parent:this.injector,name:r.moduleType.name}),fe=r.create(Z),Fe=fe.injector.get($c,null);if(!Fe)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const Ve=E.onError.subscribe({next:yt=>{Fe.handleError(yt)}});fe.onDestroy(()=>{q_(this._modules,fe),Ve.unsubscribe()})}),function(t,n,r){try{const a=r();return Zg(a)?a.catch(d=>{throw n.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw n.runOutsideAngular(()=>t.handleError(a)),a}}(Fe,E,()=>{const Ve=fe.injector.get(eh);return Ve.runInitializers(),Ve.donePromise.then(()=>(s_(fe.injector.get(Sm,cm)||cm),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(r,a=[]){const d=sb({},a);return function(t,n,r){const a=new S_(r);return Promise.resolve(a)}(0,0,r).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(r){const a=r.injector.get(zf);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${ve(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(a)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(ar(H))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();function sb(t,n){return Array.isArray(n)?n.reduce(sb,t):Object.assign(Object.assign({},t),n)}let zf=(()=>{class t{constructor(r,a,d,g,b){this._zone=r,this._injector=a,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new Se.y(Z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Z.next(this._stable),Z.complete()})}),F=new Se.y(Z=>{let fe;this._zone.runOutsideAngular(()=>{fe=this._zone.onStable.subscribe(()=>{Qa.assertNotInAngularZone(),j_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Z.next(!0))})})});const Fe=this._zone.onUnstable.subscribe(()=>{Qa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Z.next(!1)}))});return()=>{fe.unsubscribe(),Fe.unsubscribe()}});this.isStable=(0,c.T)(E,F.pipe((0,Xe.B)()))}bootstrap(r,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=r instanceof vx?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(d.componentType);const g=function(t){return t.isBoundToModule}(d)?void 0:this._injector.get(Ru),E=d.create(H.NULL,[],a||d.selector,g),F=E.location.nativeElement,Z=E.injector.get(Q0,null),fe=Z&&E.injector.get(X0);return Z&&fe&&fe.registerApplication(F,Z),E.onDestroy(()=>{this.detachView(E.hostView),q_(this.components,E),fe&&fe.unregisterApplication(F)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const a=r;this._views.push(a),a.attachToAppRef(this)}detachView(r){const a=r;q_(this._views,a),a.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(H0,[]).concat(this._bootstrapListeners).forEach(d=>d(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(r){return new(r||t)(ar(Qa),ar(H),ar($c),ar(Fu),ar(eh))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();function q_(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}class tD{}class iD{}const rD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let sD=(()=>{class t{constructor(r,a){this._compiler=r,this._config=a||rD}load(r){return this.loadAndCompile(r)}loadAndCompile(r){let[a,d]=r.split("#");return void 0===d&&(d="default"),ne(8255)(a).then(g=>g[d]).then(g=>cb(g,a,d)).then(g=>this._compiler.compileModuleAsync(g))}loadFactory(r){let[a,d]=r.split("#"),g="NgFactory";return void 0===d&&(d="default",g=""),ne(8255)(this._config.factoryPathPrefix+a+this._config.factoryPathSuffix).then(b=>b[d+g]).then(b=>cb(b,a,d))}}return t.\u0275fac=function(r){return new(r||t)(ar(Nf),ar(iD,8))},t.\u0275prov=tn({token:t,factory:t.\u0275fac}),t})();function cb(t,n,r){if(!t)throw new Error(`Cannot find '${r}' in '${n}'`);return t}const fD=function(t){return null},mD=nb(null,"core",[{provide:$0,useValue:"unknown"},{provide:rb,deps:[H]},{provide:X0,deps:[]},{provide:Z0,deps:[]}]),xD=[{provide:zf,useClass:zf,deps:[Qa,H,$c,Fu,eh]},{provide:CE,deps:[Qa],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(r){n.push(r)}}},{provide:eh,useClass:eh,deps:[[new ka,z_]]},{provide:Nf,useClass:Nf,deps:[]},AA,{provide:gm,useFactory:function(){return _C},deps:[]},{provide:_m,useFactory:function(){return yC},deps:[]},{provide:Sm,useFactory:function(t){return s_(t=t||"undefined"!=typeof $localize&&$localize.locale||cm),t},deps:[[new Lo(Sm),new ka,new Qo]]},{provide:q0,useValue:"USD"}];let wD=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(ar(zf))},t.\u0275mod=O({type:t}),t.\u0275inj=An({providers:xD}),t})()},7736:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{IR:()=>st,g5:()=>Dt,WU:()=>St,wY:()=>kt,Bs:()=>Kt,iR:()=>Ri,RK:()=>Xt,QI:()=>Zn,Ot:()=>Bi,yB:()=>Ui});var x=ne(7716),I=ne(8583),Se=ne(9765),c=ne(6215),Xe=ne(7574),Ie=ne(6682),_=ne(5435),ve=ne(3342);const Oe={provide:x.tb,useFactory:function(vt,Wt){return()=>{if((0,I.NF)(Wt)){const pe=Array.from(vt.querySelectorAll(`[class*=${Ke}]`)),ke=/\bflex-layout-.+?\b/g;pe.forEach(gt=>{gt.classList.contains(`${Ke}ssr`)&&gt.parentNode?gt.parentNode.removeChild(gt):gt.className.replace(ke,"")})}}},deps:[I.K0,x.Lbi],multi:!0},Ke="flex-layout-";let st=(()=>{class vt{}return vt.\u0275fac=function(pe){return new(pe||vt)},vt.\u0275mod=x.oAB({type:vt}),vt.\u0275inj=x.cJS({providers:[Oe]}),vt})();class Pt{constructor(Wt=!1,pe="all",ke="",gt="",jt=0){this.matches=Wt,this.mediaQuery=pe,this.mqAlias=ke,this.suffix=gt,this.priority=jt,this.property=""}clone(){return new Pt(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Qt=(()=>{class vt{constructor(){this.stylesheet=new Map}addStyleToElement(pe,ke,gt){const jt=this.stylesheet.get(pe);jt?jt.set(ke,gt):this.stylesheet.set(pe,new Map([[ke,gt]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(pe,ke){const gt=this.stylesheet.get(pe);let jt="";if(gt){const Dn=gt.get(ke);("number"==typeof Dn||"string"==typeof Dn)&&(jt=Dn+"")}return jt}}return vt.\u0275fac=function(pe){return new(pe||vt)},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt},token:vt,providedIn:"root"}),vt})();const Dt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},St=new x.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Dt}),kt=new x.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Kt=new x.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Ft(vt,Wt){return vt=vt?vt.clone():new Pt,Wt&&(vt.mqAlias=Wt.alias,vt.mediaQuery=Wt.mediaQuery,vt.suffix=Wt.suffix,vt.priority=Wt.priority),vt}const Mn="inline",Jt=["row","column","row-reverse","column-reverse"];function Hn(vt){if(vt)switch(vt.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":vt="wrap-reverse";break;case"no":case"none":case"nowrap":vt="nowrap";break;default:vt="wrap"}return vt}let Ri=(()=>{class vt{constructor(pe,ke,gt,jt){this.elementRef=pe,this.styleBuilder=ke,this.styler=gt,this.marshal=jt,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Se.xQ,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(pe){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,pe,this.marshal.activatedAlias)}ngOnChanges(pe){Object.keys(pe).forEach(ke=>{if(-1!==this.inputs.indexOf(ke)){const gt=ke.split(".").slice(1).join(".");this.setValue(pe[ke].currentValue,gt)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(pe=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),pe)}addStyles(pe,ke){const gt=this.styleBuilder,jt=gt.shouldCache;let Dn=this.styleCache.get(pe);(!Dn||!jt)&&(Dn=gt.buildStyles(pe,ke),jt&&this.styleCache.set(pe,Dn)),this.mru=Object.assign({},Dn),this.applyStyleToElement(Dn),gt.sideEffect(pe,Dn,ke)}clearStyles(){Object.keys(this.mru).forEach(pe=>{this.mru[pe]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(pe,ke=!1){if(pe){const[gt,jt]=this.styler.getFlowDirection(pe);if(!jt&&ke){const Dn=function(vt){let[Wt,pe,ke]=function(vt){vt=vt?vt.toLowerCase():"";let[Wt,pe,ke]=vt.split(" ");return Jt.find(gt=>gt===Wt)||(Wt=Jt[0]),pe===Mn&&(pe=ke!==Mn?ke:"",ke=Mn),[Wt,Hn(pe),!!ke]}(vt);return function(vt,Wt=null,pe=!1){return{display:pe?"inline-flex":"flex","box-sizing":"border-box","flex-direction":vt,"flex-wrap":Wt||null}}(Wt,pe,ke)}(gt);this.styler.applyStyleToElements(Dn,[pe])}return gt.trim()}return"row"}hasWrap(pe){return this.styler.hasWrap(pe)}applyStyleToElement(pe,ke,gt=this.nativeElement){this.styler.applyStyleToElement(gt,pe,ke)}setValue(pe,ke){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,pe,ke)}updateWithValue(pe){this.currentValue!==pe&&(this.addStyles(pe),this.currentValue=pe)}}return vt.\u0275fac=function(pe){x.$Z()},vt.\u0275dir=x.lG2({type:vt,features:[x.TTD]}),vt})();const ci=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],ni="(orientation: portrait) and (max-width: 599.98px)",zn="(orientation: landscape) and (max-width: 959.98px)",Ln="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",ii="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",On="(orientation: portrait) and (min-width: 840px)",vi="(orientation: landscape) and (min-width: 1280px)",xi={HANDSET:`${ni}, ${zn}`,TABLET:`${Ln} , ${ii}`,WEB:`${On}, ${vi} `,HANDSET_PORTRAIT:`${ni}`,TABLET_PORTRAIT:`${Ln} `,WEB_PORTRAIT:`${On}`,HANDSET_LANDSCAPE:`${zn}`,TABLET_LANDSCAPE:`${ii}`,WEB_LANDSCAPE:`${vi}`},fi=[{alias:"handset",priority:2e3,mediaQuery:xi.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:xi.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:xi.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:xi.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:xi.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:xi.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:xi.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:xi.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:xi.WEB_PORTRAIT,overlapping:!0}],rn=/(\.|-|_)/g;function Ut(vt){let Wt=vt.length>0?vt.charAt(0):"",pe=vt.length>1?vt.slice(1):"";return Wt.toUpperCase()+pe}function Et(vt,Wt=[]){const pe={};return vt.forEach(ke=>{pe[ke.alias]=ke}),Wt.forEach(ke=>{pe[ke.alias]?function(vt,...Wt){if(null==vt)throw TypeError("Cannot convert undefined or null to object");for(let pe of Wt)if(null!=pe)for(let ke in pe)pe.hasOwnProperty(ke)&&(vt[ke]=pe[ke])}(pe[ke.alias],ke):pe[ke.alias]=ke}),function(vt){return vt.forEach(Wt=>{Wt.suffix||(Wt.suffix=function(vt){return vt.replace(rn,"|").split("|").map(Ut).join("")}(Wt.alias),Wt.overlapping=!!Wt.overlapping)}),vt}(Object.keys(pe).map(ke=>pe[ke]))}const tn=new x.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const vt=(0,x.f3M)(Kt),Wt=(0,x.f3M)(St),pe=[].concat.apply([],(vt||[]).map(gt=>Array.isArray(gt)?gt:[gt]));return Et((Wt.disableDefaultBps?[]:ci).concat(Wt.addOrientationBps?fi:[]),pe)}});function pn(vt,Wt){return(Wt&&Wt.priority||0)-(vt&&vt.priority||0)}function An(vt,Wt){return(vt.priority||0)-(Wt.priority||0)}let Bn=(()=>{class vt{constructor(pe){this.findByMap=new Map,this.items=[...pe].sort(An)}findByAlias(pe){return pe?this.findWithPredicate(pe,ke=>ke.alias==pe):null}findByQuery(pe){return this.findWithPredicate(pe,ke=>ke.mediaQuery==pe)}get overlappings(){return this.items.filter(pe=>1==pe.overlapping)}get aliases(){return this.items.map(pe=>pe.alias)}get suffixes(){return this.items.map(pe=>pe.suffix?pe.suffix:"")}findWithPredicate(pe,ke){let gt=this.findByMap.get(pe);return gt||(gt=this.items.find(ke)||null,this.findByMap.set(pe,gt)),gt||null}}return vt.\u0275fac=function(pe){return new(pe||vt)(x.LFG(tn))},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt((0,x.LFG)(tn))},token:vt,providedIn:"root"}),vt})(),di=(()=>{class vt{constructor(pe,ke,gt){this._zone=pe,this._platformId=ke,this._document=gt,this.source=new c.X(new Pt(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const pe=[];return this.registry.forEach((ke,gt)=>{ke.matches&&pe.push(gt)}),pe}isActive(pe){const ke=this.registry.get(pe);return ke?ke.matches:this.registerQuery(pe).some(gt=>gt.matches)}observe(pe,ke=!1){if(pe&&pe.length){const gt=this._observable$.pipe((0,_.h)(Dn=>!ke||pe.indexOf(Dn.mediaQuery)>-1)),jt=new Xe.y(Dn=>{const ri=this.registerQuery(pe);if(ri.length){const Ze=ri.pop();ri.forEach(ze=>{Dn.next(ze)}),this.source.next(Ze)}Dn.complete()});return(0,Ie.T)(jt,gt)}return this._observable$}registerQuery(pe){const ke=Array.isArray(pe)?pe:[pe],gt=[];return function(vt,Wt){const pe=vt.filter(ke=>!Ei[ke]);if(pe.length>0){const ke=pe.join(", ");try{const gt=Wt.createElement("style");gt.setAttribute("type","text/css"),gt.styleSheet||gt.appendChild(Wt.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${ke} {.fx-query-test{ }}\n`)),Wt.head.appendChild(gt),pe.forEach(jt=>Ei[jt]=gt)}catch(gt){console.error(gt)}}}(ke,this._document),ke.forEach(jt=>{const Dn=Ze=>{this._zone.run(()=>this.source.next(new Pt(Ze.matches,jt)))};let ri=this.registry.get(jt);ri||(ri=this.buildMQL(jt),ri.addListener(Dn),this.pendingRemoveListenerFns.push(()=>ri.removeListener(Dn)),this.registry.set(jt,ri)),ri.matches&&gt.push(new Pt(!0,jt))}),gt}ngOnDestroy(){let pe;for(;pe=this.pendingRemoveListenerFns.pop();)pe()}buildMQL(pe){return function(vt,Wt){return Wt&&window.matchMedia("all").addListener?window.matchMedia(vt):{matches:"all"===vt||""===vt,media:vt,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(pe,(0,I.NF)(this._platformId))}}return vt.\u0275fac=function(pe){return new(pe||vt)(x.LFG(x.R0b),x.LFG(x.Lbi),x.LFG(I.K0))},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt((0,x.LFG)(x.R0b),(0,x.LFG)(x.Lbi),(0,x.LFG)(I.K0))},token:vt,providedIn:"root"}),vt})();const Ei={},Zi="print",ei={alias:Zi,mediaQuery:Zi,priority:1e3};let oi=(()=>{class vt{constructor(pe,ke,gt){this.breakpoints=pe,this.layoutConfig=ke,this._document=gt,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new en,this.deactivations=[]}withPrintQuery(pe){return[...pe,Zi]}isPrintEvent(pe){return pe.mediaQuery.startsWith(Zi)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(pe=>this.breakpoints.findByAlias(pe)).filter(pe=>null!==pe)}getEventBreakpoints({mediaQuery:pe}){const ke=this.breakpoints.findByQuery(pe);return(ke?[...this.printBreakPoints,ke]:this.printBreakPoints).sort(pn)}updateEvent(pe){let ke=this.breakpoints.findByQuery(pe.mediaQuery);return this.isPrintEvent(pe)&&(ke=this.getEventBreakpoints(pe)[0],pe.mediaQuery=ke?ke.mediaQuery:""),Ft(pe,ke)}registerBeforeAfterPrintHooks(pe){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const ke=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(pe,this.getEventBreakpoints(new Pt(!0,Zi))),pe.updateStyles())},gt=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(pe),pe.updateStyles())};this._document.defaultView.addEventListener("beforeprint",ke),this._document.defaultView.addEventListener("afterprint",gt),this.beforePrintEventListeners.push(ke),this.afterPrintEventListeners.push(gt)}interceptEvents(pe){return this.registerBeforeAfterPrintHooks(pe),ke=>{this.isPrintEvent(ke)?ke.matches&&!this.isPrinting?(this.startPrinting(pe,this.getEventBreakpoints(ke)),pe.updateStyles()):!ke.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(pe),pe.updateStyles()):this.collectActivations(ke)}}blockPropagation(){return pe=>!(this.isPrinting||this.isPrintEvent(pe))}startPrinting(pe,ke){this.isPrinting=!0,pe.activatedBreakpoints=this.queue.addPrintBreakpoints(ke)}stopPrinting(pe){pe.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(pe){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(pe.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const ke=this.breakpoints.findByQuery(pe.mediaQuery);ke&&(this.deactivations.push(ke),this.deactivations.sort(pn))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(pe=>this._document.defaultView.removeEventListener("beforeprint",pe)),this.afterPrintEventListeners.forEach(pe=>this._document.defaultView.removeEventListener("afterprint",pe)))}}return vt.\u0275fac=function(pe){return new(pe||vt)(x.LFG(Bn),x.LFG(St),x.LFG(I.K0))},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt((0,x.LFG)(Bn),(0,x.LFG)(St),(0,x.LFG)(I.K0))},token:vt,providedIn:"root"}),vt})();class en{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(Wt){return Wt.push(ei),Wt.sort(pn),Wt.forEach(pe=>this.addBreakpoint(pe)),this.printBreakpoints}addBreakpoint(Wt){var vt;Wt&&void 0===this.printBreakpoints.find(ke=>ke.mediaQuery===Wt.mediaQuery)&&(this.printBreakpoints=(vt=Wt)&&vt.mediaQuery.startsWith(Zi)?[Wt,...this.printBreakpoints]:[...this.printBreakpoints,Wt])}clear(){this.printBreakpoints=[]}}function Xn(vt){for(let Wt in vt){let pe=vt[Wt]||"";switch(Wt){case"display":vt.display="flex"===pe?["-webkit-flex","flex"]:"inline-flex"===pe?["-webkit-inline-flex","inline-flex"]:pe;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":vt["-webkit-"+Wt]=pe;break;case"flex-direction":pe=pe||"row",vt["-webkit-flex-direction"]=pe,vt["flex-direction"]=pe;break;case"order":vt.order=vt["-webkit-"+Wt]=isNaN(+pe)?"0":pe}}return vt}let Xt=(()=>{class vt{constructor(pe,ke,gt,jt){this._serverStylesheet=pe,this._serverModuleLoaded=ke,this._platformId=gt,this.layoutConfig=jt}applyStyleToElement(pe,ke,gt=null){let jt={};"string"==typeof ke&&(jt[ke]=gt,ke=jt),jt=this.layoutConfig.disableVendorPrefixes?ke:Xn(ke),this._applyMultiValueStyleToElement(jt,pe)}applyStyleToElements(pe,ke=[]){const gt=this.layoutConfig.disableVendorPrefixes?pe:Xn(pe);ke.forEach(jt=>{this._applyMultiValueStyleToElement(gt,jt)})}getFlowDirection(pe){const ke="flex-direction";let gt=this.lookupStyle(pe,ke);return[gt||"row",this.lookupInlineStyle(pe,ke)||(0,I.PM)(this._platformId)&&this._serverModuleLoaded?gt:""]}hasWrap(pe){return"wrap"===this.lookupStyle(pe,"flex-wrap")}lookupAttributeValue(pe,ke){return pe.getAttribute(ke)||""}lookupInlineStyle(pe,ke){return(0,I.NF)(this._platformId)?pe.style.getPropertyValue(ke):this._getServerStyle(pe,ke)}lookupStyle(pe,ke,gt=!1){let jt="";return pe&&((jt=this.lookupInlineStyle(pe,ke))||((0,I.NF)(this._platformId)?gt||(jt=getComputedStyle(pe).getPropertyValue(ke)):this._serverModuleLoaded&&(jt=this._serverStylesheet.getStyleForElement(pe,ke)))),jt?jt.trim():""}_applyMultiValueStyleToElement(pe,ke){Object.keys(pe).sort().forEach(gt=>{const jt=pe[gt],Dn=Array.isArray(jt)?jt:[jt];Dn.sort();for(let ri of Dn)ri=ri?ri+"":"",(0,I.NF)(this._platformId)||!this._serverModuleLoaded?(0,I.NF)(this._platformId)?ke.style.setProperty(gt,ri):this._setServerStyle(ke,gt,ri):this._serverStylesheet.addStyleToElement(ke,gt,ri)})}_setServerStyle(pe,ke,gt){ke=ke.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const jt=this._readStyleAttribute(pe);jt[ke]=gt||"",this._writeStyleAttribute(pe,jt)}_getServerStyle(pe,ke){return this._readStyleAttribute(pe)[ke]||""}_readStyleAttribute(pe){const ke={},gt=pe.getAttribute("style");if(gt){const jt=gt.split(/;+/g);for(let Dn=0;Dn<jt.length;Dn++){const ri=jt[Dn].trim();if(ri.length>0){const Ze=ri.indexOf(":");if(-1===Ze)throw new Error(`Invalid CSS style: ${ri}`);ke[ri.substr(0,Ze).trim()]=ri.substr(Ze+1).trim()}}}return ke}_writeStyleAttribute(pe,ke){let gt="";for(const jt in ke)ke[jt]&&(gt+=jt+":"+ke[jt]+";");pe.setAttribute("style",gt)}}return vt.\u0275fac=function(pe){return new(pe||vt)(x.LFG(Qt),x.LFG(kt),x.LFG(x.Lbi),x.LFG(St))},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt((0,x.LFG)(Qt),(0,x.LFG)(kt),(0,x.LFG)(x.Lbi),(0,x.LFG)(St))},token:vt,providedIn:"root"}),vt})();class Zn{constructor(){this.shouldCache=!0}sideEffect(Wt,pe,ke){}}function Bi(vt,Wt="1",pe="1"){let ke=[Wt,pe,vt],gt=vt.indexOf("calc");if(gt>0){ke[2]=cr(vt.substring(gt).trim());let jt=vt.substr(0,gt).trim().split(" ");2==jt.length&&(ke[0]=jt[0],ke[1]=jt[1])}else if(0==gt)ke[2]=cr(vt.trim());else{let jt=vt.split(" ");ke=3===jt.length?jt:[Wt,pe,vt]}return ke}function cr(vt){return vt.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let Ui=(()=>{class vt{constructor(pe,ke,gt){this.matchMedia=pe,this.breakpoints=ke,this.hook=gt,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Se.xQ,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(pe){const ke=this.findByQuery(pe.mediaQuery);ke&&((pe=Ft(pe,ke)).matches&&-1===this.activatedBreakpoints.indexOf(ke)?(this.activatedBreakpoints.push(ke),this.activatedBreakpoints.sort(pn),this.updateStyles()):!pe.matches&&-1!==this.activatedBreakpoints.indexOf(ke)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(ke),1),this.activatedBreakpoints.sort(pn),this.updateStyles()))}init(pe,ke,gt,jt,Dn=[]){Kn(this.updateMap,pe,ke,gt),Kn(this.clearMap,pe,ke,jt),this.buildElementKeyMap(pe,ke),this.watchExtraTriggers(pe,ke,Dn)}getValue(pe,ke,gt){const jt=this.elementMap.get(pe);if(jt){const Dn=void 0!==gt?jt.get(gt):this.getActivatedValues(jt,ke);if(Dn)return Dn.get(ke)}}hasValue(pe,ke){const gt=this.elementMap.get(pe);if(gt){const jt=this.getActivatedValues(gt,ke);if(jt)return void 0!==jt.get(ke)||!1}return!1}setValue(pe,ke,gt,jt){let Dn=this.elementMap.get(pe);if(Dn){const Ze=(Dn.get(jt)||new Map).set(ke,gt);Dn.set(jt,Ze),this.elementMap.set(pe,Dn)}else Dn=(new Map).set(jt,(new Map).set(ke,gt)),this.elementMap.set(pe,Dn);const ri=this.getValue(pe,ke);void 0!==ri&&this.updateElement(pe,ke,ri)}trackValue(pe,ke){return this.subject.asObservable().pipe((0,_.h)(gt=>gt.element===pe&&gt.key===ke))}updateStyles(){this.elementMap.forEach((pe,ke)=>{const gt=new Set(this.elementKeyMap.get(ke));let jt=this.getActivatedValues(pe);jt&&jt.forEach((Dn,ri)=>{this.updateElement(ke,ri,Dn),gt.delete(ri)}),gt.forEach(Dn=>{if(jt=this.getActivatedValues(pe,Dn),jt){const ri=jt.get(Dn);this.updateElement(ke,Dn,ri)}else this.clearElement(ke,Dn)})})}clearElement(pe,ke){const gt=this.clearMap.get(pe);if(gt){const jt=gt.get(ke);jt&&(jt(),this.subject.next({element:pe,key:ke,value:""}))}}updateElement(pe,ke,gt){const jt=this.updateMap.get(pe);if(jt){const Dn=jt.get(ke);Dn&&(Dn(gt),this.subject.next({element:pe,key:ke,value:gt}))}}releaseElement(pe){const ke=this.watcherMap.get(pe);ke&&(ke.forEach(jt=>jt.unsubscribe()),this.watcherMap.delete(pe));const gt=this.elementMap.get(pe);gt&&(gt.forEach((jt,Dn)=>gt.delete(Dn)),this.elementMap.delete(pe))}triggerUpdate(pe,ke){const gt=this.elementMap.get(pe);if(gt){const jt=this.getActivatedValues(gt,ke);jt&&(ke?this.updateElement(pe,ke,jt.get(ke)):jt.forEach((Dn,ri)=>this.updateElement(pe,ri,Dn)))}}buildElementKeyMap(pe,ke){let gt=this.elementKeyMap.get(pe);gt||(gt=new Set,this.elementKeyMap.set(pe,gt)),gt.add(ke)}watchExtraTriggers(pe,ke,gt){if(gt&&gt.length){let jt=this.watcherMap.get(pe);if(jt||(jt=new Map,this.watcherMap.set(pe,jt)),!jt.get(ke)){const ri=(0,Ie.T)(...gt).subscribe(()=>{const Ze=this.getValue(pe,ke);this.updateElement(pe,ke,Ze)});jt.set(ke,ri)}}}findByQuery(pe){return this.breakpoints.findByQuery(pe)}getActivatedValues(pe,ke){for(let jt=0;jt<this.activatedBreakpoints.length;jt++){const ri=pe.get(this.activatedBreakpoints[jt].alias);if(ri&&(void 0===ke||ri.has(ke)&&null!=ri.get(ke)))return ri}const gt=pe.get("");return void 0===ke||gt&&gt.has(ke)?gt:void 0}observeActivations(){const ke=this.breakpoints.items.map(gt=>gt.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(ke)).pipe((0,ve.b)(this.hook.interceptEvents(this)),(0,_.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return vt.\u0275fac=function(pe){return new(pe||vt)(x.LFG(di),x.LFG(Bn),x.LFG(oi))},vt.\u0275prov=(0,x.Yz7)({factory:function(){return new vt((0,x.LFG)(di),(0,x.LFG)(Bn),(0,x.LFG)(oi))},token:vt,providedIn:"root"}),vt})();function Kn(vt,Wt,pe,ke){if(void 0!==ke){let gt=vt.get(Wt);gt||(gt=new Map,vt.set(Wt,gt)),gt.set(pe,ke)}}},8030:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{aT:()=>Ki,oO:()=>St,b8:()=>qt});var x=ne(7716),I=ne(8583),Se=ne(7736),c=ne(9490),Xe=ne(6782);ne(9075);let Pt=(()=>{class rn extends Se.iR{constructor(an,ct,Et,tn,pn,An,Bn){super(an,null,ct,Et),this.ngClassInstance=Bn,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new I.mk(tn,pn,an,An)),this.init(),this.setValue("","")}set klass(an){this.ngClassInstance.klass=an,this.setValue(an,"")}updateWithValue(an){this.ngClassInstance.ngClass=an,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return rn.\u0275fac=function(an){return new(an||rn)(x.Y36(x.SBq),x.Y36(Se.RK),x.Y36(Se.yB),x.Y36(x.ZZ4),x.Y36(x.aQg),x.Y36(x.Qsj),x.Y36(I.mk,10))},rn.\u0275dir=x.lG2({type:rn,inputs:{klass:["class","klass"]},features:[x.qOj]}),rn})();const Qt=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let St=(()=>{class rn extends Pt{constructor(){super(...arguments),this.inputs=Qt}}return rn.\u0275fac=function(){let Ut;return function(ct){return(Ut||(Ut=x.n5z(rn)))(ct||rn)}}(),rn.\u0275dir=x.lG2({type:rn,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[x.qOj]}),rn})(),kt=(()=>{class rn extends Se.QI{buildStyles(an,ct){return{display:"true"===an?ct.display||(ct.isServer?"initial":""):"none"}}}return rn.\u0275fac=function(){let Ut;return function(ct){return(Ut||(Ut=x.n5z(rn)))(ct||rn)}}(),rn.\u0275prov=(0,x.Yz7)({factory:function(){return new rn},token:rn,providedIn:"root"}),rn})(),Kt=(()=>{class rn extends Se.iR{constructor(an,ct,Et,tn,pn,An,Bn){super(an,ct,Et,tn),this.layoutConfig=pn,this.platformId=An,this.serverModuleLoaded=Bn,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const an=Array.from(this.nativeElement.children);for(let Et=0;Et<an.length;Et++)if(this.marshal.hasValue(an[Et],"flex")){this.hasFlexChild=!0;break}Ft.has(this.nativeElement)?this.display=Ft.get(this.nativeElement):(this.display=this.getDisplayStyle(),Ft.set(this.nativeElement,this.display)),this.init();const ct=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===ct||""===ct?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(an){Object.keys(an).forEach(ct=>{if(-1!==this.inputs.indexOf(ct)){const Et=ct.split("."),tn=Et.slice(1).join("."),pn=an[ct].currentValue;let An=""===pn||0!==pn&&(0,c.Ig)(pn);"fxHide"===Et[0]&&(An=!An),this.setValue(An,tn)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(an=>{this.marshal.trackValue(this.nativeElement,an).pipe((0,Xe.R)(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(an=!0){if(""===an)return;const ct=(0,I.PM)(this.platformId);this.addStyles(an?"true":"false",{display:this.display,isServer:ct}),ct&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return rn.\u0275fac=function(an){return new(an||rn)(x.Y36(x.SBq),x.Y36(kt),x.Y36(Se.RK),x.Y36(Se.yB),x.Y36(Se.WU),x.Y36(x.Lbi),x.Y36(Se.wY))},rn.\u0275dir=x.lG2({type:rn,features:[x.qOj,x.TTD]}),rn})();const Ft=new WeakMap,Mn=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let qt=(()=>{class rn extends Kt{constructor(){super(...arguments),this.inputs=Mn}}return rn.\u0275fac=function(){let Ut;return function(ct){return(Ut||(Ut=x.n5z(rn)))(ct||rn)}}(),rn.\u0275dir=x.lG2({type:rn,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[x.qOj]}),rn})(),Ki=(()=>{class rn{}return rn.\u0275fac=function(an){return new(an||rn)},rn.\u0275mod=x.oAB({type:rn}),rn.\u0275inj=x.cJS({imports:[[Se.IR]]}),rn})()},5566:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{o9:()=>bi});var x=ne(7716),I=ne(8583),Se=ne(7736),c=ne(8030),Xe=ne(5618);ne(9490);let Qn=(()=>{class $e{}return $e.\u0275fac=function(bt){return new(bt||$e)},$e.\u0275mod=x.oAB({type:$e}),$e.\u0275inj=x.cJS({imports:[[Se.IR]]}),$e})(),bi=(()=>{class $e{constructor(bt,Yt){(0,I.PM)(Yt)&&!bt&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(bt,Yt=[]){return{ngModule:$e,providers:bt.serverLoaded?[{provide:Se.WU,useValue:Object.assign(Object.assign({},Se.g5),bt)},{provide:Se.Bs,useValue:Yt,multi:!0},{provide:Se.wY,useValue:!0}]:[{provide:Se.WU,useValue:Object.assign(Object.assign({},Se.g5),bt)},{provide:Se.Bs,useValue:Yt,multi:!0}]}}}return $e.\u0275fac=function(bt){return new(bt||$e)(x.LFG(Se.wY),x.LFG(x.Lbi))},$e.\u0275mod=x.oAB({type:$e}),$e.\u0275inj=x.cJS({imports:[[Xe.ae,c.aT,Qn],Xe.ae,c.aT,Qn]}),$e})()},5618:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{ae:()=>K,yH:()=>an,XD:()=>Xt,xw:()=>kt,Wh:()=>ke});var x=ne(7716),I=ne(7736),Se=ne(946),Xe=(ne(9765),ne(6782));const Ie="inline",_=["row","column","row-reverse","column-reverse"];function xe(N){N=N?N.toLowerCase():"";let[Q,z,O]=N.split(" ");return _.find(le=>le===Q)||(Q=_[0]),z===Ie&&(z=O!==Ie?O:"",O=Ie),[Q,Ke(z),!!O]}function Oe(N){let[Q]=xe(N);return Q.indexOf("row")>-1}function Ke(N){if(N)switch(N.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":N="wrap-reverse";break;case"no":case"none":case"nowrap":N="nowrap";break;default:N="wrap"}return N}let Pt=(()=>{class N extends I.QI{buildStyles(z){return function(N){let[Q,z,O]=xe(N);return function(N,Q=null,z=!1){return{display:z?"inline-flex":"flex","box-sizing":"border-box","flex-direction":N,"flex-wrap":Q||null}}(Q,z,O)}(z)}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275prov=(0,x.Yz7)({factory:function(){return new N},token:N,providedIn:"root"}),N})();const Qt=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let St=(()=>{class N extends I.iR{constructor(z,O,le,J){super(z,le,O,J),this.DIRECTIVE_KEY="layout",this.styleCache=Kt,this.init()}}return N.\u0275fac=function(z){return new(z||N)(x.Y36(x.SBq),x.Y36(I.RK),x.Y36(Pt),x.Y36(I.yB))},N.\u0275dir=x.lG2({type:N,features:[x.qOj]}),N})(),kt=(()=>{class N extends St{constructor(){super(...arguments),this.inputs=Qt}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275dir=x.lG2({type:N,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[x.qOj]}),N})();const Kt=new Map;function xi(N,...Q){if(null==N)throw TypeError("Cannot convert undefined or null to object");for(let z of Q)if(null!=z)for(let O in z)z.hasOwnProperty(O)&&(N[O]=z[O]);return N}let fi=(()=>{class N extends I.QI{constructor(z){super(),this.layoutConfig=z}buildStyles(z,O){let[le,J,...W]=z.split(" "),$=W.join(" ");const Ee=O.direction.indexOf("column")>-1?"column":"row",Ge=Oe(Ee)?"max-width":"max-height",mt=Oe(Ee)?"min-width":"min-height",nn=String($).indexOf("calc")>-1,Qe=nn||"auto"===$,It=String($).indexOf("%")>-1&&!nn,Bt=String($).indexOf("px")>-1||String($).indexOf("rem")>-1||String($).indexOf("em")>-1||String($).indexOf("vw")>-1||String($).indexOf("vh")>-1;let Sn=nn||Bt;le="0"==le?0:le,J="0"==J?0:J;const Nn=!le&&!J;let Qn={};const hi={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch($||""){case"":const bi=!1!==this.layoutConfig.useColumnBasisZero;$="row"===Ee?"0%":bi?"0.000000001px":"auto";break;case"initial":case"nogrow":le=0,$="auto";break;case"grow":$="100%";break;case"noshrink":J=0,$="auto";break;case"auto":break;case"none":le=0,J=0,$="auto";break;default:!Sn&&!It&&!isNaN($)&&($+="%"),"0%"===$&&(Sn=!0),"0px"===$&&($="0%"),Qn=xi(hi,nn?{"flex-grow":le,"flex-shrink":J,"flex-basis":Sn?$:"100%"}:{flex:`${le} ${J} ${Sn?$:"100%"}`})}return Qn.flex||Qn["flex-grow"]||(Qn=xi(hi,nn?{"flex-grow":le,"flex-shrink":J,"flex-basis":$}:{flex:`${le} ${J} ${$}`})),"0%"!==$&&"0px"!==$&&"0.000000001px"!==$&&"auto"!==$&&(Qn[mt]=Nn||Sn&&le?$:null,Qn[Ge]=Nn||!Qe&&J?$:null),Qn[mt]||Qn[Ge]?O.hasWrap&&(Qn[nn?"flex-basis":"flex"]=Qn[Ge]?nn?Qn[Ge]:`${le} ${J} ${Qn[Ge]}`:nn?Qn[mt]:`${le} ${J} ${Qn[mt]}`):Qn=xi(hi,nn?{"flex-grow":le,"flex-shrink":J,"flex-basis":$}:{flex:`${le} ${J} ${$}`}),xi(Qn,{"box-sizing":"border-box"})}}return N.\u0275fac=function(z){return new(z||N)(x.LFG(I.WU))},N.\u0275prov=(0,x.Yz7)({factory:function(){return new N((0,x.LFG)(I.WU))},token:N,providedIn:"root"}),N})();const Ki=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Ut=(()=>{class N extends I.iR{constructor(z,O,le,J,W){super(z,J,O,W),this.layoutConfig=le,this.marshal=W,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(z){this.flexShrink=z||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(z){this.flexGrow=z||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,Xe.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,Xe.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(z){const le=z.value.split(" ");this.direction=le[0],this.wrap=void 0!==le[1]&&"wrap"===le[1],this.triggerUpdate()}updateWithValue(z){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const le=this.direction,J=le.startsWith("row"),W=this.wrap;J&&W?this.styleCache=tn:J&&!W?this.styleCache=ct:!J&&W?this.styleCache=pn:!J&&!W&&(this.styleCache=Et);const $=String(z).replace(";",""),Ee=(0,I.Ot)($,this.flexGrow,this.flexShrink);this.addStyles(Ee.join(" "),{direction:le,hasWrap:W})}triggerReflow(){const z=this.activatedValue;if(void 0!==z){const O=(0,I.Ot)(z+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,O.join(" "))}}}return N.\u0275fac=function(z){return new(z||N)(x.Y36(x.SBq),x.Y36(I.RK),x.Y36(I.WU),x.Y36(fi),x.Y36(I.yB))},N.\u0275dir=x.lG2({type:N,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[x.qOj]}),N})(),an=(()=>{class N extends Ut{constructor(){super(...arguments),this.inputs=Ki}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275dir=x.lG2({type:N,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[x.qOj]}),N})();const ct=new Map,Et=new Map,tn=new Map,pn=new Map;let xn=(()=>{class N extends I.QI{buildStyles(z){const O={};switch(z=z||"stretch"){case"start":O["align-self"]="flex-start";break;case"end":O["align-self"]="flex-end";break;default:O["align-self"]=z}return O}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275prov=(0,x.Yz7)({factory:function(){return new N},token:N,providedIn:"root"}),N})();const sn=["fxFlexAlign","fxFlexAlign.xs","fxFlexAlign.sm","fxFlexAlign.md","fxFlexAlign.lg","fxFlexAlign.xl","fxFlexAlign.lt-sm","fxFlexAlign.lt-md","fxFlexAlign.lt-lg","fxFlexAlign.lt-xl","fxFlexAlign.gt-xs","fxFlexAlign.gt-sm","fxFlexAlign.gt-md","fxFlexAlign.gt-lg"];let ui=(()=>{class N extends I.iR{constructor(z,O,le,J){super(z,le,O,J),this.DIRECTIVE_KEY="flex-align",this.styleCache=Xn,this.init()}}return N.\u0275fac=function(z){return new(z||N)(x.Y36(x.SBq),x.Y36(I.RK),x.Y36(xn),x.Y36(I.yB))},N.\u0275dir=x.lG2({type:N,features:[x.qOj]}),N})();const Xn=new Map;let Xt=(()=>{class N extends ui{constructor(){super(...arguments),this.inputs=sn}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275dir=x.lG2({type:N,selectors:[["","fxFlexAlign",""],["","fxFlexAlign.xs",""],["","fxFlexAlign.sm",""],["","fxFlexAlign.md",""],["","fxFlexAlign.lg",""],["","fxFlexAlign.xl",""],["","fxFlexAlign.lt-sm",""],["","fxFlexAlign.lt-md",""],["","fxFlexAlign.lt-lg",""],["","fxFlexAlign.lt-xl",""],["","fxFlexAlign.gt-xs",""],["","fxFlexAlign.gt-sm",""],["","fxFlexAlign.gt-md",""],["","fxFlexAlign.gt-lg",""]],inputs:{fxFlexAlign:"fxFlexAlign","fxFlexAlign.xs":"fxFlexAlign.xs","fxFlexAlign.sm":"fxFlexAlign.sm","fxFlexAlign.md":"fxFlexAlign.md","fxFlexAlign.lg":"fxFlexAlign.lg","fxFlexAlign.xl":"fxFlexAlign.xl","fxFlexAlign.lt-sm":"fxFlexAlign.lt-sm","fxFlexAlign.lt-md":"fxFlexAlign.lt-md","fxFlexAlign.lt-lg":"fxFlexAlign.lt-lg","fxFlexAlign.lt-xl":"fxFlexAlign.lt-xl","fxFlexAlign.gt-xs":"fxFlexAlign.gt-xs","fxFlexAlign.gt-sm":"fxFlexAlign.gt-sm","fxFlexAlign.gt-md":"fxFlexAlign.gt-md","fxFlexAlign.gt-lg":"fxFlexAlign.gt-lg"},features:[x.qOj]}),N})(),Kn=(()=>{class N extends I.QI{buildStyles(z,O){const le={},[J,W]=z.split(" ");switch(J){case"center":le["justify-content"]="center";break;case"space-around":le["justify-content"]="space-around";break;case"space-between":le["justify-content"]="space-between";break;case"space-evenly":le["justify-content"]="space-evenly";break;case"end":case"flex-end":le["justify-content"]="flex-end";break;case"start":case"flex-start":default:le["justify-content"]="flex-start"}switch(W){case"start":case"flex-start":le["align-items"]=le["align-content"]="flex-start";break;case"center":le["align-items"]=le["align-content"]="center";break;case"end":case"flex-end":le["align-items"]=le["align-content"]="flex-end";break;case"space-between":le["align-content"]="space-between",le["align-items"]="stretch";break;case"space-around":le["align-content"]="space-around",le["align-items"]="stretch";break;case"baseline":le["align-content"]="stretch",le["align-items"]="baseline";break;case"stretch":default:le["align-items"]=le["align-content"]="stretch"}return xi(le,{display:O.inline?"inline-flex":"flex","flex-direction":O.layout,"box-sizing":"border-box","max-width":"stretch"===W?Oe(O.layout)?null:"100%":null,"max-height":"stretch"===W&&Oe(O.layout)?"100%":null})}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275prov=(0,x.Yz7)({factory:function(){return new N},token:N,providedIn:"root"}),N})();const vt=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let pe=(()=>{class N extends I.iR{constructor(z,O,le,J){super(z,le,O,J),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe((0,Xe.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(z){const O=this.layout||"row",le=this.inline;"row"===O&&le?this.styleCache=Ze:"row"!==O||le?"row-reverse"===O&&le?this.styleCache=Ce:"row-reverse"!==O||le?"column"===O&&le?this.styleCache=ze:"column"!==O||le?"column-reverse"===O&&le?this.styleCache=me:"column-reverse"===O&&!le&&(this.styleCache=ri):this.styleCache=jt:this.styleCache=Dn:this.styleCache=gt,this.addStyles(z,{layout:O,inline:le})}onLayoutChange(z){const O=z.value.split(" ");this.layout=O[0],this.inline=z.value.includes("inline"),_.find(le=>le===this.layout)||(this.layout="row"),this.triggerUpdate()}}return N.\u0275fac=function(z){return new(z||N)(x.Y36(x.SBq),x.Y36(I.RK),x.Y36(Kn),x.Y36(I.yB))},N.\u0275dir=x.lG2({type:N,features:[x.qOj]}),N})(),ke=(()=>{class N extends pe{constructor(){super(...arguments),this.inputs=vt}}return N.\u0275fac=function(){let Q;return function(O){return(Q||(Q=x.n5z(N)))(O||N)}}(),N.\u0275dir=x.lG2({type:N,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[x.qOj]}),N})();const gt=new Map,jt=new Map,Dn=new Map,ri=new Map,Ze=new Map,ze=new Map,Ce=new Map,me=new Map;let K=(()=>{class N{}return N.\u0275fac=function(z){return new(z||N)},N.\u0275mod=x.oAB({type:N}),N.\u0275inj=x.cJS({imports:[[I.IR,Se.vT]]}),N})()},3679:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Fj:()=>Qt,qu:()=>Ji,u:()=>Ni,sg:()=>ti,JU:()=>ve,JJ:()=>Zi,JL:()=>ei,UX:()=>oo,kI:()=>Mn,_Y:()=>$e});var x=ne(7716),I=ne(8583),Se=ne(4402),c=ne(5758),Xe=ne(8002);let Ie=(()=>{class ce{constructor(U,Ae){this._renderer=U,this._elementRef=Ae,this.onChange=Nt=>{},this.onTouched=()=>{}}setProperty(U,Ae){this._renderer.setProperty(this._elementRef.nativeElement,U,Ae)}registerOnTouched(U){this.onTouched=U}registerOnChange(U){this.onChange=U}setDisabledState(U){this.setProperty("disabled",U)}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(x.Qsj),x.Y36(x.SBq))},ce.\u0275dir=x.lG2({type:ce}),ce})(),_=(()=>{class ce extends Ie{}return ce.\u0275fac=function(){let ee;return function(Ae){return(ee||(ee=x.n5z(ce)))(Ae||ce)}}(),ce.\u0275dir=x.lG2({type:ce,features:[x.qOj]}),ce})();const ve=new x.OlP("NgValueAccessor"),Ke={provide:ve,useExisting:(0,x.Gpc)(()=>Qt),multi:!0},Pt=new x.OlP("CompositionEventMode");let Qt=(()=>{class ce extends Ie{constructor(U,Ae,Nt){super(U,Ae),this._compositionMode=Nt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const ce=(0,I.q)()?(0,I.q)().getUserAgent():"";return/android (\d+)/.test(ce.toLowerCase())}())}writeValue(U){this.setProperty("value",null==U?"":U)}_handleInput(U){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(U)}_compositionStart(){this._composing=!0}_compositionEnd(U){this._composing=!1,this._compositionMode&&this.onChange(U)}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(x.Qsj),x.Y36(x.SBq),x.Y36(Pt,8))},ce.\u0275dir=x.lG2({type:ce,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(U,Ae){1&U&&x.NdJ("input",function(ai){return Ae._handleInput(ai.target.value)})("blur",function(){return Ae.onTouched()})("compositionstart",function(){return Ae._compositionStart()})("compositionend",function(ai){return Ae._compositionEnd(ai.target.value)})},features:[x._Bn([Ke]),x.qOj]}),ce})();function Dt(ce){return null==ce||0===ce.length}function St(ce){return null!=ce&&"number"==typeof ce.length}const kt=new x.OlP("NgValidators"),Kt=new x.OlP("NgAsyncValidators"),Ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mn{static min(ee){return ce=ee,ee=>{if(Dt(ee.value)||Dt(ce))return null;const U=parseFloat(ee.value);return!isNaN(U)&&U<ce?{min:{min:ce,actual:ee.value}}:null};var ce}static max(ee){return ce=ee,ee=>{if(Dt(ee.value)||Dt(ce))return null;const U=parseFloat(ee.value);return!isNaN(U)&&U>ce?{max:{max:ce,actual:ee.value}}:null};var ce}static required(ee){return Dt(ee.value)?{required:!0}:null}static requiredTrue(ee){return!0===ee.value?null:{required:!0}}static email(ee){return Dt((ce=ee).value)||Ft.test(ce.value)?null:{email:!0};var ce}static minLength(ee){return ce=ee,ee=>Dt(ee.value)||!St(ee.value)?null:ee.value.length<ce?{minlength:{requiredLength:ce,actualLength:ee.value.length}}:null;var ce}static maxLength(ee){return ce=ee,ee=>St(ee.value)&&ee.value.length>ce?{maxlength:{requiredLength:ce,actualLength:ee.value.length}}:null;var ce}static pattern(ee){return function(ce){if(!ce)return zn;let ee,U;return"string"==typeof ce?(U="","^"!==ce.charAt(0)&&(U+="^"),U+=ce,"$"!==ce.charAt(ce.length-1)&&(U+="$"),ee=new RegExp(U)):(U=ce.toString(),ee=ce),Ae=>{if(Dt(Ae.value))return null;const Nt=Ae.value;return ee.test(Nt)?null:{pattern:{requiredPattern:U,actualValue:Nt}}}}(ee)}static nullValidator(ee){return null}static compose(ee){return Ki(ee)}static composeAsync(ee){return Ut(ee)}}function zn(ce){return null}function Ln(ce){return null!=ce}function ii(ce){const ee=(0,x.QGY)(ce)?(0,Se.D)(ce):ce;return(0,x.CqO)(ee),ee}function On(ce){let ee={};return ce.forEach(U=>{ee=null!=U?Object.assign(Object.assign({},ee),U):ee}),0===Object.keys(ee).length?null:ee}function vi(ce,ee){return ee.map(U=>U(ce))}function fi(ce){return ce.map(ee=>function(ce){return!ce.validate}(ee)?ee:U=>ee.validate(U))}function Ki(ce){if(!ce)return null;const ee=ce.filter(Ln);return 0==ee.length?null:function(U){return On(vi(U,ee))}}function rn(ce){return null!=ce?Ki(fi(ce)):null}function Ut(ce){if(!ce)return null;const ee=ce.filter(Ln);return 0==ee.length?null:function(U){const Ae=vi(U,ee).map(ii);return(0,c.D)(Ae).pipe((0,Xe.U)(On))}}function an(ce){return null!=ce?Ut(fi(ce)):null}function ct(ce,ee){return null===ce?[ee]:Array.isArray(ce)?[...ce,ee]:[ce,ee]}function Et(ce){return ce._rawValidators}function tn(ce){return ce._rawAsyncValidators}function pn(ce){return ce?Array.isArray(ce)?ce:[ce]:[]}function An(ce,ee){return Array.isArray(ce)?ce.includes(ee):ce===ee}function Bn(ce,ee){const U=pn(ee);return pn(ce).forEach(Nt=>{An(U,Nt)||U.push(Nt)}),U}function di(ce,ee){return pn(ee).filter(U=>!An(ce,U))}let Ei=(()=>{class ce{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=rn(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=an(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U){this.control&&this.control.reset(U)}hasError(U,Ae){return!!this.control&&this.control.hasError(U,Ae)}getError(U,Ae){return this.control?this.control.getError(U,Ae):null}}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275dir=x.lG2({type:ce}),ce})(),Vn=(()=>{class ce extends Ei{get formDirective(){return null}get path(){return null}}return ce.\u0275fac=function(){let ee;return function(Ae){return(ee||(ee=x.n5z(ce)))(Ae||ce)}}(),ce.\u0275dir=x.lG2({type:ce,features:[x.qOj]}),ce})();class ki extends Ei{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mi{constructor(ee){this._cd=ee}is(ee){var U,Ae,Nt;return"submitted"===ee?!!(null===(U=this._cd)||void 0===U?void 0:U.submitted):!!(null===(Nt=null===(Ae=this._cd)||void 0===Ae?void 0:Ae.control)||void 0===Nt?void 0:Nt[ee])}}let Zi=(()=>{class ce extends Mi{constructor(U){super(U)}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(ki,2))},ce.\u0275dir=x.lG2({type:ce,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(U,Ae){2&U&&x.ekj("ng-untouched",Ae.is("untouched"))("ng-touched",Ae.is("touched"))("ng-pristine",Ae.is("pristine"))("ng-dirty",Ae.is("dirty"))("ng-valid",Ae.is("valid"))("ng-invalid",Ae.is("invalid"))("ng-pending",Ae.is("pending"))},features:[x.qOj]}),ce})(),ei=(()=>{class ce extends Mi{constructor(U){super(U)}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(Vn,10))},ce.\u0275dir=x.lG2({type:ce,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(U,Ae){2&U&&x.ekj("ng-untouched",Ae.is("untouched"))("ng-touched",Ae.is("touched"))("ng-pristine",Ae.is("pristine"))("ng-dirty",Ae.is("dirty"))("ng-valid",Ae.is("valid"))("ng-invalid",Ae.is("invalid"))("ng-pending",Ae.is("pending"))("ng-submitted",Ae.is("submitted"))},features:[x.qOj]}),ce})();function xt(ce,ee){ui(ce,ee),ee.valueAccessor.writeValue(ce.value),function(ce,ee){ee.valueAccessor.registerOnChange(U=>{ce._pendingValue=U,ce._pendingChange=!0,ce._pendingDirty=!0,"change"===ce.updateOn&&Bi(ce,ee)})}(ce,ee),function(ce,ee){const U=(Ae,Nt)=>{ee.valueAccessor.writeValue(Ae),Nt&&ee.viewToModelUpdate(Ae)};ce.registerOnChange(U),ee._registerOnDestroy(()=>{ce._unregisterOnChange(U)})}(ce,ee),function(ce,ee){ee.valueAccessor.registerOnTouched(()=>{ce._pendingTouched=!0,"blur"===ce.updateOn&&ce._pendingChange&&Bi(ce,ee),"submit"!==ce.updateOn&&ce.markAsTouched()})}(ce,ee),function(ce,ee){if(ee.valueAccessor.setDisabledState){const U=Ae=>{ee.valueAccessor.setDisabledState(Ae)};ce.registerOnDisabledChange(U),ee._registerOnDestroy(()=>{ce._unregisterOnDisabledChange(U)})}}(ce,ee)}function xn(ce,ee,U=!0){const Ae=()=>{};ee.valueAccessor&&(ee.valueAccessor.registerOnChange(Ae),ee.valueAccessor.registerOnTouched(Ae)),Xn(ce,ee),ce&&(ee._invokeOnDestroyCallbacks(),ce._registerOnCollectionChange(()=>{}))}function sn(ce,ee){ce.forEach(U=>{U.registerOnValidatorChange&&U.registerOnValidatorChange(ee)})}function ui(ce,ee){const U=Et(ce);null!==ee.validator?ce.setValidators(ct(U,ee.validator)):"function"==typeof U&&ce.setValidators([U]);const Ae=tn(ce);null!==ee.asyncValidator?ce.setAsyncValidators(ct(Ae,ee.asyncValidator)):"function"==typeof Ae&&ce.setAsyncValidators([Ae]);const Nt=()=>ce.updateValueAndValidity();sn(ee._rawValidators,Nt),sn(ee._rawAsyncValidators,Nt)}function Xn(ce,ee){let U=!1;if(null!==ce){if(null!==ee.validator){const Nt=Et(ce);if(Array.isArray(Nt)&&Nt.length>0){const ai=Nt.filter(Sr=>Sr!==ee.validator);ai.length!==Nt.length&&(U=!0,ce.setValidators(ai))}}if(null!==ee.asyncValidator){const Nt=tn(ce);if(Array.isArray(Nt)&&Nt.length>0){const ai=Nt.filter(Sr=>Sr!==ee.asyncValidator);ai.length!==Nt.length&&(U=!0,ce.setAsyncValidators(ai))}}}const Ae=()=>{};return sn(ee._rawValidators,Ae),sn(ee._rawAsyncValidators,Ae),U}function Bi(ce,ee){ce._pendingDirty&&ce.markAsDirty(),ce.setValue(ce._pendingValue,{emitModelToViewChange:!1}),ee.viewToModelUpdate(ce._pendingValue),ce._pendingChange=!1}function Dn(ce,ee){const U=ce.indexOf(ee);U>-1&&ce.splice(U,1)}const Ze="VALID",ze="INVALID",Ce="PENDING",me="DISABLED";function K(ce){return(O(ce)?ce.validators:ce)||null}function N(ce){return Array.isArray(ce)?rn(ce):ce||null}function Q(ce,ee){return(O(ee)?ee.asyncValidators:ce)||null}function z(ce){return Array.isArray(ce)?an(ce):ce||null}function O(ce){return null!=ce&&!Array.isArray(ce)&&"object"==typeof ce}class le{constructor(ee,U){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=ee,this._rawAsyncValidators=U,this._composedValidatorFn=N(this._rawValidators),this._composedAsyncValidatorFn=z(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(ee){this._rawValidators=this._composedValidatorFn=ee}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ee){this._rawAsyncValidators=this._composedAsyncValidatorFn=ee}get parent(){return this._parent}get valid(){return this.status===Ze}get invalid(){return this.status===ze}get pending(){return this.status==Ce}get disabled(){return this.status===me}get enabled(){return this.status!==me}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ee){this._rawValidators=ee,this._composedValidatorFn=N(ee)}setAsyncValidators(ee){this._rawAsyncValidators=ee,this._composedAsyncValidatorFn=z(ee)}addValidators(ee){this.setValidators(Bn(ee,this._rawValidators))}addAsyncValidators(ee){this.setAsyncValidators(Bn(ee,this._rawAsyncValidators))}removeValidators(ee){this.setValidators(di(ee,this._rawValidators))}removeAsyncValidators(ee){this.setAsyncValidators(di(ee,this._rawAsyncValidators))}hasValidator(ee){return An(this._rawValidators,ee)}hasAsyncValidator(ee){return An(this._rawAsyncValidators,ee)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ee={}){this.touched=!0,this._parent&&!ee.onlySelf&&this._parent.markAsTouched(ee)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ee=>ee.markAllAsTouched())}markAsUntouched(ee={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(U=>{U.markAsUntouched({onlySelf:!0})}),this._parent&&!ee.onlySelf&&this._parent._updateTouched(ee)}markAsDirty(ee={}){this.pristine=!1,this._parent&&!ee.onlySelf&&this._parent.markAsDirty(ee)}markAsPristine(ee={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(U=>{U.markAsPristine({onlySelf:!0})}),this._parent&&!ee.onlySelf&&this._parent._updatePristine(ee)}markAsPending(ee={}){this.status=Ce,!1!==ee.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ee.onlySelf&&this._parent.markAsPending(ee)}disable(ee={}){const U=this._parentMarkedDirty(ee.onlySelf);this.status=me,this.errors=null,this._forEachChild(Ae=>{Ae.disable(Object.assign(Object.assign({},ee),{onlySelf:!0}))}),this._updateValue(),!1!==ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},ee),{skipPristineCheck:U})),this._onDisabledChange.forEach(Ae=>Ae(!0))}enable(ee={}){const U=this._parentMarkedDirty(ee.onlySelf);this.status=Ze,this._forEachChild(Ae=>{Ae.enable(Object.assign(Object.assign({},ee),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ee.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},ee),{skipPristineCheck:U})),this._onDisabledChange.forEach(Ae=>Ae(!1))}_updateAncestors(ee){this._parent&&!ee.onlySelf&&(this._parent.updateValueAndValidity(ee),ee.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ee){this._parent=ee}updateValueAndValidity(ee={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ze||this.status===Ce)&&this._runAsyncValidator(ee.emitEvent)),!1!==ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ee.onlySelf&&this._parent.updateValueAndValidity(ee)}_updateTreeValidity(ee={emitEvent:!0}){this._forEachChild(U=>U._updateTreeValidity(ee)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ee.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?me:Ze}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ee){if(this.asyncValidator){this.status=Ce,this._hasOwnPendingAsyncValidator=!0;const U=ii(this.asyncValidator(this));this._asyncValidationSubscription=U.subscribe(Ae=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Ae,{emitEvent:ee})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ee,U={}){this.errors=ee,this._updateControlsErrors(!1!==U.emitEvent)}get(ee){return function(ce,ee,U){if(null==ee||(Array.isArray(ee)||(ee=ee.split(".")),Array.isArray(ee)&&0===ee.length))return null;let Ae=ce;return ee.forEach(Nt=>{Ae=Ae instanceof W?Ae.controls.hasOwnProperty(Nt)?Ae.controls[Nt]:null:Ae instanceof $&&Ae.at(Nt)||null}),Ae}(this,ee)}getError(ee,U){const Ae=U?this.get(U):this;return Ae&&Ae.errors?Ae.errors[ee]:null}hasError(ee,U){return!!this.getError(ee,U)}get root(){let ee=this;for(;ee._parent;)ee=ee._parent;return ee}_updateControlsErrors(ee){this.status=this._calculateStatus(),ee&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ee)}_initObservables(){this.valueChanges=new x.vpe,this.statusChanges=new x.vpe}_calculateStatus(){return this._allControlsDisabled()?me:this.errors?ze:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ce)?Ce:this._anyControlsHaveStatus(ze)?ze:Ze}_anyControlsHaveStatus(ee){return this._anyControls(U=>U.status===ee)}_anyControlsDirty(){return this._anyControls(ee=>ee.dirty)}_anyControlsTouched(){return this._anyControls(ee=>ee.touched)}_updatePristine(ee={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ee.onlySelf&&this._parent._updatePristine(ee)}_updateTouched(ee={}){this.touched=this._anyControlsTouched(),this._parent&&!ee.onlySelf&&this._parent._updateTouched(ee)}_isBoxedValue(ee){return"object"==typeof ee&&null!==ee&&2===Object.keys(ee).length&&"value"in ee&&"disabled"in ee}_registerOnCollectionChange(ee){this._onCollectionChange=ee}_setUpdateStrategy(ee){O(ee)&&null!=ee.updateOn&&(this._updateOn=ee.updateOn)}_parentMarkedDirty(ee){return!ee&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class J extends le{constructor(ee=null,U,Ae){super(K(U),Q(Ae,U)),this._onChange=[],this._applyFormState(ee),this._setUpdateStrategy(U),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(ee,U={}){this.value=this._pendingValue=ee,this._onChange.length&&!1!==U.emitModelToViewChange&&this._onChange.forEach(Ae=>Ae(this.value,!1!==U.emitViewToModelChange)),this.updateValueAndValidity(U)}patchValue(ee,U={}){this.setValue(ee,U)}reset(ee=null,U={}){this._applyFormState(ee),this.markAsPristine(U),this.markAsUntouched(U),this.setValue(this.value,U),this._pendingChange=!1}_updateValue(){}_anyControls(ee){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ee){this._onChange.push(ee)}_unregisterOnChange(ee){Dn(this._onChange,ee)}registerOnDisabledChange(ee){this._onDisabledChange.push(ee)}_unregisterOnDisabledChange(ee){Dn(this._onDisabledChange,ee)}_forEachChild(ee){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ee){this._isBoxedValue(ee)?(this.value=this._pendingValue=ee.value,ee.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ee}}class W extends le{constructor(ee,U,Ae){super(K(U),Q(Ae,U)),this.controls=ee,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ee,U){return this.controls[ee]?this.controls[ee]:(this.controls[ee]=U,U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange),U)}addControl(ee,U,Ae={}){this.registerControl(ee,U),this.updateValueAndValidity({emitEvent:Ae.emitEvent}),this._onCollectionChange()}removeControl(ee,U={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),delete this.controls[ee],this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}setControl(ee,U,Ae={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),delete this.controls[ee],U&&this.registerControl(ee,U),this.updateValueAndValidity({emitEvent:Ae.emitEvent}),this._onCollectionChange()}contains(ee){return this.controls.hasOwnProperty(ee)&&this.controls[ee].enabled}setValue(ee,U={}){this._checkAllValuesPresent(ee),Object.keys(ee).forEach(Ae=>{this._throwIfControlMissing(Ae),this.controls[Ae].setValue(ee[Ae],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue(ee,U={}){null!=ee&&(Object.keys(ee).forEach(Ae=>{this.controls[Ae]&&this.controls[Ae].patchValue(ee[Ae],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset(ee={},U={}){this._forEachChild((Ae,Nt)=>{Ae.reset(ee[Nt],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this._reduceChildren({},(ee,U,Ae)=>(ee[Ae]=U instanceof J?U.value:U.getRawValue(),ee))}_syncPendingControls(){let ee=this._reduceChildren(!1,(U,Ae)=>!!Ae._syncPendingControls()||U);return ee&&this.updateValueAndValidity({onlySelf:!0}),ee}_throwIfControlMissing(ee){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[ee])throw new Error(`Cannot find form control with name: ${ee}.`)}_forEachChild(ee){Object.keys(this.controls).forEach(U=>{const Ae=this.controls[U];Ae&&ee(Ae,U)})}_setUpControls(){this._forEachChild(ee=>{ee.setParent(this),ee._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ee){for(const U of Object.keys(this.controls)){const Ae=this.controls[U];if(this.contains(U)&&ee(Ae))return!0}return!1}_reduceValue(){return this._reduceChildren({},(ee,U,Ae)=>((U.enabled||this.disabled)&&(ee[Ae]=U.value),ee))}_reduceChildren(ee,U){let Ae=ee;return this._forEachChild((Nt,ai)=>{Ae=U(Ae,Nt,ai)}),Ae}_allControlsDisabled(){for(const ee of Object.keys(this.controls))if(this.controls[ee].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(ee){this._forEachChild((U,Ae)=>{if(void 0===ee[Ae])throw new Error(`Must supply a value for form control with name: '${Ae}'.`)})}}class $ extends le{constructor(ee,U,Ae){super(K(U),Q(Ae,U)),this.controls=ee,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ee){return this.controls[ee]}push(ee,U={}){this.controls.push(ee),this._registerControl(ee),this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}insert(ee,U,Ae={}){this.controls.splice(ee,0,U),this._registerControl(U),this.updateValueAndValidity({emitEvent:Ae.emitEvent})}removeAt(ee,U={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),this.controls.splice(ee,1),this.updateValueAndValidity({emitEvent:U.emitEvent})}setControl(ee,U,Ae={}){this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),this.controls.splice(ee,1),U&&(this.controls.splice(ee,0,U),this._registerControl(U)),this.updateValueAndValidity({emitEvent:Ae.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ee,U={}){this._checkAllValuesPresent(ee),ee.forEach((Ae,Nt)=>{this._throwIfControlMissing(Nt),this.at(Nt).setValue(Ae,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue(ee,U={}){null!=ee&&(ee.forEach((Ae,Nt)=>{this.at(Nt)&&this.at(Nt).patchValue(Ae,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset(ee=[],U={}){this._forEachChild((Ae,Nt)=>{Ae.reset(ee[Nt],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this.controls.map(ee=>ee instanceof J?ee.value:ee.getRawValue())}clear(ee={}){this.controls.length<1||(this._forEachChild(U=>U._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ee.emitEvent}))}_syncPendingControls(){let ee=this.controls.reduce((U,Ae)=>!!Ae._syncPendingControls()||U,!1);return ee&&this.updateValueAndValidity({onlySelf:!0}),ee}_throwIfControlMissing(ee){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(ee))throw new Error(`Cannot find form control at index ${ee}`)}_forEachChild(ee){this.controls.forEach((U,Ae)=>{ee(U,Ae)})}_updateValue(){this.value=this.controls.filter(ee=>ee.enabled||this.disabled).map(ee=>ee.value)}_anyControls(ee){return this.controls.some(U=>U.enabled&&ee(U))}_setUpControls(){this._forEachChild(ee=>this._registerControl(ee))}_checkAllValuesPresent(ee){this._forEachChild((U,Ae)=>{if(void 0===ee[Ae])throw new Error(`Must supply a value for form control at index: ${Ae}.`)})}_allControlsDisabled(){for(const ee of this.controls)if(ee.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ee){ee.setParent(this),ee._registerOnCollectionChange(this._onCollectionChange)}}let $e=(()=>{class ce{}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275dir=x.lG2({type:ce,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ce})(),dt=(()=>{class ce{}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275mod=x.oAB({type:ce}),ce.\u0275inj=x.cJS({}),ce})();const be=new x.OlP("NgModelWithFormControlWarning"),$t={provide:Vn,useExisting:(0,x.Gpc)(()=>ti)};let ti=(()=>{class ce extends Vn{constructor(U,Ae){super(),this.validators=U,this.asyncValidators=Ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new x.vpe,this._setValidators(U),this._setAsyncValidators(Ae)}ngOnChanges(U){this._checkFormPresent(),U.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(U){const Ae=this.form.get(U.path);return xt(Ae,U),Ae.updateValueAndValidity({emitEvent:!1}),this.directives.push(U),Ae}getControl(U){return this.form.get(U.path)}removeControl(U){xn(U.control||null,U,!1),Dn(this.directives,U)}addFormGroup(U){this._setUpFormContainer(U)}removeFormGroup(U){this._cleanUpFormContainer(U)}getFormGroup(U){return this.form.get(U.path)}addFormArray(U){this._setUpFormContainer(U)}removeFormArray(U){this._cleanUpFormContainer(U)}getFormArray(U){return this.form.get(U.path)}updateModel(U,Ae){this.form.get(U.path).setValue(Ae)}onSubmit(U){return this.submitted=!0,function(ce,ee){ce._syncPendingControls(),ee.forEach(U=>{const Ae=U.control;"submit"===Ae.updateOn&&Ae._pendingChange&&(U.viewToModelUpdate(Ae._pendingValue),Ae._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(U),!1}onReset(){this.resetForm()}resetForm(U){this.form.reset(U),this.submitted=!1}_updateDomValue(){this.directives.forEach(U=>{const Ae=U.control,Nt=this.form.get(U.path);Ae!==Nt&&(xn(Ae||null,U),Nt instanceof J&&(xt(Nt,U),U.control=Nt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(U){const Ae=this.form.get(U.path);(function(ce,ee){ui(ce,ee)})(Ae,U),Ae.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(U){if(this.form){const Ae=this.form.get(U.path);Ae&&function(ce,ee){return Xn(ce,ee)}(Ae,U)&&Ae.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ui(this.form,this),this._oldForm&&Xn(this._oldForm,this)}_checkFormPresent(){}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(kt,10),x.Y36(Kt,10))},ce.\u0275dir=x.lG2({type:ce,selectors:[["","formGroup",""]],hostBindings:function(U,Ae){1&U&&x.NdJ("submit",function(ai){return Ae.onSubmit(ai)})("reset",function(){return Ae.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[x._Bn([$t]),x.qOj,x.TTD]}),ce})();const Mr={provide:ki,useExisting:(0,x.Gpc)(()=>Ni)};let Ni=(()=>{class ce extends ki{constructor(U,Ae,Nt,ai,Sr){super(),this._ngModelWarningConfig=Sr,this._added=!1,this.update=new x.vpe,this._ngModelWarningSent=!1,this._parent=U,this._setValidators(Ae),this._setAsyncValidators(Nt),this.valueAccessor=function(ce,ee){if(!ee)return null;let U,Ae,Nt;return Array.isArray(ee),ee.forEach(ai=>{ai.constructor===Qt?U=ai:function(ce){return Object.getPrototypeOf(ce.constructor)===_}(ai)?Ae=ai:Nt=ai}),Nt||Ae||U||null}(0,ai)}set isDisabled(U){}ngOnChanges(U){this._added||this._setUpControl(),function(ce,ee){if(!ce.hasOwnProperty("model"))return!1;const U=ce.model;return!!U.isFirstChange()||!Object.is(ee,U.currentValue)}(U,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}get path(){return function(ce,ee){return[...ee.path,ce]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return ce.\u0275fac=function(U){return new(U||ce)(x.Y36(Vn,13),x.Y36(kt,10),x.Y36(Kt,10),x.Y36(ve,10),x.Y36(be,8))},ce.\u0275dir=x.lG2({type:ce,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[x._Bn([Mr]),x.qOj,x.TTD]}),ce._ngModelWarningSentOnce=!1,ce})(),Is=(()=>{class ce{}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275mod=x.oAB({type:ce}),ce.\u0275inj=x.cJS({imports:[[dt]]}),ce})(),oo=(()=>{class ce{static withConfig(U){return{ngModule:ce,providers:[{provide:be,useValue:U.warnOnNgModelWithFormControl}]}}}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275mod=x.oAB({type:ce}),ce.\u0275inj=x.cJS({imports:[Is]}),ce})(),Ji=(()=>{class ce{group(U,Ae=null){const Nt=this._reduceControls(U);let gs,ai=null,Sr=null;return null!=Ae&&(function(ce){return void 0!==ce.asyncValidators||void 0!==ce.validators||void 0!==ce.updateOn}(Ae)?(ai=null!=Ae.validators?Ae.validators:null,Sr=null!=Ae.asyncValidators?Ae.asyncValidators:null,gs=null!=Ae.updateOn?Ae.updateOn:void 0):(ai=null!=Ae.validator?Ae.validator:null,Sr=null!=Ae.asyncValidator?Ae.asyncValidator:null)),new W(Nt,{asyncValidators:Sr,updateOn:gs,validators:ai})}control(U,Ae,Nt){return new J(U,Ae,Nt)}array(U,Ae,Nt){const ai=U.map(Sr=>this._createControl(Sr));return new $(ai,Ae,Nt)}_reduceControls(U){const Ae={};return Object.keys(U).forEach(Nt=>{Ae[Nt]=this._createControl(U[Nt])}),Ae}_createControl(U){return U instanceof J||U instanceof W||U instanceof $?U:Array.isArray(U)?this.control(U[0],U.length>1?U[1]:null,U.length>2?U[2]:null):this.control(U)}}return ce.\u0275fac=function(U){return new(U||ce)},ce.\u0275prov=(0,x.Yz7)({factory:function(){return new ce},token:ce,providedIn:oo}),ce})()},1095:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{lW:()=>Ke,ot:()=>Pt});var x=ne(2458),I=ne(6237),Se=ne(7716),c=ne(369);const Xe=["mat-button",""],Ie=["*"],xe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Oe=(0,x.pj)((0,x.Id)((0,x.Kr)(class{constructor(Qt){this._elementRef=Qt}})));let Ke=(()=>{class Qt extends Oe{constructor(St,kt,Kt){super(St),this._focusMonitor=kt,this._animationMode=Kt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ft of xe)this._hasHostAttributes(Ft)&&this._getHostElement().classList.add(Ft);St.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(St,kt){St?this._focusMonitor.focusVia(this._getHostElement(),St,kt):this._getHostElement().focus(kt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...St){return St.some(kt=>this._getHostElement().hasAttribute(kt))}}return Qt.\u0275fac=function(St){return new(St||Qt)(Se.Y36(Se.SBq),Se.Y36(c.tE),Se.Y36(I.Qb,8))},Qt.\u0275cmp=Se.Xpm({type:Qt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(St,kt){if(1&St&&Se.Gf(x.wG,5),2&St){let Kt;Se.iGM(Kt=Se.CRH())&&(kt.ripple=Kt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(St,kt){2&St&&(Se.uIk("disabled",kt.disabled||null),Se.ekj("_mat-animation-noopable","NoopAnimations"===kt._animationMode)("mat-button-disabled",kt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Se.qOj],attrs:Xe,ngContentSelectors:Ie,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(St,kt){1&St&&(Se.F$t(),Se.TgZ(0,"span",0),Se.Hsn(1),Se.qZA(),Se._UZ(2,"span",1),Se._UZ(3,"span",2)),2&St&&(Se.xp6(2),Se.ekj("mat-button-ripple-round",kt.isRoundButton||kt.isIconButton),Se.Q6J("matRippleDisabled",kt._isRippleDisabled())("matRippleCentered",kt.isIconButton)("matRippleTrigger",kt._getHostElement()))},directives:[x.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Qt})(),Pt=(()=>{class Qt{}return Qt.\u0275fac=function(St){return new(St||Qt)},Qt.\u0275mod=Se.oAB({type:Qt}),Qt.\u0275inj=Se.cJS({imports:[[x.si,x.BQ],x.BQ]}),Qt})()},2458:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{BQ:()=>dn,X2:()=>Vn,uc:()=>Ti,nP:()=>Xt,us:()=>Zn,wG:()=>ui,si:()=>Xn,pj:()=>Ai,Kr:()=>Ri,Id:()=>Hn,E0:()=>ki});var x=ne(7716),I=ne(369),Se=ne(946);const c=new x.GfV("12.2.0");var Xe=ne(8583),Ie=ne(9490),ve=(ne(9765),ne(521)),xe=ne(9761),Oe=ne(6237);ne(6461);const Mn=new x.GfV("12.2.0"),qt=new x.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let xi,dn=(()=>{class ze{constructor(me,oe,K){this._hasDoneGlobalChecks=!1,this._document=K,me._applyBodyHighContrastModeCssClasses(),this._sanityChecks=oe,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const me=this._document.defaultView||window;return"object"==typeof me&&me?me:null}_checksAreEnabled(){return(0,x.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const me=this._getWindow();return me&&(me.__karma__||me.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const oe=this._document.createElement("div");oe.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(oe);const K=getComputedStyle(oe);K&&"none"!==K.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(oe)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Mn.full!==c.full&&console.warn("The Angular Material version ("+Mn.full+") does not match the Angular CDK version ("+c.full+").\nPlease ensure the versions of these two packages exactly match.")}}return ze.\u0275fac=function(me){return new(me||ze)(x.LFG(I.qm),x.LFG(qt,8),x.LFG(Xe.K0))},ze.\u0275mod=x.oAB({type:ze}),ze.\u0275inj=x.cJS({imports:[[Se.vT],Se.vT]}),ze})();function Hn(ze){return class extends ze{constructor(...Ce){super(...Ce),this._disabled=!1}get disabled(){return this._disabled}set disabled(Ce){this._disabled=(0,Ie.Ig)(Ce)}}}function Ai(ze,Ce){return class extends ze{constructor(...me){super(...me),this.defaultColor=Ce,this.color=Ce}get color(){return this._color}set color(me){const oe=me||this.defaultColor;oe!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),oe&&this._elementRef.nativeElement.classList.add(`mat-${oe}`),this._color=oe)}}}function Ri(ze){return class extends ze{constructor(...Ce){super(...Ce),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Ce){this._disableRipple=(0,Ie.Ig)(Ce)}}}try{xi="undefined"!=typeof Intl}catch(ze){xi=!1}let Vn=(()=>{class ze{}return ze.\u0275fac=function(me){return new(me||ze)},ze.\u0275dir=x.lG2({type:ze,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),ze})();function ki(ze,Ce,me="mat"){ze.changes.pipe((0,xe.O)(ze)).subscribe(({length:oe})=>{Mi(Ce,`${me}-2-line`,!1),Mi(Ce,`${me}-3-line`,!1),Mi(Ce,`${me}-multi-line`,!1),2===oe||3===oe?Mi(Ce,`${me}-${oe}-line`,!0):oe>3&&Mi(Ce,`${me}-multi-line`,!0)})}function Mi(ze,Ce,me){const oe=ze.nativeElement.classList;me?oe.add(Ce):oe.remove(Ce)}let Ti=(()=>{class ze{}return ze.\u0275fac=function(me){return new(me||ze)},ze.\u0275mod=x.oAB({type:ze}),ze.\u0275inj=x.cJS({imports:[[dn],dn]}),ze})();class er{constructor(Ce,me,oe){this._renderer=Ce,this.element=me,this.config=oe,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Zi={enterDuration:225,exitDuration:150},oi=(0,ve.i$)({passive:!0}),en=["mousedown","touchstart"],at=["mouseup","mouseleave","touchend","touchcancel"];class xt{constructor(Ce,me,oe,K){this._target=Ce,this._ngZone=me,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,K.isBrowser&&(this._containerElement=(0,Ie.fI)(oe))}fadeInRipple(Ce,me,oe={}){const K=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),N=Object.assign(Object.assign({},Zi),oe.animation);oe.centered&&(Ce=K.left+K.width/2,me=K.top+K.height/2);const Q=oe.radius||function(ze,Ce,me){const oe=Math.max(Math.abs(ze-me.left),Math.abs(ze-me.right)),K=Math.max(Math.abs(Ce-me.top),Math.abs(Ce-me.bottom));return Math.sqrt(oe*oe+K*K)}(Ce,me,K),z=Ce-K.left,O=me-K.top,le=N.enterDuration,J=document.createElement("div");J.classList.add("mat-ripple-element"),J.style.left=z-Q+"px",J.style.top=O-Q+"px",J.style.height=2*Q+"px",J.style.width=2*Q+"px",null!=oe.color&&(J.style.backgroundColor=oe.color),J.style.transitionDuration=`${le}ms`,this._containerElement.appendChild(J),window.getComputedStyle(J).getPropertyValue("opacity"),J.style.transform="scale(1)";const W=new er(this,J,oe);return W.state=0,this._activeRipples.add(W),oe.persistent||(this._mostRecentTransientRipple=W),this._runTimeoutOutsideZone(()=>{const $=W===this._mostRecentTransientRipple;W.state=1,!oe.persistent&&(!$||!this._isPointerDown)&&W.fadeOut()},le),W}fadeOutRipple(Ce){const me=this._activeRipples.delete(Ce);if(Ce===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!me)return;const oe=Ce.element,K=Object.assign(Object.assign({},Zi),Ce.config.animation);oe.style.transitionDuration=`${K.exitDuration}ms`,oe.style.opacity="0",Ce.state=2,this._runTimeoutOutsideZone(()=>{Ce.state=3,oe.parentNode.removeChild(oe)},K.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Ce=>Ce.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Ce=>{Ce.config.persistent||Ce.fadeOut()})}setupTriggerEvents(Ce){const me=(0,Ie.fI)(Ce);!me||me===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=me,this._registerEvents(en))}handleEvent(Ce){"mousedown"===Ce.type?this._onMousedown(Ce):"touchstart"===Ce.type?this._onTouchStart(Ce):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(at),this._pointerUpEventsRegistered=!0)}_onMousedown(Ce){const me=(0,I.X6)(Ce),oe=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!me&&!oe&&(this._isPointerDown=!0,this.fadeInRipple(Ce.clientX,Ce.clientY,this._target.rippleConfig))}_onTouchStart(Ce){if(!this._target.rippleDisabled&&!(0,I.yG)(Ce)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const me=Ce.changedTouches;for(let oe=0;oe<me.length;oe++)this.fadeInRipple(me[oe].clientX,me[oe].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Ce=>{!Ce.config.persistent&&(1===Ce.state||Ce.config.terminateOnPointerUp&&0===Ce.state)&&Ce.fadeOut()}))}_runTimeoutOutsideZone(Ce,me=0){this._ngZone.runOutsideAngular(()=>setTimeout(Ce,me))}_registerEvents(Ce){this._ngZone.runOutsideAngular(()=>{Ce.forEach(me=>{this._triggerElement.addEventListener(me,this,oi)})})}_removeTriggerEvents(){this._triggerElement&&(en.forEach(Ce=>{this._triggerElement.removeEventListener(Ce,this,oi)}),this._pointerUpEventsRegistered&&at.forEach(Ce=>{this._triggerElement.removeEventListener(Ce,this,oi)}))}}const Un=new x.OlP("mat-ripple-global-options");let ui=(()=>{class ze{constructor(me,oe,K,N,Q){this._elementRef=me,this._animationMode=Q,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=N||{},this._rippleRenderer=new xt(this,oe,me,K)}get disabled(){return this._disabled}set disabled(me){me&&this.fadeOutAllNonPersistent(),this._disabled=me,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(me){this._trigger=me,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(me,oe=0,K){return"number"==typeof me?this._rippleRenderer.fadeInRipple(me,oe,Object.assign(Object.assign({},this.rippleConfig),K)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),me))}}return ze.\u0275fac=function(me){return new(me||ze)(x.Y36(x.SBq),x.Y36(x.R0b),x.Y36(ve.t4),x.Y36(Un,8),x.Y36(Oe.Qb,8))},ze.\u0275dir=x.lG2({type:ze,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(me,oe){2&me&&x.ekj("mat-ripple-unbounded",oe.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),ze})(),Xn=(()=>{class ze{}return ze.\u0275fac=function(me){return new(me||ze)},ze.\u0275mod=x.oAB({type:ze}),ze.\u0275inj=x.cJS({imports:[[dn,ve.ud],dn]}),ze})(),Xt=(()=>{class ze{constructor(me){this._animationMode=me,this.state="unchecked",this.disabled=!1}}return ze.\u0275fac=function(me){return new(me||ze)(x.Y36(Oe.Qb,8))},ze.\u0275cmp=x.Xpm({type:ze,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(me,oe){2&me&&x.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===oe.state)("mat-pseudo-checkbox-checked","checked"===oe.state)("mat-pseudo-checkbox-disabled",oe.disabled)("_mat-animation-noopable","NoopAnimations"===oe._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(me,oe){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),ze})(),Zn=(()=>{class ze{}return ze.\u0275fac=function(me){return new(me||ze)},ze.\u0275mod=x.oAB({type:ze}),ze.\u0275inj=x.cJS({imports:[[dn]]}),ze})()},2680:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{uw:()=>hi,Is:()=>et});var x=ne(1306),I=ne(7716),Se=ne(521),c=ne(946),Xe=ne(8583),Ie=ne(9490);class Pt{attach(B){return this._attachedHost=B,B.attach(this)}detach(){let B=this._attachedHost;null!=B&&(this._attachedHost=null,B.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(B){this._attachedHost=B}}class Qt extends Pt{constructor(B,q,be,We){super(),this.component=B,this.viewContainerRef=q,this.injector=be,this.componentFactoryResolver=We}}class Dt extends Pt{constructor(B,q,be){super(),this.templateRef=B,this.viewContainerRef=q,this.context=be}get origin(){return this.templateRef.elementRef}attach(B,q=this.context){return this.context=q,super.attach(B)}detach(){return this.context=void 0,super.detach()}}class St extends Pt{constructor(B){super(),this.element=B instanceof I.SBq?B.nativeElement:B}}class kt{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(B){return B instanceof Qt?(this._attachedPortal=B,this.attachComponentPortal(B)):B instanceof Dt?(this._attachedPortal=B,this.attachTemplatePortal(B)):this.attachDomPortal&&B instanceof St?(this._attachedPortal=B,this.attachDomPortal(B)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(B){this._disposeFn=B}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ft extends kt{constructor(B,q,be,We,Mt){super(),this.outletElement=B,this._componentFactoryResolver=q,this._appRef=be,this._defaultInjector=We,this.attachDomPortal=$t=>{const ti=$t.element,pi=this._document.createComment("dom-portal");ti.parentNode.insertBefore(pi,ti),this.outletElement.appendChild(ti),this._attachedPortal=$t,super.setDisposeFn(()=>{pi.parentNode&&pi.parentNode.replaceChild(ti,pi)})},this._document=Mt}attachComponentPortal(B){const be=(B.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(B.component);let We;return B.viewContainerRef?(We=B.viewContainerRef.createComponent(be,B.viewContainerRef.length,B.injector||B.viewContainerRef.injector),this.setDisposeFn(()=>We.destroy())):(We=be.create(B.injector||this._defaultInjector),this._appRef.attachView(We.hostView),this.setDisposeFn(()=>{this._appRef.detachView(We.hostView),We.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(We)),this._attachedPortal=B,We}attachTemplatePortal(B){let q=B.viewContainerRef,be=q.createEmbeddedView(B.templateRef,B.context);return be.rootNodes.forEach(We=>this.outletElement.appendChild(We)),be.detectChanges(),this.setDisposeFn(()=>{let We=q.indexOf(be);-1!==We&&q.remove(We)}),this._attachedPortal=B,be}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(B){return B.hostView.rootNodes[0]}}let dn=(()=>{class ae extends kt{constructor(q,be,We){super(),this._componentFactoryResolver=q,this._viewContainerRef=be,this._isInitialized=!1,this.attached=new I.vpe,this.attachDomPortal=Mt=>{const $t=Mt.element,ti=this._document.createComment("dom-portal");Mt.setAttachedHost(this),$t.parentNode.insertBefore(ti,$t),this._getRootNode().appendChild($t),this._attachedPortal=Mt,super.setDisposeFn(()=>{ti.parentNode&&ti.parentNode.replaceChild($t,ti)})},this._document=We}get portal(){return this._attachedPortal}set portal(q){this.hasAttached()&&!q&&!this._isInitialized||(this.hasAttached()&&super.detach(),q&&super.attach(q),this._attachedPortal=q)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(q){q.setAttachedHost(this);const be=null!=q.viewContainerRef?q.viewContainerRef:this._viewContainerRef,Mt=(q.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(q.component),$t=be.createComponent(Mt,be.length,q.injector||be.injector);return be!==this._viewContainerRef&&this._getRootNode().appendChild($t.hostView.rootNodes[0]),super.setDisposeFn(()=>$t.destroy()),this._attachedPortal=q,this._attachedRef=$t,this.attached.emit($t),$t}attachTemplatePortal(q){q.setAttachedHost(this);const be=this._viewContainerRef.createEmbeddedView(q.templateRef,q.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=q,this._attachedRef=be,this.attached.emit(be),be}_getRootNode(){const q=this._viewContainerRef.element.nativeElement;return q.nodeType===q.ELEMENT_NODE?q:q.parentNode}}return ae.\u0275fac=function(q){return new(q||ae)(I.Y36(I._Vd),I.Y36(I.s_b),I.Y36(Xe.K0))},ae.\u0275dir=I.lG2({type:ae,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[I.qOj]}),ae})(),Ai=(()=>{class ae{}return ae.\u0275fac=function(q){return new(q||ae)},ae.\u0275mod=I.oAB({type:ae}),ae.\u0275inj=I.cJS({}),ae})();var ci=ne(9765),ni=ne(5319),zn=ne(6682),Ln=ne(5257),ii=ne(6782);ne(7393);var Ki=ne(6461);const rn=(0,Se.Mq)();class Ut{constructor(B,q){this._viewportRuler=B,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=q}attach(){}enable(){if(this._canBeEnabled()){const B=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=B.style.left||"",this._previousHTMLStyles.top=B.style.top||"",B.style.left=(0,Ie.HM)(-this._previousScrollPosition.left),B.style.top=(0,Ie.HM)(-this._previousScrollPosition.top),B.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const B=this._document.documentElement,be=B.style,We=this._document.body.style,Mt=be.scrollBehavior||"",$t=We.scrollBehavior||"";this._isEnabled=!1,be.left=this._previousHTMLStyles.left,be.top=this._previousHTMLStyles.top,B.classList.remove("cdk-global-scrollblock"),rn&&(be.scrollBehavior=We.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),rn&&(be.scrollBehavior=Mt,We.scrollBehavior=$t)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const q=this._document.body,be=this._viewportRuler.getViewportSize();return q.scrollHeight>be.height||q.scrollWidth>be.width}}class ct{constructor(B,q,be,We){this._scrollDispatcher=B,this._ngZone=q,this._viewportRuler=be,this._config=We,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(B){this._overlayRef=B}enable(){if(this._scrollSubscription)return;const B=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=B.subscribe(()=>{const q=this._viewportRuler.getViewportScrollPosition().top;Math.abs(q-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=B.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Et{enable(){}disable(){}attach(){}}function tn(ae,B){return B.some(q=>ae.bottom<q.top||ae.top>q.bottom||ae.right<q.left||ae.left>q.right)}function pn(ae,B){return B.some(q=>ae.top<q.top||ae.bottom>q.bottom||ae.left<q.left||ae.right>q.right)}class An{constructor(B,q,be,We){this._scrollDispatcher=B,this._viewportRuler=q,this._ngZone=be,this._config=We,this._scrollSubscription=null}attach(B){this._overlayRef=B}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const q=this._overlayRef.overlayElement.getBoundingClientRect(),{width:be,height:We}=this._viewportRuler.getViewportSize();tn(q,[{width:be,height:We,bottom:We,right:be,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Bn=(()=>{class ae{constructor(q,be,We,Mt){this._scrollDispatcher=q,this._viewportRuler=be,this._ngZone=We,this.noop=()=>new Et,this.close=$t=>new ct(this._scrollDispatcher,this._ngZone,this._viewportRuler,$t),this.block=()=>new Ut(this._viewportRuler,this._document),this.reposition=$t=>new An(this._scrollDispatcher,this._viewportRuler,this._ngZone,$t),this._document=Mt}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(x.mF),I.LFG(x.rL),I.LFG(I.R0b),I.LFG(Xe.K0))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(x.mF),I.LFG(x.rL),I.LFG(I.R0b),I.LFG(Xe.K0))},token:ae,providedIn:"root"}),ae})();class di{constructor(B){if(this.scrollStrategy=new Et,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,B){const q=Object.keys(B);for(const be of q)void 0!==B[be]&&(this[be]=B[be])}}}class Ei{constructor(B,q,be,We,Mt){this.offsetX=be,this.offsetY=We,this.panelClass=Mt,this.originX=B.originX,this.originY=B.originY,this.overlayX=q.overlayX,this.overlayY=q.overlayY}}class ki{constructor(B,q){this.connectionPair=B,this.scrollableViewProperties=q}}let er=(()=>{class ae{constructor(q){this._attachedOverlays=[],this._document=q}ngOnDestroy(){this.detach()}add(q){this.remove(q),this._attachedOverlays.push(q)}remove(q){const be=this._attachedOverlays.indexOf(q);be>-1&&this._attachedOverlays.splice(be,1),0===this._attachedOverlays.length&&this.detach()}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(Xe.K0))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(Xe.K0))},token:ae,providedIn:"root"}),ae})(),Zi=(()=>{class ae extends er{constructor(q){super(q),this._keydownListener=be=>{const We=this._attachedOverlays;for(let Mt=We.length-1;Mt>-1;Mt--)if(We[Mt]._keydownEvents.observers.length>0){We[Mt]._keydownEvents.next(be);break}}}add(q){super.add(q),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(Xe.K0))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(Xe.K0))},token:ae,providedIn:"root"}),ae})(),ei=(()=>{class ae extends er{constructor(q,be){super(q),this._platform=be,this._cursorStyleIsSet=!1,this._clickListener=We=>{const Mt=(0,Se.sA)(We),$t=this._attachedOverlays.slice();for(let ti=$t.length-1;ti>-1;ti--){const pi=$t[ti];if(!(pi._outsidePointerEvents.observers.length<1)&&pi.hasAttached()){if(pi.overlayElement.contains(Mt))break;pi._outsidePointerEvents.next(We)}}}}add(q){if(super.add(q),!this._isAttached){const be=this._document.body;be.addEventListener("click",this._clickListener,!0),be.addEventListener("auxclick",this._clickListener,!0),be.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=be.style.cursor,be.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const q=this._document.body;q.removeEventListener("click",this._clickListener,!0),q.removeEventListener("auxclick",this._clickListener,!0),q.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(q.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(Xe.K0),I.LFG(Se.t4))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(Xe.K0),I.LFG(Se.t4))},token:ae,providedIn:"root"}),ae})();const oi="undefined"!=typeof window?window:{},en=void 0!==oi.__karma__&&!!oi.__karma__||void 0!==oi.jasmine&&!!oi.jasmine||void 0!==oi.jest&&!!oi.jest||void 0!==oi.Mocha&&!!oi.Mocha;let at=(()=>{class ae{constructor(q,be){this._platform=be,this._document=q}ngOnDestroy(){const q=this._containerElement;q&&q.parentNode&&q.parentNode.removeChild(q)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const q="cdk-overlay-container";if(this._platform.isBrowser||en){const We=this._document.querySelectorAll(`.${q}[platform="server"], .${q}[platform="test"]`);for(let Mt=0;Mt<We.length;Mt++)We[Mt].parentNode.removeChild(We[Mt])}const be=this._document.createElement("div");be.classList.add(q),en?be.setAttribute("platform","test"):this._platform.isBrowser||be.setAttribute("platform","server"),this._document.body.appendChild(be),this._containerElement=be}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(Xe.K0),I.LFG(Se.t4))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(Xe.K0),I.LFG(Se.t4))},token:ae,providedIn:"root"}),ae})();class xt{constructor(B,q,be,We,Mt,$t,ti,pi,ji){this._portalOutlet=B,this._host=q,this._pane=be,this._config=We,this._ngZone=Mt,this._keyboardDispatcher=$t,this._document=ti,this._location=pi,this._outsideClickDispatcher=ji,this._backdropElement=null,this._backdropClick=new ci.xQ,this._attachments=new ci.xQ,this._detachments=new ci.xQ,this._locationChanges=ni.w.EMPTY,this._backdropClickHandler=Vi=>this._backdropClick.next(Vi),this._keydownEvents=new ci.xQ,this._outsidePointerEvents=new ci.xQ,We.scrollStrategy&&(this._scrollStrategy=We.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=We.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(B){let q=this._portalOutlet.attach(B);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ln.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),q}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const B=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),B}dispose(){const B=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,B&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(B){B!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=B,this.hasAttached()&&(B.attach(this),this.updatePosition()))}updateSize(B){this._config=Object.assign(Object.assign({},this._config),B),this._updateElementSize()}setDirection(B){this._config=Object.assign(Object.assign({},this._config),{direction:B}),this._updateElementDirection()}addPanelClass(B){this._pane&&this._toggleClasses(this._pane,B,!0)}removePanelClass(B){this._pane&&this._toggleClasses(this._pane,B,!1)}getDirection(){const B=this._config.direction;return B?"string"==typeof B?B:B.value:"ltr"}updateScrollStrategy(B){B!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=B,this.hasAttached()&&(B.attach(this),B.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const B=this._pane.style;B.width=(0,Ie.HM)(this._config.width),B.height=(0,Ie.HM)(this._config.height),B.minWidth=(0,Ie.HM)(this._config.minWidth),B.minHeight=(0,Ie.HM)(this._config.minHeight),B.maxWidth=(0,Ie.HM)(this._config.maxWidth),B.maxHeight=(0,Ie.HM)(this._config.maxHeight)}_togglePointerEvents(B){this._pane.style.pointerEvents=B?"":"none"}_attachBackdrop(){const B="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(B)})}):this._backdropElement.classList.add(B)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let B=this._backdropElement;if(!B)return;let q,be=()=>{B&&(B.removeEventListener("click",this._backdropClickHandler),B.removeEventListener("transitionend",be),B.parentNode&&B.parentNode.removeChild(B)),this._backdropElement==B&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(B,this._config.backdropClass,!1),clearTimeout(q)};B.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{B.addEventListener("transitionend",be)}),B.style.pointerEvents="none",q=this._ngZone.runOutsideAngular(()=>setTimeout(be,500))}_toggleClasses(B,q,be){const We=B.classList;(0,Ie.Eq)(q).forEach(Mt=>{Mt&&(be?We.add(Mt):We.remove(Mt))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const B=this._ngZone.onStable.pipe((0,ii.R)((0,zn.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),B.unsubscribe())})})}_disposeScrollStrategy(){const B=this._scrollStrategy;B&&(B.disable(),B.detach&&B.detach())}}const xn="cdk-overlay-connected-position-bounding-box",sn=/([A-Za-z%]+)$/;class Un{constructor(B,q,be,We,Mt){this._viewportRuler=q,this._document=be,this._platform=We,this._overlayContainer=Mt,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ci.xQ,this._resizeSubscription=ni.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(B)}get positions(){return this._preferredPositions}attach(B){this._validatePositions(),B.hostElement.classList.add(xn),this._overlayRef=B,this._boundingBox=B.hostElement,this._pane=B.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const B=this._originRect,q=this._overlayRect,be=this._viewportRect,We=[];let Mt;for(let $t of this._preferredPositions){let ti=this._getOriginPoint(B,$t),pi=this._getOverlayPoint(ti,q,$t),ji=this._getOverlayFit(pi,q,be,$t);if(ji.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition($t,ti);this._canFitWithFlexibleDimensions(ji,pi,be)?We.push({position:$t,origin:ti,overlayRect:q,boundingBoxRect:this._calculateBoundingBoxRect(ti,$t)}):(!Mt||Mt.overlayFit.visibleArea<ji.visibleArea)&&(Mt={overlayFit:ji,overlayPoint:pi,originPoint:ti,position:$t,overlayRect:q})}if(We.length){let $t=null,ti=-1;for(const pi of We){const ji=pi.boundingBoxRect.width*pi.boundingBoxRect.height*(pi.position.weight||1);ji>ti&&(ti=ji,$t=pi)}return this._isPushed=!1,void this._applyPosition($t.position,$t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Mt.position,Mt.originPoint);this._applyPosition(Mt.position,Mt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ui(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const B=this._lastPosition||this._preferredPositions[0],q=this._getOriginPoint(this._originRect,B);this._applyPosition(B,q)}}withScrollableContainers(B){return this._scrollables=B,this}withPositions(B){return this._preferredPositions=B,-1===B.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(B){return this._viewportMargin=B,this}withFlexibleDimensions(B=!0){return this._hasFlexibleDimensions=B,this}withGrowAfterOpen(B=!0){return this._growAfterOpen=B,this}withPush(B=!0){return this._canPush=B,this}withLockedPosition(B=!0){return this._positionLocked=B,this}setOrigin(B){return this._origin=B,this}withDefaultOffsetX(B){return this._offsetX=B,this}withDefaultOffsetY(B){return this._offsetY=B,this}withTransformOriginOn(B){return this._transformOriginSelector=B,this}_getOriginPoint(B,q){let be,We;if("center"==q.originX)be=B.left+B.width/2;else{const Mt=this._isRtl()?B.right:B.left,$t=this._isRtl()?B.left:B.right;be="start"==q.originX?Mt:$t}return We="center"==q.originY?B.top+B.height/2:"top"==q.originY?B.top:B.bottom,{x:be,y:We}}_getOverlayPoint(B,q,be){let We,Mt;return We="center"==be.overlayX?-q.width/2:"start"===be.overlayX?this._isRtl()?-q.width:0:this._isRtl()?0:-q.width,Mt="center"==be.overlayY?-q.height/2:"top"==be.overlayY?0:-q.height,{x:B.x+We,y:B.y+Mt}}_getOverlayFit(B,q,be,We){const Mt=Xt(q);let{x:$t,y:ti}=B,pi=this._getOffset(We,"x"),ji=this._getOffset(We,"y");pi&&($t+=pi),ji&&(ti+=ji);let zr=0-ti,Mr=ti+Mt.height-be.height,Ni=this._subtractOverflows(Mt.width,0-$t,$t+Mt.width-be.width),$r=this._subtractOverflows(Mt.height,zr,Mr),Or=Ni*$r;return{visibleArea:Or,isCompletelyWithinViewport:Mt.width*Mt.height===Or,fitsInViewportVertically:$r===Mt.height,fitsInViewportHorizontally:Ni==Mt.width}}_canFitWithFlexibleDimensions(B,q,be){if(this._hasFlexibleDimensions){const We=be.bottom-q.y,Mt=be.right-q.x,$t=Xn(this._overlayRef.getConfig().minHeight),ti=Xn(this._overlayRef.getConfig().minWidth),ji=B.fitsInViewportHorizontally||null!=ti&&ti<=Mt;return(B.fitsInViewportVertically||null!=$t&&$t<=We)&&ji}return!1}_pushOverlayOnScreen(B,q,be){if(this._previousPushAmount&&this._positionLocked)return{x:B.x+this._previousPushAmount.x,y:B.y+this._previousPushAmount.y};const We=Xt(q),Mt=this._viewportRect,$t=Math.max(B.x+We.width-Mt.width,0),ti=Math.max(B.y+We.height-Mt.height,0),pi=Math.max(Mt.top-be.top-B.y,0),ji=Math.max(Mt.left-be.left-B.x,0);let Vi=0,_i=0;return Vi=We.width<=Mt.width?ji||-$t:B.x<this._viewportMargin?Mt.left-be.left-B.x:0,_i=We.height<=Mt.height?pi||-ti:B.y<this._viewportMargin?Mt.top-be.top-B.y:0,this._previousPushAmount={x:Vi,y:_i},{x:B.x+Vi,y:B.y+_i}}_applyPosition(B,q){if(this._setTransformOrigin(B),this._setOverlayElementStyles(q,B),this._setBoundingBoxStyles(q,B),B.panelClass&&this._addPanelClasses(B.panelClass),this._lastPosition=B,this._positionChanges.observers.length){const be=this._getScrollVisibility(),We=new ki(B,be);this._positionChanges.next(We)}this._isInitialRender=!1}_setTransformOrigin(B){if(!this._transformOriginSelector)return;const q=this._boundingBox.querySelectorAll(this._transformOriginSelector);let be,We=B.overlayY;be="center"===B.overlayX?"center":this._isRtl()?"start"===B.overlayX?"right":"left":"start"===B.overlayX?"left":"right";for(let Mt=0;Mt<q.length;Mt++)q[Mt].style.transformOrigin=`${be} ${We}`}_calculateBoundingBoxRect(B,q){const be=this._viewportRect,We=this._isRtl();let Mt,$t,ti,Vi,_i,zr;if("top"===q.overlayY)$t=B.y,Mt=be.height-$t+this._viewportMargin;else if("bottom"===q.overlayY)ti=be.height-B.y+2*this._viewportMargin,Mt=be.height-ti+this._viewportMargin;else{const Mr=Math.min(be.bottom-B.y+be.top,B.y),Ni=this._lastBoundingBoxSize.height;Mt=2*Mr,$t=B.y-Mr,Mt>Ni&&!this._isInitialRender&&!this._growAfterOpen&&($t=B.y-Ni/2)}if("end"===q.overlayX&&!We||"start"===q.overlayX&&We)zr=be.width-B.x+this._viewportMargin,Vi=B.x-this._viewportMargin;else if("start"===q.overlayX&&!We||"end"===q.overlayX&&We)_i=B.x,Vi=be.right-B.x;else{const Mr=Math.min(be.right-B.x+be.left,B.x),Ni=this._lastBoundingBoxSize.width;Vi=2*Mr,_i=B.x-Mr,Vi>Ni&&!this._isInitialRender&&!this._growAfterOpen&&(_i=B.x-Ni/2)}return{top:$t,left:_i,bottom:ti,right:zr,width:Vi,height:Mt}}_setBoundingBoxStyles(B,q){const be=this._calculateBoundingBoxRect(B,q);!this._isInitialRender&&!this._growAfterOpen&&(be.height=Math.min(be.height,this._lastBoundingBoxSize.height),be.width=Math.min(be.width,this._lastBoundingBoxSize.width));const We={};if(this._hasExactPosition())We.top=We.left="0",We.bottom=We.right=We.maxHeight=We.maxWidth="",We.width=We.height="100%";else{const Mt=this._overlayRef.getConfig().maxHeight,$t=this._overlayRef.getConfig().maxWidth;We.height=(0,Ie.HM)(be.height),We.top=(0,Ie.HM)(be.top),We.bottom=(0,Ie.HM)(be.bottom),We.width=(0,Ie.HM)(be.width),We.left=(0,Ie.HM)(be.left),We.right=(0,Ie.HM)(be.right),We.alignItems="center"===q.overlayX?"center":"end"===q.overlayX?"flex-end":"flex-start",We.justifyContent="center"===q.overlayY?"center":"bottom"===q.overlayY?"flex-end":"flex-start",Mt&&(We.maxHeight=(0,Ie.HM)(Mt)),$t&&(We.maxWidth=(0,Ie.HM)($t))}this._lastBoundingBoxSize=be,ui(this._boundingBox.style,We)}_resetBoundingBoxStyles(){ui(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ui(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(B,q){const be={},We=this._hasExactPosition(),Mt=this._hasFlexibleDimensions,$t=this._overlayRef.getConfig();if(We){const Vi=this._viewportRuler.getViewportScrollPosition();ui(be,this._getExactOverlayY(q,B,Vi)),ui(be,this._getExactOverlayX(q,B,Vi))}else be.position="static";let ti="",pi=this._getOffset(q,"x"),ji=this._getOffset(q,"y");pi&&(ti+=`translateX(${pi}px) `),ji&&(ti+=`translateY(${ji}px)`),be.transform=ti.trim(),$t.maxHeight&&(We?be.maxHeight=(0,Ie.HM)($t.maxHeight):Mt&&(be.maxHeight="")),$t.maxWidth&&(We?be.maxWidth=(0,Ie.HM)($t.maxWidth):Mt&&(be.maxWidth="")),ui(this._pane.style,be)}_getExactOverlayY(B,q,be){let We={top:"",bottom:""},Mt=this._getOverlayPoint(q,this._overlayRect,B);this._isPushed&&(Mt=this._pushOverlayOnScreen(Mt,this._overlayRect,be));let $t=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return Mt.y-=$t,"bottom"===B.overlayY?We.bottom=this._document.documentElement.clientHeight-(Mt.y+this._overlayRect.height)+"px":We.top=(0,Ie.HM)(Mt.y),We}_getExactOverlayX(B,q,be){let $t,We={left:"",right:""},Mt=this._getOverlayPoint(q,this._overlayRect,B);return this._isPushed&&(Mt=this._pushOverlayOnScreen(Mt,this._overlayRect,be)),$t=this._isRtl()?"end"===B.overlayX?"left":"right":"end"===B.overlayX?"right":"left","right"===$t?We.right=this._document.documentElement.clientWidth-(Mt.x+this._overlayRect.width)+"px":We.left=(0,Ie.HM)(Mt.x),We}_getScrollVisibility(){const B=this._getOriginRect(),q=this._pane.getBoundingClientRect(),be=this._scrollables.map(We=>We.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pn(B,be),isOriginOutsideView:tn(B,be),isOverlayClipped:pn(q,be),isOverlayOutsideView:tn(q,be)}}_subtractOverflows(B,...q){return q.reduce((be,We)=>be-Math.max(We,0),B)}_getNarrowedViewportRect(){const B=this._document.documentElement.clientWidth,q=this._document.documentElement.clientHeight,be=this._viewportRuler.getViewportScrollPosition();return{top:be.top+this._viewportMargin,left:be.left+this._viewportMargin,right:be.left+B-this._viewportMargin,bottom:be.top+q-this._viewportMargin,width:B-2*this._viewportMargin,height:q-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(B,q){return"x"===q?null==B.offsetX?this._offsetX:B.offsetX:null==B.offsetY?this._offsetY:B.offsetY}_validatePositions(){}_addPanelClasses(B){this._pane&&(0,Ie.Eq)(B).forEach(q=>{""!==q&&-1===this._appliedPanelClasses.indexOf(q)&&(this._appliedPanelClasses.push(q),this._pane.classList.add(q))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(B=>{this._pane.classList.remove(B)}),this._appliedPanelClasses=[])}_getOriginRect(){const B=this._origin;if(B instanceof I.SBq)return B.nativeElement.getBoundingClientRect();if(B instanceof Element)return B.getBoundingClientRect();const q=B.width||0,be=B.height||0;return{top:B.y,bottom:B.y+be,left:B.x,right:B.x+q,height:be,width:q}}}function ui(ae,B){for(let q in B)B.hasOwnProperty(q)&&(ae[q]=B[q]);return ae}function Xn(ae){if("number"!=typeof ae&&null!=ae){const[B,q]=ae.split(sn);return q&&"px"!==q?null:parseFloat(B)}return ae||null}function Xt(ae){return{top:Math.floor(ae.top),right:Math.floor(ae.right),bottom:Math.floor(ae.bottom),left:Math.floor(ae.left),width:Math.floor(ae.width),height:Math.floor(ae.height)}}class Zn{constructor(B,q,be,We,Mt,$t,ti){this._preferredPositions=[],this._positionStrategy=new Un(be,We,Mt,$t,ti).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(B,q),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(B){this._overlayRef=B,this._positionStrategy.attach(B),this._direction&&(B.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(B){this._positionStrategy.withScrollableContainers(B)}withFallbackPosition(B,q,be,We){const Mt=new Ei(B,q,be,We);return this._preferredPositions.push(Mt),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(B){return this._overlayRef?this._overlayRef.setDirection(B):this._direction=B,this}withOffsetX(B){return this._positionStrategy.withDefaultOffsetX(B),this}withOffsetY(B){return this._positionStrategy.withDefaultOffsetY(B),this}withLockedPosition(B){return this._positionStrategy.withLockedPosition(B),this}withPositions(B){return this._preferredPositions=B.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(B){return this._positionStrategy.setOrigin(B),this}}const Bi="cdk-global-overlay-wrapper";class cr{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(B){const q=B.getConfig();this._overlayRef=B,this._width&&!q.width&&B.updateSize({width:this._width}),this._height&&!q.height&&B.updateSize({height:this._height}),B.hostElement.classList.add(Bi),this._isDisposed=!1}top(B=""){return this._bottomOffset="",this._topOffset=B,this._alignItems="flex-start",this}left(B=""){return this._rightOffset="",this._leftOffset=B,this._justifyContent="flex-start",this}bottom(B=""){return this._topOffset="",this._bottomOffset=B,this._alignItems="flex-end",this}right(B=""){return this._leftOffset="",this._rightOffset=B,this._justifyContent="flex-end",this}width(B=""){return this._overlayRef?this._overlayRef.updateSize({width:B}):this._width=B,this}height(B=""){return this._overlayRef?this._overlayRef.updateSize({height:B}):this._height=B,this}centerHorizontally(B=""){return this.left(B),this._justifyContent="center",this}centerVertically(B=""){return this.top(B),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const B=this._overlayRef.overlayElement.style,q=this._overlayRef.hostElement.style,be=this._overlayRef.getConfig(),{width:We,height:Mt,maxWidth:$t,maxHeight:ti}=be,pi=!("100%"!==We&&"100vw"!==We||$t&&"100%"!==$t&&"100vw"!==$t),ji=!("100%"!==Mt&&"100vh"!==Mt||ti&&"100%"!==ti&&"100vh"!==ti);B.position=this._cssPosition,B.marginLeft=pi?"0":this._leftOffset,B.marginTop=ji?"0":this._topOffset,B.marginBottom=this._bottomOffset,B.marginRight=this._rightOffset,pi?q.justifyContent="flex-start":"center"===this._justifyContent?q.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?q.justifyContent="flex-end":"flex-end"===this._justifyContent&&(q.justifyContent="flex-start"):q.justifyContent=this._justifyContent,q.alignItems=ji?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const B=this._overlayRef.overlayElement.style,q=this._overlayRef.hostElement,be=q.style;q.classList.remove(Bi),be.justifyContent=be.alignItems=B.marginTop=B.marginBottom=B.marginLeft=B.marginRight=B.position="",this._overlayRef=null,this._isDisposed=!0}}let Ui=(()=>{class ae{constructor(q,be,We,Mt){this._viewportRuler=q,this._document=be,this._platform=We,this._overlayContainer=Mt}global(){return new cr}connectedTo(q,be,We){return new Zn(be,We,q,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(q){return new Un(q,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(x.rL),I.LFG(Xe.K0),I.LFG(Se.t4),I.LFG(at))},ae.\u0275prov=I.Yz7({factory:function(){return new ae(I.LFG(x.rL),I.LFG(Xe.K0),I.LFG(Se.t4),I.LFG(at))},token:ae,providedIn:"root"}),ae})(),Kn=0,vt=(()=>{class ae{constructor(q,be,We,Mt,$t,ti,pi,ji,Vi,_i,zr){this.scrollStrategies=q,this._overlayContainer=be,this._componentFactoryResolver=We,this._positionBuilder=Mt,this._keyboardDispatcher=$t,this._injector=ti,this._ngZone=pi,this._document=ji,this._directionality=Vi,this._location=_i,this._outsideClickDispatcher=zr}create(q){const be=this._createHostElement(),We=this._createPaneElement(be),Mt=this._createPortalOutlet(We),$t=new di(q);return $t.direction=$t.direction||this._directionality.value,new xt(Mt,be,We,$t,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(q){const be=this._document.createElement("div");return be.id="cdk-overlay-"+Kn++,be.classList.add("cdk-overlay-pane"),q.appendChild(be),be}_createHostElement(){const q=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(q),q}_createPortalOutlet(q){return this._appRef||(this._appRef=this._injector.get(I.z2F)),new Ft(q,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(Bn),I.LFG(at),I.LFG(I._Vd),I.LFG(Ui),I.LFG(Zi),I.LFG(I.zs3),I.LFG(I.R0b),I.LFG(Xe.K0),I.LFG(c.Is),I.LFG(Xe.Ye),I.LFG(ei))},ae.\u0275prov=I.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const Dn={provide:new I.OlP("cdk-connected-overlay-scroll-strategy"),deps:[vt],useFactory:function(ae){return()=>ae.scrollStrategies.reposition()}};let ri=(()=>{class ae{}return ae.\u0275fac=function(q){return new(q||ae)},ae.\u0275mod=I.oAB({type:ae}),ae.\u0275inj=I.cJS({providers:[vt,Dn],imports:[[c.vT,Ai,x.Cl],x.Cl]}),ae})();var ze=ne(2458),Ce=ne(1439),me=ne(5917),oe=ne(5435),K=ne(9761),N=ne(7238),Q=ne(369);function z(ae,B){}class O{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const le={dialogContainer:(0,N.X$)("dialogContainer",[(0,N.SB)("void, exit",(0,N.oB)({opacity:0,transform:"scale(0.7)"})),(0,N.SB)("enter",(0,N.oB)({transform:"none"})),(0,N.eR)("* => enter",(0,N.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,N.oB)({transform:"none",opacity:1}))),(0,N.eR)("* => void, * => exit",(0,N.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,N.oB)({opacity:0})))])};let W=(()=>{class ae extends kt{constructor(q,be,We,Mt,$t,ti){super(),this._elementRef=q,this._focusTrapFactory=be,this._changeDetectorRef=We,this._config=$t,this._focusMonitor=ti,this._animationStateChanged=new I.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=pi=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(pi)),this._ariaLabelledBy=$t.ariaLabelledBy||null,this._document=Mt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(q){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(q)}attachTemplatePortal(q){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(q)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const q=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&q&&"function"==typeof q.focus){const be=(0,Se.ht)(),We=this._elementRef.nativeElement;(!be||be===this._document.body||be===We||We.contains(be))&&(this._focusMonitor?(this._focusMonitor.focusVia(q,this._closeInteractionType),this._closeInteractionType=null):q.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,Se.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const q=this._elementRef.nativeElement,be=(0,Se.ht)();return q===be||q.contains(be)}}return ae.\u0275fac=function(q){return new(q||ae)(I.Y36(I.SBq),I.Y36(Q.qV),I.Y36(I.sBO),I.Y36(Xe.K0,8),I.Y36(O),I.Y36(Q.tE))},ae.\u0275dir=I.lG2({type:ae,viewQuery:function(q,be){if(1&q&&I.Gf(dn,7),2&q){let We;I.iGM(We=I.CRH())&&(be._portalOutlet=We.first)}},features:[I.qOj]}),ae})(),$=(()=>{class ae extends W{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:q,totalTime:be}){"enter"===q?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:be})):"exit"===q&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:be}))}_onAnimationStart({toState:q,totalTime:be}){"enter"===q?this._animationStateChanged.next({state:"opening",totalTime:be}):("exit"===q||"void"===q)&&this._animationStateChanged.next({state:"closing",totalTime:be})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return ae.\u0275fac=function(){let B;return function(be){return(B||(B=I.n5z(ae)))(be||ae)}}(),ae.\u0275cmp=I.Xpm({type:ae,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(q,be){1&q&&I.WFA("@dialogContainer.start",function(Mt){return be._onAnimationStart(Mt)})("@dialogContainer.done",function(Mt){return be._onAnimationDone(Mt)}),2&q&&(I.Ikx("id",be._id),I.uIk("role",be._config.role)("aria-labelledby",be._config.ariaLabel?null:be._ariaLabelledBy)("aria-label",be._config.ariaLabel)("aria-describedby",be._config.ariaDescribedBy||null),I.d8E("@dialogContainer",be._state))},features:[I.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(q,be){1&q&&I.YNc(0,z,0,0,"ng-template",0)},directives:[dn],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[le.dialogContainer]}}),ae})(),Ee=0;class Ge{constructor(B,q,be="mat-dialog-"+Ee++){this._overlayRef=B,this._containerInstance=q,this.id=be,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ci.xQ,this._afterClosed=new ci.xQ,this._beforeClosed=new ci.xQ,this._state=0,q._id=be,q._animationStateChanged.pipe((0,oe.h)(We=>"opened"===We.state),(0,Ln.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),q._animationStateChanged.pipe((0,oe.h)(We=>"closed"===We.state),(0,Ln.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),B.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),B.keydownEvents().pipe((0,oe.h)(We=>We.keyCode===Ki.hY&&!this.disableClose&&!(0,Ki.Vb)(We))).subscribe(We=>{We.preventDefault(),mt(this,"keyboard")}),B.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():mt(this,"mouse")})}close(B){this._result=B,this._containerInstance._animationStateChanged.pipe((0,oe.h)(q=>"closing"===q.state),(0,Ln.q)(1)).subscribe(q=>{this._beforeClosed.next(B),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),q.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(B){let q=this._getPositionStrategy();return B&&(B.left||B.right)?B.left?q.left(B.left):q.right(B.right):q.centerHorizontally(),B&&(B.top||B.bottom)?B.top?q.top(B.top):q.bottom(B.bottom):q.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(B="",q=""){return this._overlayRef.updateSize({width:B,height:q}),this._overlayRef.updatePosition(),this}addPanelClass(B){return this._overlayRef.addPanelClass(B),this}removePanelClass(B){return this._overlayRef.removePanelClass(B),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function mt(ae,B,q){return void 0!==ae._containerInstance&&(ae._containerInstance._closeInteractionType=B),ae.close(q)}const nn=new I.OlP("MatDialogData"),Qe=new I.OlP("mat-dialog-default-options"),It=new I.OlP("mat-dialog-scroll-strategy"),Nn={provide:It,deps:[vt],useFactory:function(ae){return()=>ae.scrollStrategies.block()}};let Qn=(()=>{class ae{constructor(q,be,We,Mt,$t,ti,pi,ji,Vi){this._overlay=q,this._injector=be,this._defaultOptions=We,this._parentDialog=Mt,this._overlayContainer=$t,this._dialogRefConstructor=pi,this._dialogContainerType=ji,this._dialogDataToken=Vi,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ci.xQ,this._afterOpenedAtThisLevel=new ci.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Ce.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,K.O)(void 0))),this._scrollStrategy=ti}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const q=this._parentDialog;return q?q._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(q,be){(be=function(ae,B){return Object.assign(Object.assign({},B),ae)}(be,this._defaultOptions||new O)).id&&this.getDialogById(be.id);const We=this._createOverlay(be),Mt=this._attachDialogContainer(We,be),$t=this._attachDialogContent(q,Mt,We,be);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push($t),$t.afterClosed().subscribe(()=>this._removeOpenDialog($t)),this.afterOpened.next($t),Mt._initializeWithAttachedContent(),$t}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(q){return this.openDialogs.find(be=>be.id===q)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(q){const be=this._getOverlayConfig(q);return this._overlay.create(be)}_getOverlayConfig(q){const be=new di({positionStrategy:this._overlay.position().global(),scrollStrategy:q.scrollStrategy||this._scrollStrategy(),panelClass:q.panelClass,hasBackdrop:q.hasBackdrop,direction:q.direction,minWidth:q.minWidth,minHeight:q.minHeight,maxWidth:q.maxWidth,maxHeight:q.maxHeight,disposeOnNavigation:q.closeOnNavigation});return q.backdropClass&&(be.backdropClass=q.backdropClass),be}_attachDialogContainer(q,be){const Mt=I.zs3.create({parent:be&&be.viewContainerRef&&be.viewContainerRef.injector||this._injector,providers:[{provide:O,useValue:be}]}),$t=new Qt(this._dialogContainerType,be.viewContainerRef,Mt,be.componentFactoryResolver);return q.attach($t).instance}_attachDialogContent(q,be,We,Mt){const $t=new this._dialogRefConstructor(We,be,Mt.id);if(q instanceof I.Rgc)be.attachTemplatePortal(new Dt(q,null,{$implicit:Mt.data,dialogRef:$t}));else{const ti=this._createInjector(Mt,$t,be),pi=be.attachComponentPortal(new Qt(q,Mt.viewContainerRef,ti));$t.componentInstance=pi.instance}return $t.updateSize(Mt.width,Mt.height).updatePosition(Mt.position),$t}_createInjector(q,be,We){const Mt=q&&q.viewContainerRef&&q.viewContainerRef.injector,$t=[{provide:this._dialogContainerType,useValue:We},{provide:this._dialogDataToken,useValue:q.data},{provide:this._dialogRefConstructor,useValue:be}];return q.direction&&(!Mt||!Mt.get(c.Is,null,I.XFs.Optional))&&$t.push({provide:c.Is,useValue:{value:q.direction,change:(0,me.of)()}}),I.zs3.create({parent:Mt||this._injector,providers:$t})}_removeOpenDialog(q){const be=this.openDialogs.indexOf(q);be>-1&&(this.openDialogs.splice(be,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((We,Mt)=>{We?Mt.setAttribute("aria-hidden",We):Mt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const q=this._overlayContainer.getContainerElement();if(q.parentElement){const be=q.parentElement.children;for(let We=be.length-1;We>-1;We--){let Mt=be[We];Mt!==q&&"SCRIPT"!==Mt.nodeName&&"STYLE"!==Mt.nodeName&&!Mt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Mt,Mt.getAttribute("aria-hidden")),Mt.setAttribute("aria-hidden","true"))}}}_closeDialogs(q){let be=q.length;for(;be--;)q[be].close()}}return ae.\u0275fac=function(q){return new(q||ae)(I.Y36(vt),I.Y36(I.zs3),I.Y36(void 0),I.Y36(void 0),I.Y36(at),I.Y36(void 0),I.Y36(I.DyG),I.Y36(I.DyG),I.Y36(I.OlP))},ae.\u0275dir=I.lG2({type:ae}),ae})(),hi=(()=>{class ae extends Qn{constructor(q,be,We,Mt,$t,ti,pi){super(q,be,Mt,ti,pi,$t,Ge,$,nn)}}return ae.\u0275fac=function(q){return new(q||ae)(I.LFG(vt),I.LFG(I.zs3),I.LFG(Xe.Ye,8),I.LFG(Qe,8),I.LFG(It),I.LFG(ae,12),I.LFG(at))},ae.\u0275prov=I.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),et=(()=>{class ae{}return ae.\u0275fac=function(q){return new(q||ae)},ae.\u0275mod=I.oAB({type:ae}),ae.\u0275inj=I.cJS({providers:[hi,Nn],imports:[[ri,Ai,ze.BQ],ze.BQ]}),ae})()},1769:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{d:()=>c,t:()=>Xe});var x=ne(9490),I=ne(2458),Se=ne(7716);let c=(()=>{class Ie{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(ve){this._vertical=(0,x.Ig)(ve)}get inset(){return this._inset}set inset(ve){this._inset=(0,x.Ig)(ve)}}return Ie.\u0275fac=function(ve){return new(ve||Ie)},Ie.\u0275cmp=Se.Xpm({type:Ie,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(ve,xe){2&ve&&(Se.uIk("aria-orientation",xe.vertical?"vertical":"horizontal"),Se.ekj("mat-divider-vertical",xe.vertical)("mat-divider-horizontal",!xe.vertical)("mat-divider-inset",xe.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(ve,xe){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),Ie})(),Xe=(()=>{class Ie{}return Ie.\u0275fac=function(ve){return new(ve||Ie)},Ie.\u0275mod=Se.oAB({type:Ie}),Ie.\u0275inj=Se.cJS({imports:[[I.BQ],I.BQ]}),Ie})()},6627:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Hw:()=>Ki,Ps:()=>rn});var x=ne(7716),I=ne(2458),Se=ne(9490),c=ne(8583),Xe=ne(5917),Ie=ne(205),_=ne(5758),ve=ne(5319),xe=ne(3342),Oe=ne(8002),Ke=ne(5304),st=ne(8939),Pt=ne(8819),Qt=ne(5257),Dt=ne(1841),St=ne(9075);const kt=["*"];function Kt(Ut){return Error(`Unable to find icon with the name "${Ut}"`)}function Mn(Ut){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Ut}".`)}function Jt(Ut){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Ut}".`)}class qt{constructor(an,ct,Et){this.url=an,this.svgText=ct,this.options=Et}}let dn=(()=>{class Ut{constructor(ct,Et,tn,pn){this._httpClient=ct,this._sanitizer=Et,this._errorHandler=pn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=tn}addSvgIcon(ct,Et,tn){return this.addSvgIconInNamespace("",ct,Et,tn)}addSvgIconLiteral(ct,Et,tn){return this.addSvgIconLiteralInNamespace("",ct,Et,tn)}addSvgIconInNamespace(ct,Et,tn,pn){return this._addSvgIconConfig(ct,Et,new qt(tn,null,pn))}addSvgIconResolver(ct){return this._resolvers.push(ct),this}addSvgIconLiteralInNamespace(ct,Et,tn,pn){const An=this._sanitizer.sanitize(x.q3G.HTML,tn);if(!An)throw Jt(tn);return this._addSvgIconConfig(ct,Et,new qt("",An,pn))}addSvgIconSet(ct,Et){return this.addSvgIconSetInNamespace("",ct,Et)}addSvgIconSetLiteral(ct,Et){return this.addSvgIconSetLiteralInNamespace("",ct,Et)}addSvgIconSetInNamespace(ct,Et,tn){return this._addSvgIconSetConfig(ct,new qt(Et,null,tn))}addSvgIconSetLiteralInNamespace(ct,Et,tn){const pn=this._sanitizer.sanitize(x.q3G.HTML,Et);if(!pn)throw Jt(Et);return this._addSvgIconSetConfig(ct,new qt("",pn,tn))}registerFontClassAlias(ct,Et=ct){return this._fontCssClassesByAlias.set(ct,Et),this}classNameForFontAlias(ct){return this._fontCssClassesByAlias.get(ct)||ct}setDefaultFontSetClass(ct){return this._defaultFontSetClass=ct,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(ct){const Et=this._sanitizer.sanitize(x.q3G.RESOURCE_URL,ct);if(!Et)throw Mn(ct);const tn=this._cachedIconsByUrl.get(Et);return tn?(0,Xe.of)(Ri(tn)):this._loadSvgIconFromConfig(new qt(ct,null)).pipe((0,xe.b)(pn=>this._cachedIconsByUrl.set(Et,pn)),(0,Oe.U)(pn=>Ri(pn)))}getNamedSvgIcon(ct,Et=""){const tn=ci(Et,ct);let pn=this._svgIconConfigs.get(tn);if(pn)return this._getSvgFromConfig(pn);if(pn=this._getIconConfigFromResolvers(Et,ct),pn)return this._svgIconConfigs.set(tn,pn),this._getSvgFromConfig(pn);const An=this._iconSetConfigs.get(Et);return An?this._getSvgFromIconSetConfigs(ct,An):(0,Ie._)(Kt(tn))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(ct){return ct.svgText?(0,Xe.of)(Ri(this._svgElementFromConfig(ct))):this._loadSvgIconFromConfig(ct).pipe((0,Oe.U)(Et=>Ri(Et)))}_getSvgFromIconSetConfigs(ct,Et){const tn=this._extractIconWithNameFromAnySet(ct,Et);if(tn)return(0,Xe.of)(tn);const pn=Et.filter(An=>!An.svgText).map(An=>this._loadSvgIconSetFromConfig(An).pipe((0,Ke.K)(Bn=>{const Ei=`Loading icon set URL: ${this._sanitizer.sanitize(x.q3G.RESOURCE_URL,An.url)} failed: ${Bn.message}`;return this._errorHandler.handleError(new Error(Ei)),(0,Xe.of)(null)})));return(0,_.D)(pn).pipe((0,Oe.U)(()=>{const An=this._extractIconWithNameFromAnySet(ct,Et);if(!An)throw Kt(ct);return An}))}_extractIconWithNameFromAnySet(ct,Et){for(let tn=Et.length-1;tn>=0;tn--){const pn=Et[tn];if(pn.svgText&&pn.svgText.indexOf(ct)>-1){const An=this._svgElementFromConfig(pn),Bn=this._extractSvgIconFromSet(An,ct,pn.options);if(Bn)return Bn}}return null}_loadSvgIconFromConfig(ct){return this._fetchIcon(ct).pipe((0,xe.b)(Et=>ct.svgText=Et),(0,Oe.U)(()=>this._svgElementFromConfig(ct)))}_loadSvgIconSetFromConfig(ct){return ct.svgText?(0,Xe.of)(null):this._fetchIcon(ct).pipe((0,xe.b)(Et=>ct.svgText=Et))}_extractSvgIconFromSet(ct,Et,tn){const pn=ct.querySelector(`[id="${Et}"]`);if(!pn)return null;const An=pn.cloneNode(!0);if(An.removeAttribute("id"),"svg"===An.nodeName.toLowerCase())return this._setSvgAttributes(An,tn);if("symbol"===An.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(An),tn);const Bn=this._svgElementFromString("<svg></svg>");return Bn.appendChild(An),this._setSvgAttributes(Bn,tn)}_svgElementFromString(ct){const Et=this._document.createElement("DIV");Et.innerHTML=ct;const tn=Et.querySelector("svg");if(!tn)throw Error("<svg> tag not found");return tn}_toSvgElement(ct){const Et=this._svgElementFromString("<svg></svg>"),tn=ct.attributes;for(let pn=0;pn<tn.length;pn++){const{name:An,value:Bn}=tn[pn];"id"!==An&&Et.setAttribute(An,Bn)}for(let pn=0;pn<ct.childNodes.length;pn++)ct.childNodes[pn].nodeType===this._document.ELEMENT_NODE&&Et.appendChild(ct.childNodes[pn].cloneNode(!0));return Et}_setSvgAttributes(ct,Et){return ct.setAttribute("fit",""),ct.setAttribute("height","100%"),ct.setAttribute("width","100%"),ct.setAttribute("preserveAspectRatio","xMidYMid meet"),ct.setAttribute("focusable","false"),Et&&Et.viewBox&&ct.setAttribute("viewBox",Et.viewBox),ct}_fetchIcon(ct){var Et;const{url:tn,options:pn}=ct,An=null!==(Et=null==pn?void 0:pn.withCredentials)&&void 0!==Et&&Et;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==tn)throw Error(`Cannot fetch icon from URL "${tn}".`);const Bn=this._sanitizer.sanitize(x.q3G.RESOURCE_URL,tn);if(!Bn)throw Mn(tn);const di=this._inProgressUrlFetches.get(Bn);if(di)return di;const Ei=this._httpClient.get(Bn,{responseType:"text",withCredentials:An}).pipe((0,st.x)(()=>this._inProgressUrlFetches.delete(Bn)),(0,Pt.B)());return this._inProgressUrlFetches.set(Bn,Ei),Ei}_addSvgIconConfig(ct,Et,tn){return this._svgIconConfigs.set(ci(ct,Et),tn),this}_addSvgIconSetConfig(ct,Et){const tn=this._iconSetConfigs.get(ct);return tn?tn.push(Et):this._iconSetConfigs.set(ct,[Et]),this}_svgElementFromConfig(ct){if(!ct.svgElement){const Et=this._svgElementFromString(ct.svgText);this._setSvgAttributes(Et,ct.options),ct.svgElement=Et}return ct.svgElement}_getIconConfigFromResolvers(ct,Et){for(let tn=0;tn<this._resolvers.length;tn++){const pn=this._resolvers[tn](Et,ct);if(pn)return ni(pn)?new qt(pn.url,null,pn.options):new qt(pn,null)}}}return Ut.\u0275fac=function(ct){return new(ct||Ut)(x.LFG(Dt.eN,8),x.LFG(St.H7),x.LFG(c.K0,8),x.LFG(x.qLn))},Ut.\u0275prov=x.Yz7({factory:function(){return new Ut(x.LFG(Dt.eN,8),x.LFG(St.H7),x.LFG(c.K0,8),x.LFG(x.qLn))},token:Ut,providedIn:"root"}),Ut})();function Ri(Ut){return Ut.cloneNode(!0)}function ci(Ut,an){return Ut+":"+an}function ni(Ut){return!(!Ut.url||!Ut.options)}const zn=(0,I.pj)(class{constructor(Ut){this._elementRef=Ut}}),Ln=new x.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Ut=(0,x.f3M)(c.K0),an=Ut?Ut.location:null;return{getPathname:()=>an?an.pathname+an.search:""}}}),On=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xi=On.map(Ut=>`[${Ut}]`).join(", "),fi=/^url\(['"]?#(.*?)['"]?\)$/;let Ki=(()=>{class Ut extends zn{constructor(ct,Et,tn,pn,An){super(ct),this._iconRegistry=Et,this._location=pn,this._errorHandler=An,this._inline=!1,this._currentIconFetch=ve.w.EMPTY,tn||ct.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(ct){this._inline=(0,Se.Ig)(ct)}get svgIcon(){return this._svgIcon}set svgIcon(ct){ct!==this._svgIcon&&(ct?this._updateSvgIcon(ct):this._svgIcon&&this._clearSvgElement(),this._svgIcon=ct)}get fontSet(){return this._fontSet}set fontSet(ct){const Et=this._cleanupFontValue(ct);Et!==this._fontSet&&(this._fontSet=Et,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(ct){const Et=this._cleanupFontValue(ct);Et!==this._fontIcon&&(this._fontIcon=Et,this._updateFontIconClasses())}_splitIconName(ct){if(!ct)return["",""];const Et=ct.split(":");switch(Et.length){case 1:return["",Et[0]];case 2:return Et;default:throw Error(`Invalid icon name: "${ct}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const ct=this._elementsWithExternalReferences;if(ct&&ct.size){const Et=this._location.getPathname();Et!==this._previousPath&&(this._previousPath=Et,this._prependPathToReferences(Et))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(ct){this._clearSvgElement();const Et=ct.querySelectorAll("style");for(let pn=0;pn<Et.length;pn++)Et[pn].textContent+=" ";const tn=this._location.getPathname();this._previousPath=tn,this._cacheChildrenWithExternalReferences(ct),this._prependPathToReferences(tn),this._elementRef.nativeElement.appendChild(ct)}_clearSvgElement(){const ct=this._elementRef.nativeElement;let Et=ct.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Et--;){const tn=ct.childNodes[Et];(1!==tn.nodeType||"svg"===tn.nodeName.toLowerCase())&&ct.removeChild(tn)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const ct=this._elementRef.nativeElement,Et=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Et!=this._previousFontSetClass&&(this._previousFontSetClass&&ct.classList.remove(this._previousFontSetClass),Et&&ct.classList.add(Et),this._previousFontSetClass=Et),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&ct.classList.remove(this._previousFontIconClass),this.fontIcon&&ct.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(ct){return"string"==typeof ct?ct.trim().split(" ")[0]:ct}_prependPathToReferences(ct){const Et=this._elementsWithExternalReferences;Et&&Et.forEach((tn,pn)=>{tn.forEach(An=>{pn.setAttribute(An.name,`url('${ct}#${An.value}')`)})})}_cacheChildrenWithExternalReferences(ct){const Et=ct.querySelectorAll(xi),tn=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let pn=0;pn<Et.length;pn++)On.forEach(An=>{const Bn=Et[pn],di=Bn.getAttribute(An),Ei=di?di.match(fi):null;if(Ei){let Vn=tn.get(Bn);Vn||(Vn=[],tn.set(Bn,Vn)),Vn.push({name:An,value:Ei[1]})}})}_updateSvgIcon(ct){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),ct){const[Et,tn]=this._splitIconName(ct);Et&&(this._svgNamespace=Et),tn&&(this._svgName=tn),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(tn,Et).pipe((0,Qt.q)(1)).subscribe(pn=>this._setSvgElement(pn),pn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Et}:${tn}! ${pn.message}`))})}}}return Ut.\u0275fac=function(ct){return new(ct||Ut)(x.Y36(x.SBq),x.Y36(dn),x.$8M("aria-hidden"),x.Y36(Ln),x.Y36(x.qLn))},Ut.\u0275cmp=x.Xpm({type:Ut,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(ct,Et){2&ct&&(x.uIk("data-mat-icon-type",Et._usingFontIcon()?"font":"svg")("data-mat-icon-name",Et._svgName||Et.fontIcon)("data-mat-icon-namespace",Et._svgNamespace||Et.fontSet),x.ekj("mat-icon-inline",Et.inline)("mat-icon-no-color","primary"!==Et.color&&"accent"!==Et.color&&"warn"!==Et.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[x.qOj],ngContentSelectors:kt,decls:1,vars:0,template:function(ct,Et){1&ct&&(x.F$t(),x.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Ut})(),rn=(()=>{class Ut{}return Ut.\u0275fac=function(ct){return new(ct||Ut)},Ut.\u0275mod=x.oAB({type:Ut}),Ut.\u0275inj=x.cJS({imports:[[I.BQ],I.BQ]}),Ut})()},6237:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Qb:()=>gr});var x=ne(7716),Se=(ne(9075),ne(7238));function c(){return"undefined"!=typeof window&&void 0!==window.document}function Xe(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let Pt=(ye,A)=>!1,Dt=(ye,A)=>!1,kt=(ye,A,S)=>[];const Ft=Xe();(Ft||"undefined"!=typeof Element)&&(Pt=c()?(ye,A)=>{for(;A&&A!==document.documentElement;){if(A===ye)return!0;A=A.parentNode||A.host}return!1}:(ye,A)=>ye.contains(A),Dt=(()=>{if(Ft||Element.prototype.matches)return(ye,A)=>ye.matches(A);{const ye=Element.prototype,A=ye.matchesSelector||ye.mozMatchesSelector||ye.msMatchesSelector||ye.oMatchesSelector||ye.webkitMatchesSelector;return A?(S,j)=>A.apply(S,[j]):Dt}})(),kt=(ye,A,S)=>{let j=[];if(S){const ge=ye.querySelectorAll(A);for(let Be=0;Be<ge.length;Be++)j.push(ge[Be])}else{const ge=ye.querySelector(A);ge&&j.push(ge)}return j});let Jt=null,qt=!1;function dn(ye){Jt||(Jt=("undefined"!=typeof document?document.body:null)||{},qt=!!Jt.style&&"WebkitAppearance"in Jt.style);let A=!0;return Jt.style&&!function(ye){return"ebkit"==ye.substring(1,6)}(ye)&&(A=ye in Jt.style,!A&&qt&&(A="Webkit"+ye.charAt(0).toUpperCase()+ye.substr(1)in Jt.style)),A}const Ai=Dt,Ri=Pt,ci=kt;let zn=(()=>{class ye{validateStyleProperty(S){return dn(S)}matchesElement(S,j){return Ai(S,j)}containsElement(S,j){return Ri(S,j)}query(S,j,ge){return ci(S,j,ge)}computeStyle(S,j,ge){return ge||""}animate(S,j,ge,Be,tt,ft=[],Gt){return new Se.ZN(ge,Be)}}return ye.\u0275fac=function(S){return new(S||ye)},ye.\u0275prov=x.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class Ln{}Ln.NOOP=new zn;function ki(ye,A,S){return S?A+":"+S+";":""}function Mi(ye){let A="";for(let S=0;S<ye.style.length;S++){const j=ye.style.item(S);A+=ki(0,j,ye.style.getPropertyValue(j))}for(const S in ye.style)ye.style.hasOwnProperty(S)&&!S.startsWith("_")&&(A+=ki(0,Un(S),ye.style[S]));ye.setAttribute("style",A)}function Ti(ye,A,S){ye.style&&(Object.keys(A).forEach(j=>{const ge=sn(j);S&&!S.hasOwnProperty(j)&&(S[j]=ye.style[ge]),ye.style[ge]=A[j]}),Xe()&&Mi(ye))}function er(ye,A){ye.style&&(Object.keys(A).forEach(S=>{const j=sn(S);ye.style[j]=""}),Xe()&&Mi(ye))}const xn=/-+([a-z0-9])/g;function sn(ye){return ye.replace(xn,(...A)=>A[1].toUpperCase())}function Un(ye){return ye.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class bo{constructor(A,S,j){this._element=A,this._startStyles=S,this._endStyles=j,this._state=0;let ge=bo.initialStylesByElement.get(A);ge||bo.initialStylesByElement.set(A,ge={}),this._initialStyles=ge}start(){this._state<1&&(this._startStyles&&Ti(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ti(this._element,this._initialStyles),this._endStyles&&(Ti(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(bo.initialStylesByElement.delete(this._element),this._startStyles&&(er(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(er(this._element,this._endStyles),this._endStyles=null),Ti(this._element,this._initialStyles),this._state=3)}}bo.initialStylesByElement=new WeakMap;ne(8583);const gr=new x.OlP("AnimationModuleType")},9075:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b2:()=>O,H7:()=>gt,q6:()=>Q,se:()=>di});var x=ne(8583),I=ne(7716);class Se extends x.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class c extends Se{static makeCurrent(){(0,x.HT)(new c)}onAndCancel(et,ae,B){return et.addEventListener(ae,B,!1),()=>{et.removeEventListener(ae,B,!1)}}dispatchEvent(et,ae){et.dispatchEvent(ae)}remove(et){et.parentNode&&et.parentNode.removeChild(et)}createElement(et,ae){return(ae=ae||this.getDefaultDocument()).createElement(et)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(et){return et.nodeType===Node.ELEMENT_NODE}isShadowRoot(et){return et instanceof DocumentFragment}getGlobalEventTarget(et,ae){return"window"===ae?window:"document"===ae?et:"body"===ae?et.body:null}getBaseHref(et){const ae=(Xe=Xe||document.querySelector("base"),Xe?Xe.getAttribute("href"):null);return null==ae?null:function(dt){_=_||document.createElement("a"),_.setAttribute("href",dt);const et=_.pathname;return"/"===et.charAt(0)?et:`/${et}`}(ae)}resetBaseElement(){Xe=null}getUserAgent(){return window.navigator.userAgent}getCookie(et){return(0,x.Mx)(document.cookie,et)}}let _,Xe=null;const xe=new I.OlP("TRANSITION_ID"),Ke=[{provide:I.ip1,useFactory:function(dt,et,ae){return()=>{ae.get(I.CZH).donePromise.then(()=>{const B=(0,x.q)();Array.prototype.slice.apply(et.querySelectorAll("style[ng-transition]")).filter(be=>be.getAttribute("ng-transition")===dt).forEach(be=>B.remove(be))})}},deps:[xe,x.K0,I.zs3],multi:!0}];class st{static init(){(0,I.VLi)(new st)}addToWindow(et){I.dqk.getAngularTestability=(B,q=!0)=>{const be=et.findTestabilityInTree(B,q);if(null==be)throw new Error("Could not find testability for element.");return be},I.dqk.getAllAngularTestabilities=()=>et.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>et.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(B=>{const q=I.dqk.getAllAngularTestabilities();let be=q.length,We=!1;const Mt=function($t){We=We||$t,be--,0==be&&B(We)};q.forEach(function($t){$t.whenStable(Mt)})})}findTestabilityInTree(et,ae,B){if(null==ae)return null;const q=et.getTestability(ae);return null!=q?q:B?(0,x.q)().isShadowRoot(ae)?this.findTestabilityInTree(et,ae.host,!0):this.findTestabilityInTree(et,ae.parentElement,!0):null}}let Pt=(()=>{class dt{build(){return new XMLHttpRequest}}return dt.\u0275fac=function(ae){return new(ae||dt)},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const zn=new I.OlP("EventManagerPlugins");let Ln=(()=>{class dt{constructor(ae,B){this._zone=B,this._eventNameToPlugin=new Map,ae.forEach(q=>q.manager=this),this._plugins=ae.slice().reverse()}addEventListener(ae,B,q){return this._findPluginFor(B).addEventListener(ae,B,q)}addGlobalEventListener(ae,B,q){return this._findPluginFor(B).addGlobalEventListener(ae,B,q)}getZone(){return this._zone}_findPluginFor(ae){const B=this._eventNameToPlugin.get(ae);if(B)return B;const q=this._plugins;for(let be=0;be<q.length;be++){const We=q[be];if(We.supports(ae))return this._eventNameToPlugin.set(ae,We),We}throw new Error(`No event manager plugin found for event ${ae}`)}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(zn),I.LFG(I.R0b))},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})();class ii{constructor(et){this._doc=et}addGlobalEventListener(et,ae,B){const q=(0,x.q)().getGlobalEventTarget(this._doc,et);if(!q)throw new Error(`Unsupported event target ${q} for event ${ae}`);return this.addEventListener(q,ae,B)}}let On=(()=>{class dt{constructor(){this._stylesSet=new Set}addStyles(ae){const B=new Set;ae.forEach(q=>{this._stylesSet.has(q)||(this._stylesSet.add(q),B.add(q))}),this.onStylesAdded(B)}onStylesAdded(ae){}getAllStyles(){return Array.from(this._stylesSet)}}return dt.\u0275fac=function(ae){return new(ae||dt)},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),vi=(()=>{class dt extends On{constructor(ae){super(),this._doc=ae,this._hostNodes=new Map,this._hostNodes.set(ae.head,[])}_addStylesToHost(ae,B,q){ae.forEach(be=>{const We=this._doc.createElement("style");We.textContent=be,q.push(B.appendChild(We))})}addHost(ae){const B=[];this._addStylesToHost(this._stylesSet,ae,B),this._hostNodes.set(ae,B)}removeHost(ae){const B=this._hostNodes.get(ae);B&&B.forEach(xi),this._hostNodes.delete(ae)}onStylesAdded(ae){this._hostNodes.forEach((B,q)=>{this._addStylesToHost(ae,q,B)})}ngOnDestroy(){this._hostNodes.forEach(ae=>ae.forEach(xi))}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(x.K0))},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})();function xi(dt){(0,x.q)().remove(dt)}const fi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ki=/%COMP%/g;function pn(dt,et,ae){for(let B=0;B<et.length;B++){let q=et[B];Array.isArray(q)?pn(dt,q,ae):(q=q.replace(Ki,dt),ae.push(q))}return ae}function An(dt){return et=>{if("__ngUnwrap__"===et)return dt;!1===dt(et)&&(et.preventDefault(),et.returnValue=!1)}}let di=(()=>{class dt{constructor(ae,B,q){this.eventManager=ae,this.sharedStylesHost=B,this.appId=q,this.rendererByCompId=new Map,this.defaultRenderer=new Ei(ae)}createRenderer(ae,B){if(!ae||!B)return this.defaultRenderer;switch(B.encapsulation){case I.ifc.Emulated:{let q=this.rendererByCompId.get(B.id);return q||(q=new Ti(this.eventManager,this.sharedStylesHost,B,this.appId),this.rendererByCompId.set(B.id,q)),q.applyToHost(ae),q}case 1:case I.ifc.ShadowDom:return new er(this.eventManager,this.sharedStylesHost,ae,B);default:if(!this.rendererByCompId.has(B.id)){const q=pn(B.id,B.styles,[]);this.sharedStylesHost.addStyles(q),this.rendererByCompId.set(B.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(Ln),I.LFG(vi),I.LFG(I.AFp))},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})();class Ei{constructor(et){this.eventManager=et,this.data=Object.create(null)}destroy(){}createElement(et,ae){return ae?document.createElementNS(fi[ae]||ae,et):document.createElement(et)}createComment(et){return document.createComment(et)}createText(et){return document.createTextNode(et)}appendChild(et,ae){et.appendChild(ae)}insertBefore(et,ae,B){et&&et.insertBefore(ae,B)}removeChild(et,ae){et&&et.removeChild(ae)}selectRootElement(et,ae){let B="string"==typeof et?document.querySelector(et):et;if(!B)throw new Error(`The selector "${et}" did not match any elements`);return ae||(B.textContent=""),B}parentNode(et){return et.parentNode}nextSibling(et){return et.nextSibling}setAttribute(et,ae,B,q){if(q){ae=q+":"+ae;const be=fi[q];be?et.setAttributeNS(be,ae,B):et.setAttribute(ae,B)}else et.setAttribute(ae,B)}removeAttribute(et,ae,B){if(B){const q=fi[B];q?et.removeAttributeNS(q,ae):et.removeAttribute(`${B}:${ae}`)}else et.removeAttribute(ae)}addClass(et,ae){et.classList.add(ae)}removeClass(et,ae){et.classList.remove(ae)}setStyle(et,ae,B,q){q&(I.JOm.DashCase|I.JOm.Important)?et.style.setProperty(ae,B,q&I.JOm.Important?"important":""):et.style[ae]=B}removeStyle(et,ae,B){B&I.JOm.DashCase?et.style.removeProperty(ae):et.style[ae]=""}setProperty(et,ae,B){et[ae]=B}setValue(et,ae){et.nodeValue=ae}listen(et,ae,B){return"string"==typeof et?this.eventManager.addGlobalEventListener(et,ae,An(B)):this.eventManager.addEventListener(et,ae,An(B))}}class Ti extends Ei{constructor(et,ae,B,q){super(et),this.component=B;const be=pn(q+"-"+B.id,B.styles,[]);ae.addStyles(be),this.contentAttr="_ngcontent-%COMP%".replace(Ki,q+"-"+B.id),this.hostAttr="_nghost-%COMP%".replace(Ki,q+"-"+B.id)}applyToHost(et){super.setAttribute(et,this.hostAttr,"")}createElement(et,ae){const B=super.createElement(et,ae);return super.setAttribute(B,this.contentAttr,""),B}}class er extends Ei{constructor(et,ae,B,q){super(et),this.sharedStylesHost=ae,this.hostEl=B,this.shadowRoot=B.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const be=pn(q.id,q.styles,[]);for(let We=0;We<be.length;We++){const Mt=document.createElement("style");Mt.textContent=be[We],this.shadowRoot.appendChild(Mt)}}nodeOrShadowRoot(et){return et===this.hostEl?this.shadowRoot:et}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(et,ae){return super.appendChild(this.nodeOrShadowRoot(et),ae)}insertBefore(et,ae,B){return super.insertBefore(this.nodeOrShadowRoot(et),ae,B)}removeChild(et,ae){return super.removeChild(this.nodeOrShadowRoot(et),ae)}parentNode(et){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(et)))}}let Zi=(()=>{class dt extends ii{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,B,q){return ae.addEventListener(B,q,!1),()=>this.removeEventListener(ae,B,q)}removeEventListener(ae,B,q){return ae.removeEventListener(B,q)}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(x.K0))},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Xn=["alt","control","meta","shift"],Zn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wt={alt:dt=>dt.altKey,control:dt=>dt.ctrlKey,meta:dt=>dt.metaKey,shift:dt=>dt.shiftKey};let pe=(()=>{class dt extends ii{constructor(ae){super(ae)}supports(ae){return null!=dt.parseEventName(ae)}addEventListener(ae,B,q){const be=dt.parseEventName(B),We=dt.eventCallback(be.fullKey,q,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,x.q)().onAndCancel(ae,be.domEventName,We))}static parseEventName(ae){const B=ae.toLowerCase().split("."),q=B.shift();if(0===B.length||"keydown"!==q&&"keyup"!==q)return null;const be=dt._normalizeKey(B.pop());let We="";if(Xn.forEach($t=>{const ti=B.indexOf($t);ti>-1&&(B.splice(ti,1),We+=$t+".")}),We+=be,0!=B.length||0===be.length)return null;const Mt={};return Mt.domEventName=q,Mt.fullKey=We,Mt}static getEventFullKey(ae){let B="",q=function(dt){let et=dt.key;if(null==et){if(et=dt.keyIdentifier,null==et)return"Unidentified";et.startsWith("U+")&&(et=String.fromCharCode(parseInt(et.substring(2),16)),3===dt.location&&Bi.hasOwnProperty(et)&&(et=Bi[et]))}return Zn[et]||et}(ae);return q=q.toLowerCase()," "===q?q="space":"."===q&&(q="dot"),Xn.forEach(be=>{be!=q&&Wt[be](ae)&&(B+=be+".")}),B+=q,B}static eventCallback(ae,B,q){return be=>{dt.getEventFullKey(be)===ae&&q.runGuarded(()=>B(be))}}static _normalizeKey(ae){switch(ae){case"esc":return"escape";default:return ae}}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(x.K0))},dt.\u0275prov=I.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),gt=(()=>{class dt{}return dt.\u0275fac=function(ae){return new(ae||dt)},dt.\u0275prov=(0,I.Yz7)({factory:function(){return(0,I.LFG)(Dn)},token:dt,providedIn:"root"}),dt})(),Dn=(()=>{class dt extends gt{constructor(ae){super(),this._doc=ae}sanitize(ae,B){if(null==B)return null;switch(ae){case I.q3G.NONE:return B;case I.q3G.HTML:return(0,I.qzn)(B,"HTML")?(0,I.z3N)(B):(0,I.EiD)(this._doc,String(B)).toString();case I.q3G.STYLE:return(0,I.qzn)(B,"Style")?(0,I.z3N)(B):B;case I.q3G.SCRIPT:if((0,I.qzn)(B,"Script"))return(0,I.z3N)(B);throw new Error("unsafe value used in a script context");case I.q3G.URL:return(0,I.yhl)(B),(0,I.qzn)(B,"URL")?(0,I.z3N)(B):(0,I.mCW)(String(B));case I.q3G.RESOURCE_URL:if((0,I.qzn)(B,"ResourceURL"))return(0,I.z3N)(B);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ae){return(0,I.JVY)(ae)}bypassSecurityTrustStyle(ae){return(0,I.L6k)(ae)}bypassSecurityTrustScript(ae){return(0,I.eBb)(ae)}bypassSecurityTrustUrl(ae){return(0,I.LAX)(ae)}bypassSecurityTrustResourceUrl(ae){return(0,I.pB0)(ae)}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(x.K0))},dt.\u0275prov=(0,I.Yz7)({factory:function(){return function(dt){return new Dn(dt.get(x.K0))}((0,I.LFG)(I.gxx))},token:dt,providedIn:"root"}),dt})();const Q=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:x.bD},{provide:I.g9A,useValue:function(){c.makeCurrent(),st.init()},multi:!0},{provide:x.K0,useFactory:function(){return(0,I.RDi)(document),document},deps:[]}]),z=[[],{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function(){return new I.qLn},deps:[]},{provide:zn,useClass:Zi,multi:!0,deps:[x.K0,I.R0b,I.Lbi]},{provide:zn,useClass:pe,multi:!0,deps:[x.K0]},[],{provide:di,useClass:di,deps:[Ln,vi,I.AFp]},{provide:I.FYo,useExisting:di},{provide:On,useExisting:vi},{provide:vi,useClass:vi,deps:[x.K0]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b]},{provide:Ln,useClass:Ln,deps:[zn,I.R0b]},{provide:x.JF,useClass:Pt,deps:[]},[]];let O=(()=>{class dt{constructor(ae){if(ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ae){return{ngModule:dt,providers:[{provide:I.AFp,useValue:ae.appId},{provide:xe,useExisting:I.AFp},Ke]}}}return dt.\u0275fac=function(ae){return new(ae||dt)(I.LFG(dt,12))},dt.\u0275mod=I.oAB({type:dt}),dt.\u0275inj=I.cJS({providers:z,imports:[x.ez,I.hGG]}),dt})();"undefined"!=typeof window&&window},2305:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{rH:()=>Ga,Od:()=>el,Bz:()=>oa,lC:()=>_l});var x=ne(8583),I=ne(7716),Se=ne(4869),c=ne(9796),Xe=ne(7393);class Ie extends Xe.L{notifyNext(P,M,Y,ue,Te){this.destination.next(M)}notifyError(P,M){this.destination.error(P)}notifyComplete(P){this.destination.complete()}}class _ extends Xe.L{constructor(P,M,Y){super(),this.parent=P,this.outerValue=M,this.outerIndex=Y,this.index=0}_next(P){this.parent.notifyNext(this.outerValue,P,this.outerIndex,this.index++,this)}_error(P){this.parent.notifyError(P,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ve=ne(7444),xe=ne(7574);function Oe(L,P,M,Y,ue=new _(L,M,Y)){if(!ue.closed)return P instanceof xe.y?P.subscribe(ue):(0,ve.s)(P)(ue)}var Ke=ne(6693);const st={};class Qt{constructor(P){this.resultSelector=P}call(P,M){return M.subscribe(new Dt(P,this.resultSelector))}}class Dt extends Ie{constructor(P,M){super(P),this.resultSelector=M,this.active=0,this.values=[],this.observables=[]}_next(P){this.values.push(st),this.observables.push(P)}_complete(){const P=this.observables,M=P.length;if(0===M)this.destination.complete();else{this.active=M,this.toRespond=M;for(let Y=0;Y<M;Y++)this.add(Oe(this,P[Y],void 0,Y))}}notifyComplete(P){0==(this.active-=1)&&this.destination.complete()}notifyNext(P,M,Y){const ue=this.values,lt=this.toRespond?ue[Y]===st?--this.toRespond:this.toRespond:0;ue[Y]=M,0===lt&&(this.resultSelector?this._tryResultSelector(ue):this.destination.next(ue.slice()))}_tryResultSelector(P){let M;try{M=this.resultSelector.apply(this,P)}catch(Y){return void this.destination.error(Y)}this.destination.next(M)}}const kt=(()=>{function L(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return L.prototype=Object.create(Error.prototype),L})();var Kt=ne(4402),Ft=ne(5917),Mn=ne(6215),Jt=ne(8071),qt=ne(1439),dn=ne(9193),Hn=ne(2441),Ai=ne(9765);function Ri(L,P){let M=!1;return arguments.length>=2&&(M=!0),function(ue){return ue.lift(new ci(L,P,M))}}class ci{constructor(P,M,Y=!1){this.accumulator=P,this.seed=M,this.hasSeed=Y}call(P,M){return M.subscribe(new ni(P,this.accumulator,this.seed,this.hasSeed))}}class ni extends Xe.L{constructor(P,M,Y,ue){super(P),this.accumulator=M,this._seed=Y,this.hasSeed=ue,this.index=0}get seed(){return this._seed}set seed(P){this.hasSeed=!0,this._seed=P}_next(P){if(this.hasSeed)return this._tryNext(P);this.seed=P,this.destination.next(P)}_tryNext(P){const M=this.index++;let Y;try{Y=this.accumulator(this.seed,P,M)}catch(ue){this.destination.error(ue)}this.seed=Y,this.destination.next(Y)}}var zn=ne(5435),Ln=ne(7108);function ii(L){return function(M){return 0===L?(0,dn.c)():M.lift(new On(L))}}class On{constructor(P){if(this.total=P,this.total<0)throw new Ln.W}call(P,M){return M.subscribe(new vi(P,this.total))}}class vi extends Xe.L{constructor(P,M){super(P),this.total=M,this.ring=new Array,this.count=0}_next(P){const M=this.ring,Y=this.total,ue=this.count++;M.length<Y?M.push(P):M[ue%Y]=P}_complete(){const P=this.destination;let M=this.count;if(M>0){const Y=this.count>=this.total?this.total:this.count,ue=this.ring;for(let Te=0;Te<Y;Te++){const lt=M++%Y;P.next(ue[lt])}}P.complete()}}function xi(L=rn){return P=>P.lift(new fi(L))}class fi{constructor(P){this.errorFactory=P}call(P,M){return M.subscribe(new Ki(P,this.errorFactory))}}class Ki extends Xe.L{constructor(P,M){super(P),this.errorFactory=M,this.hasValue=!1}_next(P){this.hasValue=!0,this.destination.next(P)}_complete(){if(this.hasValue)return this.destination.complete();{let P;try{P=this.errorFactory()}catch(M){P=M}this.destination.error(P)}}}function rn(){return new kt}function Ut(L=null){return P=>P.lift(new an(L))}class an{constructor(P){this.defaultValue=P}call(P,M){return M.subscribe(new ct(P,this.defaultValue))}}class ct extends Xe.L{constructor(P,M){super(P),this.defaultValue=M,this.isEmpty=!0}_next(P){this.isEmpty=!1,this.destination.next(P)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Et=ne(4487),pn=ne(5257);function An(L,P){const M=arguments.length>=2;return Y=>Y.pipe(L?(0,zn.h)((ue,Te)=>L(ue,Te,Y)):Et.y,(0,pn.q)(1),M?Ut(P):xi(()=>new kt))}var Bn=ne(8002),di=ne(3190),Ei=ne(9761),Vn=ne(5304),ki=ne(4612),Mi=ne(9773),Ti=ne(3342),er=ne(1307),Zi=ne(8939),ei=ne(3282);class oi{constructor(P,M){this.id=P,this.url=M}}class en extends oi{constructor(P,M,Y="imperative",ue=null){super(P,M),this.navigationTrigger=Y,this.restoredState=ue}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class at extends oi{constructor(P,M,Y){super(P,M),this.urlAfterRedirects=Y}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xt extends oi{constructor(P,M,Y){super(P,M),this.reason=Y}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xn extends oi{constructor(P,M,Y){super(P,M),this.error=Y}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sn extends oi{constructor(P,M,Y,ue){super(P,M),this.urlAfterRedirects=Y,this.state=ue}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Un extends oi{constructor(P,M,Y,ue){super(P,M),this.urlAfterRedirects=Y,this.state=ue}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends oi{constructor(P,M,Y,ue,Te){super(P,M),this.urlAfterRedirects=Y,this.state=ue,this.shouldActivate=Te}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xn extends oi{constructor(P,M,Y,ue){super(P,M),this.urlAfterRedirects=Y,this.state=ue}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xt extends oi{constructor(P,M,Y,ue){super(P,M),this.urlAfterRedirects=Y,this.state=ue}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn{constructor(P){this.route=P}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bi{constructor(P){this.route=P}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cr{constructor(P){this.snapshot=P}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(P){this.snapshot=P}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(P){this.snapshot=P}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(P){this.snapshot=P}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wt{constructor(P,M,Y){this.routerEvent=P,this.position=M,this.anchor=Y}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const pe="primary";class ke{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const M=this.params[P];return Array.isArray(M)?M[0]:M}return null}getAll(P){if(this.has(P)){const M=this.params[P];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function gt(L){return new ke(L)}const jt="ngNavigationCancelingError";function Dn(L){const P=Error("NavigationCancelingError: "+L);return P[jt]=!0,P}function Ze(L,P,M){const Y=M.path.split("/");if(Y.length>L.length||"full"===M.pathMatch&&(P.hasChildren()||Y.length<L.length))return null;const ue={};for(let Te=0;Te<Y.length;Te++){const lt=Y[Te],At=L[Te];if(lt.startsWith(":"))ue[lt.substring(1)]=At;else if(lt!==At.path)return null}return{consumed:L.slice(0,Y.length),posParams:ue}}function Ce(L,P){const M=L?Object.keys(L):void 0,Y=P?Object.keys(P):void 0;if(!M||!Y||M.length!=Y.length)return!1;let ue;for(let Te=0;Te<M.length;Te++)if(ue=M[Te],!me(L[ue],P[ue]))return!1;return!0}function me(L,P){if(Array.isArray(L)&&Array.isArray(P)){if(L.length!==P.length)return!1;const M=[...L].sort(),Y=[...P].sort();return M.every((ue,Te)=>Y[Te]===ue)}return L===P}function oe(L){return Array.prototype.concat.apply([],L)}function K(L){return L.length>0?L[L.length-1]:null}function Q(L,P){for(const M in L)L.hasOwnProperty(M)&&P(L[M],M)}function z(L){return(0,I.CqO)(L)?L:(0,I.QGY)(L)?(0,Kt.D)(Promise.resolve(L)):(0,Ft.of)(L)}const le={exact:function Ee(L,P,M){if(!Qn(L.segments,P.segments)||!Qe(L.segments,P.segments,M)||L.numberOfChildren!==P.numberOfChildren)return!1;for(const Y in P.children)if(!L.children[Y]||!Ee(L.children[Y],P.children[Y],M))return!1;return!0},subset:mt},J={exact:function(L,P){return Ce(L,P)},subset:function(L,P){return Object.keys(P).length<=Object.keys(L).length&&Object.keys(P).every(M=>me(L[M],P[M]))},ignored:()=>!0};function W(L,P,M){return le[M.paths](L.root,P.root,M.matrixParams)&&J[M.queryParams](L.queryParams,P.queryParams)&&!("exact"===M.fragment&&L.fragment!==P.fragment)}function mt(L,P,M){return nn(L,P,P.segments,M)}function nn(L,P,M,Y){if(L.segments.length>M.length){const ue=L.segments.slice(0,M.length);return!(!Qn(ue,M)||P.hasChildren()||!Qe(ue,M,Y))}if(L.segments.length===M.length){if(!Qn(L.segments,M)||!Qe(L.segments,M,Y))return!1;for(const ue in P.children)if(!L.children[ue]||!mt(L.children[ue],P.children[ue],Y))return!1;return!0}{const ue=M.slice(0,L.segments.length),Te=M.slice(L.segments.length);return!!(Qn(L.segments,ue)&&Qe(L.segments,ue,Y)&&L.children[pe])&&nn(L.children[pe],P,Te,Y)}}function Qe(L,P,M){return P.every((Y,ue)=>J[M](L[ue].parameters,Y.parameters))}class It{constructor(P,M,Y){this.root=P,this.queryParams=M,this.fragment=Y}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}toString(){return rt.serialize(this)}}class Bt{constructor(P,M){this.segments=P,this.children=M,this.parent=null,Q(M,(Y,ue)=>Y.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bt(this)}}class Sn{constructor(P,M){this.path=P,this.parameters=M}get parameterMap(){return this._parameterMap||(this._parameterMap=gt(this.parameters)),this._parameterMap}toString(){return be(this)}}function Qn(L,P){return L.length===P.length&&L.every((M,Y)=>M.path===P[Y].path)}class bi{}class $e{parse(P){const M=new zr(P);return new It(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(P){var L;return`${`/${Yt(P.root,!0)}`}${function(L){const P=Object.keys(L).map(M=>{const Y=L[M];return Array.isArray(Y)?Y.map(ue=>`${dt(M)}=${dt(ue)}`).join("&"):`${dt(M)}=${dt(Y)}`}).filter(M=>!!M);return P.length?`?${P.join("&")}`:""}(P.queryParams)}${"string"==typeof P.fragment?`#${L=P.fragment,encodeURI(L)}`:""}`}}const rt=new $e;function bt(L){return L.segments.map(P=>be(P)).join("/")}function Yt(L,P){if(!L.hasChildren())return bt(L);if(P){const M=L.children[pe]?Yt(L.children[pe],!1):"",Y=[];return Q(L.children,(ue,Te)=>{Te!==pe&&Y.push(`${Te}:${Yt(ue,!1)}`)}),Y.length>0?`${M}(${Y.join("//")})`:M}{const M=function(L,P){let M=[];return Q(L.children,(Y,ue)=>{ue===pe&&(M=M.concat(P(Y,ue)))}),Q(L.children,(Y,ue)=>{ue!==pe&&(M=M.concat(P(Y,ue)))}),M}(L,(Y,ue)=>ue===pe?[Yt(L.children[pe],!1)]:[`${ue}:${Yt(Y,!1)}`]);return 1===Object.keys(L.children).length&&null!=L.children[pe]?`${bt(L)}/${M[0]}`:`${bt(L)}/(${M.join("//")})`}}function In(L){return encodeURIComponent(L).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dt(L){return In(L).replace(/%3B/gi,";")}function ae(L){return In(L).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function B(L){return decodeURIComponent(L)}function q(L){return B(L.replace(/\+/g,"%20"))}function be(L){return`${ae(L.path)}${function(L){return Object.keys(L).map(P=>`;${ae(P)}=${ae(L[P])}`).join("")}(L.parameters)}`}const $t=/^[^\/()?;=#]+/;function ti(L){const P=L.match($t);return P?P[0]:""}const pi=/^[^=?&#]+/,Vi=/^[^?&#]+/;class zr{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let Y={};return this.peekStartsWith("(")&&(Y=this.parseParens(!1)),(P.length>0||Object.keys(M).length>0)&&(Y[pe]=new Bt(P,M)),Y}parseSegment(){const P=ti(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(P),new Sn(B(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const M=ti(this.remaining);if(!M)return;this.capture(M);let Y="";if(this.consumeOptional("=")){const ue=ti(this.remaining);ue&&(Y=ue,this.capture(Y))}P[B(M)]=B(Y)}parseQueryParam(P){const M=function(L){const P=L.match(pi);return P?P[0]:""}(this.remaining);if(!M)return;this.capture(M);let Y="";if(this.consumeOptional("=")){const lt=function(L){const P=L.match(Vi);return P?P[0]:""}(this.remaining);lt&&(Y=lt,this.capture(Y))}const ue=q(M),Te=q(Y);if(P.hasOwnProperty(ue)){let lt=P[ue];Array.isArray(lt)||(lt=[lt],P[ue]=lt),lt.push(Te)}else P[ue]=Te}parseParens(P){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Y=ti(this.remaining),ue=this.remaining[Y.length];if("/"!==ue&&")"!==ue&&";"!==ue)throw new Error(`Cannot parse url '${this.url}'`);let Te;Y.indexOf(":")>-1?(Te=Y.substr(0,Y.indexOf(":")),this.capture(Te),this.capture(":")):P&&(Te=pe);const lt=this.parseChildren();M[Te]=1===Object.keys(lt).length?lt[pe]:new Bt([],lt),this.consumeOptional("//")}return M}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new Error(`Expected "${P}".`)}}class Mr{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const M=this.pathFromRoot(P);return M.length>1?M[M.length-2]:null}children(P){const M=Ni(P,this._root);return M?M.children.map(Y=>Y.value):[]}firstChild(P){const M=Ni(P,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(P){const M=$r(P,this._root);return M.length<2?[]:M[M.length-2].children.map(ue=>ue.value).filter(ue=>ue!==P)}pathFromRoot(P){return $r(P,this._root).map(M=>M.value)}}function Ni(L,P){if(L===P.value)return P;for(const M of P.children){const Y=Ni(L,M);if(Y)return Y}return null}function $r(L,P){if(L===P.value)return[P];for(const M of P.children){const Y=$r(L,M);if(Y.length)return Y.unshift(P),Y}return[]}class Or{constructor(P,M){this.value=P,this.children=M}toString(){return`TreeNode(${this.value})`}}function vr(L){const P={};return L&&L.children.forEach(M=>P[M.value.outlet]=M),P}class wr extends Mr{constructor(P,M){super(P),this.snapshot=M,Xi(this,P)}toString(){return this.snapshot.toString()}}function ts(L,P){const M=function(L,P){const lt=new yn([],{},{},"",{},pe,P,null,L.root,-1,{});return new kn("",new Or(lt,[]))}(L,P),Y=new Mn.X([new Sn("",{})]),ue=new Mn.X({}),Te=new Mn.X({}),lt=new Mn.X({}),At=new Mn.X(""),mn=new it(Y,ue,lt,At,Te,pe,P,M.root);return mn.snapshot=M.root,new wr(new Or(mn,[]),M)}class it{constructor(P,M,Y,ue,Te,lt,At,mn){this.url=P,this.params=M,this.queryParams=Y,this.fragment=ue,this.data=Te,this.outlet=lt,this.component=At,this._futureSnapshot=mn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bn.U)(P=>gt(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bn.U)(P=>gt(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function se(L,P="emptyOnly"){const M=L.pathFromRoot;let Y=0;if("always"!==P)for(Y=M.length-1;Y>=1;){const ue=M[Y],Te=M[Y-1];if(ue.routeConfig&&""===ue.routeConfig.path)Y--;else{if(Te.component)break;Y--}}return function(L){return L.reduce((P,M)=>({params:Object.assign(Object.assign({},P.params),M.params),data:Object.assign(Object.assign({},P.data),M.data),resolve:Object.assign(Object.assign({},P.resolve),M._resolvedData)}),{params:{},data:{},resolve:{}})}(M.slice(Y))}class yn{constructor(P,M,Y,ue,Te,lt,At,mn,li,Di,nr){this.url=P,this.params=M,this.queryParams=Y,this.fragment=ue,this.data=Te,this.outlet=lt,this.component=At,this.routeConfig=mn,this._urlSegment=li,this._lastPathIndex=Di,this._resolve=nr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Y=>Y.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kn extends Mr{constructor(P,M){super(M),this.url=P,Xi(this,M)}toString(){return Hr(this._root)}}function Xi(L,P){P.value._routerState=L,P.children.forEach(M=>Xi(L,M))}function Hr(L){const P=L.children.length>0?` { ${L.children.map(Hr).join(", ")} } `:"";return`${L.value}${P}`}function Hs(L){if(L.snapshot){const P=L.snapshot,M=L._futureSnapshot;L.snapshot=M,Ce(P.queryParams,M.queryParams)||L.queryParams.next(M.queryParams),P.fragment!==M.fragment&&L.fragment.next(M.fragment),Ce(P.params,M.params)||L.params.next(M.params),function(L,P){if(L.length!==P.length)return!1;for(let M=0;M<L.length;++M)if(!Ce(L[M],P[M]))return!1;return!0}(P.url,M.url)||L.url.next(M.url),Ce(P.data,M.data)||L.data.next(M.data)}else L.snapshot=L._futureSnapshot,L.data.next(L._futureSnapshot.data)}function xr(L,P){return Ce(L.params,P.params)&&function(L,P){return Qn(L,P)&&L.every((M,Y)=>Ce(M.parameters,P[Y].parameters))}(L.url,P.url)&&!(!L.parent!=!P.parent)&&(!L.parent||xr(L.parent,P.parent))}function Ms(L,P,M){if(M&&L.shouldReuseRoute(P.value,M.value.snapshot)){const Y=M.value;Y._futureSnapshot=P.value;const ue=function(L,P,M){return P.children.map(Y=>{for(const ue of M.children)if(L.shouldReuseRoute(Y.value,ue.value.snapshot))return Ms(L,Y,ue);return Ms(L,Y)})}(L,P,M);return new Or(Y,ue)}{if(L.shouldAttach(P.value)){const Te=L.retrieve(P.value);if(null!==Te){const lt=Te.route;return vo(P,lt),lt}}const Y=function(L){return new it(new Mn.X(L.url),new Mn.X(L.params),new Mn.X(L.queryParams),new Mn.X(L.fragment),new Mn.X(L.data),L.outlet,L.component,L)}(P.value),ue=P.children.map(Te=>Ms(L,Te));return new Or(Y,ue)}}function vo(L,P){if(L.value.routeConfig!==P.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(L.children.length!==P.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");P.value._futureSnapshot=L.value;for(let M=0;M<L.children.length;++M)vo(L.children[M],P.children[M])}function ma(L){return"object"==typeof L&&null!=L&&!L.outlets&&!L.segmentPath}function eo(L){return"object"==typeof L&&null!=L&&L.outlets}function $o(L,P,M,Y,ue){let Te={};return Y&&Q(Y,(lt,At)=>{Te[At]=Array.isArray(lt)?lt.map(mn=>`${mn}`):`${lt}`}),new It(M.root===L?P:Ho(M.root,L,P),Te,ue)}function Ho(L,P,M){const Y={};return Q(L.children,(ue,Te)=>{Y[Te]=ue===P?M:Ho(ue,P,M)}),new Bt(L.segments,Y)}class xo{constructor(P,M,Y){if(this.isAbsolute=P,this.numberOfDoubleDots=M,this.commands=Y,P&&Y.length>0&&ma(Y[0]))throw new Error("Root segment cannot have matrix parameters");const ue=Y.find(eo);if(ue&&ue!==K(Y))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bo{constructor(P,M,Y){this.segmentGroup=P,this.processChildren=M,this.index=Y}}function So(L,P,M){if(L||(L=new Bt([],{})),0===L.segments.length&&L.hasChildren())return Is(L,P,M);const Y=function(L,P,M){let Y=0,ue=P;const Te={match:!1,pathIndex:0,commandIndex:0};for(;ue<L.segments.length;){if(Y>=M.length)return Te;const lt=L.segments[ue],At=M[Y];if(eo(At))break;const mn=`${At}`,li=Y<M.length-1?M[Y+1]:null;if(ue>0&&void 0===mn)break;if(mn&&li&&"object"==typeof li&&void 0===li.outlets){if(!Zo(mn,li,lt))return Te;Y+=2}else{if(!Zo(mn,{},lt))return Te;Y++}ue++}return{match:!0,pathIndex:ue,commandIndex:Y}}(L,P,M),ue=M.slice(Y.commandIndex);if(Y.match&&Y.pathIndex<L.segments.length){const Te=new Bt(L.segments.slice(0,Y.pathIndex),{});return Te.children[pe]=new Bt(L.segments.slice(Y.pathIndex),L.children),Is(Te,0,ue)}return Y.match&&0===ue.length?new Bt(L.segments,{}):Y.match&&!L.hasChildren()?oo(L,P,M):Y.match?Is(L,0,ue):oo(L,P,M)}function Is(L,P,M){if(0===M.length)return new Bt(L.segments,{});{const Y=function(L){return eo(L[0])?L[0].outlets:{[pe]:L}}(M),ue={};return Q(Y,(Te,lt)=>{"string"==typeof Te&&(Te=[Te]),null!==Te&&(ue[lt]=So(L.children[lt],P,Te))}),Q(L.children,(Te,lt)=>{void 0===Y[lt]&&(ue[lt]=Te)}),new Bt(L.segments,ue)}}function oo(L,P,M){const Y=L.segments.slice(0,P);let ue=0;for(;ue<M.length;){const Te=M[ue];if(eo(Te)){const mn=Mo(Te.outlets);return new Bt(Y,mn)}if(0===ue&&ma(M[0])){Y.push(new Sn(L.segments[P].path,Ji(M[0]))),ue++;continue}const lt=eo(Te)?Te.outlets[pe]:`${Te}`,At=ue<M.length-1?M[ue+1]:null;lt&&At&&ma(At)?(Y.push(new Sn(lt,Ji(At))),ue+=2):(Y.push(new Sn(lt,{})),ue++)}return new Bt(Y,{})}function Mo(L){const P={};return Q(L,(M,Y)=>{"string"==typeof M&&(M=[M]),null!==M&&(P[Y]=oo(new Bt([],{}),0,M))}),P}function Ji(L){const P={};return Q(L,(M,Y)=>P[Y]=`${M}`),P}function Zo(L,P,M){return L==M.path&&Ce(P,M.parameters)}class ee{constructor(P,M,Y,ue){this.routeReuseStrategy=P,this.futureState=M,this.currState=Y,this.forwardEvent=ue}activate(P){const M=this.futureState._root,Y=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,Y,P),Hs(this.futureState.root),this.activateChildRoutes(M,Y,P)}deactivateChildRoutes(P,M,Y){const ue=vr(M);P.children.forEach(Te=>{const lt=Te.value.outlet;this.deactivateRoutes(Te,ue[lt],Y),delete ue[lt]}),Q(ue,(Te,lt)=>{this.deactivateRouteAndItsChildren(Te,Y)})}deactivateRoutes(P,M,Y){const ue=P.value,Te=M?M.value:null;if(ue===Te)if(ue.component){const lt=Y.getContext(ue.outlet);lt&&this.deactivateChildRoutes(P,M,lt.children)}else this.deactivateChildRoutes(P,M,Y);else Te&&this.deactivateRouteAndItsChildren(M,Y)}deactivateRouteAndItsChildren(P,M){this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,M):this.deactivateRouteAndOutlet(P,M)}detachAndStoreRouteSubtree(P,M){const Y=M.getContext(P.value.outlet);if(Y&&Y.outlet){const ue=Y.outlet.detach(),Te=Y.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:ue,route:P,contexts:Te})}}deactivateRouteAndOutlet(P,M){const Y=M.getContext(P.value.outlet),ue=Y&&P.value.component?Y.children:M,Te=vr(P);for(const lt of Object.keys(Te))this.deactivateRouteAndItsChildren(Te[lt],ue);Y&&Y.outlet&&(Y.outlet.deactivate(),Y.children.onOutletDeactivated(),Y.attachRef=null,Y.resolver=null,Y.route=null)}activateChildRoutes(P,M,Y){const ue=vr(M);P.children.forEach(Te=>{this.activateRoutes(Te,ue[Te.value.outlet],Y),this.forwardEvent(new vt(Te.value.snapshot))}),P.children.length&&this.forwardEvent(new Ui(P.value.snapshot))}activateRoutes(P,M,Y){const ue=P.value,Te=M?M.value:null;if(Hs(ue),ue===Te)if(ue.component){const lt=Y.getOrCreateContext(ue.outlet);this.activateChildRoutes(P,M,lt.children)}else this.activateChildRoutes(P,M,Y);else if(ue.component){const lt=Y.getOrCreateContext(ue.outlet);if(this.routeReuseStrategy.shouldAttach(ue.snapshot)){const At=this.routeReuseStrategy.retrieve(ue.snapshot);this.routeReuseStrategy.store(ue.snapshot,null),lt.children.onOutletReAttached(At.contexts),lt.attachRef=At.componentRef,lt.route=At.route.value,lt.outlet&&lt.outlet.attach(At.componentRef,At.route.value),U(At.route)}else{const At=function(L){for(let P=L.parent;P;P=P.parent){const M=P.routeConfig;if(M&&M._loadedConfig)return M._loadedConfig;if(M&&M.component)return null}return null}(ue.snapshot),mn=At?At.module.componentFactoryResolver:null;lt.attachRef=null,lt.route=ue,lt.resolver=mn,lt.outlet&&lt.outlet.activateWith(ue,mn),this.activateChildRoutes(P,null,lt.children)}}else this.activateChildRoutes(P,null,Y)}}function U(L){Hs(L.value),L.children.forEach(U)}class Nt{constructor(P,M){this.routes=P,this.module=M}}function ai(L){return"function"==typeof L}function gs(L){return L instanceof It}const ie=Symbol("INITIAL_VALUE");function Pe(){return(0,di.w)(L=>function(...L){let P,M;return(0,Se.K)(L[L.length-1])&&(M=L.pop()),"function"==typeof L[L.length-1]&&(P=L.pop()),1===L.length&&(0,c.k)(L[0])&&(L=L[0]),(0,Ke.n)(L,M).lift(new Qt(P))}(L.map(P=>P.pipe((0,pn.q)(1),(0,Ei.O)(ie)))).pipe(Ri((P,M)=>{let Y=!1;return M.reduce((ue,Te,lt)=>ue!==ie?ue:(Te===ie&&(Y=!0),Y||!1!==Te&&lt!==M.length-1&&!gs(Te)?ue:Te),P)},ie),(0,zn.h)(P=>P!==ie),(0,Bn.U)(P=>gs(P)?P:!0===P),(0,pn.q)(1)))}let pt=(()=>{class L{}return L.\u0275fac=function(M){return new(M||L)},L.\u0275cmp=I.Xpm({type:L,selectors:[["ng-component"]],decls:1,vars:0,template:function(M,Y){1&M&&I._UZ(0,"router-outlet")},directives:function(){return[_l]},encapsulation:2}),L})();function cn(L,P=""){for(let M=0;M<L.length;M++){const Y=L[M];Rn(Y,Ci(P,Y))}}function Rn(L,P){L.children&&cn(L.children,P)}function Ci(L,P){return P?L||P.path?L&&!P.path?`${L}/`:!L&&P.path?P.path:`${L}/${P.path}`:"":L}function qi(L){const P=L.children&&L.children.map(qi),M=P?Object.assign(Object.assign({},L),{children:P}):Object.assign({},L);return!M.component&&(P||M.loadChildren)&&M.outlet&&M.outlet!==pe&&(M.component=pt),M}function hr(L){return L.outlet||pe}function Cr(L,P){const M=L.filter(Y=>hr(Y)===P);return M.push(...L.filter(Y=>hr(Y)!==P)),M}const Wi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function br(L,P,M){var Y;if(""===P.path)return"full"===P.pathMatch&&(L.hasChildren()||M.length>0)?Object.assign({},Wi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const Te=(P.matcher||Ze)(M,L,P);if(!Te)return Object.assign({},Wi);const lt={};Q(Te.posParams,(mn,li)=>{lt[li]=mn.path});const At=Te.consumed.length>0?Object.assign(Object.assign({},lt),Te.consumed[Te.consumed.length-1].parameters):lt;return{matched:!0,consumedSegments:Te.consumed,lastChild:Te.consumed.length,parameters:At,positionalParamSegments:null!==(Y=Te.posParams)&&void 0!==Y?Y:{}}}function tr(L,P,M,Y,ue="corrected"){if(M.length>0&&function(L,P,M){return M.some(Y=>ws(L,P,Y)&&hr(Y)!==pe)}(L,M,Y)){const lt=new Bt(P,function(L,P,M,Y){const ue={};ue[pe]=Y,Y._sourceSegment=L,Y._segmentIndexShift=P.length;for(const Te of M)if(""===Te.path&&hr(Te)!==pe){const lt=new Bt([],{});lt._sourceSegment=L,lt._segmentIndexShift=P.length,ue[hr(Te)]=lt}return ue}(L,P,Y,new Bt(M,L.children)));return lt._sourceSegment=L,lt._segmentIndexShift=P.length,{segmentGroup:lt,slicedSegments:[]}}if(0===M.length&&function(L,P,M){return M.some(Y=>ws(L,P,Y))}(L,M,Y)){const lt=new Bt(L.segments,function(L,P,M,Y,ue,Te){const lt={};for(const At of Y)if(ws(L,M,At)&&!ue[hr(At)]){const mn=new Bt([],{});mn._sourceSegment=L,mn._segmentIndexShift="legacy"===Te?L.segments.length:P.length,lt[hr(At)]=mn}return Object.assign(Object.assign({},ue),lt)}(L,P,M,Y,L.children,ue));return lt._sourceSegment=L,lt._segmentIndexShift=P.length,{segmentGroup:lt,slicedSegments:M}}const Te=new Bt(L.segments,L.children);return Te._sourceSegment=L,Te._segmentIndexShift=P.length,{segmentGroup:Te,slicedSegments:M}}function ws(L,P,M){return(!(L.hasChildren()||P.length>0)||"full"!==M.pathMatch)&&""===M.path}function Oi(L,P,M,Y){return!!(hr(L)===Y||Y!==pe&&ws(P,M,L))&&("**"===L.path||br(P,L,M).matched)}function na(L,P,M){return 0===P.length&&!L.children[M]}class Po{constructor(P){this.segmentGroup=P||null}}class Sa{constructor(P){this.urlTree=P}}function Ma(L){return new xe.y(P=>P.error(new Po(L)))}function Xa(L){return new xe.y(P=>P.error(new Sa(L)))}function Ta(L){return new xe.y(P=>P.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${L}'`)))}class gr{constructor(P,M,Y,ue,Te){this.configLoader=M,this.urlSerializer=Y,this.urlTree=ue,this.config=Te,this.allowRedirects=!0,this.ngModule=P.get(I.h0i)}apply(){const P=tr(this.urlTree.root,[],[],this.config).segmentGroup,M=new Bt(P.segments,P.children);return this.expandSegmentGroup(this.ngModule,this.config,M,pe).pipe((0,Bn.U)(Te=>this.createUrlTree(ns(Te),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Vn.K)(Te=>{if(Te instanceof Sa)return this.allowRedirects=!1,this.match(Te.urlTree);throw Te instanceof Po?this.noMatchError(Te):Te}))}match(P){return this.expandSegmentGroup(this.ngModule,this.config,P.root,pe).pipe((0,Bn.U)(ue=>this.createUrlTree(ns(ue),P.queryParams,P.fragment))).pipe((0,Vn.K)(ue=>{throw ue instanceof Po?this.noMatchError(ue):ue}))}noMatchError(P){return new Error(`Cannot match any routes. URL Segment: '${P.segmentGroup}'`)}createUrlTree(P,M,Y){const ue=P.segments.length>0?new Bt([],{[pe]:P}):P;return new It(ue,M,Y)}expandSegmentGroup(P,M,Y,ue){return 0===Y.segments.length&&Y.hasChildren()?this.expandChildren(P,M,Y).pipe((0,Bn.U)(Te=>new Bt([],Te))):this.expandSegment(P,Y,M,Y.segments,ue,!0)}expandChildren(P,M,Y){const ue=[];for(const Te of Object.keys(Y.children))"primary"===Te?ue.unshift(Te):ue.push(Te);return(0,Kt.D)(ue).pipe((0,ki.b)(Te=>{const lt=Y.children[Te],At=Cr(M,Te);return this.expandSegmentGroup(P,At,lt,Te).pipe((0,Bn.U)(mn=>({segment:mn,outlet:Te})))}),Ri((Te,lt)=>(Te[lt.outlet]=lt.segment,Te),{}),function(L,P){const M=arguments.length>=2;return Y=>Y.pipe(L?(0,zn.h)((ue,Te)=>L(ue,Te,Y)):Et.y,ii(1),M?Ut(P):xi(()=>new kt))}())}expandSegment(P,M,Y,ue,Te,lt){return(0,Kt.D)(Y).pipe((0,ki.b)(At=>this.expandSegmentAgainstRoute(P,M,Y,At,ue,Te,lt).pipe((0,Vn.K)(li=>{if(li instanceof Po)return(0,Ft.of)(null);throw li}))),An(At=>!!At),(0,Vn.K)((At,mn)=>{if(At instanceof kt||"EmptyError"===At.name){if(na(M,ue,Te))return(0,Ft.of)(new Bt([],{}));throw new Po(M)}throw At}))}expandSegmentAgainstRoute(P,M,Y,ue,Te,lt,At){return Oi(ue,M,Te,lt)?void 0===ue.redirectTo?this.matchSegmentAgainstRoute(P,M,ue,Te,lt):At&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,M,Y,ue,Te,lt):Ma(M):Ma(M)}expandSegmentAgainstRouteUsingRedirect(P,M,Y,ue,Te,lt){return"**"===ue.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,Y,ue,lt):this.expandRegularSegmentAgainstRouteUsingRedirect(P,M,Y,ue,Te,lt)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,M,Y,ue){const Te=this.applyRedirectCommands([],Y.redirectTo,{});return Y.redirectTo.startsWith("/")?Xa(Te):this.lineralizeSegments(Y,Te).pipe((0,Mi.zg)(lt=>{const At=new Bt(lt,{});return this.expandSegment(P,At,M,lt,ue,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,M,Y,ue,Te,lt){const{matched:At,consumedSegments:mn,lastChild:li,positionalParamSegments:Di}=br(M,ue,Te);if(!At)return Ma(M);const nr=this.applyRedirectCommands(mn,ue.redirectTo,Di);return ue.redirectTo.startsWith("/")?Xa(nr):this.lineralizeSegments(ue,nr).pipe((0,Mi.zg)(Rr=>this.expandSegment(P,M,Y,Rr.concat(Te.slice(li)),lt,!1)))}matchSegmentAgainstRoute(P,M,Y,ue,Te){if("**"===Y.path)return Y.loadChildren?(Y._loadedConfig?(0,Ft.of)(Y._loadedConfig):this.configLoader.load(P.injector,Y)).pipe((0,Bn.U)(Rr=>(Y._loadedConfig=Rr,new Bt(ue,{})))):(0,Ft.of)(new Bt(ue,{}));const{matched:lt,consumedSegments:At,lastChild:mn}=br(M,Y,ue);if(!lt)return Ma(M);const li=ue.slice(mn);return this.getChildConfig(P,Y,ue).pipe((0,Mi.zg)(nr=>{const Rr=nr.module,yr=nr.routes,{segmentGroup:io,slicedSegments:uo}=tr(M,At,li,yr),aa=new Bt(io.segments,io.children);if(0===uo.length&&aa.hasChildren())return this.expandChildren(Rr,yr,aa).pipe((0,Bn.U)(Xr=>new Bt(At,Xr)));if(0===yr.length&&0===uo.length)return(0,Ft.of)(new Bt(At,{}));const _a=hr(Y)===Te;return this.expandSegment(Rr,aa,yr,uo,_a?pe:Te,!0).pipe((0,Bn.U)(la=>new Bt(At.concat(la.segments),la.children)))}))}getChildConfig(P,M,Y){return M.children?(0,Ft.of)(new Nt(M.children,P)):M.loadChildren?void 0!==M._loadedConfig?(0,Ft.of)(M._loadedConfig):this.runCanLoadGuards(P.injector,M,Y).pipe((0,Mi.zg)(ue=>{return ue?this.configLoader.load(P.injector,M).pipe((0,Bn.U)(Te=>(M._loadedConfig=Te,Te))):(L=M,new xe.y(P=>P.error(Dn(`Cannot load children because the guard of the route "path: '${L.path}'" returned false`))));var L})):(0,Ft.of)(new Nt([],P))}runCanLoadGuards(P,M,Y){const ue=M.canLoad;if(!ue||0===ue.length)return(0,Ft.of)(!0);const Te=ue.map(lt=>{const At=P.get(lt);let mn;if((L=At)&&ai(L.canLoad))mn=At.canLoad(M,Y);else{if(!ai(At))throw new Error("Invalid CanLoad guard");mn=At(M,Y)}var L;return z(mn)});return(0,Ft.of)(Te).pipe(Pe(),(0,Ti.b)(lt=>{if(!gs(lt))return;const At=Dn(`Redirecting to "${this.urlSerializer.serialize(lt)}"`);throw At.url=lt,At}),(0,Bn.U)(lt=>!0===lt))}lineralizeSegments(P,M){let Y=[],ue=M.root;for(;;){if(Y=Y.concat(ue.segments),0===ue.numberOfChildren)return(0,Ft.of)(Y);if(ue.numberOfChildren>1||!ue.children[pe])return Ta(P.redirectTo);ue=ue.children[pe]}}applyRedirectCommands(P,M,Y){return this.applyRedirectCreatreUrlTree(M,this.urlSerializer.parse(M),P,Y)}applyRedirectCreatreUrlTree(P,M,Y,ue){const Te=this.createSegmentGroup(P,M.root,Y,ue);return new It(Te,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(P,M){const Y={};return Q(P,(ue,Te)=>{if("string"==typeof ue&&ue.startsWith(":")){const At=ue.substring(1);Y[Te]=M[At]}else Y[Te]=ue}),Y}createSegmentGroup(P,M,Y,ue){const Te=this.createSegments(P,M.segments,Y,ue);let lt={};return Q(M.children,(At,mn)=>{lt[mn]=this.createSegmentGroup(P,At,Y,ue)}),new Bt(Te,lt)}createSegments(P,M,Y,ue){return M.map(Te=>Te.path.startsWith(":")?this.findPosParam(P,Te,ue):this.findOrReturn(Te,Y))}findPosParam(P,M,Y){const ue=Y[M.path.substring(1)];if(!ue)throw new Error(`Cannot redirect to '${P}'. Cannot find '${M.path}'.`);return ue}findOrReturn(P,M){let Y=0;for(const ue of M){if(ue.path===P.path)return M.splice(Y),ue;Y++}return P}}function ns(L){const P={};for(const Y of Object.keys(L.children)){const Te=ns(L.children[Y]);(Te.segments.length>0||Te.hasChildren())&&(P[Y]=Te)}return function(L){if(1===L.numberOfChildren&&L.children[pe]){const P=L.children[pe];return new Bt(L.segments.concat(P.segments),P.children)}return L}(new Bt(L.segments,P))}class Fo{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class zs{constructor(P,M){this.component=P,this.route=M}}function ye(L,P,M){const Y=L._root;return ge(Y,P?P._root:null,M,[Y.value])}function S(L,P,M){const Y=function(L){if(!L)return null;for(let P=L.parent;P;P=P.parent){const M=P.routeConfig;if(M&&M._loadedConfig)return M._loadedConfig}return null}(P);return(Y?Y.module.injector:M).get(L)}function ge(L,P,M,Y,ue={canDeactivateChecks:[],canActivateChecks:[]}){const Te=vr(P);return L.children.forEach(lt=>{(function(L,P,M,Y,ue={canDeactivateChecks:[],canActivateChecks:[]}){const Te=L.value,lt=P?P.value:null,At=M?M.getContext(L.value.outlet):null;if(lt&&Te.routeConfig===lt.routeConfig){const mn=function(L,P,M){if("function"==typeof M)return M(L,P);switch(M){case"pathParamsChange":return!Qn(L.url,P.url);case"pathParamsOrQueryParamsChange":return!Qn(L.url,P.url)||!Ce(L.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xr(L,P)||!Ce(L.queryParams,P.queryParams);case"paramsChange":default:return!xr(L,P)}}(lt,Te,Te.routeConfig.runGuardsAndResolvers);mn?ue.canActivateChecks.push(new Fo(Y)):(Te.data=lt.data,Te._resolvedData=lt._resolvedData),ge(L,P,Te.component?At?At.children:null:M,Y,ue),mn&&At&&At.outlet&&At.outlet.isActivated&&ue.canDeactivateChecks.push(new zs(At.outlet.component,lt))}else lt&&ft(P,At,ue),ue.canActivateChecks.push(new Fo(Y)),ge(L,null,Te.component?At?At.children:null:M,Y,ue)})(lt,Te[lt.value.outlet],M,Y.concat([lt.value]),ue),delete Te[lt.value.outlet]}),Q(Te,(lt,At)=>ft(lt,M.getContext(At),ue)),ue}function ft(L,P,M){const Y=vr(L),ue=L.value;Q(Y,(Te,lt)=>{ft(Te,ue.component?P?P.children.getContext(lt):null:P,M)}),M.canDeactivateChecks.push(new zs(ue.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,ue))}class sr{}function Ur(L){return new xe.y(P=>P.error(L))}class Ps{constructor(P,M,Y,ue,Te,lt){this.rootComponentType=P,this.config=M,this.urlTree=Y,this.url=ue,this.paramsInheritanceStrategy=Te,this.relativeLinkResolution=lt}recognize(){const P=tr(this.urlTree.root,[],[],this.config.filter(lt=>void 0===lt.redirectTo),this.relativeLinkResolution).segmentGroup,M=this.processSegmentGroup(this.config,P,pe);if(null===M)return null;const Y=new yn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},pe,this.rootComponentType,null,this.urlTree.root,-1,{}),ue=new Or(Y,M),Te=new kn(this.url,ue);return this.inheritParamsAndData(Te._root),Te}inheritParamsAndData(P){const M=P.value,Y=se(M,this.paramsInheritanceStrategy);M.params=Object.freeze(Y.params),M.data=Object.freeze(Y.data),P.children.forEach(ue=>this.inheritParamsAndData(ue))}processSegmentGroup(P,M,Y){return 0===M.segments.length&&M.hasChildren()?this.processChildren(P,M):this.processSegment(P,M,M.segments,Y)}processChildren(P,M){const Y=[];for(const Te of Object.keys(M.children)){const lt=M.children[Te],At=Cr(P,Te),mn=this.processSegmentGroup(At,lt,Te);if(null===mn)return null;Y.push(...mn)}const ue=ds(Y);return ue.sort((P,M)=>P.value.outlet===pe?-1:M.value.outlet===pe?1:P.value.outlet.localeCompare(M.value.outlet)),ue}processSegment(P,M,Y,ue){for(const Te of P){const lt=this.processSegmentAgainstRoute(Te,M,Y,ue);if(null!==lt)return lt}return na(M,Y,ue)?[]:null}processSegmentAgainstRoute(P,M,Y,ue){if(P.redirectTo||!Oi(P,M,Y,ue))return null;let Te,lt=[],At=[];if("**"===P.path){const yr=Y.length>0?K(Y).parameters:{};Te=new yn(Y,yr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qs(P),hr(P),P.component,P,Bs(M),hs(M)+Y.length,qo(P))}else{const yr=br(M,P,Y);if(!yr.matched)return null;lt=yr.consumedSegments,At=Y.slice(yr.lastChild),Te=new yn(lt,yr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qs(P),hr(P),P.component,P,Bs(M),hs(M)+lt.length,qo(P))}const mn=(L=P).children?L.children:L.loadChildren?L._loadedConfig.routes:[],{segmentGroup:li,slicedSegments:Di}=tr(M,lt,At,mn.filter(yr=>void 0===yr.redirectTo),this.relativeLinkResolution);var L;if(0===Di.length&&li.hasChildren()){const yr=this.processChildren(mn,li);return null===yr?null:[new Or(Te,yr)]}if(0===mn.length&&0===Di.length)return[new Or(Te,[])];const nr=hr(P)===ue,Rr=this.processSegment(mn,li,Di,nr?pe:ue);return null===Rr?null:[new Or(Te,Rr)]}}function Cs(L){const P=L.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function ds(L){const P=[],M=new Set;for(const Y of L){if(!Cs(Y)){P.push(Y);continue}const ue=P.find(Te=>Y.value.routeConfig===Te.value.routeConfig);void 0!==ue?(ue.children.push(...Y.children),M.add(ue)):P.push(Y)}for(const Y of M){const ue=ds(Y.children);P.push(new Or(Y.value,ue))}return P.filter(Y=>!M.has(Y))}function Bs(L){let P=L;for(;P._sourceSegment;)P=P._sourceSegment;return P}function hs(L){let P=L,M=P._segmentIndexShift?P._segmentIndexShift:0;for(;P._sourceSegment;)P=P._sourceSegment,M+=P._segmentIndexShift?P._segmentIndexShift:0;return M-1}function qs(L){return L.data||{}}function qo(L){return L.resolve||{}}function zi(L){return(0,di.w)(P=>{const M=L(P);return M?(0,Kt.D)(M).pipe((0,Bn.U)(()=>P)):(0,Ft.of)(P)})}class Ws extends class{shouldDetach(P){return!1}store(P,M){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,M){return P.routeConfig===M.routeConfig}}{}const as=new I.OlP("ROUTES");class Ys{constructor(P,M,Y,ue){this.loader=P,this.compiler=M,this.onLoadStartListener=Y,this.onLoadEndListener=ue}load(P,M){if(M._loader$)return M._loader$;this.onLoadStartListener&&this.onLoadStartListener(M);const ue=this.loadModuleFactory(M.loadChildren).pipe((0,Bn.U)(Te=>{this.onLoadEndListener&&this.onLoadEndListener(M);const lt=Te.create(P);return new Nt(oe(lt.injector.get(as,void 0,I.XFs.Self|I.XFs.Optional)).map(qi),lt)}),(0,Vn.K)(Te=>{throw M._loader$=void 0,Te}));return M._loader$=new Hn.c(ue,()=>new Ai.xQ).pipe((0,er.x)()),M._loader$}loadModuleFactory(P){return"string"==typeof P?(0,Kt.D)(this.loader.load(P)):z(P()).pipe((0,Mi.zg)(M=>M instanceof I.YKP?(0,Ft.of)(M):(0,Kt.D)(this.compiler.compileModuleAsync(M))))}}class Br{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wo,this.attachRef=null}}class Wo{constructor(){this.contexts=new Map}onChildOutletCreated(P,M){const Y=this.getOrCreateContext(P);Y.outlet=M,this.contexts.set(P,Y)}onChildOutletDestroyed(P){const M=this.getContext(P);M&&(M.outlet=null)}onOutletDeactivated(){const P=this.contexts;return this.contexts=new Map,P}onOutletReAttached(P){this.contexts=P}getOrCreateContext(P){let M=this.getContext(P);return M||(M=new Br,this.contexts.set(P,M)),M}getContext(P){return this.contexts.get(P)||null}}class Oo{shouldProcessUrl(P){return!0}extract(P){return P}merge(P,M){return P}}function Vs(L){throw L}function Qr(L,P,M){return P.parse("/")}function ia(L,P){return(0,Ft.of)(null)}const Pc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ja={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class L{constructor(M,Y,ue,Te,lt,At,mn,li){this.rootComponentType=M,this.urlSerializer=Y,this.rootContexts=ue,this.location=Te,this.config=li,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ai.xQ,this.errorHandler=Vs,this.malformedUriErrorHandler=Qr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ia,afterPreactivation:ia},this.urlHandlingStrategy=new Oo,this.routeReuseStrategy=new Ws,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=lt.get(I.h0i),this.console=lt.get(I.c2e);const Rr=lt.get(I.R0b);this.isNgZoneEnabled=Rr instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(li),this.currentUrlTree=new It(new Bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ys(At,mn,yr=>this.triggerEvent(new Zn(yr)),yr=>this.triggerEvent(new Bi(yr))),this.routerState=ts(this.currentUrlTree,this.rootComponentType),this.transitions=new Mn.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var M;return null===(M=this.location.getState())||void 0===M?void 0:M.\u0275routerPageId}setupNavigations(M){const Y=this.events;return M.pipe((0,zn.h)(ue=>0!==ue.id),(0,Bn.U)(ue=>Object.assign(Object.assign({},ue),{extractedUrl:this.urlHandlingStrategy.extract(ue.rawUrl)})),(0,di.w)(ue=>{let Te=!1,lt=!1;return(0,Ft.of)(ue).pipe((0,Ti.b)(At=>{this.currentNavigation={id:At.id,initialUrl:At.currentRawUrl,extractedUrl:At.extractedUrl,trigger:At.source,extras:At.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,di.w)(At=>{const mn=!this.navigated||At.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||mn)&&this.urlHandlingStrategy.shouldProcessUrl(At.rawUrl))return(0,Ft.of)(At).pipe((0,di.w)(Di=>{const nr=this.transitions.getValue();return Y.next(new en(Di.id,this.serializeUrl(Di.extractedUrl),Di.source,Di.restoredState)),nr!==this.transitions.getValue()?dn.E:Promise.resolve(Di)}),function(L,P,M,Y){return(0,di.w)(ue=>function(L,P,M,Y,ue){return new gr(L,P,M,Y,ue).apply()}(L,P,M,ue.extractedUrl,Y).pipe((0,Bn.U)(Te=>Object.assign(Object.assign({},ue),{urlAfterRedirects:Te}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ti.b)(Di=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Di.urlAfterRedirects})}),function(L,P,M,Y,ue){return(0,Mi.zg)(Te=>function(L,P,M,Y,ue="emptyOnly",Te="legacy"){try{const lt=new Ps(L,P,M,Y,ue,Te).recognize();return null===lt?Ur(new sr):(0,Ft.of)(lt)}catch(lt){return Ur(lt)}}(L,P,Te.urlAfterRedirects,M(Te.urlAfterRedirects),Y,ue).pipe((0,Bn.U)(lt=>Object.assign(Object.assign({},Te),{targetSnapshot:lt}))))}(this.rootComponentType,this.config,Di=>this.serializeUrl(Di),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ti.b)(Di=>{"eager"===this.urlUpdateStrategy&&(Di.extras.skipLocationChange||this.setBrowserUrl(Di.urlAfterRedirects,Di),this.browserUrlTree=Di.urlAfterRedirects);const nr=new sn(Di.id,this.serializeUrl(Di.extractedUrl),this.serializeUrl(Di.urlAfterRedirects),Di.targetSnapshot);Y.next(nr)}));if(mn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:nr,extractedUrl:Rr,source:yr,restoredState:io,extras:uo}=At,aa=new en(nr,this.serializeUrl(Rr),yr,io);Y.next(aa);const _a=ts(Rr,this.rootComponentType).snapshot;return(0,Ft.of)(Object.assign(Object.assign({},At),{targetSnapshot:_a,urlAfterRedirects:Rr,extras:Object.assign(Object.assign({},uo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=At.rawUrl,this.browserUrlTree=At.urlAfterRedirects,At.resolve(null),dn.E}),zi(At=>{const{targetSnapshot:mn,id:li,extractedUrl:Di,rawUrl:nr,extras:{skipLocationChange:Rr,replaceUrl:yr}}=At;return this.hooks.beforePreactivation(mn,{navigationId:li,appliedUrlTree:Di,rawUrlTree:nr,skipLocationChange:!!Rr,replaceUrl:!!yr})}),(0,Ti.b)(At=>{const mn=new Un(At.id,this.serializeUrl(At.extractedUrl),this.serializeUrl(At.urlAfterRedirects),At.targetSnapshot);this.triggerEvent(mn)}),(0,Bn.U)(At=>Object.assign(Object.assign({},At),{guards:ye(At.targetSnapshot,At.currentSnapshot,this.rootContexts)})),function(L,P){return(0,Mi.zg)(M=>{const{targetSnapshot:Y,currentSnapshot:ue,guards:{canActivateChecks:Te,canDeactivateChecks:lt}}=M;return 0===lt.length&&0===Te.length?(0,Ft.of)(Object.assign(Object.assign({},M),{guardsResult:!0})):function(L,P,M,Y){return(0,Kt.D)(L).pipe((0,Mi.zg)(ue=>function(L,P,M,Y,ue){const Te=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!Te||0===Te.length)return(0,Ft.of)(!0);const lt=Te.map(At=>{const mn=S(At,P,ue);let li;if(function(L){return L&&ai(L.canDeactivate)}(mn))li=z(mn.canDeactivate(L,P,M,Y));else{if(!ai(mn))throw new Error("Invalid CanDeactivate guard");li=z(mn(L,P,M,Y))}return li.pipe(An())});return(0,Ft.of)(lt).pipe(Pe())}(ue.component,ue.route,M,P,Y)),An(ue=>!0!==ue,!0))}(lt,Y,ue,L).pipe((0,Mi.zg)(At=>At&&function(L){return"boolean"==typeof L}(At)?function(L,P,M,Y){return(0,Kt.D)(P).pipe((0,ki.b)(ue=>(0,Jt.z)(function(L,P){return null!==L&&P&&P(new cr(L)),(0,Ft.of)(!0)}(ue.route.parent,Y),function(L,P){return null!==L&&P&&P(new Kn(L)),(0,Ft.of)(!0)}(ue.route,Y),function(L,P,M){const Y=P[P.length-1],Te=P.slice(0,P.length-1).reverse().map(lt=>function(L){const P=L.routeConfig?L.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:L,guards:P}:null}(lt)).filter(lt=>null!==lt).map(lt=>(0,qt.P)(()=>{const At=lt.guards.map(mn=>{const li=S(mn,lt.node,M);let Di;if(function(L){return L&&ai(L.canActivateChild)}(li))Di=z(li.canActivateChild(Y,L));else{if(!ai(li))throw new Error("Invalid CanActivateChild guard");Di=z(li(Y,L))}return Di.pipe(An())});return(0,Ft.of)(At).pipe(Pe())}));return(0,Ft.of)(Te).pipe(Pe())}(L,ue.path,M),function(L,P,M){const Y=P.routeConfig?P.routeConfig.canActivate:null;if(!Y||0===Y.length)return(0,Ft.of)(!0);const ue=Y.map(Te=>(0,qt.P)(()=>{const lt=S(Te,P,M);let At;if(function(L){return L&&ai(L.canActivate)}(lt))At=z(lt.canActivate(P,L));else{if(!ai(lt))throw new Error("Invalid CanActivate guard");At=z(lt(P,L))}return At.pipe(An())}));return(0,Ft.of)(ue).pipe(Pe())}(L,ue.route,M))),An(ue=>!0!==ue,!0))}(Y,Te,L,P):(0,Ft.of)(At)),(0,Bn.U)(At=>Object.assign(Object.assign({},M),{guardsResult:At})))})}(this.ngModule.injector,At=>this.triggerEvent(At)),(0,Ti.b)(At=>{if(gs(At.guardsResult)){const li=Dn(`Redirecting to "${this.serializeUrl(At.guardsResult)}"`);throw li.url=At.guardsResult,li}const mn=new ui(At.id,this.serializeUrl(At.extractedUrl),this.serializeUrl(At.urlAfterRedirects),At.targetSnapshot,!!At.guardsResult);this.triggerEvent(mn)}),(0,zn.h)(At=>!!At.guardsResult||(this.restoreHistory(At),this.cancelNavigationTransition(At,""),!1)),zi(At=>{if(At.guards.canActivateChecks.length)return(0,Ft.of)(At).pipe((0,Ti.b)(mn=>{const li=new Xn(mn.id,this.serializeUrl(mn.extractedUrl),this.serializeUrl(mn.urlAfterRedirects),mn.targetSnapshot);this.triggerEvent(li)}),(0,di.w)(mn=>{let li=!1;return(0,Ft.of)(mn).pipe(function(L,P){return(0,Mi.zg)(M=>{const{targetSnapshot:Y,guards:{canActivateChecks:ue}}=M;if(!ue.length)return(0,Ft.of)(M);let Te=0;return(0,Kt.D)(ue).pipe((0,ki.b)(lt=>function(L,P,M,Y){return function(L,P,M,Y){const ue=Object.keys(L);if(0===ue.length)return(0,Ft.of)({});const Te={};return(0,Kt.D)(ue).pipe((0,Mi.zg)(lt=>function(L,P,M,Y){const ue=S(L,P,Y);return z(ue.resolve?ue.resolve(P,M):ue(P,M))}(L[lt],P,M,Y).pipe((0,Ti.b)(At=>{Te[lt]=At}))),ii(1),(0,Mi.zg)(()=>Object.keys(Te).length===ue.length?(0,Ft.of)(Te):dn.E))}(L._resolve,L,P,Y).pipe((0,Bn.U)(Te=>(L._resolvedData=Te,L.data=Object.assign(Object.assign({},L.data),se(L,M).resolve),null)))}(lt.route,Y,L,P)),(0,Ti.b)(()=>Te++),ii(1),(0,Mi.zg)(lt=>Te===ue.length?(0,Ft.of)(M):dn.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ti.b)({next:()=>li=!0,complete:()=>{li||(this.restoreHistory(mn),this.cancelNavigationTransition(mn,"At least one route resolver didn't emit any value."))}}))}),(0,Ti.b)(mn=>{const li=new Xt(mn.id,this.serializeUrl(mn.extractedUrl),this.serializeUrl(mn.urlAfterRedirects),mn.targetSnapshot);this.triggerEvent(li)}))}),zi(At=>{const{targetSnapshot:mn,id:li,extractedUrl:Di,rawUrl:nr,extras:{skipLocationChange:Rr,replaceUrl:yr}}=At;return this.hooks.afterPreactivation(mn,{navigationId:li,appliedUrlTree:Di,rawUrlTree:nr,skipLocationChange:!!Rr,replaceUrl:!!yr})}),(0,Bn.U)(At=>{const mn=function(L,P,M){const Y=Ms(L,P._root,M?M._root:void 0);return new wr(Y,P)}(this.routeReuseStrategy,At.targetSnapshot,At.currentRouterState);return Object.assign(Object.assign({},At),{targetRouterState:mn})}),(0,Ti.b)(At=>{this.currentUrlTree=At.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,At.rawUrl),this.routerState=At.targetRouterState,"deferred"===this.urlUpdateStrategy&&(At.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,At),this.browserUrlTree=At.urlAfterRedirects)}),((L,P,M)=>(0,Bn.U)(Y=>(new ee(P,Y.targetRouterState,Y.currentRouterState,M).activate(L),Y)))(this.rootContexts,this.routeReuseStrategy,At=>this.triggerEvent(At)),(0,Ti.b)({next(){Te=!0},complete(){Te=!0}}),(0,Zi.x)(()=>{if(!Te&&!lt){const At=`Navigation ID ${ue.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(ue),this.cancelNavigationTransition(ue,At)):this.cancelNavigationTransition(ue,At)}this.currentNavigation=null}),(0,Vn.K)(At=>{if(lt=!0,function(L){return L&&L[jt]}(At)){const mn=gs(At.url);mn||(this.navigated=!0,this.restoreHistory(ue,!0));const li=new xt(ue.id,this.serializeUrl(ue.extractedUrl),At.message);Y.next(li),mn?setTimeout(()=>{const Di=this.urlHandlingStrategy.merge(At.url,this.rawUrlTree);this.scheduleNavigation(Di,"imperative",null,{skipLocationChange:ue.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:ue.resolve,reject:ue.reject,promise:ue.promise})},0):ue.resolve(!1)}else{this.restoreHistory(ue,!0);const mn=new xn(ue.id,this.serializeUrl(ue.extractedUrl),At);Y.next(mn);try{ue.resolve(this.errorHandler(At))}catch(li){ue.reject(li)}}return dn.E}))}))}resetRootComponentType(M){this.rootComponentType=M,this.routerState.root.component=this.rootComponentType}getTransition(){const M=this.transitions.value;return M.urlAfterRedirects=this.browserUrlTree,M}setTransition(M){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),M))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(M=>{const Y=this.extractLocationChangeInfoFromEvent(M);this.shouldScheduleNavigation(this.lastLocationChangeInfo,Y)&&setTimeout(()=>{const{source:ue,state:Te,urlTree:lt}=Y,At={replaceUrl:!0};if(Te){const mn=Object.assign({},Te);delete mn.navigationId,delete mn.\u0275routerPageId,0!==Object.keys(mn).length&&(At.state=mn)}this.scheduleNavigation(lt,ue,Te,At)},0),this.lastLocationChangeInfo=Y}))}extractLocationChangeInfoFromEvent(M){var Y;return{source:"popstate"===M.type?"popstate":"hashchange",urlTree:this.parseUrl(M.url),state:(null===(Y=M.state)||void 0===Y?void 0:Y.navigationId)?M.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(M,Y){if(!M)return!0;const ue=Y.urlTree.toString()===M.urlTree.toString();return Y.transitionId!==M.transitionId||!ue||!("hashchange"===Y.source&&"popstate"===M.source||"popstate"===Y.source&&"hashchange"===M.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(M){this.events.next(M)}resetConfig(M){cn(M),this.config=M.map(qi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(M,Y={}){const{relativeTo:ue,queryParams:Te,fragment:lt,queryParamsHandling:At,preserveFragment:mn}=Y,li=ue||this.routerState.root,Di=mn?this.currentUrlTree.fragment:lt;let nr=null;switch(At){case"merge":nr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Te);break;case"preserve":nr=this.currentUrlTree.queryParams;break;default:nr=Te||null}return null!==nr&&(nr=this.removeEmptyProps(nr)),function(L,P,M,Y,ue){if(0===M.length)return $o(P.root,P.root,P,Y,ue);const Te=function(L){if("string"==typeof L[0]&&1===L.length&&"/"===L[0])return new xo(!0,0,L);let P=0,M=!1;const Y=L.reduce((ue,Te,lt)=>{if("object"==typeof Te&&null!=Te){if(Te.outlets){const At={};return Q(Te.outlets,(mn,li)=>{At[li]="string"==typeof mn?mn.split("/"):mn}),[...ue,{outlets:At}]}if(Te.segmentPath)return[...ue,Te.segmentPath]}return"string"!=typeof Te?[...ue,Te]:0===lt?(Te.split("/").forEach((At,mn)=>{0==mn&&"."===At||(0==mn&&""===At?M=!0:".."===At?P++:""!=At&&ue.push(At))}),ue):[...ue,Te]},[]);return new xo(M,P,Y)}(M);if(Te.toRoot())return $o(P.root,new Bt([],{}),P,Y,ue);const lt=function(L,P,M){if(L.isAbsolute)return new bo(P.root,!0,0);if(-1===M.snapshot._lastPathIndex){const Te=M.snapshot._urlSegment;return new bo(Te,Te===P.root,0)}const Y=ma(L.commands[0])?0:1;return function(L,P,M){let Y=L,ue=P,Te=M;for(;Te>ue;){if(Te-=ue,Y=Y.parent,!Y)throw new Error("Invalid number of '../'");ue=Y.segments.length}return new bo(Y,!1,ue-Te)}(M.snapshot._urlSegment,M.snapshot._lastPathIndex+Y,L.numberOfDoubleDots)}(Te,P,L),At=lt.processChildren?Is(lt.segmentGroup,lt.index,Te.commands):So(lt.segmentGroup,lt.index,Te.commands);return $o(lt.segmentGroup,At,P,Y,ue)}(li,this.currentUrlTree,M,nr,null!=Di?Di:null)}navigateByUrl(M,Y={skipLocationChange:!1}){const ue=gs(M)?M:this.parseUrl(M),Te=this.urlHandlingStrategy.merge(ue,this.rawUrlTree);return this.scheduleNavigation(Te,"imperative",null,Y)}navigate(M,Y={skipLocationChange:!1}){return function(L){for(let P=0;P<L.length;P++){const M=L[P];if(null==M)throw new Error(`The requested path contains ${M} segment at index ${P}`)}}(M),this.navigateByUrl(this.createUrlTree(M,Y),Y)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){let Y;try{Y=this.urlSerializer.parse(M)}catch(ue){Y=this.malformedUriErrorHandler(ue,this.urlSerializer,M)}return Y}isActive(M,Y){let ue;if(ue=!0===Y?Object.assign({},Pc):!1===Y?Object.assign({},Ja):Y,gs(M))return W(this.currentUrlTree,M,ue);const Te=this.parseUrl(M);return W(this.currentUrlTree,Te,ue)}removeEmptyProps(M){return Object.keys(M).reduce((Y,ue)=>{const Te=M[ue];return null!=Te&&(Y[ue]=Te),Y},{})}processNavigations(){this.navigations.subscribe(M=>{this.navigated=!0,this.lastSuccessfulId=M.id,this.currentPageId=M.targetPageId,this.events.next(new at(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,M.resolve(!0)},M=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(M,Y,ue,Te,lt){var At,mn;if(this.disposed)return Promise.resolve(!1);const li=this.getTransition(),Di="imperative"!==Y&&"imperative"===(null==li?void 0:li.source),yr=(this.lastSuccessfulId===li.id||this.currentNavigation?li.rawUrl:li.urlAfterRedirects).toString()===M.toString();if(Di&&yr)return Promise.resolve(!0);let io,uo,aa;lt?(io=lt.resolve,uo=lt.reject,aa=lt.promise):aa=new Promise((la,Xr)=>{io=la,uo=Xr});const _a=++this.navigationId;let nl;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ue=this.location.getState()),nl=ue&&ue.\u0275routerPageId?ue.\u0275routerPageId:Te.replaceUrl||Te.skipLocationChange?null!==(At=this.browserPageId)&&void 0!==At?At:0:(null!==(mn=this.browserPageId)&&void 0!==mn?mn:0)+1):nl=0,this.setTransition({id:_a,targetPageId:nl,source:Y,restoredState:ue,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:M,extras:Te,resolve:io,reject:uo,promise:aa,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),aa.catch(la=>Promise.reject(la))}setBrowserUrl(M,Y){const ue=this.urlSerializer.serialize(M),Te=Object.assign(Object.assign({},Y.extras.state),this.generateNgRouterState(Y.id,Y.targetPageId));this.location.isCurrentPathEqualTo(ue)||Y.extras.replaceUrl?this.location.replaceState(ue,"",Te):this.location.go(ue,"",Te)}restoreHistory(M,Y=!1){var ue,Te;if("computed"===this.canceledNavigationResolution){const lt=this.currentPageId-M.targetPageId;"popstate"!==M.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ue=this.currentNavigation)||void 0===ue?void 0:ue.finalUrl)||0===lt?this.currentUrlTree===(null===(Te=this.currentNavigation)||void 0===Te?void 0:Te.finalUrl)&&0===lt&&(this.resetState(M),this.browserUrlTree=M.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(lt)}else"replace"===this.canceledNavigationResolution&&(Y&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=M.currentRouterState,this.currentUrlTree=M.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(M,Y){const ue=new xt(M.id,this.serializeUrl(M.extractedUrl),Y);this.triggerEvent(ue),M.resolve(!1)}generateNgRouterState(M,Y){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:Y}:{navigationId:M}}}return L.\u0275fac=function(M){return new(M||L)(I.LFG(I.DyG),I.LFG(bi),I.LFG(Wo),I.LFG(x.Ye),I.LFG(I.zs3),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(void 0))},L.\u0275prov=I.Yz7({token:L,factory:L.\u0275fac}),L})(),Ga=(()=>{class L{constructor(M,Y,ue,Te,lt){this.router=M,this.route=Y,this.commands=[],this.onChanges=new Ai.xQ,null==ue&&Te.setAttribute(lt.nativeElement,"tabindex","0")}ngOnChanges(M){this.onChanges.next(this)}set routerLink(M){this.commands=null!=M?Array.isArray(M)?M:[M]:[]}onClick(){const M={skipLocationChange:Ia(this.skipLocationChange),replaceUrl:Ia(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,M),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ia(this.preserveFragment)})}}return L.\u0275fac=function(M){return new(M||L)(I.Y36(_s),I.Y36(it),I.$8M("tabindex"),I.Y36(I.Qsj),I.Y36(I.SBq))},L.\u0275dir=I.lG2({type:L,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(M,Y){1&M&&I.NdJ("click",function(){return Y.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[I.TTD]}),L})(),uc=(()=>{class L{constructor(M,Y,ue){this.router=M,this.route=Y,this.locationStrategy=ue,this.commands=[],this.onChanges=new Ai.xQ,this.subscription=M.events.subscribe(Te=>{Te instanceof at&&this.updateTargetUrlAndHref()})}set routerLink(M){this.commands=null!=M?Array.isArray(M)?M:[M]:[]}ngOnChanges(M){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(M,Y,ue,Te,lt){if(0!==M||Y||ue||Te||lt||"string"==typeof this.target&&"_self"!=this.target)return!0;const At={skipLocationChange:Ia(this.skipLocationChange),replaceUrl:Ia(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,At),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ia(this.preserveFragment)})}}return L.\u0275fac=function(M){return new(M||L)(I.Y36(_s),I.Y36(it),I.Y36(x.S$))},L.\u0275dir=I.lG2({type:L,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(M,Y){1&M&&I.NdJ("click",function(Te){return Y.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&M&&(I.Ikx("href",Y.href,I.LSH),I.uIk("target",Y.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[I.TTD]}),L})();function Ia(L){return""===L||!!L}let el=(()=>{class L{constructor(M,Y,ue,Te,lt,At){this.router=M,this.element=Y,this.renderer=ue,this.cdr=Te,this.link=lt,this.linkWithHref=At,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=M.events.subscribe(mn=>{mn instanceof at&&this.update()})}ngAfterContentInit(){(0,Ft.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ft.of)(null)).pipe((0,ei.J)()).subscribe(M=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var M;null===(M=this.linkInputChangesSubscription)||void 0===M||M.unsubscribe();const Y=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(ue=>!!ue).map(ue=>ue.onChanges);this.linkInputChangesSubscription=(0,Kt.D)(Y).pipe((0,ei.J)()).subscribe(ue=>{this.isActive!==this.isLinkActive(this.router)(ue)&&this.update()})}set routerLinkActive(M){const Y=Array.isArray(M)?M:M.split(" ");this.classes=Y.filter(ue=>!!ue)}ngOnChanges(M){this.update()}ngOnDestroy(){var M;this.routerEventsSubscription.unsubscribe(),null===(M=this.linkInputChangesSubscription)||void 0===M||M.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const M=this.hasActiveLinks();this.isActive!==M&&(this.isActive=M,this.cdr.markForCheck(),this.classes.forEach(Y=>{M?this.renderer.addClass(this.element.nativeElement,Y):this.renderer.removeClass(this.element.nativeElement,Y)}))})}isLinkActive(M){const Y="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ue=>M.isActive(ue.urlTree,Y)}hasActiveLinks(){const M=this.isLinkActive(this.router);return this.link&&M(this.link)||this.linkWithHref&&M(this.linkWithHref)||this.links.some(M)||this.linksWithHrefs.some(M)}}return L.\u0275fac=function(M){return new(M||L)(I.Y36(_s),I.Y36(I.SBq),I.Y36(I.Qsj),I.Y36(I.sBO),I.Y36(Ga,8),I.Y36(uc,8))},L.\u0275dir=I.lG2({type:L,selectors:[["","routerLinkActive",""]],contentQueries:function(M,Y,ue){if(1&M&&(I.Suo(ue,Ga,5),I.Suo(ue,uc,5)),2&M){let Te;I.iGM(Te=I.CRH())&&(Y.links=Te),I.iGM(Te=I.CRH())&&(Y.linksWithHrefs=Te)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[I.TTD]}),L})(),_l=(()=>{class L{constructor(M,Y,ue,Te,lt){this.parentContexts=M,this.location=Y,this.resolver=ue,this.changeDetector=lt,this.activated=null,this._activatedRoute=null,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.name=Te||pe,M.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const M=this.parentContexts.getContext(this.name);M&&M.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,M}attach(M,Y){this.activated=M,this._activatedRoute=Y,this.location.insert(M.hostView)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,Y){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=M;const lt=(Y=Y||this.resolver).resolveComponentFactory(M._futureSnapshot.routeConfig.component),At=this.parentContexts.getOrCreateContext(this.name).children,mn=new Fs(M,At,this.location.injector);this.activated=this.location.createComponent(lt,this.location.length,mn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return L.\u0275fac=function(M){return new(M||L)(I.Y36(Wo),I.Y36(I.s_b),I.Y36(I._Vd),I.$8M("name"),I.Y36(I.sBO))},L.\u0275dir=I.lG2({type:L,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),L})();class Fs{constructor(P,M,Y){this.route=P,this.childContexts=M,this.parent=Y}get(P,M){return P===it?this.route:P===Wo?this.childContexts:this.parent.get(P,M)}}class yl{}class vl{preload(P,M){return(0,Ft.of)(null)}}let co=(()=>{class L{constructor(M,Y,ue,Te,lt){this.router=M,this.injector=Te,this.preloadingStrategy=lt,this.loader=new Ys(Y,ue,li=>M.triggerEvent(new Zn(li)),li=>M.triggerEvent(new Bi(li)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,zn.h)(M=>M instanceof at),(0,ki.b)(()=>this.preload())).subscribe(()=>{})}preload(){const M=this.injector.get(I.h0i);return this.processRoutes(M,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,Y){const ue=[];for(const Te of Y)if(Te.loadChildren&&!Te.canLoad&&Te._loadedConfig){const lt=Te._loadedConfig;ue.push(this.processRoutes(lt.module,lt.routes))}else Te.loadChildren&&!Te.canLoad?ue.push(this.preloadConfig(M,Te)):Te.children&&ue.push(this.processRoutes(M,Te.children));return(0,Kt.D)(ue).pipe((0,ei.J)(),(0,Bn.U)(Te=>{}))}preloadConfig(M,Y){return this.preloadingStrategy.preload(Y,()=>(Y._loadedConfig?(0,Ft.of)(Y._loadedConfig):this.loader.load(M.injector,Y)).pipe((0,Mi.zg)(Te=>(Y._loadedConfig=Te,this.processRoutes(Te.module,Te.routes)))))}}return L.\u0275fac=function(M){return new(M||L)(I.LFG(_s),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(I.zs3),I.LFG(yl))},L.\u0275prov=I.Yz7({token:L,factory:L.\u0275fac}),L})(),ra=(()=>{class L{constructor(M,Y,ue={}){this.router=M,this.viewportScroller=Y,this.options=ue,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ue.scrollPositionRestoration=ue.scrollPositionRestoration||"disabled",ue.anchorScrolling=ue.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(M=>{M instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof at&&(this.lastId=M.id,this.scheduleScrollEvent(M,this.router.parseUrl(M.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(M=>{M instanceof Wt&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,Y){this.router.triggerEvent(new Wt(M,"popstate"===this.lastSource?this.store[this.restoredId]:null,Y))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return L.\u0275fac=function(M){return new(M||L)(I.LFG(_s),I.LFG(x.EM),I.LFG(void 0))},L.\u0275prov=I.Yz7({token:L,factory:L.\u0275fac}),L})();const sa=new I.OlP("ROUTER_CONFIGURATION"),xl=new I.OlP("ROUTER_FORROOT_GUARD"),dc=[x.Ye,{provide:bi,useClass:$e},{provide:_s,useFactory:function(L,P,M,Y,ue,Te,lt,At={},mn,li){const Di=new _s(null,L,P,M,Y,ue,Te,oe(lt));return mn&&(Di.urlHandlingStrategy=mn),li&&(Di.routeReuseStrategy=li),function(L,P){L.errorHandler&&(P.errorHandler=L.errorHandler),L.malformedUriErrorHandler&&(P.malformedUriErrorHandler=L.malformedUriErrorHandler),L.onSameUrlNavigation&&(P.onSameUrlNavigation=L.onSameUrlNavigation),L.paramsInheritanceStrategy&&(P.paramsInheritanceStrategy=L.paramsInheritanceStrategy),L.relativeLinkResolution&&(P.relativeLinkResolution=L.relativeLinkResolution),L.urlUpdateStrategy&&(P.urlUpdateStrategy=L.urlUpdateStrategy)}(At,Di),At.enableTracing&&Di.events.subscribe(nr=>{var Rr,yr;null===(Rr=console.group)||void 0===Rr||Rr.call(console,`Router Event: ${nr.constructor.name}`),console.log(nr.toString()),console.log(nr),null===(yr=console.groupEnd)||void 0===yr||yr.call(console)}),Di},deps:[bi,Wo,x.Ye,I.zs3,I.v3s,I.Sil,as,sa,[class{},new I.FiY],[class{},new I.FiY]]},Wo,{provide:it,useFactory:function(L){return L.routerState.root},deps:[_s]},{provide:I.v3s,useClass:I.EAV},co,vl,class{preload(P,M){return M().pipe((0,Vn.K)(()=>(0,Ft.of)(null)))}},{provide:sa,useValue:{enableTracing:!1}}];function Fa(){return new I.PXZ("Router",_s)}let oa=(()=>{class L{constructor(M,Y){}static forRoot(M,Y){return{ngModule:L,providers:[dc,si(M),{provide:xl,useFactory:$a,deps:[[_s,new I.FiY,new I.tp0]]},{provide:sa,useValue:Y||{}},{provide:x.S$,useFactory:tl,deps:[x.lw,[new I.tBr(x.mr),new I.FiY],sa]},{provide:ra,useFactory:Rc,deps:[_s,x.EM,sa]},{provide:yl,useExisting:Y&&Y.preloadingStrategy?Y.preloadingStrategy:vl},{provide:I.PXZ,multi:!0,useFactory:Fa},[Ra,{provide:I.ip1,multi:!0,useFactory:hc,deps:[Ra]},{provide:$l,useFactory:fc,deps:[Ra]},{provide:I.tb,multi:!0,useExisting:$l}]]}}static forChild(M){return{ngModule:L,providers:[si(M)]}}}return L.\u0275fac=function(M){return new(M||L)(I.LFG(xl,8),I.LFG(_s,8))},L.\u0275mod=I.oAB({type:L}),L.\u0275inj=I.cJS({}),L})();function Rc(L,P,M){return M.scrollOffset&&P.setOffset(M.scrollOffset),new ra(L,P,M)}function tl(L,P,M={}){return M.useHash?new x.Do(L,P):new x.b0(L,P)}function $a(L){return"guarded"}function si(L){return[{provide:I.deG,multi:!0,useValue:L},{provide:as,multi:!0,useValue:L}]}let Ra=(()=>{class L{constructor(M){this.injector=M,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ai.xQ}appInitializer(){return this.injector.get(x.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Y=null;const ue=new Promise(At=>Y=At),Te=this.injector.get(_s),lt=this.injector.get(sa);return"disabled"===lt.initialNavigation?(Te.setUpLocationChangeListener(),Y(!0)):"enabled"===lt.initialNavigation||"enabledBlocking"===lt.initialNavigation?(Te.hooks.afterPreactivation=()=>this.initNavigation?(0,Ft.of)(null):(this.initNavigation=!0,Y(!0),this.resultOfPreactivationDone),Te.initialNavigation()):Y(!0),ue})}bootstrapListener(M){const Y=this.injector.get(sa),ue=this.injector.get(co),Te=this.injector.get(ra),lt=this.injector.get(_s),At=this.injector.get(I.z2F);M===At.components[0]&&(("enabledNonBlocking"===Y.initialNavigation||void 0===Y.initialNavigation)&&lt.initialNavigation(),ue.setUpPreloading(),Te.init(),lt.resetRootComponentType(At.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return L.\u0275fac=function(M){return new(M||L)(I.LFG(I.zs3))},L.\u0275prov=I.Yz7({token:L,factory:L.\u0275fac}),L})();function hc(L){return L.appInitializer.bind(L)}function fc(L){return L.bootstrapListener.bind(L)}const $l=new I.OlP("Router Initializer")},2958:function(Jn){Jn.exports=function(){"use strict";var Lt,ne,x;function I(c,Xe){if(Lt)if(ne){var Ie="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+Lt+")(sharedChunk); ("+ne+")(sharedChunk); self.onerror = null;",_={};Lt(_),x=Xe(_),"undefined"!=typeof window&&(x.workerUrl=window.URL.createObjectURL(new Blob([Ie],{type:"text/javascript"})))}else ne=Xe;else Lt=Xe}return I(0,function(c){var Ie=_;function _(s,e,o,l){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=o,this.p2y=l}_.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},_.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},_.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},_.prototype.solveCurveX=function(s,e){var o,l,h,m,y;for(void 0===e&&(e=1e-6),h=s,y=0;y<8;y++){if(m=this.sampleCurveX(h)-s,Math.abs(m)<e)return h;var C=this.sampleCurveDerivativeX(h);if(Math.abs(C)<1e-6)break;h-=m/C}if((h=s)<(o=0))return o;if(h>(l=1))return l;for(;o<l;){if(m=this.sampleCurveX(h),Math.abs(m-s)<e)return h;s>m?o=h:l=h,h=.5*(l-o)+o}return h},_.prototype.solve=function(s,e){return this.sampleCurveY(this.solveCurveX(s,e))};var ve=xe;function xe(s,e){this.x=s,this.y=e}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,e){return this.clone()._rotateAround(s,e)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var e=s.x-this.x,o=s.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,e){return Math.atan2(this.x*e-this.y*s,this.x*s+this.y*e)},_matMult:function(s){var e=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=e,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var e=Math.cos(s),o=Math.sin(s),l=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=l,this},_rotateAround:function(s,e){var o=Math.cos(s),l=Math.sin(s),h=e.y+l*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-l*(this.y-e.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},xe.convert=function(s){return s instanceof xe?s:Array.isArray(s)?new xe(s[0],s[1]):s};var Oe="undefined"!=typeof self?self:{};const Ke=Math.pow(2,53)-1,st=Math.PI/180,Pt=180/Math.PI;function Qt(s){return s*st}const Dt=[[0,0],[1,0],[1,1],[0,1]];function St(s){if(s<=0)return 0;if(s>=1)return 1;const e=s*s,o=e*s;return 4*(s<.5?o:3*(s-e)+o-.75)}function kt(s,e,o,l){const h=new Ie(s,e,o,l);return function(m){return h.solve(m)}}const Kt=kt(.25,.1,.25,1);function Ft(s,e,o){return Math.min(o,Math.max(e,s))}function Mn(s,e,o){const l=o-e,h=((s-e)%l+l)%l+e;return h===e?o:h}function Jt(s,e,o){if(!s.length)return o(null,[]);let l=s.length;const h=new Array(s.length);let m=null;s.forEach((y,C)=>{e(y,(D,R)=>{D&&(m=D),h[C]=R,0==--l&&o(m,h)})})}function qt(s){const e=[];for(const o in s)e.push(s[o]);return e}function dn(s,...e){for(const o of e)for(const l in o)s[l]=o[l];return s}let Hn=1;function Ai(){return Hn++}function Ri(){return function s(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function ci(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function ni(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function zn(s,e){s.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function Ln(s,e){return-1!==s.indexOf(e,s.length-e.length)}function ii(s,e,o){const l={};for(const h in s)l[h]=e.call(o||this,s[h],h,s);return l}function On(s,e,o){const l={};for(const h in s)e.call(o||this,s[h],h,s)&&(l[h]=s[h]);return l}function vi(s){return Array.isArray(s)?s.map(vi):"object"==typeof s&&s?ii(s,vi):s}const xi={};function fi(s){xi[s]||("undefined"!=typeof console&&console.warn(s),xi[s]=!0)}function Ki(s,e,o){return(o.y-s.y)*(e.x-s.x)>(e.y-s.y)*(o.x-s.x)}function rn(s){let e=0;for(let o,l,h=0,m=s.length,y=m-1;h<m;y=h++)o=s[h],l=s[y],e+=(l.x-o.x)*(o.y+l.y);return e}function Ut(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function an(s){const e={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,h,m)=>{const y=h||m;return e[l]=!y||y.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let ct,Et,tn,pn=null;function An(s){if(null==pn){const e=s.navigator?s.navigator.userAgent:null;pn=!!s.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return pn}function Bn(s){try{const e=Oe[s];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const di={now:()=>void 0!==tn?tn:Oe.performance.now(),setNow(s){tn=s},restoreNow(){tn=void 0},frame(s){const e=Oe.requestAnimationFrame(s);return{cancel:()=>Oe.cancelAnimationFrame(e)}},getImageData(s,e=0){const o=Oe.document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return o.width=s.width,o.height=s.height,l.drawImage(s,0,0,s.width,s.height),l.getImageData(-e,-e,s.width+2*e,s.height+2*e)},resolveURL:s=>(ct||(ct=Oe.document.createElement("a")),ct.href=s,ct.href),get devicePixelRatio(){return Oe.devicePixelRatio},get prefersReducedMotion(){return!!Oe.matchMedia&&(null==Et&&(Et=Oe.matchMedia("(prefers-reduced-motion: reduce)")),Et.matches)}};let Ei;const Vn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ei){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ei=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):s}catch(e){Ei=s}}return Ei},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ki={supported:!1,testSupport:function(s){!er&&Ti&&(Zi?ei(s):Mi=s)}};let Mi,Ti,er=!1,Zi=!1;function ei(s){const e=s.createTexture();s.bindTexture(s.TEXTURE_2D,e);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,Ti),s.isContextLost())return;ki.supported=!0}catch(o){}s.deleteTexture(e),er=!0}Oe.document&&(Ti=Oe.document.createElement("img"),Ti.onload=function(){Mi&&ei(Mi),Mi=null,Zi=!0},Ti.onerror=function(){er=!0,Mi=null},Ti.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const oi="01",en="NO_ACCESS_TOKEN";function at(s){return 0===s.indexOf("mapbox:")}function xt(s){return Vn.API_URL_REGEX.test(s)}const xn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function sn(s){const e=s.match(xn);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Un(s){const e=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${e}`}function ui(s){if(!s)return null;const e=s.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(Oe.atob(e[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(o){return null}}class Xn{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const o=ui(Vn.ACCESS_TOKEN);let l="";return l=o&&o.u?Oe.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(Number("0x"+m)))):Vn.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${l}`:`mapbox.eventData:${l}`}fetchEventData(){const e=Bn("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{const h=Oe.localStorage.getItem(o);h&&(this.eventData=JSON.parse(h));const m=Oe.localStorage.getItem(l);m&&(this.anonId=m)}catch(h){fi("Unable to read from LocalStorage")}}saveEventData(){const e=Bn("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{Oe.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&Oe.localStorage.setItem(o,JSON.stringify(this.eventData))}catch(h){fi("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,o,l,h){if(!Vn.EVENTS_URL)return;const m=sn(Vn.EVENTS_URL);m.params.push(`access_token=${h||Vn.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.4.0",skuId:oi,userId:this.anonId},C=o?dn(y,o):y,D={url:Un(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};this.pendingRequest=N(D,R=>{this.pendingRequest=null,l(R),this.saveEventData(),this.processRequests(h)})}queueRequest(e,o){this.queue.push(e),this.processRequests(o)}}const Xt=new class extends Xn{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,e){Vn.EVENTS_URL&&Vn.ACCESS_TOKEN&&Array.isArray(s)&&s.some(o=>at(o)||xt(o))&&this.queueRequest(Date.now(),e)}processRequests(s){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=ui(Vn.ACCESS_TOKEN),o=e?e.u:Vn.ACCESS_TOKEN;let l=o!==this.eventData.tokenU;ni(this.anonId)||(this.anonId=Ri(),l=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),y=new Date(h),C=(h-this.eventData.lastSuccess)/864e5;l=l||C>=1||C<-1||m.getDate()!==y.getDate()}else l=!0;if(!l)return this.processRequests();this.postEvent(h,{"enabled.telemetry":!1},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=o)},s)}},Zn=Xt.postTurnstileEvent.bind(Xt),Bi=new class extends Xn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,e,o,l){this.skuToken=e,this.errorCb=l,Vn.EVENTS_URL&&(o||Vn.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},o):this.errorCb(new Error(en)))}processRequests(s){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),ni(this.anonId)||(this.anonId=Ri()),this.postEvent(o,{skuToken:this.skuToken},l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},s))}},cr=Bi.postMapLoadEvent.bind(Bi),Ui=new class extends Xn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,e,o,l){if(!Vn.API_URL||!Vn.SESSION_PATH)return;const h=sn(Vn.API_URL+Vn.SESSION_PATH);h.params.push(`sku=${e||""}`),h.params.push(`access_token=${l||Vn.ACCESS_TOKEN||""}`);const m={url:Un(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Q(m,y=>{this.pendingRequest=null,o(y),this.saveEventData(),this.processRequests(l)})}getSessionAPI(s,e,o,l){this.skuToken=e,this.errorCb=l,Vn.SESSION_PATH&&Vn.API_URL&&(o||Vn.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},o):this.errorCb(new Error(en)))}processRequests(s){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||this.getSession(o,this.skuToken,l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},s)}},Kn=Ui.getSessionAPI.bind(Ui),vt=new Set,Wt="mapbox-tiles";let pe,ke,gt=500,jt=50;function Dn(){Oe.caches&&!pe&&(pe=Oe.caches.open(Wt))}function ri(s){const e=s.indexOf("?");return e<0?s:s.slice(0,e)}let Ze=1/0;const ze={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ze);class Ce extends Error{constructor(e,o,l){401===o&&xt(l)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=o,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const me=Ut()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Oe.location.protocol?Oe.parent:Oe).location.href,oe=function(s,e){if(!(/^file:/.test(o=s.url)||/^file:/.test(me())&&!/^\w+:/.test(o))){if(Oe.fetch&&Oe.Request&&Oe.AbortController&&Oe.Request.prototype.hasOwnProperty("signal"))return function(l,h){const m=new Oe.AbortController,y=new Oe.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:me(),signal:m.signal});let C=!1,D=!1;const R=(V=y.url).indexOf("sku=")>0&&xt(V);var V;"json"===l.type&&y.headers.set("Accept","application/json");const H=(de,Me,Ue)=>{if(D)return;if(de&&"SecurityError"!==de.message&&fi(de),Me&&Ue)return re(Me);const ot=Date.now();Oe.fetch(y).then(wt=>{if(wt.ok){const Rt=R?wt.clone():null;return re(wt,Rt,ot)}return h(new Ce(wt.statusText,wt.status,l.url))}).catch(wt=>{20!==wt.code&&h(new Error(wt.message))})},re=(de,Me,Ue)=>{("arrayBuffer"===l.type?de.arrayBuffer():"json"===l.type?de.json():de.text()).then(ot=>{D||(Me&&Ue&&function(wt,Rt,Ot){if(Dn(),!pe)return;const zt={status:Rt.status,statusText:Rt.statusText,headers:new Oe.Headers};Rt.headers.forEach((Vt,En)=>zt.headers.set(En,Vt));const Ht=an(Rt.headers.get("Cache-Control")||"");Ht["no-store"]||(Ht["max-age"]&&zt.headers.set("Expires",new Date(Ot+1e3*Ht["max-age"]).toUTCString()),new Date(zt.headers.get("Expires")).getTime()-Ot<42e4||function(Vt,En){if(void 0===ke)try{new Response(new ReadableStream),ke=!0}catch(Fn){ke=!1}ke?En(Vt.body):Vt.blob().then(En)}(Rt,Vt=>{const En=new Oe.Response(Vt,zt);Dn(),pe&&pe.then(Fn=>Fn.put(ri(wt.url),En)).catch(Fn=>fi(Fn.message))}))}(y,Me,Ue),C=!0,h(null,ot,de.headers.get("Cache-Control"),de.headers.get("Expires")))}).catch(ot=>{D||h(new Error(ot.message))})};return R?function(de,Me){if(Dn(),!pe)return Me(null);const Ue=ri(de.url);pe.then(ot=>{ot.match(Ue).then(wt=>{const Rt=function(Ot){if(!Ot)return!1;const zt=new Date(Ot.headers.get("Expires")||0),Ht=an(Ot.headers.get("Cache-Control")||"");return zt>Date.now()&&!Ht["no-cache"]}(wt);ot.delete(Ue),Rt&&ot.put(Ue,wt.clone()),Me(null,wt,Rt)}).catch(Me)}).catch(Me)}(y,H):H(null,null),{cancel:()=>{D=!0,C||m.abort()}}}(s,e);if(Ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,e,void 0,!0)}var o;return function(l,h){const m=new Oe.XMLHttpRequest;m.open(l.method||"GET",l.url,!0),"arrayBuffer"===l.type&&(m.responseType="arraybuffer");for(const y in l.headers)m.setRequestHeader(y,l.headers[y]);return"json"===l.type&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials="include"===l.credentials,m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||0===m.status)&&null!==m.response){let y=m.response;if("json"===l.type)try{y=JSON.parse(m.response)}catch(C){return h(C)}h(null,y,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new Ce(m.statusText,m.status,l.url))},m.send(l.body),{cancel:()=>m.abort()}}(s,e)},K=function(s,e){return oe(dn(s,{type:"arrayBuffer"}),e)},N=function(s,e){return oe(dn(s,{method:"POST"}),e)},Q=function(s,e){return oe(dn(s,{method:"GET"}),e)};function z(s){const e=Oe.document.createElement("a");return e.href=s,e.protocol===Oe.document.location.protocol&&e.host===Oe.document.location.host}const O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let le,J;le=[],J=0;const W=function(s,e){if(ki.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),J>=Vn.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:s,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return le.push(m),m}J++;let o=!1;const l=()=>{if(!o)for(o=!0,J--;le.length&&J<Vn.MAX_PARALLEL_IMAGE_REQUESTS;){const m=le.shift(),{requestParameters:y,callback:C,cancelled:D}=m;D||(m.cancel=W(y,C).cancel)}},h=K(s,(m,y,C,D)=>{l(),m?e(m):y&&(Oe.createImageBitmap?function(R,V){const H=new Oe.Blob([new Uint8Array(R)],{type:"image/png"});Oe.createImageBitmap(H).then(re=>{V(null,re)}).catch(re=>{V(new Error(`Could not load image because of ${re.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(R,V)=>e(R,V,C,D)):function(R,V){const H=new Oe.Image,re=Oe.URL;H.onload=()=>{V(null,H),re.revokeObjectURL(H.src),H.onload=null,Oe.requestAnimationFrame(()=>{H.src=O})},H.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const de=new Oe.Blob([new Uint8Array(R)],{type:"image/png"});H.src=R.byteLength?re.createObjectURL(de):O}(y,(R,V)=>e(R,V,C,D)))});return{cancel:()=>{h.cancel(),l()}}};function $(s,e,o){o[s]&&-1!==o[s].indexOf(e)||(o[s]=o[s]||[],o[s].push(e))}function Ee(s,e,o){if(o&&o[s]){const l=o[s].indexOf(e);-1!==l&&o[s].splice(l,1)}}class Ge{constructor(e,o={}){dn(this,o),this.type=e}}class mt extends Ge{constructor(e,o={}){super("error",dn({error:e},o))}}class nn{on(e,o){return this._listeners=this._listeners||{},$(e,o,this._listeners),this}off(e,o){return Ee(e,o,this._listeners),Ee(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},$(e,o,this._oneTimeListeners),this):new Promise(l=>this.once(e,l))}fire(e,o){"string"==typeof e&&(e=new Ge(e,o||{}));const l=e.type;if(this.listens(l)){e.target=this;const h=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const C of h)C.call(this,e);const m=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const C of m)Ee(l,C,this._oneTimeListeners),C.call(this,e);const y=this._eventedParent;y&&(dn(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),y.fire(e))}else e instanceof mt&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var Qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class It{constructor(e,o,l,h){this.message=(e?`${e}: `:"")+l,h&&(this.identifier=h),null!=o&&o.__line__&&(this.line=o.__line__)}}function Bt(s){const e=s.value;return e?[new It(s.key,e,"constants have been deprecated as of v8")]:[]}function Sn(s,...e){for(const o of e)for(const l in o)s[l]=o[l];return s}function Nn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Qn(s){if(Array.isArray(s))return s.map(Qn);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const e={};for(const o in s)e[o]=Qn(s[o]);return e}return Nn(s)}class hi extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class bi{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[l,h]of o)this.bindings[l]=h}concat(e){return new bi(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const $e={kind:"null"},rt={kind:"number"},bt={kind:"string"},Yt={kind:"boolean"},In={kind:"color"},dt={kind:"object"},et={kind:"value"},ae={kind:"collator"},B={kind:"formatted"},q={kind:"resolvedImage"};function be(s,e){return{kind:"array",itemType:s,N:e}}function We(s){if("array"===s.kind){const e=We(s.itemType);return"number"==typeof s.N?`array<${e}, ${s.N}>`:"value"===s.itemType.kind?"array":`array<${e}>`}return s.kind}const Mt=[$e,rt,bt,Yt,In,B,dt,be(et),q];function $t(s,e){if("error"===e.kind)return null;if("array"===s.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!$t(s.itemType,e.itemType))&&("number"!=typeof s.N||s.N===e.N))return null}else{if(s.kind===e.kind)return null;if("value"===s.kind)for(const o of Mt)if(!$t(o,e))return null}return`Expected ${We(s)} but found ${We(e)} instead.`}function ti(s,e){return e.some(o=>o.kind===s.kind)}function pi(s,e){return e.some(o=>"null"===o?null===s:"array"===o?Array.isArray(s):"object"===o?s&&!Array.isArray(s)&&"object"==typeof s:o===typeof s)}function ji(s){var e={exports:{}};return s(e,e.exports),e.exports}var Vi=ji(function(s,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(C){return(C=Math.round(C))<0?0:C>255?255:C}function h(C){return l("%"===C[C.length-1]?parseFloat(C)/100*255:parseInt(C))}function m(C){return(D="%"===C[C.length-1]?parseFloat(C)/100:parseFloat(C))<0?0:D>1?1:D;var D}function y(C,D,R){return R<0?R+=1:R>1&&(R-=1),6*R<1?C+(D-C)*R*6:2*R<1?D:3*R<2?C+(D-C)*(2/3-R)*6:C}try{e.parseCSSColor=function(C){var D,R=C.replace(/ /g,"").toLowerCase();if(R in o)return o[R].slice();if("#"===R[0])return 4===R.length?(D=parseInt(R.substr(1),16))>=0&&D<=4095?[(3840&D)>>4|(3840&D)>>8,240&D|(240&D)>>4,15&D|(15&D)<<4,1]:null:7===R.length&&(D=parseInt(R.substr(1),16))>=0&&D<=16777215?[(16711680&D)>>16,(65280&D)>>8,255&D,1]:null;var V=R.indexOf("("),H=R.indexOf(")");if(-1!==V&&H+1===R.length){var re=R.substr(0,V),de=R.substr(V+1,H-(V+1)).split(","),Me=1;switch(re){case"rgba":if(4!==de.length)return null;Me=m(de.pop());case"rgb":return 3!==de.length?null:[h(de[0]),h(de[1]),h(de[2]),Me];case"hsla":if(4!==de.length)return null;Me=m(de.pop());case"hsl":if(3!==de.length)return null;var Ue=(parseFloat(de[0])%360+360)%360/360,ot=m(de[1]),wt=m(de[2]),Rt=wt<=.5?wt*(ot+1):wt+ot-wt*ot,Ot=2*wt-Rt;return[l(255*y(Ot,Rt,Ue+1/3)),l(255*y(Ot,Rt,Ue)),l(255*y(Ot,Rt,Ue-1/3)),Me];default:return null}}return null}}catch(C){}});class _i{constructor(e,o,l,h=1){this.r=e,this.g=o,this.b=l,this.a=h}static parse(e){if(!e)return;if(e instanceof _i)return e;if("string"!=typeof e)return;const o=Vi.parseCSSColor(e);return o?new _i(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,l,h]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(l)},${h})`}toArray(){const{r:e,g:o,b:l,a:h}=this;return 0===h?[0,0,0,0]:[255*e/h,255*o/h,255*l/h,h]}}_i.black=new _i(0,0,0,1),_i.white=new _i(1,1,1,1),_i.transparent=new _i(0,0,0,0),_i.red=new _i(1,0,0,1),_i.blue=new _i(0,0,1,1);class zr{constructor(e,o,l){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mr{constructor(e,o,l,h,m){this.text=e,this.image=o,this.scale=l,this.fontStack=h,this.textColor=m}}class Ni{constructor(e){this.sections=e}static fromString(e){return new Ni([new Mr(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Ni?e:Ni.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(l)}return e}}class $r{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new $r({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Or(s,e,o,l){return"number"==typeof s&&s>=0&&s<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof o&&o>=0&&o<=255?void 0===l||"number"==typeof l&&l>=0&&l<=1?null:`Invalid rgba value [${[s,e,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof l?[s,e,o,l]:[s,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vr(s){if(null===s||"string"==typeof s||"boolean"==typeof s||"number"==typeof s||s instanceof _i||s instanceof zr||s instanceof Ni||s instanceof $r)return!0;if(Array.isArray(s)){for(const e of s)if(!vr(e))return!1;return!0}if("object"==typeof s){for(const e in s)if(!vr(s[e]))return!1;return!0}return!1}function wr(s){if(null===s)return $e;if("string"==typeof s)return bt;if("boolean"==typeof s)return Yt;if("number"==typeof s)return rt;if(s instanceof _i)return In;if(s instanceof zr)return ae;if(s instanceof Ni)return B;if(s instanceof $r)return q;if(Array.isArray(s)){const e=s.length;let o;for(const l of s){const h=wr(l);if(o){if(o===h)continue;o=et;break}o=h}return be(o||et,e)}return dt}function ts(s){const e=typeof s;return null===s?"":"string"===e||"number"===e||"boolean"===e?String(s):s instanceof _i||s instanceof Ni||s instanceof $r?s.toString():JSON.stringify(s)}class Ne{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(2!==e.length)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!vr(e[1]))return o.error("invalid value");const l=e[1];let h=wr(l);const m=o.expectedType;return"array"!==h.kind||0!==h.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(h=m),new Ne(h,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof _i?["rgba"].concat(this.value.toArray()):this.value instanceof Ni?this.value.serialize():this.value}}class it{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const se={string:bt,number:rt,boolean:Yt,object:dt};class qe{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let l,h=1;const m=e[0];if("array"===m){let C,D;if(e.length>2){const R=e[1];if("string"!=typeof R||!(R in se)||"object"===R)return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=se[R],h++}else C=et;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);D=e[2],h++}l=be(C,D)}else l=se[m];const y=[];for(;h<e.length;h++){const C=o.parse(e[h],h,et);if(!C)return null;y.push(C)}return new qe(l,y)}evaluate(e){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(e);if(!$t(this.type,wr(l)))return l;if(o===this.args.length-1)throw new it(`Expected value to be of type ${We(this.type)}, but found ${We(wr(l))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if("array"===e.kind){const l=e.itemType;if("string"===l.kind||"number"===l.kind||"boolean"===l.kind){o.push(l.kind);const h=e.N;("number"==typeof h||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(l=>l.serialize()))}}class yn{constructor(e){this.type=B,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[1];if(!Array.isArray(l)&&"object"==typeof l)return o.error("First argument must be an image or text section.");const h=[];let m=!1;for(let y=1;y<=e.length-1;++y){const C=e[y];if(m&&"object"==typeof C&&!Array.isArray(C)){m=!1;let D=null;if(C["font-scale"]&&(D=o.parse(C["font-scale"],1,rt),!D))return null;let R=null;if(C["text-font"]&&(R=o.parse(C["text-font"],1,be(bt)),!R))return null;let V=null;if(C["text-color"]&&(V=o.parse(C["text-color"],1,In),!V))return null;const H=h[h.length-1];H.scale=D,H.font=R,H.textColor=V}else{const D=o.parse(e[y],1,et);if(!D)return null;const R=D.type.kind;if("string"!==R&&"value"!==R&&"null"!==R&&"resolvedImage"!==R)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:D,scale:null,font:null,textColor:null})}}return new yn(h)}evaluate(e){return new Ni(this.sections.map(o=>{const l=o.content.evaluate(e);return wr(l)===q?new Mr("",l,null,null,null):new Mr(ts(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),e.push(l)}return e}}class kn{constructor(e){this.type=q,this.input=e}static parse(e,o){if(2!==e.length)return o.error("Expected two arguments.");const l=o.parse(e[1],1,bt);return l?new kn(l):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),l=$r.fromString(o);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(o)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xi={"to-boolean":Yt,"to-color":In,"to-number":rt,"to-string":bt};class Hr{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[0];if(("to-boolean"===l||"to-string"===l)&&2!==e.length)return o.error("Expected one argument.");const h=Xi[l],m=[];for(let y=1;y<e.length;y++){const C=o.parse(e[y],y,et);if(!C)return null;m.push(C)}return new Hr(h,m)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let o,l;for(const h of this.args){if(o=h.evaluate(e),l=null,o instanceof _i)return o;if("string"==typeof o){const m=e.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Or(o[0],o[1],o[2],o[3]),!l))return new _i(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new it(l||`Could not parse color from value '${"string"==typeof o?o:String(JSON.stringify(o))}'`)}if("number"===this.type.kind){let o=null;for(const l of this.args){if(o=l.evaluate(e),null===o)return 0;const h=Number(o);if(!isNaN(h))return h}throw new it(`Could not convert ${JSON.stringify(o)} to number.`)}return"formatted"===this.type.kind?Ni.fromString(ts(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?$r.fromString(ts(this.args[0].evaluate(e))):ts(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new yn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new kn(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Hs=["Unknown","Point","LineString","Polygon"];class xr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Hs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=_i.parse(e)),o}}class Vr{constructor(e,o,l,h){this.name=e,this.type=o,this._evaluate=l,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const l=e[0],h=Vr.definitions[l];if(!h)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,C=y.filter(([R])=>!Array.isArray(R)||R.length===e.length-1);let D=null;for(const[R,V]of C){D=new ce(o.registry,o.path,null,o.scope);const H=[];let re=!1;for(let de=1;de<e.length;de++){const Me=e[de],Ue=Array.isArray(R)?R[de-1]:R.type,ot=D.parse(Me,1+H.length,Ue);if(!ot){re=!0;break}H.push(ot)}if(!re)if(Array.isArray(R)&&R.length!==H.length)D.error(`Expected ${R.length} arguments, but found ${H.length} instead.`);else{for(let de=0;de<H.length;de++){const Me=Array.isArray(R)?R[de]:R.type,Ue=H[de];D.concat(de+1).checkSubtype(Me,Ue.type)}if(0===D.errors.length)return new Vr(l,m,V,H)}}if(1===C.length)o.errors.push(...D.errors);else{const R=(C.length?C:y).map(([H])=>{return re=H,Array.isArray(re)?`(${re.map(We).join(", ")})`:`(${We(re.type)}...)`;var re}).join(" | "),V=[];for(let H=1;H<e.length;H++){const re=o.parse(e[H],1+V.length);if(!re)return null;V.push(We(re.type))}o.error(`Expected arguments of type ${R}, but found (${V.join(", ")}) instead.`)}return null}static register(e,o){Vr.definitions=o;for(const l in o)e[l]=Vr}}class Ms{constructor(e,o,l){this.type=ae,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(2!==e.length)return o.error("Expected one argument.");const l=e[1];if("object"!=typeof l||Array.isArray(l))return o.error("Collator options argument must be an object.");const h=o.parse(void 0!==l["case-sensitive"]&&l["case-sensitive"],1,Yt);if(!h)return null;const m=o.parse(void 0!==l["diacritic-sensitive"]&&l["diacritic-sensitive"],1,Yt);if(!m)return null;let y=null;return l.locale&&(y=o.parse(l.locale,1,bt),!y)?null:new Ms(h,m,y)}evaluate(e){return new zr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const vo=8192;function Ts(s,e){s[0]=Math.min(s[0],e[0]),s[1]=Math.min(s[1],e[1]),s[2]=Math.max(s[2],e[0]),s[3]=Math.max(s[3],e[1])}function Zs(s,e){return!(s[0]<=e[0]||s[2]>=e[2]||s[1]<=e[1]||s[3]>=e[3])}function ja(s,e){const o=(180+s[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(o*h*vo),Math.round(l*h*vo)]}function ma(s,e,o){const l=s[0]-e[0],h=s[1]-e[1],m=s[0]-o[0],y=s[1]-o[1];return l*y-m*h==0&&l*m<=0&&h*y<=0}function eo(s,e){let o=!1;for(let y=0,C=e.length;y<C;y++){const D=e[y];for(let R=0,V=D.length;R<V-1;R++){if(ma(s,D[R],D[R+1]))return!1;(h=D[R])[1]>(l=s)[1]!=(m=D[R+1])[1]>l[1]&&l[0]<(m[0]-h[0])*(l[1]-h[1])/(m[1]-h[1])+h[0]&&(o=!o)}}var l,h,m;return o}function $o(s,e){for(let o=0;o<e.length;o++)if(eo(s,e[o]))return!0;return!1}function Ho(s,e,o,l){const h=l[0]-o[0],m=l[1]-o[1],y=(s[0]-o[0])*m-h*(s[1]-o[1]),C=(e[0]-o[0])*m-h*(e[1]-o[1]);return y>0&&C<0||y<0&&C>0}function xo(s,e,o){for(const R of o)for(let V=0;V<R.length-1;++V)if((C=[(y=R[V+1])[0]-(m=R[V])[0],y[1]-m[1]])[0]*(D=[(h=e)[0]-(l=s)[0],h[1]-l[1]])[1]-C[1]*D[0]!=0&&Ho(l,h,m,y)&&Ho(m,y,l,h))return!0;var l,h,m,y,C,D;return!1}function Do(s,e){for(let o=0;o<s.length;++o)if(!eo(s[o],e))return!1;for(let o=0;o<s.length-1;++o)if(xo(s[o],s[o+1],e))return!1;return!0}function bo(s,e){for(let o=0;o<e.length;o++)if(Do(s,e[o]))return!0;return!1}function us(s,e,o){const l=[];for(let h=0;h<s.length;h++){const m=[];for(let y=0;y<s[h].length;y++){const C=ja(s[h][y],o);Ts(e,C),m.push(C)}l.push(m)}return l}function ga(s,e,o){const l=[];for(let h=0;h<s.length;h++){const m=us(s[h],e,o);l.push(m)}return l}function so(s,e,o,l){if(s[0]<o[0]||s[0]>o[2]){const h=.5*l;let m=s[0]-o[0]>h?-l:o[0]-s[0]>h?l:0;0===m&&(m=s[0]-o[2]>h?-l:o[2]-s[0]>h?l:0),s[0]+=m}Ts(e,s)}function So(s,e,o,l){const h=Math.pow(2,l.z)*vo,m=[l.x*vo,l.y*vo],y=[];for(const C of s)for(const D of C){const R=[D.x+m[0],D.y+m[1]];so(R,e,o,h),y.push(R)}return y}function Is(s,e,o,l){const h=Math.pow(2,l.z)*vo,m=[l.x*vo,l.y*vo],y=[];for(const D of s){const R=[];for(const V of D){const H=[V.x+m[0],V.y+m[1]];Ts(e,H),R.push(H)}y.push(R)}if(e[2]-e[0]<=h/2){(C=e)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const D of y)for(const R of D)so(R,e,o,h)}var C;return y}class to{constructor(e,o){this.type=Yt,this.geojson=e,this.geometries=o}static parse(e,o){if(2!==e.length)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(vr(e[1])){const l=e[1];if("FeatureCollection"===l.type)for(let h=0;h<l.features.length;++h){const m=l.features[h].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new to(l,l.features[h].geometry)}else if("Feature"===l.type){const h=l.geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new to(l,l.geometry)}else if("Polygon"===l.type||"MultiPolygon"===l.type)return new to(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(o,l){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if("Polygon"===l.type){const C=us(l.coordinates,m,y),D=So(o.geometry(),h,m,y);if(!Zs(h,m))return!1;for(const R of D)if(!eo(R,C))return!1}if("MultiPolygon"===l.type){const C=ga(l.coordinates,m,y),D=So(o.geometry(),h,m,y);if(!Zs(h,m))return!1;for(const R of D)if(!$o(R,C))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(o,l){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if("Polygon"===l.type){const C=us(l.coordinates,m,y),D=Is(o.geometry(),h,m,y);if(!Zs(h,m))return!1;for(const R of D)if(!Do(R,C))return!1}if("MultiPolygon"===l.type){const C=ga(l.coordinates,m,y),D=Is(o.geometry(),h,m,y);if(!Zs(h,m))return!1;for(const R of D)if(!bo(R,C))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function oo(s){if(s instanceof Vr&&("get"===s.name&&1===s.args.length||"feature-state"===s.name||"has"===s.name&&1===s.args.length||"properties"===s.name||"geometry-type"===s.name||"id"===s.name||/^filter-/.test(s.name))||s instanceof to)return!1;let e=!0;return s.eachChild(o=>{e&&!oo(o)&&(e=!1)}),e}function Mo(s){if(s instanceof Vr&&"feature-state"===s.name)return!1;let e=!0;return s.eachChild(o=>{e&&!Mo(o)&&(e=!1)}),e}function Ji(s,e){if(s instanceof Vr&&e.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(l=>{o&&!Ji(l,e)&&(o=!1)}),o}class Zo{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(2!==e.length||"string"!=typeof e[1])return o.error("'var' expression requires exactly one string literal argument.");const l=e[1];return o.scope.has(l)?new Zo(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ce{constructor(e,o=[],l,h=new bi,m=[]){this.registry=e,this.path=o,this.key=o.map(y=>`[${y}]`).join(""),this.scope=h,this.errors=m,this.expectedType=l}parse(e,o,l,h,m={}){return o?this.concat(o,l,h)._parse(e,m):this._parse(e,m)}_parse(e,o){function l(h,m,y){return"assert"===y?new qe(m,[h]):"coerce"===y?new Hr(m,[h]):h}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=e[0];if("string"!=typeof h)return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let y=m.parse(e,this);if(!y)return null;if(this.expectedType){const C=this.expectedType,D=y.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==D.kind)if("color"!==C.kind&&"formatted"!==C.kind&&"resolvedImage"!==C.kind||"value"!==D.kind&&"string"!==D.kind){if(this.checkSubtype(C,D))return null}else y=l(y,C,o.typeAnnotation||"coerce");else y=l(y,C,o.typeAnnotation||"assert")}if(!(y instanceof Ne)&&"resolvedImage"!==y.type.kind&&ee(y)){const C=new xr;try{y=new Ne(y.type,y.evaluate(C))}catch(D){return this.error(D.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,l){const h="number"==typeof e?this.path.concat(e):this.path,m=l?this.scope.concat(l):this.scope;return new ce(this.registry,h,o||null,m,this.errors)}error(e,...o){const l=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new hi(l,e))}checkSubtype(e,o){const l=$t(e,o);return l&&this.error(l),l}}function ee(s){if(s instanceof Zo)return ee(s.boundExpression);if(s instanceof Vr&&"error"===s.name||s instanceof Ms||s instanceof to)return!1;const e=s instanceof Hr||s instanceof qe;let o=!0;return s.eachChild(l=>{o=e?o&&ee(l):o&&l instanceof Ne}),!!o&&oo(s)&&Ji(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function U(s,e){const o=s.length-1;let l,h,m=0,y=o,C=0;for(;m<=y;)if(C=Math.floor((m+y)/2),l=s[C],h=s[C+1],l<=e){if(C===o||e<h)return C;m=C+1}else{if(!(l>e))throw new it("Input is not a number.");y=C-1}return 0}class Ae{constructor(e,o,l){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[h,m]of l)this.labels.push(h),this.outputs.push(m)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(e[1],1,rt);if(!l)return null;const h=[];let m=null;o.expectedType&&"value"!==o.expectedType.kind&&(m=o.expectedType);for(let y=1;y<e.length;y+=2){const C=1===y?-1/0:e[y],D=e[y+1],R=y,V=y+1;if("number"!=typeof C)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(h.length&&h[h.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const H=o.parse(D,V,m);if(!H)return null;m=m||H.type,h.push([C,H])}return new Ae(m,l,h)}evaluate(e){const o=this.labels,l=this.outputs;if(1===o.length)return l[0].evaluate(e);const h=this.input.evaluate(e);if(h<=o[0])return l[0].evaluate(e);const m=o.length;return h>=o[m-1]?l[m-1].evaluate(e):l[U(o,h)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}function Nt(s,e,o){return s*(1-o)+e*o}var ai=Object.freeze({__proto__:null,number:Nt,color:function(s,e,o){return new _i(Nt(s.r,e.r,o),Nt(s.g,e.g,o),Nt(s.b,e.b,o),Nt(s.a,e.a,o))},array:function(s,e,o){return s.map((l,h)=>Nt(l,e[h],o))}});const To=4/29,Da=6/29,X=3*Da*Da,De=Math.PI/180,ie=180/Math.PI;function Pe(s){return s>.008856451679035631?Math.pow(s,1/3):s/X+To}function pt(s){return s>Da?s*s*s:X*(s-To)}function cn(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Rn(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Ci(s){const e=Rn(s.r),o=Rn(s.g),l=Rn(s.b),h=Pe((.4124564*e+.3575761*o+.1804375*l)/.95047),m=Pe((.2126729*e+.7151522*o+.072175*l)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-Pe((.0193339*e+.119192*o+.9503041*l)/1.08883)),alpha:s.a}}function qi(s){let e=(s.l+16)/116,o=isNaN(s.a)?e:e+s.a/500,l=isNaN(s.b)?e:e-s.b/200;return e=1*pt(e),o=.95047*pt(o),l=1.08883*pt(l),new _i(cn(3.2404542*o-1.5371385*e-.4985314*l),cn(-.969266*o+1.8760108*e+.041556*l),cn(.0556434*o-.2040259*e+1.0572252*l),s.alpha)}function hr(s,e,o){const l=e-s;return s+o*(l>180||l<-180?l-360*Math.round(l/360):l)}const Cr={forward:Ci,reverse:qi,interpolate:function(s,e,o){return{l:Nt(s.l,e.l,o),a:Nt(s.a,e.a,o),b:Nt(s.b,e.b,o),alpha:Nt(s.alpha,e.alpha,o)}}},Wi={forward:function(s){const{l:e,a:o,b:l}=Ci(s),h=Math.atan2(l,o)*ie;return{h:h<0?h+360:h,c:Math.sqrt(o*o+l*l),l:e,alpha:s.a}},reverse:function(s){const e=s.h*De,o=s.c;return qi({l:s.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:s.alpha})},interpolate:function(s,e,o){return{h:hr(s.h,e.h,o),c:Nt(s.c,e.c,o),l:Nt(s.l,e.l,o),alpha:Nt(s.alpha,e.alpha,o)}}};var br=Object.freeze({__proto__:null,lab:Cr,hcl:Wi});class tr{constructor(e,o,l,h,m){this.type=e,this.operator=o,this.interpolation=l,this.input=h,this.labels=[],this.outputs=[];for(const[y,C]of m)this.labels.push(y),this.outputs.push(C)}static interpolationFactor(e,o,l,h){let m=0;if("exponential"===e.name)m=ss(o,e.base,l,h);else if("linear"===e.name)m=ss(o,1,l,h);else if("cubic-bezier"===e.name){const y=e.controlPoints;m=new Ie(y[0],y[1],y[2],y[3]).solve(ss(o,1,l,h))}return m}static parse(e,o){let[l,h,m,...y]=e;if(!Array.isArray(h)||0===h.length)return o.error("Expected an interpolation type expression.",1);if("linear"===h[0])h={name:"linear"};else if("exponential"===h[0]){const R=h[1];if("number"!=typeof R)return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:R}}else{if("cubic-bezier"!==h[0])return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const R=h.slice(1);if(4!==R.length||R.some(V=>"number"!=typeof V||V<0||V>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:R}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,rt),!m)return null;const C=[];let D=null;"interpolate-hcl"===l||"interpolate-lab"===l?D=In:o.expectedType&&"value"!==o.expectedType.kind&&(D=o.expectedType);for(let R=0;R<y.length;R+=2){const V=y[R],H=y[R+1],re=R+3,de=R+4;if("number"!=typeof V)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(C.length&&C[C.length-1][0]>=V)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',re);const Me=o.parse(H,de,D);if(!Me)return null;D=D||Me.type,C.push([V,Me])}return"number"===D.kind||"color"===D.kind||"array"===D.kind&&"number"===D.itemType.kind&&"number"==typeof D.N?new tr(D,l,h,m,C):o.error(`Type ${We(D)} is not interpolatable.`)}evaluate(e){const o=this.labels,l=this.outputs;if(1===o.length)return l[0].evaluate(e);const h=this.input.evaluate(e);if(h<=o[0])return l[0].evaluate(e);const m=o.length;if(h>=o[m-1])return l[m-1].evaluate(e);const y=U(o,h),C=tr.interpolationFactor(this.interpolation,h,o[y],o[y+1]),D=l[y].evaluate(e),R=l[y+1].evaluate(e);return"interpolate"===this.operator?ai[this.type.kind.toLowerCase()](D,R,C):"interpolate-hcl"===this.operator?Wi.reverse(Wi.interpolate(Wi.forward(D),Wi.forward(R),C)):Cr.reverse(Cr.interpolate(Cr.forward(D),Cr.forward(R),C))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function ss(s,e,o,l){const h=l-o,m=s-o;return 0===h?0:1===e?m/h:(Math.pow(e,m)-1)/(Math.pow(e,h)-1)}class Io{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let l=null;const h=o.expectedType;h&&"value"!==h.kind&&(l=h);const m=[];for(const C of e.slice(1)){const D=o.parse(C,1+m.length,l,void 0,{typeAnnotation:"omit"});if(!D)return null;l=l||D.type,m.push(D)}const y=h&&m.some(C=>$t(h,C.type));return new Io(y?et:l,m)}evaluate(e){let o,l=null,h=0;for(const m of this.args)if(h++,l=m.evaluate(e),l&&l instanceof $r&&!l.available&&(o||(o=l.name),l=null,h===this.args.length&&(l=o)),null!==l)break;return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class os{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const l=[];for(let m=1;m<e.length-1;m+=2){const y=e[m];if("string"!=typeof y)return o.error(`Expected string, but found ${typeof y} instead.`,m);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const C=o.parse(e[m+1],m+1);if(!C)return null;l.push([y,C])}const h=o.parse(e[e.length-1],e.length-1,o.expectedType,l);return h?new os(l,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,l]of this.bindings)e.push(o,l.serialize());return e.push(this.result.serialize()),e}}class ao{constructor(e,o,l){this.type=e,this.index=o,this.input=l}static parse(e,o){if(3!==e.length)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,rt),h=o.parse(e[2],2,be(o.expectedType||et));return l&&h?new ao(h.type.itemType,l,h):null}evaluate(e){const o=this.index.evaluate(e),l=this.input.evaluate(e);if(o<0)throw new it(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new it(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new it(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class ws{constructor(e,o){this.type=Yt,this.needle=e,this.haystack=o}static parse(e,o){if(3!==e.length)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,et),h=o.parse(e[2],2,et);return l&&h?ti(l.type,[Yt,bt,rt,$e,et])?new ws(l,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${We(l.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!pi(o,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${We(wr(o))} instead.`);if(!pi(l,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${We(wr(l))} instead.`);return l.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Oi{constructor(e,o,l){this.type=rt,this.needle=e,this.haystack=o,this.fromIndex=l}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,et),h=o.parse(e[2],2,et);if(!l||!h)return null;if(!ti(l.type,[Yt,bt,rt,$e,et]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${We(l.type)} instead`);if(4===e.length){const m=o.parse(e[3],3,rt);return m?new Oi(l,h,m):null}return new Oi(l,h)}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!pi(o,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${We(wr(o))} instead.`);if(!pi(l,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${We(wr(l))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(e);return l.indexOf(o,h)}return l.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class na{constructor(e,o,l,h,m,y){this.inputType=e,this.type=o,this.input=l,this.cases=h,this.outputs=m,this.otherwise=y}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let l,h;o.expectedType&&"value"!==o.expectedType.kind&&(h=o.expectedType);const m={},y=[];for(let R=2;R<e.length-1;R+=2){let V=e[R];const H=e[R+1];Array.isArray(V)||(V=[V]);const re=o.concat(R);if(0===V.length)return re.error("Expected at least one branch label.");for(const Me of V){if("number"!=typeof Me&&"string"!=typeof Me)return re.error("Branch labels must be numbers or strings.");if("number"==typeof Me&&Math.abs(Me)>Number.MAX_SAFE_INTEGER)return re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Me&&Math.floor(Me)!==Me)return re.error("Numeric branch labels must be integer values.");if(l){if(re.checkSubtype(l,wr(Me)))return null}else l=wr(Me);if(void 0!==m[String(Me)])return re.error("Branch labels must be unique.");m[String(Me)]=y.length}const de=o.parse(H,R,h);if(!de)return null;h=h||de.type,y.push(de)}const C=o.parse(e[1],1,et);if(!C)return null;const D=o.parse(e[e.length-1],e.length-1,h);return D?"value"!==C.type.kind&&o.concat(1).checkSubtype(l,C.type)?null:new na(l,h,C,m,y,D):null}evaluate(e){const o=this.input.evaluate(e);return(wr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],h={};for(const y of o){const C=h[this.cases[y]];void 0===C?(h[this.cases[y]]=l.length,l.push([this.cases[y],[y]])):l[C][1].push(y)}const m=y=>"number"===this.inputType.kind?Number(y):y;for(const[y,C]of l)e.push(1===C.length?m(C[0]):C.map(m)),e.push(this.outputs[y].serialize());return e.push(this.otherwise.serialize()),e}}class Po{constructor(e,o,l){this.type=e,this.branches=o,this.otherwise=l}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&"value"!==o.expectedType.kind&&(l=o.expectedType);const h=[];for(let y=1;y<e.length-1;y+=2){const C=o.parse(e[y],y,Yt);if(!C)return null;const D=o.parse(e[y+1],y+1,l);if(!D)return null;h.push([C,D]),l=l||D.type}const m=o.parse(e[e.length-1],e.length-1,l);return m?new Po(l,h,m):null}evaluate(e){for(const[o,l]of this.branches)if(o.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,l]of this.branches)e(o),e(l);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class Sa{constructor(e,o,l,h){this.type=e,this.input=o,this.beginIndex=l,this.endIndex=h}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,et),h=o.parse(e[2],2,rt);if(!l||!h)return null;if(!ti(l.type,[be(et),bt,et]))return o.error(`Expected first argument to be of type array or string, but found ${We(l.type)} instead`);if(4===e.length){const m=o.parse(e[3],3,rt);return m?new Sa(l.type,l,h,m):null}return new Sa(l.type,l,h)}evaluate(e){const o=this.input.evaluate(e),l=this.beginIndex.evaluate(e);if(!pi(o,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${We(wr(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(e);return o.slice(l,h)}return o.slice(l)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ma(s,e){return"=="===s||"!="===s?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Xa(s,e,o,l){return 0===l.compare(e,o)}function Ta(s,e,o){const l="=="!==s&&"!="!==s;return class Rb{constructor(m,y,C){this.type=Yt,this.lhs=m,this.rhs=y,this.collator=C,this.hasUntypedArgument="value"===m.type.kind||"value"===y.type.kind}static parse(m,y){if(3!==m.length&&4!==m.length)return y.error("Expected two or three arguments.");const C=m[0];let D=y.parse(m[1],1,et);if(!D)return null;if(!Ma(C,D.type))return y.concat(1).error(`"${C}" comparisons are not supported for type '${We(D.type)}'.`);let R=y.parse(m[2],2,et);if(!R)return null;if(!Ma(C,R.type))return y.concat(2).error(`"${C}" comparisons are not supported for type '${We(R.type)}'.`);if(D.type.kind!==R.type.kind&&"value"!==D.type.kind&&"value"!==R.type.kind)return y.error(`Cannot compare types '${We(D.type)}' and '${We(R.type)}'.`);l&&("value"===D.type.kind&&"value"!==R.type.kind?D=new qe(R.type,[D]):"value"!==D.type.kind&&"value"===R.type.kind&&(R=new qe(D.type,[R])));let V=null;if(4===m.length){if("string"!==D.type.kind&&"string"!==R.type.kind&&"value"!==D.type.kind&&"value"!==R.type.kind)return y.error("Cannot use collator to compare non-string types.");if(V=y.parse(m[3],3,ae),!V)return null}return new Rb(D,R,V)}evaluate(m){const y=this.lhs.evaluate(m),C=this.rhs.evaluate(m);if(l&&this.hasUntypedArgument){const D=wr(y),R=wr(C);if(D.kind!==R.kind||"string"!==D.kind&&"number"!==D.kind)throw new it(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${D.kind}, ${R.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const D=wr(y),R=wr(C);if("string"!==D.kind||"string"!==R.kind)return e(m,y,C)}return this.collator?o(m,y,C,this.collator.evaluate(m)):e(m,y,C)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[s];return this.eachChild(y=>{m.push(y.serialize())}),m}}}const Gl=Ta("==",function(s,e,o){return e===o},Xa),Pn=Ta("!=",function(s,e,o){return e!==o},function(s,e,o,l){return!Xa(0,e,o,l)}),gr=Ta("<",function(s,e,o){return e<o},function(s,e,o,l){return l.compare(e,o)<0}),ml=Ta(">",function(s,e,o){return e>o},function(s,e,o,l){return l.compare(e,o)>0}),ns=Ta("<=",function(s,e,o){return e<=o},function(s,e,o,l){return l.compare(e,o)<=0}),gl=Ta(">=",function(s,e,o){return e>=o},function(s,e,o,l){return l.compare(e,o)>=0});class Fo{constructor(e,o,l,h,m){this.type=bt,this.number=e,this.locale=o,this.currency=l,this.minFractionDigits=h,this.maxFractionDigits=m}static parse(e,o){if(3!==e.length)return o.error("Expected two arguments.");const l=o.parse(e[1],1,rt);if(!l)return null;const h=e[2];if("object"!=typeof h||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=o.parse(h.locale,1,bt),!m))return null;let y=null;if(h.currency&&(y=o.parse(h.currency,1,bt),!y))return null;let C=null;if(h["min-fraction-digits"]&&(C=o.parse(h["min-fraction-digits"],1,rt),!C))return null;let D=null;return h["max-fraction-digits"]&&(D=o.parse(h["max-fraction-digits"],1,rt),!D)?null:new Fo(l,m,y,C,D)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class zs{constructor(e){this.type=rt,this.input=e}static parse(e,o){if(2!==e.length)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const l=o.parse(e[1],1);return l?"array"!==l.type.kind&&"string"!==l.type.kind&&"value"!==l.type.kind?o.error(`Expected argument of type string or array, but found ${We(l.type)} instead.`):new zs(l):null}evaluate(e){const o=this.input.evaluate(e);if("string"==typeof o||Array.isArray(o))return o.length;throw new it(`Expected value to be of type string or array, but found ${We(wr(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const ye={"==":Gl,"!=":Pn,">":ml,"<":gr,">=":gl,"<=":ns,array:qe,at:ao,boolean:qe,case:Po,coalesce:Io,collator:Ms,format:yn,image:kn,in:ws,"index-of":Oi,interpolate:tr,"interpolate-hcl":tr,"interpolate-lab":tr,length:zs,let:os,literal:Ne,match:na,number:qe,"number-format":Fo,object:qe,slice:Sa,step:Ae,string:qe,"to-boolean":Hr,"to-color":Hr,"to-number":Hr,"to-string":Hr,var:Zo,within:to};function A(s,[e,o,l,h]){e=e.evaluate(s),o=o.evaluate(s),l=l.evaluate(s);const m=h?h.evaluate(s):1,y=Or(e,o,l,m);if(y)throw new it(y);return new _i(e/255*m,o/255*m,l/255*m,m)}function S(s,e){return s in e}function j(s,e){const o=e[s];return void 0===o?null:o}function ge(s){return{type:s}}function Be(s){return{result:"success",value:s}}function tt(s){return{result:"error",value:s}}function ft(s){return"data-driven"===s["property-type"]||"cross-faded-data-driven"===s["property-type"]}function Gt(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function hn(s){return!!s.expression&&s.expression.interpolated}function _n(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":null===s?"null":typeof s}function yi(s){return"object"==typeof s&&null!==s&&!Array.isArray(s)}function Yi(s){return s}function _r(s,e){const o="color"===e.type,l=s.stops&&"object"==typeof s.stops[0][0],h=l||!(l||void 0!==s.property),m=s.type||(hn(e)?"exponential":"interval");if(o&&((s=Sn({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],_i.parse(R[1])])),s.default=_i.parse(s.default?s.default:e.default)),s.colorSpace&&"rgb"!==s.colorSpace&&!br[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let y,C,D;if("exponential"===m)y=Ur;else if("interval"===m)y=sr;else if("categorical"===m){y=Gi,C=Object.create(null);for(const R of s.stops)C[R[0]]=R[1];D=typeof s.stops[0][0]}else{if("identity"!==m)throw new Error(`Unknown function type "${m}"`);y=Yr}if(l){const R={},V=[];for(let de=0;de<s.stops.length;de++){const Me=s.stops[de],Ue=Me[0].zoom;void 0===R[Ue]&&(R[Ue]={zoom:Ue,type:s.type,property:s.property,default:s.default,stops:[]},V.push(Ue)),R[Ue].stops.push([Me[0].value,Me[1]])}const H=[];for(const de of V)H.push([R[de].zoom,_r(R[de],e)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:tr.interpolationFactor.bind(void 0,re),zoomStops:H.map(de=>de[0]),evaluate:({zoom:de},Me)=>Ur({stops:H,base:s.base},e,de).evaluate(de,Me)}}if(h){const R="exponential"===m?{name:"exponential",base:void 0!==s.base?s.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:tr.interpolationFactor.bind(void 0,R),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>y(s,e,V,C,D)}}return{kind:"source",evaluate(R,V){const H=V&&V.properties?V.properties[s.property]:void 0;return void 0===H?Ii(s.default,e.default):y(s,e,H,C,D)}}}function Ii(s,e,o){return void 0!==s?s:void 0!==e?e:void 0!==o?o:void 0}function Gi(s,e,o,l,h){return Ii(typeof o===h?l[o]:void 0,s.default,e.default)}function sr(s,e,o){if("number"!==_n(o))return Ii(s.default,e.default);const l=s.stops.length;if(1===l||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[l-1][0])return s.stops[l-1][1];const h=U(s.stops.map(m=>m[0]),o);return s.stops[h][1]}function Ur(s,e,o){const l=void 0!==s.base?s.base:1;if("number"!==_n(o))return Ii(s.default,e.default);const h=s.stops.length;if(1===h||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[h-1][0])return s.stops[h-1][1];const m=U(s.stops.map(V=>V[0]),o),y=function(V,H,re,de){const Me=de-re,Ue=V-re;return 0===Me?0:1===H?Ue/Me:(Math.pow(H,Ue)-1)/(Math.pow(H,Me)-1)}(o,l,s.stops[m][0],s.stops[m+1][0]),C=s.stops[m][1],D=s.stops[m+1][1];let R=ai[e.type]||Yi;if(s.colorSpace&&"rgb"!==s.colorSpace){const V=br[s.colorSpace];R=(H,re)=>V.reverse(V.interpolate(V.forward(H),V.forward(re),y))}return"function"==typeof C.evaluate?{evaluate(...V){const H=C.evaluate.apply(void 0,V),re=D.evaluate.apply(void 0,V);if(void 0!==H&&void 0!==re)return R(H,re,y)}}:R(C,D,y)}function Yr(s,e,o){return"color"===e.type?o=_i.parse(o):"formatted"===e.type?o=Ni.fromString(o.toString()):"resolvedImage"===e.type?o=$r.fromString(o.toString()):_n(o)===e.type||"enum"===e.type&&e.values[o]||(o=void 0),Ii(o,s.default,e.default)}Vr.register(ye,{error:[{kind:"error"},[bt],(s,[e])=>{throw new it(e.evaluate(s))}],typeof:[bt,[et],(s,[e])=>We(wr(e.evaluate(s)))],"to-rgba":[be(rt,4),[In],(s,[e])=>e.evaluate(s).toArray()],rgb:[In,[rt,rt,rt],A],rgba:[In,[rt,rt,rt,rt],A],has:{type:Yt,overloads:[[[bt],(s,[e])=>S(e.evaluate(s),s.properties())],[[bt,dt],(s,[e,o])=>S(e.evaluate(s),o.evaluate(s))]]},get:{type:et,overloads:[[[bt],(s,[e])=>j(e.evaluate(s),s.properties())],[[bt,dt],(s,[e,o])=>j(e.evaluate(s),o.evaluate(s))]]},"feature-state":[et,[bt],(s,[e])=>j(e.evaluate(s),s.featureState||{})],properties:[dt,[],s=>s.properties()],"geometry-type":[bt,[],s=>s.geometryType()],id:[et,[],s=>s.id()],zoom:[rt,[],s=>s.globals.zoom],"heatmap-density":[rt,[],s=>s.globals.heatmapDensity||0],"line-progress":[rt,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[rt,[],s=>s.globals.skyRadialProgress||0],accumulated:[et,[],s=>void 0===s.globals.accumulated?null:s.globals.accumulated],"+":[rt,ge(rt),(s,e)=>{let o=0;for(const l of e)o+=l.evaluate(s);return o}],"*":[rt,ge(rt),(s,e)=>{let o=1;for(const l of e)o*=l.evaluate(s);return o}],"-":{type:rt,overloads:[[[rt,rt],(s,[e,o])=>e.evaluate(s)-o.evaluate(s)],[[rt],(s,[e])=>-e.evaluate(s)]]},"/":[rt,[rt,rt],(s,[e,o])=>e.evaluate(s)/o.evaluate(s)],"%":[rt,[rt,rt],(s,[e,o])=>e.evaluate(s)%o.evaluate(s)],ln2:[rt,[],()=>Math.LN2],pi:[rt,[],()=>Math.PI],e:[rt,[],()=>Math.E],"^":[rt,[rt,rt],(s,[e,o])=>Math.pow(e.evaluate(s),o.evaluate(s))],sqrt:[rt,[rt],(s,[e])=>Math.sqrt(e.evaluate(s))],log10:[rt,[rt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN10],ln:[rt,[rt],(s,[e])=>Math.log(e.evaluate(s))],log2:[rt,[rt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN2],sin:[rt,[rt],(s,[e])=>Math.sin(e.evaluate(s))],cos:[rt,[rt],(s,[e])=>Math.cos(e.evaluate(s))],tan:[rt,[rt],(s,[e])=>Math.tan(e.evaluate(s))],asin:[rt,[rt],(s,[e])=>Math.asin(e.evaluate(s))],acos:[rt,[rt],(s,[e])=>Math.acos(e.evaluate(s))],atan:[rt,[rt],(s,[e])=>Math.atan(e.evaluate(s))],min:[rt,ge(rt),(s,e)=>Math.min(...e.map(o=>o.evaluate(s)))],max:[rt,ge(rt),(s,e)=>Math.max(...e.map(o=>o.evaluate(s)))],abs:[rt,[rt],(s,[e])=>Math.abs(e.evaluate(s))],round:[rt,[rt],(s,[e])=>{const o=e.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[rt,[rt],(s,[e])=>Math.floor(e.evaluate(s))],ceil:[rt,[rt],(s,[e])=>Math.ceil(e.evaluate(s))],"filter-==":[Yt,[bt,et],(s,[e,o])=>s.properties()[e.value]===o.value],"filter-id-==":[Yt,[et],(s,[e])=>s.id()===e.value],"filter-type-==":[Yt,[bt],(s,[e])=>s.geometryType()===e.value],"filter-<":[Yt,[bt,et],(s,[e,o])=>{const l=s.properties()[e.value],h=o.value;return typeof l==typeof h&&l<h}],"filter-id-<":[Yt,[et],(s,[e])=>{const o=s.id(),l=e.value;return typeof o==typeof l&&o<l}],"filter->":[Yt,[bt,et],(s,[e,o])=>{const l=s.properties()[e.value],h=o.value;return typeof l==typeof h&&l>h}],"filter-id->":[Yt,[et],(s,[e])=>{const o=s.id(),l=e.value;return typeof o==typeof l&&o>l}],"filter-<=":[Yt,[bt,et],(s,[e,o])=>{const l=s.properties()[e.value],h=o.value;return typeof l==typeof h&&l<=h}],"filter-id-<=":[Yt,[et],(s,[e])=>{const o=s.id(),l=e.value;return typeof o==typeof l&&o<=l}],"filter->=":[Yt,[bt,et],(s,[e,o])=>{const l=s.properties()[e.value],h=o.value;return typeof l==typeof h&&l>=h}],"filter-id->=":[Yt,[et],(s,[e])=>{const o=s.id(),l=e.value;return typeof o==typeof l&&o>=l}],"filter-has":[Yt,[et],(s,[e])=>e.value in s.properties()],"filter-has-id":[Yt,[],s=>null!==s.id()&&void 0!==s.id()],"filter-type-in":[Yt,[be(bt)],(s,[e])=>e.value.indexOf(s.geometryType())>=0],"filter-id-in":[Yt,[be(et)],(s,[e])=>e.value.indexOf(s.id())>=0],"filter-in-small":[Yt,[bt,be(et)],(s,[e,o])=>o.value.indexOf(s.properties()[e.value])>=0],"filter-in-large":[Yt,[bt,be(et)],(s,[e,o])=>function(l,h,m,y){for(;m<=y;){const C=m+y>>1;if(h[C]===l)return!0;h[C]>l?y=C-1:m=C+1}return!1}(s.properties()[e.value],o.value,0,o.value.length-1)],all:{type:Yt,overloads:[[[Yt,Yt],(s,[e,o])=>e.evaluate(s)&&o.evaluate(s)],[ge(Yt),(s,e)=>{for(const o of e)if(!o.evaluate(s))return!1;return!0}]]},any:{type:Yt,overloads:[[[Yt,Yt],(s,[e,o])=>e.evaluate(s)||o.evaluate(s)],[ge(Yt),(s,e)=>{for(const o of e)if(o.evaluate(s))return!0;return!1}]]},"!":[Yt,[Yt],(s,[e])=>!e.evaluate(s)],"is-supported-script":[Yt,[bt],(s,[e])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(e.evaluate(s))}],upcase:[bt,[bt],(s,[e])=>e.evaluate(s).toUpperCase()],downcase:[bt,[bt],(s,[e])=>e.evaluate(s).toLowerCase()],concat:[bt,ge(et),(s,e)=>e.map(o=>ts(o.evaluate(s))).join("")],"resolved-locale":[bt,[ae],(s,[e])=>e.evaluate(s).resolvedLocale()]});class Ps{constructor(e,o){var l;this.expression=e,this._warningHistory={},this._evaluator=new xr,this._defaultValue=o?"color"===(l=o).type&&yi(l.default)?new _i(0,0,0,0):"color"===l.type?_i.parse(l.default)||null:void 0===l.default?null:l.default:null,this._enumValues=o&&"enum"===o.type?o.values:null}evaluateWithoutErrorHandling(e,o,l,h,m,y){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(e,o,l,h,m,y){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null;try{const C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,"undefined"!=typeof console&&console.warn(C.message)),this._defaultValue}}}function Fr(s){return Array.isArray(s)&&s.length>0&&"string"==typeof s[0]&&s[0]in ye}function no(s,e){const o=new ce(ye,[],e?function(h){const m={color:In,string:bt,number:rt,enum:bt,boolean:Yt,formatted:B,resolvedImage:q};return"array"===h.type?be(m[h.value]||et,h.length):m[h.type]}(e):void 0),l=o.parse(s,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return l?Be(new Ps(l,e)):tt(o.errors)}class Cs{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent="constant"!==e&&!Mo(o.expression)}evaluateWithoutErrorHandling(e,o,l,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,h,m,y)}evaluate(e,o,l,h,m,y){return this._styleExpression.evaluate(e,o,l,h,m,y)}}class ds{constructor(e,o,l,h){this.kind=e,this.zoomStops=l,this._styleExpression=o,this.isStateDependent="camera"!==e&&!Mo(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(e,o,l,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,h,m,y)}evaluate(e,o,l,h,m,y){return this._styleExpression.evaluate(e,o,l,h,m,y)}interpolationFactor(e,o,l){return this.interpolationType?tr.interpolationFactor(this.interpolationType,e,o,l):0}}function Ro(s,e){if("error"===(s=no(s,e)).result)return s;const o=s.value.expression,l=oo(o);if(!l&&!ft(e))return tt([new hi("","data expressions not supported")]);const h=Ji(o,["zoom"]);if(!h&&!Gt(e))return tt([new hi("","zoom expressions not supported")]);const m=hs(o);return m||h?m instanceof hi?tt([m]):m instanceof tr&&!hn(e)?tt([new hi("",'"interpolate" expressions cannot be used with this property')]):Be(m?new ds(l?"camera":"composite",s.value,m.labels,m instanceof tr?m.interpolation:void 0):new Cs(l?"constant":"source",s.value)):tt([new hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bs{constructor(e,o){this._parameters=e,this._specification=o,Sn(this,_r(this._parameters,this._specification))}static deserialize(e){return new Bs(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function hs(s){let e=null;if(s instanceof os)e=hs(s.result);else if(s instanceof Io){for(const o of s.args)if(e=hs(o),e)break}else(s instanceof Ae||s instanceof tr)&&s.input instanceof Vr&&"zoom"===s.input.name&&(e=s);return e instanceof hi||s.eachChild(o=>{const l=hs(o);l instanceof hi?e=l:!e&&l?e=new hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function qs(s){const e=s.key,o=s.value,l=s.valueSpec||{},h=s.objectElementValidators||{},m=s.style,y=s.styleSpec;let C=[];const D=_n(o);if("object"!==D)return[new It(e,o,`object expected, ${D} found`)];for(const R in o){const V=R.split(".")[0],H=l[V]||l["*"];let re;if(h[V])re=h[V];else if(l[V])re=Fs;else if(h["*"])re=h["*"];else{if(!l["*"]){C.push(new It(e,o[R],`unknown property "${R}"`));continue}re=Fs}C=C.concat(re({key:(e&&`${e}.`)+R,value:o[R],valueSpec:H,style:m,styleSpec:y,object:o,objectKey:R},o))}for(const R in l)h[R]||l[R].required&&void 0===l[R].default&&void 0===o[R]&&C.push(new It(e,o,`missing required property "${R}"`));return C}function qo(s){const e=s.value,o=s.valueSpec,l=s.style,h=s.styleSpec,m=s.key,y=s.arrayElementValidator||Fs;if("array"!==_n(e))return[new It(m,e,`array expected, ${_n(e)} found`)];if(o.length&&e.length!==o.length)return[new It(m,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new It(m,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let C={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum};h.$version<7&&(C.function=o.function),"object"===_n(o.value)&&(C=o.value);let D=[];for(let R=0;R<e.length;R++)D=D.concat(y({array:e,arrayIndex:R,value:e[R],valueSpec:C,style:l,styleSpec:h,key:`${m}[${R}]`}));return D}function Kr(s){const e=s.key,o=s.value,l=s.valueSpec;let h=_n(o);if("number"===h&&o!=o&&(h="NaN"),"number"!==h)return[new It(e,o,`number expected, ${h} found`)];if("minimum"in l){let m=l.minimum;if("array"===_n(l.minimum)&&(m=l.minimum[s.arrayIndex]),o<m)return[new It(e,o,`${o} is less than the minimum value ${m}`)]}if("maximum"in l){let m=l.maximum;if("array"===_n(l.maximum)&&(m=l.maximum[s.arrayIndex]),o>m)return[new It(e,o,`${o} is greater than the maximum value ${m}`)]}return[]}function lo(s){const e=s.valueSpec,o=Nn(s.value.type);let l,h,m,y={};const C="categorical"!==o&&void 0===s.value.property,D=!C,R="array"===_n(s.value.stops)&&"array"===_n(s.value.stops[0])&&"object"===_n(s.value.stops[0][0]),V=qs({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(de){if("identity"===o)return[new It(de.key,de.value,'identity function may not have a "stops" property')];let Me=[];const Ue=de.value;return Me=Me.concat(qo({key:de.key,value:Ue,valueSpec:de.valueSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:H})),"array"===_n(Ue)&&0===Ue.length&&Me.push(new It(de.key,Ue,"array must have at least one stop")),Me},default:function(de){return Fs({key:de.key,value:de.value,valueSpec:e,style:de.style,styleSpec:de.styleSpec})}}});return"identity"===o&&C&&V.push(new It(s.key,s.value,'missing required property "property"')),"identity"===o||s.value.stops||V.push(new It(s.key,s.value,'missing required property "stops"')),"exponential"===o&&s.valueSpec.expression&&!hn(s.valueSpec)&&V.push(new It(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(D&&!ft(s.valueSpec)?V.push(new It(s.key,s.value,"property functions not supported")):C&&!Gt(s.valueSpec)&&V.push(new It(s.key,s.value,"zoom functions not supported"))),"categorical"!==o&&!R||void 0!==s.value.property||V.push(new It(s.key,s.value,'"property" property is required')),V;function H(de){let Me=[];const Ue=de.value,ot=de.key;if("array"!==_n(Ue))return[new It(ot,Ue,`array expected, ${_n(Ue)} found`)];if(2!==Ue.length)return[new It(ot,Ue,`array length 2 expected, length ${Ue.length} found`)];if(R){if("object"!==_n(Ue[0]))return[new It(ot,Ue,`object expected, ${_n(Ue[0])} found`)];if(void 0===Ue[0].zoom)return[new It(ot,Ue,"object stop key must have zoom")];if(void 0===Ue[0].value)return[new It(ot,Ue,"object stop key must have value")];if(m&&m>Nn(Ue[0].zoom))return[new It(ot,Ue[0].zoom,"stop zoom values must appear in ascending order")];Nn(Ue[0].zoom)!==m&&(m=Nn(Ue[0].zoom),h=void 0,y={}),Me=Me.concat(qs({key:`${ot}[0]`,value:Ue[0],valueSpec:{zoom:{}},style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:Kr,value:re}}))}else Me=Me.concat(re({key:`${ot}[0]`,value:Ue[0],valueSpec:{},style:de.style,styleSpec:de.styleSpec},Ue));return Fr(Qn(Ue[1]))?Me.concat([new It(`${ot}[1]`,Ue[1],"expressions are not allowed in function stops.")]):Me.concat(Fs({key:`${ot}[1]`,value:Ue[1],valueSpec:e,style:de.style,styleSpec:de.styleSpec}))}function re(de,Me){const Ue=_n(de.value),ot=Nn(de.value),wt=null!==de.value?de.value:Me;if(l){if(Ue!==l)return[new It(de.key,wt,`${Ue} stop domain type must match previous stop domain type ${l}`)]}else l=Ue;if("number"!==Ue&&"string"!==Ue&&"boolean"!==Ue)return[new It(de.key,wt,"stop domain value must be a number, string, or boolean")];if("number"!==Ue&&"categorical"!==o){let Rt=`number expected, ${Ue} found`;return ft(e)&&void 0===o&&(Rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(de.key,wt,Rt)]}return"categorical"!==o||"number"!==Ue||isFinite(ot)&&Math.floor(ot)===ot?"categorical"!==o&&"number"===Ue&&void 0!==h&&ot<h?[new It(de.key,wt,"stop domain values must appear in ascending order")]:(h=ot,"categorical"===o&&ot in y?[new It(de.key,wt,"stop domain values must be unique")]:(y[ot]=!0,[])):[new It(de.key,wt,`integer expected, found ${ot}`)]}}function Tr(s){const e=("property"===s.expressionContext?Ro:no)(Qn(s.value),s.valueSpec);if("error"===e.result)return e.value.map(l=>new It(`${s.key}${l.key}`,s.value,l.message));const o=e.value.expression||e.value._styleExpression.expression;if("property"===s.expressionContext&&"text-font"===s.propertyKey&&!o.outputDefined())return[new It(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===s.expressionContext&&"layout"===s.propertyType&&!Mo(o))return[new It(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===s.expressionContext&&!Mo(o))return[new It(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&0===s.expressionContext.indexOf("cluster")){if(!Ji(o,["zoom","feature-state"]))return[new It(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===s.expressionContext&&!oo(o))return[new It(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function mi(s){const e=s.key,o=s.value,l=s.valueSpec,h=[];return Array.isArray(l.values)?-1===l.values.indexOf(Nn(o))&&h.push(new It(e,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(l.values).indexOf(Nn(o))&&h.push(new It(e,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),h}function Pi(s){if(!0===s||!1===s)return!0;if(!Array.isArray(s)||0===s.length)return!1;switch(s[0]){case"has":return s.length>=2&&"$id"!==s[1]&&"$type"!==s[1];case"in":return s.length>=3&&("string"!=typeof s[1]||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==s.length||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const e of s.slice(1))if(!Pi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pr(s){if(null==s)return{filter:()=>!0,needGeometry:!1};Pi(s)||(s=as(s));const e=no(s,zi);if("error"===e.result)throw new Error(e.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,h)=>e.value.evaluate(o,l,{},h),needGeometry:Ws(s)}}function Es(s,e){return s<e?-1:s>e?1:0}function Ws(s){if(!Array.isArray(s))return!1;if("within"===s[0])return!0;for(let e=1;e<s.length;e++)if(Ws(s[e]))return!0;return!1}function as(s){if(!s)return!0;const e=s[0];return s.length<=1?"any"!==e:"=="===e?Ys(s[1],s[2],"=="):"!="===e?Ks(Ys(s[1],s[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ys(s[1],s[2],e):"any"===e?(o=s.slice(1),["any"].concat(o.map(as))):"all"===e?["all"].concat(s.slice(1).map(as)):"none"===e?["all"].concat(s.slice(1).map(as).map(Ks)):"in"===e?Br(s[1],s.slice(2)):"!in"===e?Ks(Br(s[1],s.slice(2))):"has"===e?Wo(s[1]):"!has"===e?Ks(Wo(s[1])):"within"!==e||s;var o}function Ys(s,e,o){switch(s){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,s,e]}}function Br(s,e){if(0===e.length)return!1;switch(s){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",s,["literal",e.sort(Es)]]:["filter-in-small",s,["literal",e]]}}function Wo(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ks(s){return["!",s]}function Oo(s){return Pi(Qn(s.value))?Tr(Sn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Vs(s)}function Vs(s){const e=s.value,o=s.key;if("array"!==_n(e))return[new It(o,e,`array expected, ${_n(e)} found`)];const l=s.styleSpec;let h,m=[];if(e.length<1)return[new It(o,e,"filter array must have at least 1 element")];switch(m=m.concat(mi({key:`${o}[0]`,value:e[0],valueSpec:l.filter_operator,style:s.style,styleSpec:s.styleSpec})),Nn(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Nn(e[1])&&m.push(new It(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&m.push(new It(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=_n(e[1]),"string"!==h&&m.push(new It(`${o}[1]`,e[1],`string expected, ${h} found`)));for(let y=2;y<e.length;y++)h=_n(e[y]),"$type"===Nn(e[1])?m=m.concat(mi({key:`${o}[${y}]`,value:e[y],valueSpec:l.geometry_type,style:s.style,styleSpec:s.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&m.push(new It(`${o}[${y}]`,e[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<e.length;y++)m=m.concat(Vs({key:`${o}[${y}]`,value:e[y],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":h=_n(e[1]),2!==e.length?m.push(new It(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==h&&m.push(new It(`${o}[1]`,e[1],`string expected, ${h} found`));break;case"within":h=_n(e[1]),2!==e.length?m.push(new It(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==h&&m.push(new It(`${o}[1]`,e[1],`object expected, ${h} found`))}return m}function Qr(s,e){const o=s.key,l=s.style,h=s.styleSpec,m=s.value,y=s.objectKey,C=h[`${e}_${s.layerType}`];if(!C)return[];const D=y.match(/^(.*)-transition$/);if("paint"===e&&D&&C[D[1]]&&C[D[1]].transition)return Fs({key:o,value:m,valueSpec:h.transition,style:l,styleSpec:h});const R=s.valueSpec||C[y];if(!R)return[new It(o,m,`unknown property "${y}"`)];let V;if("string"===_n(m)&&ft(R)&&!R.tokens&&(V=/^{([^}]+)}$/.exec(m)))return[new It(o,m,`"${y}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const H=[];return"symbol"===s.layerType&&("text-field"===y&&l&&!l.glyphs&&H.push(new It(o,m,'use of "text-field" requires a style "glyphs" property')),"text-font"===y&&yi(Qn(m))&&"identity"===Nn(m.type)&&H.push(new It(o,m,'"text-font" does not support identity functions'))),H.concat(Fs({key:s.key,value:m,valueSpec:R,style:l,styleSpec:h,expressionContext:"property",propertyType:e,propertyKey:y}))}function ia(s){return Qr(s,"paint")}function Pc(s){return Qr(s,"layout")}function Ja(s){let e=[];const o=s.value,l=s.key,h=s.style,m=s.styleSpec;o.type||o.ref||e.push(new It(l,o,'either "type" or "ref" is required'));let y=Nn(o.type);const C=Nn(o.ref);if(o.id){const D=Nn(o.id);for(let R=0;R<s.arrayIndex;R++){const V=h.layers[R];Nn(V.id)===D&&e.push(new It(l,o.id,`duplicate layer id "${o.id}", previously used at line ${V.id.__line__}`))}}if("ref"in o){let D;["type","source","source-layer","filter","layout"].forEach(R=>{R in o&&e.push(new It(l,o[R],`"${R}" is prohibited for ref layers`))}),h.layers.forEach(R=>{Nn(R.id)===C&&(D=R)}),D?D.ref?e.push(new It(l,o.ref,"ref cannot reference another ref layer")):y=Nn(D.type):e.push(new It(l,o.ref,`ref layer "${C}" not found`))}else if("background"!==y&&"sky"!==y)if(o.source){const D=h.sources&&h.sources[o.source],R=D&&Nn(D.type);D?"vector"===R&&"raster"===y?e.push(new It(l,o.source,`layer "${o.id}" requires a raster source`)):"raster"===R&&"raster"!==y?e.push(new It(l,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==R||o["source-layer"]?"raster-dem"===R&&"hillshade"!==y?e.push(new It(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==y||!o.paint||!o.paint["line-gradient"]||"geojson"===R&&D.lineMetrics||e.push(new It(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new It(l,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new It(l,o.source,`source "${o.source}" not found`))}else e.push(new It(l,o,'missing required property "source"'));return e=e.concat(qs({key:l,value:o,valueSpec:m.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fs({key:`${l}.type`,value:o.type,valueSpec:m.layer.type,style:s.style,styleSpec:s.styleSpec,object:o,objectKey:"type"}),filter:Oo,layout:D=>qs({layer:o,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,objectElementValidators:{"*":R=>Pc(Sn({layerType:y},R))}}),paint:D=>qs({layer:o,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,objectElementValidators:{"*":R=>ia(Sn({layerType:y},R))}})}})),e}function _s(s){const e=s.value,o=s.key,l=_n(e);return"string"!==l?[new It(o,e,`string expected, ${l} found`)]:[]}const Fc={promoteId:function({key:s,value:e}){if("string"===_n(e))return _s({key:s,value:e});{const o=[];for(const l in e)o.push(..._s({key:`${s}.${l}`,value:e[l]}));return o}}};function Ga(s){const e=s.value,o=s.key,l=s.styleSpec,h=s.style;if(!e.type)return[new It(o,e,'"type" is required')];const m=Nn(e.type);let y;switch(m){case"vector":case"raster":case"raster-dem":return y=qs({key:o,value:e,valueSpec:l[`source_${m.replace("-","_")}`],style:s.style,styleSpec:l,objectElementValidators:Fc}),y;case"geojson":if(y=qs({key:o,value:e,valueSpec:l.source_geojson,style:h,styleSpec:l,objectElementValidators:Fc}),e.cluster)for(const C in e.clusterProperties){const[D,R]=e.clusterProperties[C],V="string"==typeof D?[D,["accumulated"],["get",C]]:D;y.push(...Tr({key:`${o}.${C}.map`,value:R,expressionContext:"cluster-map"})),y.push(...Tr({key:`${o}.${C}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return y;case"video":return qs({key:o,value:e,valueSpec:l.source_video,style:h,styleSpec:l});case"image":return qs({key:o,value:e,valueSpec:l.source_image,style:h,styleSpec:l});case"canvas":return[new It(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return mi({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:l})}}function uc(s){const e=s.value,o=s.styleSpec,l=o.light,h=s.style;let m=[];const y=_n(e);if(void 0===e)return m;if("object"!==y)return m=m.concat([new It("light",e,`object expected, ${y} found`)]),m;for(const C in e){const D=C.match(/^(.*)-transition$/);m=m.concat(D&&l[D[1]]&&l[D[1]].transition?Fs({key:C,value:e[C],valueSpec:o.transition,style:h,styleSpec:o}):l[C]?Fs({key:C,value:e[C],valueSpec:l[C],style:h,styleSpec:o}):[new It(C,e[C],`unknown property "${C}"`)])}return m}function Ia(s){const e=s.value,o=s.key,l=s.style,h=s.styleSpec,m=h.terrain;let y=[];const C=_n(e);if(void 0===e)return y;if("object"!==C)return y=y.concat([new It("terrain",e,`object expected, ${C} found`)]),y;for(const D in e){const R=D.match(/^(.*)-transition$/);y=y.concat(R&&m[R[1]]&&m[R[1]].transition?Fs({key:D,value:e[D],valueSpec:h.transition,style:l,styleSpec:h}):m[D]?Fs({key:D,value:e[D],valueSpec:m[D],style:l,styleSpec:h}):[new It(D,e[D],`unknown property "${D}"`)])}if(e.source){const D=l.sources&&l.sources[e.source],R=D&&Nn(D.type);D?"raster-dem"!==R&&y.push(new It(o,e.source,`terrain cannot be used with a source of type ${R}, it only be used with a "raster-dem" source type`)):y.push(new It(o,e.source,`source "${e.source}" not found`))}else y.push(new It(o,e,'terrain is missing required property "source"'));return y}function el(s){const e=s.value,o=s.style,l=s.styleSpec,h=l.fog;let m=[];const y=_n(e);if(void 0===e)return m;if("object"!==y)return m=m.concat([new It("fog",e,`object expected, ${y} found`)]),m;for(const C in e){const D=C.match(/^(.*)-transition$/);m=m.concat(D&&h[D[1]]&&h[D[1]].transition?Fs({key:C,value:e[C],valueSpec:l.transition,style:o,styleSpec:l}):h[C]?Fs({key:C,value:e[C],valueSpec:h[C],style:o,styleSpec:l}):[new It(C,e[C],`unknown property "${C}"`)])}return m}const _l={"*":()=>[],array:qo,boolean:function(s){const e=s.value,o=s.key,l=_n(e);return"boolean"!==l?[new It(o,e,`boolean expected, ${l} found`)]:[]},number:Kr,color:function(s){const e=s.key,o=s.value,l=_n(o);return"string"!==l?[new It(e,o,`color expected, ${l} found`)]:null===Vi.parseCSSColor(o)?[new It(e,o,`color expected, "${o}" found`)]:[]},constants:Bt,enum:mi,filter:Oo,function:lo,layer:Ja,object:qs,source:Ga,light:uc,terrain:Ia,fog:el,string:_s,formatted:function(s){return 0===_s(s).length?[]:Tr(s)},resolvedImage:function(s){return 0===_s(s).length?[]:Tr(s)}};function Fs(s){const e=s.value,o=s.valueSpec,l=s.styleSpec;return o.expression&&yi(Nn(e))?lo(s):o.expression&&Fr(Qn(e))?Tr(s):o.type&&_l[o.type]?_l[o.type](s):qs(Sn({},s,{valueSpec:o.type?l[o.type]:o}))}function yl(s){const e=s.value,o=s.key,l=_s(s);return l.length||(-1===e.indexOf("{fontstack}")&&l.push(new It(o,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&l.push(new It(o,e,'"glyphs" url must include a "{range}" token'))),l}function Yo(s,e=Qe){let o=[];return o=o.concat(Fs({key:"",value:s,valueSpec:e.$root,styleSpec:e,style:s,objectElementValidators:{glyphs:yl,"*":()=>[]}})),s.constants&&(o=o.concat(Bt({key:"constants",value:s.constants,style:s,styleSpec:e}))),vl(o)}function vl(s){return[].concat(s).sort((e,o)=>e.line-o.line)}function co(s){return function(...e){return vl(s.apply(this,e))}}Yo.source=co(Ga),Yo.light=co(uc),Yo.terrain=co(Ia),Yo.fog=co(el),Yo.layer=co(Ja),Yo.filter=co(Oo),Yo.paintProperty=co(ia),Yo.layoutProperty=co(Pc);const ra=Yo,Pa=ra.light,sa=ra.fog,xl=ra.paintProperty,ru=ra.layoutProperty;function dc(s,e){let o=!1;if(e&&e.length)for(const l of e)s.fire(new mt(new Error(l.message))),o=!0;return o}var Fa=oa;function oa(s,e,o){var l=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var h=new Int32Array(this.arrayBuffer);s=h[0],this.d=(e=h[1])+2*(o=h[2]);for(var m=0;m<this.d*this.d;m++){var y=h[3+m],C=h[3+m+1];l.push(y===C?null:h.subarray(y,C))}var D=h[3+l.length+1];this.keys=h.subarray(h[3+l.length],D),this.bboxes=h.subarray(D),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var R=0;R<this.d*this.d;R++)l.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=s,this.padding=o,this.scale=e/s,this.uid=0;var V=o/e*s;this.min=-V,this.max=s+V}oa.prototype.insert=function(s,e,o,l,h){this._forEachCell(e,o,l,h,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(h)},oa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},oa.prototype._insertCell=function(s,e,o,l,h,m){this.cells[h].push(m)},oa.prototype.query=function(s,e,o,l,h){var m=this.min,y=this.max;if(s<=m&&e<=m&&y<=o&&y<=l&&!h)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(s,e,o,l,this._queryCell,C,{},h),C},oa.prototype._queryCell=function(s,e,o,l,h,m,y,C){var D=this.cells[h];if(null!==D)for(var R=this.keys,V=this.bboxes,H=0;H<D.length;H++){var re=D[H];if(void 0===y[re]){var de=4*re;(C?C(V[de+0],V[de+1],V[de+2],V[de+3]):s<=V[de+2]&&e<=V[de+3]&&o>=V[de+0]&&l>=V[de+1])?(y[re]=!0,m.push(R[re])):y[re]=!1}}},oa.prototype._forEachCell=function(s,e,o,l,h,m,y,C){for(var D=this._convertToCellCoord(s),R=this._convertToCellCoord(e),V=this._convertToCellCoord(o),H=this._convertToCellCoord(l),re=D;re<=V;re++)for(var de=R;de<=H;de++){var Me=this.d*de+re;if((!C||C(this._convertFromCellCoord(re),this._convertFromCellCoord(de),this._convertFromCellCoord(re+1),this._convertFromCellCoord(de+1)))&&h.call(this,s,e,o,l,Me,m,y,C))return}},oa.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},oa.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},oa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,e=3+this.cells.length+1+1,o=0,l=0;l<this.cells.length;l++)o+=this.cells[l].length;var h=new Int32Array(e+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=e,y=0;y<s.length;y++){var C=s[y];h[3+y]=m,h.set(C,m),m+=C.length}return h[3+s.length]=m,h.set(this.keys,m),h[3+s.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};const{ImageData:Rc,ImageBitmap:tl}=Oe,$a={};function si(s,e,o={}){Object.defineProperty(e,"_classRegistryKey",{value:s,writeable:!1}),$a[s]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}si("Object",Object),Fa.serialize=function(s,e){const o=s.toArrayBuffer();return e&&e.push(o),{buffer:o}},Fa.deserialize=function(s){return new Fa(s.buffer)},si("Grid",Fa),si("Color",_i),si("Error",Error),si("ResolvedImage",$r),si("StylePropertyFunction",Bs),si("StyleExpression",Ps,{omit:["_evaluator"]}),si("ZoomDependentExpression",ds),si("ZoomConstantExpression",Cs),si("CompoundExpression",Vr,{omit:["_evaluate"]});for(const s in ye)ye[s]._classRegistryKey||si(`Expression_${s}`,ye[s]);function bl(s){return s&&"undefined"!=typeof ArrayBuffer&&(s instanceof ArrayBuffer||s.constructor&&"ArrayBuffer"===s.constructor.name)}function wl(s){return tl&&s instanceof tl}function Cl(s,e){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(bl(s)||wl(s))return e&&e.push(s),s;if(ArrayBuffer.isView(s)){const o=s;return e&&e.push(o.buffer),o}if(s instanceof Rc)return e&&e.push(s.data.buffer),s;if(Array.isArray(s)){const o=[];for(const l of s)o.push(Cl(l,e));return o}if("object"==typeof s){const o=s.constructor,l=o._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");const h=o.serialize?o.serialize(s,e):{};if(!o.serialize){for(const m in s){if(!s.hasOwnProperty(m)||$a[l].omit.indexOf(m)>=0)continue;const y=s[m];h[m]=$a[l].shallow.indexOf(m)>=0?y:Cl(y,e)}s instanceof Error&&(h.message=s.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(h.$name=l),h}throw new Error("can't serialize object of type "+typeof s)}function Ra(s){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||bl(s)||wl(s)||ArrayBuffer.isView(s)||s instanceof Rc)return s;if(Array.isArray(s))return s.map(Ra);if("object"==typeof s){const e=s.$name||"Object",{klass:o}=$a[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(s);const l=Object.create(o.prototype);for(const h of Object.keys(s)){if("$name"===h)continue;const m=s[h];l[h]=$a[e].shallow.indexOf(h)>=0?m:Ra(m)}return l}throw new Error("can't deserialize object of type "+typeof s)}class hc{constructor(){this.first=!0}update(e,o){const l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}const fc=s=>s>=1536&&s<=1791,$l=s=>s>=1872&&s<=1919,El=s=>s>=2208&&s<=2303,su=s=>s>=11904&&s<=12031,L=s=>s>=12032&&s<=12255,P=s=>s>=12272&&s<=12287,M=s=>s>=12288&&s<=12351,Y=s=>s>=12352&&s<=12447,ue=s=>s>=12448&&s<=12543,Te=s=>s>=12544&&s<=12591,lt=s=>s>=12704&&s<=12735,At=s=>s>=12736&&s<=12783,mn=s=>s>=12784&&s<=12799,li=s=>s>=12800&&s<=13055,Di=s=>s>=13056&&s<=13311,nr=s=>s>=13312&&s<=19903,Rr=s=>s>=19968&&s<=40959,yr=s=>s>=40960&&s<=42127,io=s=>s>=42128&&s<=42191,uo=s=>s>=44032&&s<=55215,aa=s=>s>=63744&&s<=64255,_a=s=>s>=64336&&s<=65023,nl=s=>s>=65040&&s<=65055,la=s=>s>=65072&&s<=65103,Xr=s=>s>=65104&&s<=65135,il=s=>s>=65136&&s<=65279,Al=s=>s>=65280&&s<=65519;function Hl(s){for(const e of s)if(Zl(e.charCodeAt(0)))return!0;return!1}function Hf(s){for(const e of s)if(!oh(e.charCodeAt(0)))return!1;return!0}function oh(s){return!(fc(s)||$l(s)||El(s)||_a(s)||il(s))}function Zl(s){return!(746!==s&&747!==s&&(s<4352||!(lt(s)||Te(s)||la(s)&&!(s>=65097&&s<=65103)||aa(s)||Di(s)||su(s)||At(s)||!(!M(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||12336===s)||nr(s)||Rr(s)||li(s)||(e=s,e>=12592&&e<=12687)||(e=>e>=43360&&e<=43391)(s)||(e=>e>=55216&&e<=55295)(s)||(e=>e>=4352&&e<=4607)(s)||uo(s)||Y(s)||P(s)||(e=>e>=12688&&e<=12703)(s)||L(s)||mn(s)||ue(s)&&12540!==s||!(!Al(s)||65288===s||65289===s||65293===s||s>=65306&&s<=65310||65339===s||65341===s||65343===s||s>=65371&&s<=65503||65507===s||s>=65512&&s<=65519)||!(!Xr(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(e=>e>=5120&&e<=5759)(s)||(e=>e>=6320&&e<=6399)(s)||nl(s)||(e=>e>=19904&&e<=19967)(s)||yr(s)||io(s))));var e}function ah(s){return!(Zl(s)||(e=s,(o=e)>=128&&o<=255&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(o=>o>=8192&&o<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(o=>o>=8448&&o<=8527)(e)||(o=>o>=8528&&o<=8591)(e)||(o=>o>=8960&&o<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(o=>o>=9216&&o<=9279)(e)&&9251!==e||(o=>o>=9280&&o<=9311)(e)||(o=>o>=9312&&o<=9471)(e)||(o=>o>=9632&&o<=9727)(e)||(o=>o>=9728&&o<=9983)(e)&&!(e>=9754&&e<=9759)||(o=>o>=11008&&o<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||M(e)||ue(e)||(o=>o>=57344&&o<=63743)(e)||la(e)||Xr(e)||Al(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e,o}function lh(s){return s>=1424&&s<=2303||_a(s)||il(s)}function ch(s,e){return!(!e&&lh(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(o=s,o>=6016&&o<=6143));var o}function ou(s){for(const e of s)if(lh(e.charCodeAt(0)))return!0;return!1}const f="deferred",i="loading",u="loaded";let p=null,v="unavailable",w=null;const T=function(s){s&&"string"==typeof s&&s.indexOf("NetworkError")>-1&&(v="error"),p&&p(s)};function k(){G.fire(new Ge("pluginStateChange",{pluginStatus:v,pluginURL:w}))}const G=new nn,te=function(){return v},he=function(){if(v!==f||!w)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");v=i,k(),w&&K({url:w},s=>{s?T(s):(v=u,k())})},_e={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>v===u||null!=_e.applyArabicShaping,isLoading:()=>v===i,setState(s){v=s.pluginStatus,w=s.pluginURL},isParsed:()=>null!=_e.applyArabicShaping&&null!=_e.processBidirectionalText&&null!=_e.processStyledBidirectionalText,getPluginURL:()=>w};class we{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hc,this.transition={})}isSupportedScript(e){return function(o,l){for(const h of o)if(!ch(h.charCodeAt(0),l))return!1;return!0}(e,_e.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class Re{constructor(e,o){this.property=e,this.value=o,this.expression=function(l,h){if(yi(l))return new Bs(l,h);if(Fr(l)){const m=Ro(l,h);if("error"===m.result)throw new Error(m.value.map(y=>`${y.key}: ${y.message}`).join(", "));return m.value}{let m=l;return"string"==typeof l&&"color"===h.type&&(m=_i.parse(l)),{kind:"constant",evaluate:()=>m}}}(void 0===o?e.specification.default:o,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,o,l){return this.property.possiblyEvaluate(this,e,o,l)}}class je{constructor(e){this.property=e,this.value=new Re(e,void 0)}transitioned(e,o){return new _t(this.property,this.value,o,dn({},e.transition,this.transition),e.now)}untransitioned(){return new _t(this.property,this.value,null,{},0)}}class He{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return vi(this._values[e].value.value)}setValue(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new je(this._values[e].property)),this._values[e].value=new Re(this._values[e].property,null===o?void 0:vi(o))}getTransition(e){return vi(this._values[e].transition)}setTransition(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new je(this._values[e].property)),this._values[e].transition=vi(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);void 0!==l&&(e[o]=l);const h=this.getTransition(o);void 0!==h&&(e[`${o}-transition`]=h)}return e}transitioned(e,o){const l=new Le(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].transitioned(e,o._values[h]);return l}untransitioned(){const e=new Le(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class _t{constructor(e,o,l,h,m){const y=h.delay||0,C=h.duration||0;m=m||0,this.property=e,this.value=o,this.begin=m+y,this.end=this.begin+C,e.specification.transition&&(h.delay||h.duration)&&(this.prior=l)}possiblyEvaluate(e,o,l){const h=e.now||0,m=this.value.possiblyEvaluate(e,o,l),y=this.prior;if(y){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return y.possiblyEvaluate(e,o,l);{const C=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(e,o,l),m,St(C))}}return m}}class Le{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,l){const h=new Ct(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(e,o,l);return h}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ye{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return vi(this._values[e].value)}setValue(e,o){this._values[e]=new Re(this._values[e].property,null===o?void 0:vi(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);void 0!==l&&(e[o]=l)}return e}possiblyEvaluate(e,o,l){const h=new Ct(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(e,o,l);return h}}class nt{constructor(e,o,l){this.property=e,this.value=o,this.parameters=l}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,o,l,h){return this.property.evaluate(this.value,this.parameters,e,o,l,h)}}class Ct{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Je{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,l){const h=ai[this.specification.type];return h?h(e,o,l):e}}class ht{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,l,h){return new nt(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(o,null,{},l,h)}:e.expression,o)}interpolate(e,o,l){if("constant"!==e.value.kind||"constant"!==o.value.kind)return e;if(void 0===e.value.value||void 0===o.value.value)return new nt(this,{kind:"constant",value:void 0},e.parameters);const h=ai[this.specification.type];return h?new nt(this,{kind:"constant",value:h(e.value.value,o.value.value,l)},e.parameters):e}evaluate(e,o,l,h,m,y){return"constant"===e.kind?e.value:e.evaluate(o,l,h,m,y)}}class ln extends ht{possiblyEvaluate(e,o,l,h){if(void 0===e.value)return new nt(this,{kind:"constant",value:void 0},o);if("constant"===e.expression.kind){const m=e.expression.evaluate(o,null,{},l,h),y="resolvedImage"===e.property.specification.type&&"string"!=typeof m?m.name:m,C=this._calculate(y,y,y,o);return new nt(this,{kind:"constant",value:C},o)}if("camera"===e.expression.kind){const m=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new nt(this,{kind:"constant",value:m},o)}return new nt(this,e.expression,o)}evaluate(e,o,l,h,m,y){if("source"===e.kind){const C=e.evaluate(o,l,h,m,y);return this._calculate(C,C,C,o)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},l,h),e.evaluate({zoom:Math.floor(o.zoom)},l,h),e.evaluate({zoom:Math.floor(o.zoom)+1},l,h),o):e.value}_calculate(e,o,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:o,other:l}:{from:l,to:o,other:e}}interpolate(e){return e}}class fn{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,h){if(void 0!==e.value){if("constant"===e.expression.kind){const m=e.expression.evaluate(o,null,{},l,h);return this._calculate(m,m,m,o)}return this._calculate(e.expression.evaluate(new we(Math.floor(o.zoom-1),o)),e.expression.evaluate(new we(Math.floor(o.zoom),o)),e.expression.evaluate(new we(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class vn{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,h){return!!e.expression.evaluate(o,null,{},l,h)}interpolate(){return!1}}class ut{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const l=e[o];l.specification.overridable&&this.overridableProperties.push(o);const h=this.defaultPropertyValues[o]=new Re(l,void 0),m=this.defaultTransitionablePropertyValues[o]=new je(l);this.defaultTransitioningPropertyValues[o]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=h.possiblyEvaluate({})}}}function jn(s,e){return 256*(s=Ft(Math.floor(s),0,255))+Ft(Math.floor(e),0,255)}si("DataDrivenProperty",ht),si("DataConstantProperty",Je),si("CrossFadedDataDrivenProperty",ln),si("CrossFadedProperty",fn),si("ColorRampProperty",vn);const Tn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gi{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Gn(s,e=1){let o=0,l=0;return{members:s.map(h=>{const m=Tn[h.type].BYTES_PER_ELEMENT,y=o=Hi(o,Math.max(e,m)),C=h.components||1;return l=Math.max(l,m),o+=m*C,{name:h.name,type:h.type,components:C,offset:y}}),size:Hi(o,Math.max(l,e)),alignment:e}}function Hi(s,e){return Math.ceil(s/e)*e}class Si extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.int16[h+0]=o,this.int16[h+1]=l,e}}Si.prototype.bytesPerElement=4,si("StructArrayLayout2i4",Si);class Er extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,l,h)}emplace(e,o,l,h,m){const y=4*e;return this.int16[y+0]=o,this.int16[y+1]=l,this.int16[y+2]=h,this.int16[y+3]=m,e}}Er.prototype.bytesPerElement=8,si("StructArrayLayout4i8",Er);class Ir extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C){const D=this.length;return this.resize(D+1),this.emplace(D,e,o,l,h,m,y,C)}emplace(e,o,l,h,m,y,C,D){const R=6*e,V=12*e,H=3*e;return this.int16[R+0]=o,this.int16[R+1]=l,this.uint8[V+4]=h,this.uint8[V+5]=m,this.uint8[V+6]=y,this.uint8[V+7]=C,this.float32[H+2]=D,e}}Ir.prototype.bytesPerElement=12,si("StructArrayLayout2i4ub1f12",Ir);class Zr extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.float32[h+0]=o,this.float32[h+1]=l,e}}Zr.prototype.bytesPerElement=8,si("StructArrayLayout2f8",Zr);class or extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D,R,V){const H=this.length;return this.resize(H+1),this.emplace(H,e,o,l,h,m,y,C,D,R,V)}emplace(e,o,l,h,m,y,C,D,R,V,H){const re=10*e;return this.uint16[re+0]=o,this.uint16[re+1]=l,this.uint16[re+2]=h,this.uint16[re+3]=m,this.uint16[re+4]=y,this.uint16[re+5]=C,this.uint16[re+6]=D,this.uint16[re+7]=R,this.uint16[re+8]=V,this.uint16[re+9]=H,e}}or.prototype.bytesPerElement=20,si("StructArrayLayout10ui20",or);class kr extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D){const R=this.length;return this.resize(R+1),this.emplace(R,e,o,l,h,m,y,C,D)}emplace(e,o,l,h,m,y,C,D,R){const V=8*e;return this.uint16[V+0]=o,this.uint16[V+1]=l,this.uint16[V+2]=h,this.uint16[V+3]=m,this.uint16[V+4]=y,this.uint16[V+5]=C,this.uint16[V+6]=D,this.uint16[V+7]=R,e}}kr.prototype.bytesPerElement=16,si("StructArrayLayout8ui16",kr);class ls extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D,R,V,H,re){const de=this.length;return this.resize(de+1),this.emplace(de,e,o,l,h,m,y,C,D,R,V,H,re)}emplace(e,o,l,h,m,y,C,D,R,V,H,re,de){const Me=12*e;return this.int16[Me+0]=o,this.int16[Me+1]=l,this.int16[Me+2]=h,this.int16[Me+3]=m,this.uint16[Me+4]=y,this.uint16[Me+5]=C,this.uint16[Me+6]=D,this.uint16[Me+7]=R,this.int16[Me+8]=V,this.int16[Me+9]=H,this.int16[Me+10]=re,this.int16[Me+11]=de,e}}ls.prototype.bytesPerElement=24,si("StructArrayLayout4i4ui4i24",ls);class ca extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const m=3*e;return this.float32[m+0]=o,this.float32[m+1]=l,this.float32[m+2]=h,e}}ca.prototype.bytesPerElement=12,si("StructArrayLayout3f12",ca);class wo extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}wo.prototype.bytesPerElement=4,si("StructArrayLayout1ul4",wo);class Us extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D,R,V){const H=this.length;return this.resize(H+1),this.emplace(H,e,o,l,h,m,y,C,D,R,V)}emplace(e,o,l,h,m,y,C,D,R,V,H){const re=16*e,de=8*e;return this.int16[re+0]=o,this.int16[re+1]=l,this.float32[de+1]=h,this.float32[de+2]=m,this.float32[de+3]=y,this.float32[de+4]=C,this.int16[re+10]=D,this.uint32[de+6]=R,this.uint16[re+14]=V,this.uint16[re+15]=H,e}}Us.prototype.bytesPerElement=32,si("StructArrayLayout2i4f1i1ul2ui32",Us);class ro extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y){const C=this.length;return this.resize(C+1),this.emplace(C,e,o,l,h,m,y)}emplace(e,o,l,h,m,y,C){const D=6*e;return this.int16[D+0]=o,this.int16[D+1]=l,this.int16[D+2]=h,this.int16[D+3]=m,this.int16[D+4]=y,this.int16[D+5]=C,e}}ro.prototype.bytesPerElement=12,si("StructArrayLayout2i2i2i12",ro);class Oa extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,h,m)}emplace(e,o,l,h,m,y){const C=4*e,D=8*e;return this.float32[C+0]=o,this.float32[C+1]=l,this.float32[C+2]=h,this.int16[D+6]=m,this.int16[D+7]=y,e}}Oa.prototype.bytesPerElement=16,si("StructArrayLayout2f1f2i16",Oa);class ar extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,l,h)}emplace(e,o,l,h,m){const y=12*e,C=3*e;return this.uint8[y+0]=o,this.uint8[y+1]=l,this.float32[C+1]=h,this.float32[C+2]=m,e}}ar.prototype.bytesPerElement=12,si("StructArrayLayout2ub2f12",ar);class Jr extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const m=3*e;return this.uint16[m+0]=o,this.uint16[m+1]=l,this.uint16[m+2]=h,e}}Jr.prototype.bytesPerElement=6,si("StructArrayLayout3ui6",Jr);class Dr extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt)}emplace(e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt,Ot){const zt=13*e,Ht=26*e,Vt=52*e;return this.float32[zt+0]=o,this.float32[zt+1]=l,this.uint16[Ht+4]=h,this.uint16[Ht+5]=m,this.uint32[zt+3]=y,this.uint32[zt+4]=C,this.uint32[zt+5]=D,this.uint16[Ht+12]=R,this.uint16[Ht+13]=V,this.uint16[Ht+14]=H,this.float32[zt+8]=re,this.float32[zt+9]=de,this.uint8[Vt+40]=Me,this.uint8[Vt+41]=Ue,this.uint8[Vt+42]=ot,this.uint32[zt+11]=wt,this.int16[Ht+24]=Rt,this.uint8[Vt+50]=Ot,e}}Dr.prototype.bytesPerElement=52,si("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",Dr);class qr extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt,Ot,zt,Ht,Vt,En,Fn,Cn,$n,gn){const bn=this.length;return this.resize(bn+1),this.emplace(bn,e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt,Ot,zt,Ht,Vt,En,Fn,Cn,$n,gn)}emplace(e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue,ot,wt,Rt,Ot,zt,Ht,Vt,En,Fn,Cn,$n,gn,bn){const Wn=17*e,un=34*e;return this.float32[Wn+0]=o,this.float32[Wn+1]=l,this.int16[un+4]=h,this.int16[un+5]=m,this.int16[un+6]=y,this.int16[un+7]=C,this.int16[un+8]=D,this.int16[un+9]=R,this.uint16[un+10]=V,this.uint16[un+11]=H,this.uint16[un+12]=re,this.uint16[un+13]=de,this.uint16[un+14]=Me,this.uint16[un+15]=Ue,this.uint16[un+16]=ot,this.uint16[un+17]=wt,this.uint16[un+18]=Rt,this.uint16[un+19]=Ot,this.uint16[un+20]=zt,this.uint16[un+21]=Ht,this.uint16[un+22]=Vt,this.uint16[un+23]=En,this.uint16[un+24]=Fn,this.uint32[Wn+13]=Cn,this.float32[Wn+14]=$n,this.float32[Wn+15]=gn,this.float32[Wn+16]=bn,e}}qr.prototype.bytesPerElement=68,si("StructArrayLayout2f6i15ui1ul3f68",qr);class Rs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}Rs.prototype.bytesPerElement=4,si("StructArrayLayout1f4",Rs);class is extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const m=3*e;return this.int16[m+0]=o,this.int16[m+1]=l,this.int16[m+2]=h,e}}is.prototype.bytesPerElement=6,si("StructArrayLayout3i6",is);class ko extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,l,h)}emplace(e,o,l,h,m){const y=6*e;return this.uint32[3*e+0]=o,this.uint16[y+2]=l,this.uint16[y+3]=h,this.uint16[y+4]=m,e}}ko.prototype.bytesPerElement=12,si("StructArrayLayout1ul3ui12",ko);class ya extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.uint16[h+0]=o,this.uint16[h+1]=l,e}}ya.prototype.bytesPerElement=4,si("StructArrayLayout2ui4",ya);class Ko extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}Ko.prototype.bytesPerElement=2,si("StructArrayLayout1ui2",Ko);class Lo extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,o,l,h)}emplace(e,o,l,h,m){const y=4*e;return this.float32[y+0]=o,this.float32[y+1]=l,this.float32[y+2]=h,this.float32[y+3]=m,e}}Lo.prototype.bytesPerElement=16,si("StructArrayLayout4f16",Lo);class ka extends gi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new ve(this.anchorPointX,this.anchorPointY)}}ka.prototype.size=32;class rl extends Us{get(e){return new ka(this,e)}}si("CollisionBoxArray",rl);class Qo extends gi{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(e){this._structArray.uint8[this._pos1+41]=e}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(e){this._structArray.uint8[this._pos1+42]=e}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(e){this._structArray.uint32[this._pos4+11]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(e){this._structArray.uint8[this._pos1+50]=e}}Qo.prototype.size=52;class Nu extends Dr{get(e){return new Qo(this,e)}}si("PlacedSymbolArray",Nu);class ql extends gi{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ql.prototype.size=68;class Wl extends qr{get(e){return new ql(this,e)}}si("SymbolInstanceArray",Wl);class au extends Rs{getoffsetX(e){return this.float32[1*e+0]}}si("GlyphOffsetArray",au);class uh extends is{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}si("SymbolLineVertexArray",uh);class Zf extends gi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Zf.prototype.size=12;class qf extends ko{get(e){return new Zf(this,e)}}si("FeatureIndexArray",qf);class pc extends gi{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}pc.prototype.size=4;class Oc extends ya{get(e){return new pc(this,e)}}si("FillExtrusionCentroidArray",Oc);const Nm=Gn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),fy=Gn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var dh=ji(function(s){s.exports=function(e,o){var l,h,m,y,C,D,R,V;for(h=e.length-(l=3&e.length),m=o,C=3432918353,D=461845907,V=0;V<h;)R=255&e.charCodeAt(V)|(255&e.charCodeAt(++V))<<8|(255&e.charCodeAt(++V))<<16|(255&e.charCodeAt(++V))<<24,++V,m=27492+(65535&(y=5*(65535&(m=(m^=R=(65535&(R=(R=(65535&R)*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*D+(((R>>>16)*D&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(R=0,l){case 3:R^=(255&e.charCodeAt(V+2))<<16;case 2:R^=(255&e.charCodeAt(V+1))<<8;case 1:m^=R=(65535&(R=(R=(65535&(R^=255&e.charCodeAt(V)))*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*D+(((R>>>16)*D&65535)<<16)&4294967295}return m^=e.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),zm=ji(function(s){s.exports=function(e,o){for(var l,h=e.length,m=o^h,y=0;h>=4;)l=1540483477*(65535&(l=255&e.charCodeAt(y)|(255&e.charCodeAt(++y))<<8|(255&e.charCodeAt(++y))<<16|(255&e.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&e.charCodeAt(y+2))<<16;case 2:m^=(255&e.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&e.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),zu=dh,Vm=zm;zu.murmur3=dh,zu.murmur2=Vm;class Vu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,l,h){this.ids.push(Wf(e)),this.positions.push(o,l,h)}getPositions(e){const o=Wf(e);let l=0,h=this.ids.length-1;for(;l<h;){const y=l+h>>1;this.ids[y]>=o?h=y:l=y+1}const m=[];for(;this.ids[l]===o;)m.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return m}static serialize(e,o){const l=new Float64Array(e.ids),h=new Uint32Array(e.positions);return kc(l,h,0,l.length-1),o&&o.push(l.buffer,h.buffer),{ids:l,positions:h}}static deserialize(e){const o=new Vu;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function Wf(s){const e=+s;return!isNaN(e)&&e<=Ke?e:zu(String(s))}function kc(s,e,o,l){for(;o<l;){const h=s[o+l>>1];let m=o-1,y=l+1;for(;;){do{m++}while(s[m]<h);do{y--}while(s[y]>h);if(m>=y)break;Lc(s,m,y),Lc(e,3*m,3*y),Lc(e,3*m+1,3*y+1),Lc(e,3*m+2,3*y+2)}y-o<l-y?(kc(s,e,o,y),o=y+1):(kc(s,e,y+1,l),l=y)}}function Lc(s,e,o){const l=s[e];s[e]=s[o],s[o]=l}si("FeaturePositionMap",Vu);class va{constructor(e,o){this.gl=e.gl,this.location=o}}class Uu extends va{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Yf extends va{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Um extends va{constructor(e,o){super(e,o),this.current=_i.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ju=new Float32Array(16),hh=new Float32Array(9);function Gu(s){return[jn(255*s.r,255*s.g),jn(255*s.b,255*s.a)]}class Bc{constructor(e,o,l){this.value=e,this.uniformNames=o.map(h=>`u_${h}`),this.type=l}setUniform(e,o,l){e.set(l.constantOr(this.value))}getBinding(e,o,l){return"color"===this.type?new Um(e,o):new Uu(e,o)}}class mc{constructor(e,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=o.tl.concat(o.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,o,l,h){const m="u_pattern_to"===h||"u_dash_to"===h?this.patternTo:"u_pattern_from"===h||"u_dash_from"===h?this.patternFrom:"u_pixel_ratio_to"===h?this.pixelRatioTo:"u_pixel_ratio_from"===h?this.pixelRatioFrom:null;m&&e.set(m)}getBinding(e,o,l){return"u_pattern_from"===l||"u_pattern_to"===l||"u_dash_from"===l||"u_dash_to"===l?new Yf(e,o):new Uu(e,o)}}class Xo{constructor(e,o,l,h){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:"color"===l?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,o,l,h,m){const y=this.paintVertexArray.length,C=this.expression.evaluate(new we(0),o,{},h,[],m);this.paintVertexArray.resize(e),this._setPaintValue(y,e,C)}updatePaintArray(e,o,l,h){const m=this.expression.evaluate({zoom:0},l,h);this._setPaintValue(e,o,m)}_setPaintValue(e,o,l){if("color"===this.type){const h=Gu(l);for(let m=e;m<o;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=e;h<o;h++)this.paintVertexArray.emplace(h,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ha{constructor(e,o,l,h,m,y){this.expression=e,this.uniformNames=o.map(C=>`u_${C}_t`),this.type=l,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(C=>({name:`a_${C}`,type:"Float32",components:"color"===l?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(e,o,l,h,m){const y=this.expression.evaluate(new we(this.zoom),o,{},h,[],m),C=this.expression.evaluate(new we(this.zoom+1),o,{},h,[],m),D=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(D,e,y,C)}updatePaintArray(e,o,l,h){const m=this.expression.evaluate({zoom:this.zoom},l,h),y=this.expression.evaluate({zoom:this.zoom+1},l,h);this._setPaintValue(e,o,m,y)}_setPaintValue(e,o,l,h){if("color"===this.type){const m=Gu(l),y=Gu(h);for(let C=e;C<o;C++)this.paintVertexArray.emplace(C,m[0],m[1],y[0],y[1])}else{for(let m=e;m<o;m++)this.paintVertexArray.emplace(m,l,h);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,h=Ft(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(h)}getBinding(e,o,l){return new Uu(e,o)}}class Yl{constructor(e,o,l,h,m,y,C){this.expression=e,this.type=l,this.useIntegerZoom=h,this.zoom=m,this.layerId=C,this.paintVertexAttributes=("array"===l?fy:Nm).members;for(let D=0;D<o.length;++D);this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(e,o,l){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(e,o,l,h,m){this._setPaintValues(e,o,l.patterns&&l.patterns[this.layerId],m)}_setPaintValues(e,o,l,h){if(!h||!l)return;const{min:m,mid:y,max:C}=l,D=h[m],R=h[y],V=h[C];if(D&&R&&V)for(let H=e;H<o;H++)this._setPaintValue(this.zoomInPaintVertexArray,H,R,D),this._setPaintValue(this.zoomOutPaintVertexArray,H,R,V)}_setPaintValue(e,o,l,h){e.emplace(o,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],l.pixelRatio,h.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Dl{constructor(e,o,l=(()=>!0)){this.binders={},this._buffers=[];const h=[];for(const m in e.paint._values){if(!l(m))continue;const y=e.paint.get(m);if(!(y instanceof nt&&ft(y.property.specification)))continue;const C=Sl(m,e.type),D=y.value,R=y.property.specification.type,V=y.property.useIntegerZoom,H=y.property.specification["property-type"],re="cross-faded"===H||"cross-faded-data-driven"===H,de="line-dasharray"===String(m)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==D.kind||de)if("source"===D.kind||de||re){const Me=Qf(m,R,"source");this.binders[m]=re?new Yl(D,C,R,V,o,Me,e.id):new Xo(D,C,R,Me),h.push(`/a_${m}`)}else{const Me=Qf(m,R,"composite");this.binders[m]=new Ha(D,C,R,V,o,Me),h.push(`/z_${m}`)}else this.binders[m]=re?new mc(D.value,C):new Bc(D.value,C,R),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof Xo||o instanceof Ha?o.maxValue:0}populatePaintArrays(e,o,l,h,m){for(const y in this.binders){const C=this.binders[y];(C instanceof Xo||C instanceof Ha||C instanceof Yl)&&C.populatePaintArray(e,o,l,h,m)}}setConstantPatternPositions(e,o){for(const l in this.binders){const h=this.binders[l];h instanceof mc&&h.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,l,h,m){let y=!1;for(const C in e){const D=o.getPositions(C);for(const R of D){const V=l.feature(R.index);for(const H in this.binders){const re=this.binders[H];if((re instanceof Xo||re instanceof Ha||re instanceof Yl)&&!0===re.expression.isStateDependent){const de=h.paint.get(H);re.expression=de.value,re.updatePaintArray(R.start,R.end,V,e[C],m),y=!0}}}}return y}defines(){const e=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Bc||l instanceof mc)&&e.push(...l.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Xo||l instanceof Ha||l instanceof Yl)for(let h=0;h<l.paintVertexAttributes.length;h++)e.push(l.paintVertexAttributes[h].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Bc||l instanceof mc||l instanceof Ha)for(const h of l.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof Bc||m instanceof mc||m instanceof Ha)for(const y of m.uniformNames)if(o[y]){const C=m.getBinding(e,o[y],y);l.push({name:y,property:h,binding:C})}}return l}setUniforms(e,o,l,h){for(const{name:m,property:y,binding:C}of o)this.binders[y].setUniform(C,h,l.get(y),m)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(e&&l instanceof Yl){const h=2===e.fromScale?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(l instanceof Xo||l instanceof Ha)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(const o in this.binders){const l=this.binders[o];(l instanceof Xo||l instanceof Ha||l instanceof Yl)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof Xo||o instanceof Ha||o instanceof Yl)&&o.destroy()}}}class gc{constructor(e,o,l=(()=>!0)){this.programConfigurations={};for(const h of e)this.programConfigurations[h.id]=new Dl(h,o,l);this.needsUpload=!1,this._featureMap=new Vu,this._bufferOffset=0}populatePaintArrays(e,o,l,h,m,y){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(e,o,h,m,y);void 0!==o.id&&this._featureMap.add(o.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,l,h){for(const m of l)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,o,m,h)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const jm={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Sl(s,e){return jm[s]||[s.replace(`${e}-`,"").replace(/-/g,"_")]}const Nc={"line-pattern":{source:or,composite:or},"fill-pattern":{source:or,composite:or},"fill-extrusion-pattern":{source:or,composite:or},"line-dasharray":{source:kr,composite:kr}},Kf={color:{source:Zr,composite:Lo},number:{source:Rs,composite:Zr}};function Qf(s,e,o){const l=Nc[s];return l&&l[o]||Kf[e][o]}si("ConstantBinder",Bc),si("CrossFadedConstantBinder",mc),si("SourceExpressionBinder",Xo),si("CrossFadedCompositeBinder",Yl),si("CompositeExpressionBinder",Ha),si("ProgramConfiguration",Dl,{omit:["_buffers"]}),si("ProgramConfigurationSet",gc);const $u="-transition";class Za extends nn{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new Ye(o.layout)),o.paint)){this._transitionablePaint=new He(o.paint);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ct(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,l={}){null!=o&&this._validate(ru,`layers.${this.id}.layout.${e}`,e,o,l)||("visibility"!==e?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return Ln(e,$u)?this._transitionablePaint.getTransition(e.slice(0,-$u.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,l={}){if(null!=o&&this._validate(xl,`layers.${this.id}.paint.${e}`,e,o,l))return!1;if(Ln(e,$u))return this._transitionablePaint.setTransition(e.slice(0,-$u.length),o||void 0),!1;{const h=this._transitionablePaint._values[e],m="cross-faded-data-driven"===h.property.specification["property-type"],y=h.value.isDataDriven(),C=h.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const D=this._transitionablePaint._values[e].value;return D.isDataDriven()||y||m||this._handleOverridablePaintPropertyUpdate(e,C,D)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,o,l){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),On(e,(o,l)=>!(void 0===o||"layout"===l&&!Object.keys(o).length||"paint"===l&&!Object.keys(o).length))}_validate(e,o,l,h,m={}){return(!m||!1!==m.validate)&&dc(this,e.call(ra,{key:o,layerType:this.type,objectKey:l,value:h,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof nt&&ft(o.property.specification)&&("source"===o.value.kind||"composite"===o.value.kind)&&o.value.isStateDependent)return!0}return!1}}const Gm=Gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:$m}=Gm;class ho{constructor(e=[]){this.segments=e}prepareSegment(e,o,l,h){let m=this.segments[this.segments.length-1];return e>ho.MAX_VERTEX_ARRAY_LENGTH&&fi(`Max vertices per segment is ${ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!m||m.vertexLength+e>ho.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},void 0!==h&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,l,h){return new ho([{vertexOffset:e,primitiveOffset:o,vertexLength:l,primitiveLength:h,vaos:{},sortKey:0}])}}ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,si("SegmentVector",ho);var Lr=8192;const fh=Math.pow(2,14)-1,Xf=-fh-1;function _c(s){const e=Lr/s.extent,o=s.loadGeometry();for(let l=0;l<o.length;l++){const h=o[l];for(let m=0;m<h.length;m++){const y=h[m],C=Math.round(y.x*e),D=Math.round(y.y*e);y.x=Ft(C,Xf,fh),y.y=Ft(D,Xf,fh),(C<y.x||C>y.x+1||D<y.y||D>y.y+1)&&fi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function zc(s,e){return{type:s.type,id:s.id,properties:s.properties,geometry:e?_c(s):[]}}function Hu(s,e,o,l,h){s.emplaceBack(2*e+(l+1)/2,2*o+(h+1)/2)}class yc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Si,this.indexArray=new Jr,this.segments=new ho,this.programConfigurations=new gc(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){const h=this.layers[0],m=[];let y=null;"circle"===h.type&&(y=h.layout.get("circle-sort-key"));for(const{feature:C,id:D,index:R,sourceLayerIndex:V}of e){const H=this.layers[0]._featureFilter.needGeometry,re=zc(C,H);if(!this.layers[0]._featureFilter.filter(new we(this.zoom),re,l))continue;const de=y?y.evaluate(re,{},l):void 0,Me={id:D,properties:C.properties,type:C.type,sourceLayerIndex:V,index:R,geometry:H?re.geometry:_c(C),patterns:{},sortKey:de};m.push(Me)}y&&m.sort((C,D)=>C.sortKey-D.sortKey);for(const C of m){const{geometry:D,index:R,sourceLayerIndex:V}=C,H=e[R].feature;this.addFeature(C,D,R,l),o.featureIndex.insert(H,D,R,V,this.index)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$m),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,h){for(const m of o)for(const y of m){const C=y.x,D=y.y;if(C<0||C>=Lr||D<0||D>=Lr)continue;const R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),V=R.vertexLength;Hu(this.layoutVertexArray,C,D,-1,-1),Hu(this.layoutVertexArray,C,D,1,-1),Hu(this.layoutVertexArray,C,D,1,1),Hu(this.layoutVertexArray,C,D,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),R.vertexLength+=4,R.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},h)}}function ph(s,e){for(let o=0;o<s.length;o++)if(Kl(e,s[o]))return!0;for(let o=0;o<e.length;o++)if(Kl(s,e[o]))return!0;return!!Zu(s,e)}function sl(s,e,o){return!!Kl(s,e)||!!tp(e,s,o)}function Vc(s,e){if(1===s.length)return Zm(e,s[0]);for(let o=0;o<e.length;o++){const l=e[o];for(let h=0;h<l.length;h++)if(Kl(s,l[h]))return!0}for(let o=0;o<s.length;o++)if(Zm(e,s[o]))return!0;for(let o=0;o<e.length;o++)if(Zu(s,e[o]))return!0;return!1}function Jf(s,e,o){if(s.length>1){if(Zu(s,e))return!0;for(let l=0;l<e.length;l++)if(tp(e[l],s,o))return!0}for(let l=0;l<s.length;l++)if(tp(s[l],e,o))return!0;return!1}function Zu(s,e){if(0===s.length||0===e.length)return!1;for(let o=0;o<s.length-1;o++){const l=s[o],h=s[o+1];for(let m=0;m<e.length-1;m++)if(ep(l,h,e[m],e[m+1]))return!0}return!1}function ep(s,e,o,l){return Ki(s,o,l)!==Ki(e,o,l)&&Ki(s,e,o)!==Ki(s,e,l)}function tp(s,e,o){const l=o*o;if(1===e.length)return s.distSqr(e[0])<l;for(let h=1;h<e.length;h++)if(Hm(s,e[h-1],e[h])<l)return!0;return!1}function Hm(s,e,o){const l=e.distSqr(o);if(0===l)return s.distSqr(e);const h=((s.x-e.x)*(o.x-e.x)+(s.y-e.y)*(o.y-e.y))/l;return s.distSqr(h<0?e:h>1?o:o.sub(e)._mult(h)._add(e))}function Zm(s,e){let o,l,h,m=!1;for(let y=0;y<s.length;y++){o=s[y];for(let C=0,D=o.length-1;C<o.length;D=C++)l=o[C],h=o[D],l.y>e.y!=h.y>e.y&&e.x<(h.x-l.x)*(e.y-l.y)/(h.y-l.y)+l.x&&(m=!m)}return m}function Kl(s,e){let o=!1;for(let l=0,h=s.length-1;l<s.length;h=l++){const m=s[l],y=s[h];m.y>e.y!=y.y>e.y&&e.x<(y.x-m.x)*(e.y-m.y)/(y.y-m.y)+m.x&&(o=!o)}return o}function qu(s,e,o,l,h){for(const y of s)if(e<=y.x&&o<=y.y&&l>=y.x&&h>=y.y)return!0;const m=[new ve(e,o),new ve(e,h),new ve(l,h),new ve(l,o)];if(s.length>2)for(const y of m)if(Kl(s,y))return!0;for(let y=0;y<s.length-1;y++)if(mh(s[y],s[y+1],m))return!0;return!1}function mh(s,e,o){const l=o[0],h=o[2];if(s.x<l.x&&e.x<l.x||s.x>h.x&&e.x>h.x||s.y<l.y&&e.y<l.y||s.y>h.y&&e.y>h.y)return!1;const m=Ki(s,e,o[0]);return m!==Ki(s,e,o[1])||m!==Ki(s,e,o[2])||m!==Ki(s,e,o[3])}function Wu(s,e,o){const l=e.paint.get(s).value;return"constant"===l.kind?l.value:o.programConfigurations.get(e.id).getMaxValue(s)}function gh(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function _h(s,e,o,l,h){if(!e[0]&&!e[1])return s;const m=ve.convert(e)._mult(h);"viewport"===o&&m._rotate(-l);const y=[];for(let C=0;C<s.length;C++)y.push(s[C].sub(m));return y}function np(s,e,o,l){const h=ve.convert(s)._mult(l);return"viewport"===e&&h._rotate(-o),h}si("CircleBucket",yc,{omit:["layers"]});const qm=new ut({"circle-sort-key":new ht(Qe.layout_circle["circle-sort-key"])});var Wm={paint:new ut({"circle-radius":new ht(Qe.paint_circle["circle-radius"]),"circle-color":new ht(Qe.paint_circle["circle-color"]),"circle-blur":new ht(Qe.paint_circle["circle-blur"]),"circle-opacity":new ht(Qe.paint_circle["circle-opacity"]),"circle-translate":new Je(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Je(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Je(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Je(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(Qe.paint_circle["circle-stroke-opacity"])}),layout:qm},ua="undefined"!=typeof Float32Array?Float32Array:Array;function yh(){var s=new ua(9);return ua!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Uc(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function vh(s,e,o){var l=e[0],h=e[1],m=e[2],y=e[3],C=e[4],D=e[5],R=e[6],V=e[7],H=e[8],re=e[9],de=e[10],Me=e[11],Ue=e[12],ot=e[13],wt=e[14],Rt=e[15],Ot=o[0],zt=o[1],Ht=o[2],Vt=o[3];return s[0]=Ot*l+zt*C+Ht*H+Vt*Ue,s[1]=Ot*h+zt*D+Ht*re+Vt*ot,s[2]=Ot*m+zt*R+Ht*de+Vt*wt,s[3]=Ot*y+zt*V+Ht*Me+Vt*Rt,s[4]=(Ot=o[4])*l+(zt=o[5])*C+(Ht=o[6])*H+(Vt=o[7])*Ue,s[5]=Ot*h+zt*D+Ht*re+Vt*ot,s[6]=Ot*m+zt*R+Ht*de+Vt*wt,s[7]=Ot*y+zt*V+Ht*Me+Vt*Rt,s[8]=(Ot=o[8])*l+(zt=o[9])*C+(Ht=o[10])*H+(Vt=o[11])*Ue,s[9]=Ot*h+zt*D+Ht*re+Vt*ot,s[10]=Ot*m+zt*R+Ht*de+Vt*wt,s[11]=Ot*y+zt*V+Ht*Me+Vt*Rt,s[12]=(Ot=o[12])*l+(zt=o[13])*C+(Ht=o[14])*H+(Vt=o[15])*Ue,s[13]=Ot*h+zt*D+Ht*re+Vt*ot,s[14]=Ot*m+zt*R+Ht*de+Vt*wt,s[15]=Ot*y+zt*V+Ht*Me+Vt*Rt,s}Math.hypot||(Math.hypot=function(){for(var s=0,e=arguments.length;e--;)s+=arguments[e]*arguments[e];return Math.sqrt(s)});var xh=vh;function Yu(){var s=new ua(3);return ua!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Os(s){return Math.hypot(s[0],s[1],s[2])}function jc(s,e,o){var l=new ua(3);return l[0]=s,l[1]=e,l[2]=o,l}function ip(s,e,o){return s[0]=e[0]-o[0],s[1]=e[1]-o[1],s[2]=e[2]-o[2],s}function Ku(s,e,o){return s[0]=e[0]*o[0],s[1]=e[1]*o[1],s[2]=e[2]*o[2],s}function bh(s,e,o,l){return s[0]=e[0]+o[0]*l,s[1]=e[1]+o[1]*l,s[2]=e[2]+o[2]*l,s}function rp(s,e){var o=e[0],l=e[1],h=e[2],m=o*o+l*l+h*h;return m>0&&(m=1/Math.sqrt(m)),s[0]=e[0]*m,s[1]=e[1]*m,s[2]=e[2]*m,s}function sp(s,e,o){var l=o[0],h=o[1],m=o[2],y=e[0],C=e[1],D=e[2],R=h*D-m*C,V=m*y-l*D,H=l*C-h*y,re=h*H-m*V,de=m*R-l*H,Me=l*V-h*R,Ue=2*o[3];return V*=Ue,H*=Ue,de*=2,Me*=2,s[0]=y+(R*=Ue)+(re*=2),s[1]=C+V+de,s[2]=D+H+Me,s}var lu,Ym=ip,Km=Ku,py=Os;function Qu(s,e,o){var l=e[0],h=e[1],m=e[2],y=e[3];return s[0]=o[0]*l+o[4]*h+o[8]*m+o[12]*y,s[1]=o[1]*l+o[5]*h+o[9]*m+o[13]*y,s[2]=o[2]*l+o[6]*h+o[10]*m+o[14]*y,s[3]=o[3]*l+o[7]*h+o[11]*m+o[15]*y,s}function vc(){var s=new ua(4);return ua!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Bo(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function Xu(s,e,o){o*=.5;var l=e[0],h=e[1],m=e[2],y=e[3],C=Math.sin(o),D=Math.cos(o);return s[0]=l*D+y*C,s[1]=h*D+m*C,s[2]=m*D-h*C,s[3]=y*D-l*C,s}function op(s,e,o){const l=Qu([],[s.x,s.y,e,1],o);return new ve(l[0]/l[3],l[1]/l[3])}Yu(),lu=new ua(4),ua!=Float32Array&&(lu[0]=0,lu[1]=0,lu[2]=0,lu[3]=0),Yu(),jc(1,0,0),jc(0,1,0),vc(),vc(),yh();const wh=jc(0,0,0),No=jc(0,0,1);function cu(s,e){const o=Yu();return wh[2]=e,s.intersectsPlane(wh,No,o),new ve(o[0],o[1])}class Ju extends yc{}function Ch(s,{width:e,height:o},l,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*o*l)throw new RangeError("mismatched image size")}else h=new Uint8Array(e*o*l);return s.width=e,s.height=o,s.data=h,s}function ap(s,{width:e,height:o},l){if(e===s.width&&o===s.height)return;const h=Ch({},{width:e,height:o},l);ed(s,h,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,e),height:Math.min(s.height,o)},l),s.width=e,s.height=o,s.data=h.data}function ed(s,e,o,l,h,m){if(0===h.width||0===h.height)return e;if(h.width>s.width||h.height>s.height||o.x>s.width-h.width||o.y>s.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||l.x>e.width-h.width||l.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=s.data,C=e.data;for(let D=0;D<h.height;D++){const R=((o.y+D)*s.width+o.x)*m,V=((l.y+D)*e.width+l.x)*m;for(let H=0;H<h.width*m;H++)C[V+H]=y[R+H]}return e}si("HeatmapBucket",Ju,{omit:["layers"]});class Ql{constructor(e,o){Ch(this,e,1,o)}resize(e){ap(this,e,1)}clone(){return new Ql({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,h,m){ed(e,o,l,h,m,1)}}class da{constructor(e,o){Ch(this,e,4,o)}resize(e){ap(this,e,4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,h,m){ed(e,o,l,h,m,4)}}si("AlphaImage",Ql),si("RGBAImage",da);var Qm={paint:new ut({"heatmap-radius":new ht(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Je(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vn(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Je(Qe.paint_heatmap["heatmap-opacity"])})};function td(s){const e={},o=s.resolution||256,l=s.clips?s.clips.length:1,h=s.image||new da({width:o,height:l}),m=(y,C,D)=>{e[s.evaluationKey]=D;const R=s.expression.evaluate(e);h.data[y+C+0]=Math.floor(255*R.r/R.a),h.data[y+C+1]=Math.floor(255*R.g/R.a),h.data[y+C+2]=Math.floor(255*R.b/R.a),h.data[y+C+3]=Math.floor(255*R.a)};if(s.clips)for(let y=0,C=0;y<l;++y,C+=4*o)for(let D=0,R=0;D<o;D++,R+=4){const V=D/(o-1),{start:H,end:re}=s.clips[y];m(C,R,H*(1-V)+re*V)}else for(let y=0,C=0;y<o;y++,C+=4)m(0,C,y/(o-1));return h}var Xm={paint:new ut({"hillshade-illumination-direction":new Je(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Je(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Je(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Je(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Je(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Je(Qe.paint_hillshade["hillshade-accent-color"])})};const Jm=Gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:eg}=Jm;var nd=uu,Eh=uu;function uu(s,e,o){o=o||2;var l,h,m,y,C,D,R,V=e&&e.length,H=V?e[0]*o:s.length,re=lp(s,0,H,o,!0),de=[];if(!re||re.next===re.prev)return de;if(V&&(re=function(Ue,ot,wt,Rt){var Ot,zt,Ht,Vt=[];for(Ot=0,zt=ot.length;Ot<zt;Ot++)(Ht=lp(Ue,ot[Ot]*Rt,Ot<zt-1?ot[Ot+1]*Rt:Ue.length,Rt,!1))===Ht.next&&(Ht.steiner=!0),Vt.push(og(Ht));for(Vt.sort(ig),Ot=0;Ot<Vt.length;Ot++)rg(Vt[Ot],wt),wt=xc(wt,wt.next);return wt}(s,e,re,o)),s.length>80*o){l=m=s[0],h=y=s[1];for(var Me=o;Me<H;Me+=o)(C=s[Me])<l&&(l=C),(D=s[Me+1])<h&&(h=D),C>m&&(m=C),D>y&&(y=D);R=0!==(R=Math.max(m-l,y-h))?1/R:0}return Gc(re,de,o,l,h,R),de}function lp(s,e,o,l,h){var m,y;if(h===Ba(s,e,o,l)>0)for(m=e;m<o;m+=l)y=up(m,s[m],s[m+1],y);else for(m=o-l;m>=e;m-=l)y=up(m,s[m],s[m+1],y);return y&&rd(y,y.next)&&(hu(y),y=y.next),y}function xc(s,e){if(!s)return s;e||(e=s);var o,l=s;do{if(o=!1,l.steiner||!rd(l,l.next)&&0!==As(l.prev,l,l.next))l=l.next;else{if(hu(l),(l=e=l.prev)===l.next)break;o=!0}}while(o||l!==e);return e}function Gc(s,e,o,l,h,m,y){if(s){!y&&m&&function(V,H,re,de){var Me=V;do{null===Me.z&&(Me.z=Ah(Me.x,Me.y,H,re,de)),Me.prevZ=Me.prev,Me.nextZ=Me.next,Me=Me.next}while(Me!==V);Me.prevZ.nextZ=null,Me.prevZ=null,function(Ue){var ot,wt,Rt,Ot,zt,Ht,Vt,En,Fn=1;do{for(wt=Ue,Ue=null,zt=null,Ht=0;wt;){for(Ht++,Rt=wt,Vt=0,ot=0;ot<Fn&&(Vt++,Rt=Rt.nextZ);ot++);for(En=Fn;Vt>0||En>0&&Rt;)0!==Vt&&(0===En||!Rt||wt.z<=Rt.z)?(Ot=wt,wt=wt.nextZ,Vt--):(Ot=Rt,Rt=Rt.nextZ,En--),zt?zt.nextZ=Ot:Ue=Ot,Ot.prevZ=zt,zt=Ot;wt=Rt}zt.nextZ=null,Fn*=2}while(Ht>1)}(Me)}(s,l,h,m);for(var C,D,R=s;s.prev!==s.next;)if(C=s.prev,D=s.next,m?tg(s,l,h,m):id(s))e.push(C.i/o),e.push(s.i/o),e.push(D.i/o),hu(s),s=D.next,R=D.next;else if((s=D)===R){y?1===y?Gc(s=ng(xc(s),e,o),e,o,l,h,m,2):2===y&&$c(s,e,o,l,h,m):Gc(xc(s),e,o,l,h,m,1);break}}}function id(s){var e=s.prev,o=s,l=s.next;if(As(e,o,l)>=0)return!1;for(var h=s.next.next;h!==s.prev;){if(Ml(e.x,e.y,o.x,o.y,l.x,l.y,h.x,h.y)&&As(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function tg(s,e,o,l){var h=s.prev,m=s,y=s.next;if(As(h,m,y)>=0)return!1;for(var C=h.x>m.x?h.x>y.x?h.x:y.x:m.x>y.x?m.x:y.x,D=h.y>m.y?h.y>y.y?h.y:y.y:m.y>y.y?m.y:y.y,R=Ah(h.x<m.x?h.x<y.x?h.x:y.x:m.x<y.x?m.x:y.x,h.y<m.y?h.y<y.y?h.y:y.y:m.y<y.y?m.y:y.y,e,o,l),V=Ah(C,D,e,o,l),H=s.prevZ,re=s.nextZ;H&&H.z>=R&&re&&re.z<=V;){if(H!==s.prev&&H!==s.next&&Ml(h.x,h.y,m.x,m.y,y.x,y.y,H.x,H.y)&&As(H.prev,H,H.next)>=0||(H=H.prevZ,re!==s.prev&&re!==s.next&&Ml(h.x,h.y,m.x,m.y,y.x,y.y,re.x,re.y)&&As(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;H&&H.z>=R;){if(H!==s.prev&&H!==s.next&&Ml(h.x,h.y,m.x,m.y,y.x,y.y,H.x,H.y)&&As(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;re&&re.z<=V;){if(re!==s.prev&&re!==s.next&&Ml(h.x,h.y,m.x,m.y,y.x,y.y,re.x,re.y)&&As(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function ng(s,e,o){var l=s;do{var h=l.prev,m=l.next.next;!rd(h,m)&&cp(h,l,l.next,m)&&Hc(h,m)&&Hc(m,h)&&(e.push(h.i/o),e.push(l.i/o),e.push(m.i/o),hu(l),hu(l.next),l=s=m),l=l.next}while(l!==s);return xc(l)}function $c(s,e,o,l,h,m){var y=s;do{for(var C=y.next.next;C!==y.prev;){if(y.i!==C.i&&La(y,C)){var D=Sh(y,C);return y=xc(y,y.next),D=xc(D,D.next),Gc(y,e,o,l,h,m),void Gc(D,e,o,l,h,m)}C=C.next}y=y.next}while(y!==s)}function ig(s,e){return s.x-e.x}function rg(s,e){if(e=function(l,h){var m,y=h,C=l.x,D=l.y,R=-1/0;do{if(D<=y.y&&D>=y.next.y&&y.next.y!==y.y){var V=y.x+(D-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(V<=C&&V>R){if(R=V,V===C){if(D===y.y)return y;if(D===y.next.y)return y.next}m=y.x<y.next.x?y:y.next}}y=y.next}while(y!==h);if(!m)return null;if(C===R)return m;var H,re=m,de=m.x,Me=m.y,Ue=1/0;y=m;do{C>=y.x&&y.x>=de&&C!==y.x&&Ml(D<Me?C:R,D,de,Me,D<Me?R:C,D,y.x,y.y)&&(H=Math.abs(D-y.y)/(C-y.x),Hc(y,l)&&(H<Ue||H===Ue&&(y.x>m.x||y.x===m.x&&sg(m,y)))&&(m=y,Ue=H)),y=y.next}while(y!==re);return m}(s,e)){var o=Sh(e,s);xc(e,e.next),xc(o,o.next)}}function sg(s,e){return As(s.prev,s,e.prev)<0&&As(e.next,s,s.next)<0}function Ah(s,e,o,l,h){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-o)*h)|s<<8))|s<<4))|s<<2))|s<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*h)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function og(s){var e=s,o=s;do{(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next}while(e!==s);return o}function Ml(s,e,o,l,h,m,y,C){return(h-y)*(e-C)-(s-y)*(m-C)>=0&&(s-y)*(l-C)-(o-y)*(e-C)>=0&&(o-y)*(m-C)-(h-y)*(l-C)>=0}function La(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!function(o,l){var h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==l.i&&h.next.i!==l.i&&cp(h,h.next,o,l))return!0;h=h.next}while(h!==o);return!1}(s,e)&&(Hc(s,e)&&Hc(e,s)&&function(o,l){var h=o,m=!1,y=(o.x+l.x)/2,C=(o.y+l.y)/2;do{h.y>C!=h.next.y>C&&h.next.y!==h.y&&y<(h.next.x-h.x)*(C-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next}while(h!==o);return m}(s,e)&&(As(s.prev,s,e.prev)||As(s,e.prev,e))||rd(s,e)&&As(s.prev,s,s.next)>0&&As(e.prev,e,e.next)>0)}function As(s,e,o){return(e.y-s.y)*(o.x-e.x)-(e.x-s.x)*(o.y-e.y)}function rd(s,e){return s.x===e.x&&s.y===e.y}function cp(s,e,o,l){var h=Dh(As(s,e,o)),m=Dh(As(s,e,l)),y=Dh(As(o,l,s)),C=Dh(As(o,l,e));return h!==m&&y!==C||!(0!==h||!du(s,o,e))||!(0!==m||!du(s,l,e))||!(0!==y||!du(o,s,l))||!(0!==C||!du(o,e,l))}function du(s,e,o){return e.x<=Math.max(s.x,o.x)&&e.x>=Math.min(s.x,o.x)&&e.y<=Math.max(s.y,o.y)&&e.y>=Math.min(s.y,o.y)}function Dh(s){return s>0?1:s<0?-1:0}function Hc(s,e){return As(s.prev,s,s.next)<0?As(s,e,s.next)>=0&&As(s,s.prev,e)>=0:As(s,e,s.prev)<0||As(s,s.next,e)<0}function Sh(s,e){var o=new Xl(s.i,s.x,s.y),l=new Xl(e.i,e.x,e.y),h=s.next,m=e.prev;return s.next=e,e.prev=s,o.next=h,h.prev=o,l.next=o,o.prev=l,m.next=l,l.prev=m,l}function up(s,e,o,l){var h=new Xl(s,e,o);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function hu(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Xl(s,e,o){this.i=s,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ba(s,e,o,l){for(var h=0,m=e,y=o-l;m<o;m+=l)h+=(s[y]-s[m])*(s[m+1]+s[y+1]),y=m;return h}function my(s,e,o,l,h){ag(s,e,o||0,l||s.length-1,h||gy)}function ag(s,e,o,l,h){for(;l>o;){if(l-o>600){var m=l-o+1,y=e-o+1,C=Math.log(m),D=.5*Math.exp(2*C/3),R=.5*Math.sqrt(C*D*(m-D)/m)*(y-m/2<0?-1:1);ag(s,e,Math.max(o,Math.floor(e-y*D/m+R)),Math.min(l,Math.floor(e+(m-y)*D/m+R)),h)}var V=s[e],H=o,re=l;for(Zc(s,o,e),h(s[l],V)>0&&Zc(s,o,l);H<re;){for(Zc(s,H,re),H++,re--;h(s[H],V)<0;)H++;for(;h(s[re],V)>0;)re--}0===h(s[o],V)?Zc(s,o,re):Zc(s,++re,l),re<=e&&(o=re+1),e<=re&&(l=re-1)}}function Zc(s,e,o){var l=s[e];s[e]=s[o],s[o]=l}function gy(s,e){return s<e?-1:s>e?1:0}function Na(s,e){const o=s.length;if(o<=1)return[s];const l=[];let h,m;for(let y=0;y<o;y++){const C=rn(s[y]);0!==C&&(s[y].area=Math.abs(C),void 0===m&&(m=C<0),m===C<0?(h&&l.push(h),h=[s[y]]):h.push(s[y]))}if(h&&l.push(h),e>1)for(let y=0;y<l.length;y++)l[y].length<=e||(my(l[y],e,1,l[y].length-1,Mh),l[y]=l[y].slice(0,e));return l}function Mh(s,e){return e.area-s.area}function fu(s,e,o){const l=o.patternDependencies;let h=!1;for(const m of e){const y=m.paint.get(`${s}-pattern`);y.isConstant()||(h=!0);const C=y.constantOr(null);C&&(h=!0,l[C.to]=!0,l[C.from]=!0)}return h}function Th(s,e,o,l,h){const m=h.patternDependencies;for(const y of e){const C=y.paint.get(`${s}-pattern`).value;if("constant"!==C.kind){let D=C.evaluate({zoom:l-1},o,{},h.availableImages),R=C.evaluate({zoom:l},o,{},h.availableImages),V=C.evaluate({zoom:l+1},o,{},h.availableImages);D=D&&D.name?D.name:D,R=R&&R.name?R.name:R,V=V&&V.name?V.name:V,m[D]=!0,m[R]=!0,m[V]=!0,o.patterns[y.id]={min:D,mid:R,max:V}}}return o}uu.deviation=function(s,e,o,l){var h=e&&e.length,m=Math.abs(Ba(s,0,h?e[0]*o:s.length,o));if(h)for(var y=0,C=e.length;y<C;y++)m-=Math.abs(Ba(s,e[y]*o,y<C-1?e[y+1]*o:s.length,o));var D=0;for(y=0;y<l.length;y+=3){var R=l[y]*o,V=l[y+1]*o,H=l[y+2]*o;D+=Math.abs((s[R]-s[H])*(s[V+1]-s[R+1])-(s[R]-s[V])*(s[H+1]-s[R+1]))}return 0===m&&0===D?0:Math.abs((D-m)/m)},uu.flatten=function(s){for(var e=s[0][0].length,o={vertices:[],holes:[],dimensions:e},l=0,h=0;h<s.length;h++){for(var m=0;m<s[h].length;m++)for(var y=0;y<e;y++)o.vertices.push(s[h][m][y]);h>0&&o.holes.push(l+=s[h-1].length)}return o},nd.default=Eh;class sd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Si,this.indexArray=new Jr,this.indexArray2=new ya,this.programConfigurations=new gc(e.layers,e.zoom),this.segments=new ho,this.segments2=new ho,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){this.hasPattern=fu("fill",this.layers,o);const h=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:y,id:C,index:D,sourceLayerIndex:R}of e){const V=this.layers[0]._featureFilter.needGeometry,H=zc(y,V);if(!this.layers[0]._featureFilter.filter(new we(this.zoom),H,l))continue;const re=h?h.evaluate(H,{},l,o.availableImages):void 0,de={id:C,properties:y.properties,type:y.type,sourceLayerIndex:R,index:D,geometry:V?H.geometry:_c(y),patterns:{},sortKey:re};m.push(de)}h&&m.sort((y,C)=>y.sortKey-C.sortKey);for(const y of m){const{geometry:C,index:D,sourceLayerIndex:R}=y;if(this.hasPattern){const V=Th("fill",this.layers,y,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(y,C,D,l,{});o.featureIndex.insert(e[D].feature,C,D,R,this.index)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}addFeatures(e,o,l){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,o,l)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,eg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,l,h,m){for(const y of Na(o,500)){let C=0;for(const de of y)C+=de.length;const D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),R=D.vertexLength,V=[],H=[];for(const de of y){if(0===de.length)continue;de!==y[0]&&H.push(V.length/2);const Me=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Ue=Me.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Ue+de.length-1,Ue),V.push(de[0].x),V.push(de[0].y);for(let ot=1;ot<de.length;ot++)this.layoutVertexArray.emplaceBack(de[ot].x,de[ot].y),this.indexArray2.emplaceBack(Ue+ot-1,Ue+ot),V.push(de[ot].x),V.push(de[ot].y);Me.vertexLength+=de.length,Me.primitiveLength+=de.length}const re=nd(V,H);for(let de=0;de<re.length;de+=3)this.indexArray.emplaceBack(R+re[de],R+re[de+1],R+re[de+2]);D.vertexLength+=C,D.primitiveLength+=re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,m,h)}}si("FillBucket",sd,{omit:["layers","patternFeatures"]});const pu=new ut({"fill-sort-key":new ht(Qe.layout_fill["fill-sort-key"])});var dp={paint:new ut({"fill-antialias":new Je(Qe.paint_fill["fill-antialias"]),"fill-opacity":new ht(Qe.paint_fill["fill-opacity"]),"fill-color":new ht(Qe.paint_fill["fill-color"]),"fill-outline-color":new ht(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Je(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Je(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ln(Qe.paint_fill["fill-pattern"])}),layout:pu};const hp=Gn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ih=Gn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Ph}=hp;var Fh=mu;function mu(s,e,o,l,h){this.properties={},this.extent=o,this.type=0,this._pbf=s,this._geometry=-1,this._keys=l,this._values=h,s.readFields(qc,this,e)}function qc(s,e,o){1==s?e.id=o.readVarint():2==s?function(l,h){for(var m=l.readVarint()+l.pos;l.pos<m;){var y=h._keys[l.readVarint()],C=h._values[l.readVarint()];h.properties[y]=C}}(o,e):3==s?e.type=o.readVarint():4==s&&(e._geometry=o.pos)}function Rh(s){for(var e,o,l=0,h=0,m=s.length,y=m-1;h<m;y=h++)l+=((o=s[y]).x-(e=s[h]).x)*(e.y+o.y);return l}mu.types=["Unknown","Point","LineString","Polygon"],mu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var e,o=s.readVarint()+s.pos,l=1,h=0,m=0,y=0,C=[];s.pos<o;){if(h<=0){var D=s.readVarint();l=7&D,h=D>>3}if(h--,1===l||2===l)m+=s.readSVarint(),y+=s.readSVarint(),1===l&&(e&&C.push(e),e=[]),e.push(new ve(m,y));else{if(7!==l)throw new Error("unknown command "+l);e&&e.push(e[0].clone())}}return e&&C.push(e),C},mu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var e=s.readVarint()+s.pos,o=1,l=0,h=0,m=0,y=1/0,C=-1/0,D=1/0,R=-1/0;s.pos<e;){if(l<=0){var V=s.readVarint();o=7&V,l=V>>3}if(l--,1===o||2===o)(h+=s.readSVarint())<y&&(y=h),h>C&&(C=h),(m+=s.readSVarint())<D&&(D=m),m>R&&(R=m);else if(7!==o)throw new Error("unknown command "+o)}return[y,D,C,R]},mu.prototype.toGeoJSON=function(s,e,o){var l,h,m=this.extent*Math.pow(2,o),y=this.extent*s,C=this.extent*e,D=this.loadGeometry(),R=mu.types[this.type];function V(de){for(var Me=0;Me<de.length;Me++){var Ue=de[Me];de[Me]=[360*(Ue.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ue.y+C)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(l=0;l<D.length;l++)H[l]=D[l][0];V(D=H);break;case 2:for(l=0;l<D.length;l++)V(D[l]);break;case 3:for(D=function(de){var Me=de.length;if(Me<=1)return[de];for(var Ue,ot,wt=[],Rt=0;Rt<Me;Rt++){var Ot=Rh(de[Rt]);0!==Ot&&(void 0===ot&&(ot=Ot<0),ot===Ot<0?(Ue&&wt.push(Ue),Ue=[de[Rt]]):Ue.push(de[Rt]))}return Ue&&wt.push(Ue),wt}(D),l=0;l<D.length;l++)for(h=0;h<D[l].length;h++)V(D[l][h])}1===D.length?D=D[0]:R="Multi"+R;var re={type:"Feature",geometry:{type:R,coordinates:D},properties:this.properties};return"id"in this&&(re.id=this.id),re};var Oh=fp;function fp(s,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(kh,this,e),this.length=this._features.length}function kh(s,e,o){15===s?e.version=o.readVarint():1===s?e.name=o.readString():5===s?e.extent=o.readVarint():2===s?e._features.push(o.pos):3===s?e._keys.push(o.readString()):4===s&&e._values.push(function(l){for(var h=null,m=l.readVarint()+l.pos;l.pos<m;){var y=l.readVarint()>>3;h=1===y?l.readString():2===y?l.readFloat():3===y?l.readDouble():4===y?l.readVarint64():5===y?l.readVarint():6===y?l.readSVarint():7===y?l.readBoolean():null}return h}(o))}function lg(s,e,o){if(3===s){var l=new Oh(o,o.readVarint()+o.pos);l.length&&(e[l.name]=l)}}fp.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var e=this._pbf.readVarint()+this._pbf.pos;return new Fh(this._pbf,e,this.extent,this._keys,this._values)};var bc={VectorTile:function(s,e){this.layers=s.readFields(lg,{},e)},VectorTileFeature:Fh,VectorTileLayer:Oh};const cg=bc.VectorTileFeature.types,ug=Math.pow(2,13);function gu(s,e,o,l,h,m,y,C){s.emplaceBack((e<<1)+y,(o<<1)+m,(Math.floor(l*ug)<<1)+h,Math.round(C))}class pp{constructor(){this.acc=new ve(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ve(e.x,e.y),this.max=new ve(e.x,e.y))}append(e,o){this.currentPolyCount.edges++,this.acc._add(e);let l=!!this.borders;const h=this.min,m=this.max;e.x<h.x?(h.x=e.x,l=!0):e.x>m.x&&(m.x=e.x,l=!0),e.y<h.y?(h.y=e.y,l=!0):e.y>m.y&&(m.y=e.y,l=!0),((0===e.x||e.x===Lr)&&e.x===o.x)!=((0===e.y||e.y===Lr)&&e.y===o.y)&&this.processBorderOverlap(e,o),l&&this.checkBorderIntersection(e,o)}checkBorderIntersection(e,o){o.x<0!=e.x<0&&this.addBorderIntersection(0,Nt(o.y,e.y,(0-o.x)/(e.x-o.x))),o.x>Lr!=e.x>Lr&&this.addBorderIntersection(1,Nt(o.y,e.y,(Lr-o.x)/(e.x-o.x))),o.y<0!=e.y<0&&this.addBorderIntersection(2,Nt(o.x,e.x,(0-o.y)/(e.y-o.y))),o.y>Lr!=e.y>Lr&&this.addBorderIntersection(3,Nt(o.x,e.x,(Lr-o.y)/(e.y-o.y)))}addBorderIntersection(e,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[e];o<l[0]&&(l[0]=o),o>l[1]&&(l[1]=o)}processBorderOverlap(e,o){if(e.x===o.x){if(e.y===o.y)return;const l=0===e.x?0:1;this.addBorderIntersection(l,o.y),this.addBorderIntersection(l,e.y)}else{const l=0===e.y?2:3;this.addBorderIntersection(l,o.x),this.addBorderIntersection(l,e.x)}}centroid(){const e=this.polyCount.reduce((o,l)=>o+l.edges,0);return 0!==e?this.acc.div(e)._round():new ve(0,0)}span(){return new ve(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,o)=>e+ +(o[0]!==Number.MAX_VALUE),0)}}class od{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Er,this.centroidVertexArray=new Oc,this.indexArray=new Jr,this.programConfigurations=new gc(e.layers,e.zoom),this.segments=new ho,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=e.enableTerrain}populate(e,o,l){this.features=[],this.hasPattern=fu("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(h){const m=Math.exp(Math.PI*(1-h.y/(1<<h.z)*2));return 80150034*m/(m*m+1)/Lr/(1<<h.z)}(l);for(const{feature:h,id:m,index:y,sourceLayerIndex:C}of e){const D=this.layers[0]._featureFilter.needGeometry,R=zc(h,D);if(!this.layers[0]._featureFilter.filter(new we(this.zoom),R,l))continue;const V={id:m,sourceLayerIndex:C,index:y,geometry:D?R.geometry:_c(h),properties:h.properties,type:h.type,patterns:{}},H=this.layoutVertexArray.length;this.hasPattern?this.features.push(Th("fill-extrusion",this.layers,V,this.zoom,o)):this.addFeature(V,V.geometry,y,l,{}),o.featureIndex.insert(h,V.geometry,y,C,this.index,H)}this.sortBorders()}addFeatures(e,o,l){for(const h of this.features){const{geometry:m}=h;this.addFeature(h,m,h.index,o,l)}this.sortBorders()}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ph),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ih.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,h,m){const y=this.enableTerrain?new pp:null;for(const D of Na(o,500)){let R=0,V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===D.length||(C=D[0]).every(Ue=>Ue.x<=0)||C.every(Ue=>Ue.x>=Lr)||C.every(Ue=>Ue.y<=0)||C.every(Ue=>Ue.y>=Lr))continue;for(let Ue=0;Ue<D.length;Ue++){const ot=D[Ue];if(0===ot.length)continue;R+=ot.length;let wt=0;y&&y.startRing(ot[0]);for(let Rt=0;Rt<ot.length;Rt++){const Ot=ot[Rt];if(Rt>=1){const zt=ot[Rt-1];if(!Lh(Ot,zt)){y&&y.append(Ot,zt),V.vertexLength+4>ho.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ht=Ot.sub(zt)._perp(),Vt=Ht.x/(Math.abs(Ht.x)+Math.abs(Ht.y)),En=Ht.y>0?1:0,Fn=zt.dist(Ot);wt+Fn>32768&&(wt=0),gu(this.layoutVertexArray,Ot.x,Ot.y,Vt,En,0,0,wt),gu(this.layoutVertexArray,Ot.x,Ot.y,Vt,En,0,1,wt),wt+=Fn,gu(this.layoutVertexArray,zt.x,zt.y,Vt,En,0,0,wt),gu(this.layoutVertexArray,zt.x,zt.y,Vt,En,0,1,wt);const Cn=V.vertexLength;this.indexArray.emplaceBack(Cn,Cn+2,Cn+1),this.indexArray.emplaceBack(Cn+1,Cn+2,Cn+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+R>ho.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),"Polygon"!==cg[e.type])continue;const H=[],re=[],de=V.vertexLength;for(let Ue=0;Ue<D.length;Ue++){const ot=D[Ue];if(0!==ot.length){ot!==D[0]&&re.push(H.length/2);for(let wt=0;wt<ot.length;wt++){const Rt=ot[wt];gu(this.layoutVertexArray,Rt.x,Rt.y,0,0,1,1,0),H.push(Rt.x),H.push(Rt.y),y&&y.currentPolyCount.top++}}}const Me=nd(H,re);for(let Ue=0;Ue<Me.length;Ue+=3)this.indexArray.emplaceBack(de+Me[Ue],de+Me[Ue+2],de+Me[Ue+1]);V.primitiveLength+=Me.length/3,V.vertexLength+=R}var C;if(y&&y.polyCount.length>0){if(y.borders){y.vertexArrayOffset=this.centroidVertexArray.length;const D=y.borders,R=this.featuresOnBorder.push(y)-1;for(let V=0;V<4;V++)D[V][0]!==Number.MAX_VALUE&&this.borders[V].push(R)}this.encodeCentroid(y.borders?void 0:y.centroid(),y)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,m,h)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((o,l)=>this.featuresOnBorder[o].borders[e][0]-this.featuresOnBorder[l].borders[e][0])}encodeCentroid(e,o,l=!0){let h,m;if(e)if(0!==e.y){const C=o.span()._mult(this.tileToMeter);h=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(C.x/10)),m=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else h=Math.ceil(7*(e.x+450)),m=0;else h=0,m=+l;let y=l?this.centroidVertexArray.length:o.vertexArrayOffset;for(const C of o.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let D=0;D<2*C.edges;D++)this.centroidVertexArray.emplace(y++,0,m),this.centroidVertexArray.emplace(y++,h,m);for(let D=0;D<C.top;D++)this.centroidVertexArray.emplace(y++,h,m)}}}function Lh(s,e){return s.x===e.x&&(s.x<0||s.x>Lr)||s.y===e.y&&(s.y<0||s.y>Lr)}si("FillExtrusionBucket",od,{omit:["layers","features"]}),si("PartMetadata",pp);var mp={paint:new ut({"fill-extrusion-opacity":new Je(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Je(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Je(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ln(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Je(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function wc(s,e){return s.x*e.x+s.y*e.y}function gp(s,e){if(1===s.length){let o=0;const l=e[o++];let h;for(;!h||l.equals(h);)if(h=e[o++],!h)return 1/0;for(;o<e.length;o++){const m=e[o],y=s[0],C=h.sub(l),D=m.sub(l),R=y.sub(l),V=wc(C,C),H=wc(C,D),re=wc(D,D),de=wc(R,C),Me=wc(R,D),Ue=V*re-H*H,ot=(re*de-H*Me)/Ue,wt=(V*Me-H*de)/Ue,Rt=l.z*(1-ot-wt)+h.z*ot+m.z*wt;if(isFinite(Rt))return Rt}return 1/0}{let o=1/0;for(const l of e)o=Math.min(o,l.z);return o}}function _p(s){const e=new ve(s[0],s[1]);return e.z=s[2],e}function yp(s,e,o,l,h,m,y,C){const D=y*h.getElevationAt(s,e,!0,!0),R=0!==m[0],V=R?0===m[1]?y*(m[0]/7-450):y*function(H,re,de){const Me=Math.floor(re[0]/8),Ue=Math.floor(re[1]/8),ot=10*(re[0]-8*Me),wt=10*(re[1]-8*Ue),Rt=H.getElevationAt(Me,Ue,!0,!0),Ot=H.getMeterToDEM(de),zt=Math.floor(.5*(ot*Ot-1)),Ht=Math.floor(.5*(wt*Ot-1)),Vt=H.tileCoordToPixel(Me,Ue),En=2*zt+1,Fn=2*Ht+1,Cn=(ir=En,wi=Fn,[($i=H).getElevationAtPixel(lr=Vt.x-zt,dr=Vt.y-Ht,!0),$i.getElevationAtPixel(lr+wi,dr,!0),$i.getElevationAtPixel(lr,dr+wi,!0),$i.getElevationAtPixel(lr+ir,dr+wi,!0)]),$n=Math.abs(Cn[0]-Cn[1]),gn=Math.abs(Cn[2]-Cn[3]),bn=Math.abs(Cn[0]-Cn[2])+Math.abs(Cn[1]-Cn[3]),Wn=Math.min(.25,.5*Ot*($n+gn)/En),un=Math.min(.25,.5*Ot*bn/Fn);var $i,lr,dr,ir,wi;return Rt+Math.max(Wn*ot,un*wt)}(h,m,C):D;return{base:D+(0===o)?-1:o,top:R?Math.max(V+l,D+o+2):D+l}}const vp=Gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Cc}=vp,xp=Gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bp}=xp,dg=bc.VectorTileFeature.types,ad=Math.cos(Math.PI/180*37.5);class Bh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ir,this.layoutVertexArray2=new Zr,this.indexArray=new Jr,this.programConfigurations=new gc(e.layers,e.zoom),this.segments=new ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){this.hasPattern=fu("line",this.layers,o);const h=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:R,id:V,index:H,sourceLayerIndex:re}of e){const de=this.layers[0]._featureFilter.needGeometry,Me=zc(R,de);if(!this.layers[0]._featureFilter.filter(new we(this.zoom),Me,l))continue;const Ue=h?h.evaluate(Me,{},l):void 0,ot={id:V,properties:R.properties,type:R.type,sourceLayerIndex:re,index:H,geometry:de?Me.geometry:_c(R),patterns:{},sortKey:Ue};m.push(ot)}h&&m.sort((R,V)=>R.sortKey-V.sortKey);const{lineAtlas:y,featureIndex:C}=o,D=this.addConstantDashes(y);for(const R of m){const{geometry:V,index:H,sourceLayerIndex:re}=R;if(D&&this.addFeatureDashes(R,y),this.hasPattern){const de=Th("line",this.layers,R,this.zoom,o);this.patternFeatures.push(de)}else this.addFeature(R,V,H,l,y.positions);C.insert(e[H].feature,V,H,re,this.index)}}addConstantDashes(e){let o=!1;for(const l of this.layers){const h=l.paint.get("line-dasharray").value,m=l.layout.get("line-cap").value;if("constant"!==h.kind||"constant"!==m.kind)o=!0;else{const y=m.value,C=h.value;if(!C)continue;e.addDash(C.from,y),e.addDash(C.to,y),C.other&&e.addDash(C.other,y)}}return o}addFeatureDashes(e,o){const l=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if("constant"===m.kind&&"constant"===y.kind)continue;let C,D,R,V,H,re;if("constant"===m.kind){const ot=m.value;if(!ot)continue;C=ot.other||ot.to,D=ot.to,R=ot.from}else C=m.evaluate({zoom:l-1},e),D=m.evaluate({zoom:l},e),R=m.evaluate({zoom:l+1},e);"constant"===y.kind?V=H=re=y.value:(V=y.evaluate({zoom:l-1},e),H=y.evaluate({zoom:l},e),re=y.evaluate({zoom:l+1},e)),o.addDash(C,V),o.addDash(D,H),o.addDash(R,re);const de=o.getKey(C,V),Me=o.getKey(D,H),Ue=o.getKey(R,re);e.patterns[h.id]={min:de,mid:Me,max:Ue}}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}addFeatures(e,o,l){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,o,l)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,bp)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,l,h,m){const y=this.layers[0].layout,C=y.get("line-join").evaluate(e,{}),D=y.get("line-cap").evaluate(e,{}),R=y.get("line-miter-limit"),V=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const H of o)this.addLine(H,e,C,D,R,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,m,h)}addLine(e,o,l,h,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let wt=0;wt<e.length-1;wt++)this.totalDistance+=e[wt].dist(e[wt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C="Polygon"===dg[o.type];let D=e.length;for(;D>=2&&e[D-1].equals(e[D-2]);)D--;let R=0;for(;R<D-1&&e[R].equals(e[R+1]);)R++;if(D<(C?3:2))return;"bevel"===l&&(m=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let re,de,Me,Ue,ot;this.e1=this.e2=-1,C&&(re=e[D-2],ot=e[R].sub(re)._unit()._perp());for(let wt=R;wt<D;wt++){if(Me=wt===D-1?C?e[R+1]:void 0:e[wt+1],Me&&e[wt].equals(Me))continue;ot&&(Ue=ot),re&&(de=re),re=e[wt],ot=Me?Me.sub(re)._unit()._perp():Ue,Ue=Ue||ot;let Rt=Ue.add(ot);0===Rt.x&&0===Rt.y||Rt._unit();const Ot=Ue.x*ot.x+Ue.y*ot.y,zt=Rt.x*ot.x+Rt.y*ot.y,Ht=0!==zt?1/zt:1/0,Vt=2*Math.sqrt(2-2*zt),En=zt<ad&&de&&Me,Fn=Ue.x*ot.y-Ue.y*ot.x>0;if(En&&wt>R){const gn=re.dist(de);if(gn>2*V){const bn=re.sub(re.sub(de)._mult(V/gn)._round());this.updateDistance(de,bn),this.addCurrentVertex(bn,Ue,0,0,H),de=bn}}const Cn=de&&Me;let $n=Cn?l:C?"butt":h;if(Cn&&"round"===$n&&(Ht<y?$n="miter":Ht<=2&&($n="fakeround")),"miter"===$n&&Ht>m&&($n="bevel"),"bevel"===$n&&(Ht>2&&($n="flipbevel"),Ht<m&&($n="miter")),de&&this.updateDistance(de,re),"miter"===$n)Rt._mult(Ht),this.addCurrentVertex(re,Rt,0,0,H);else if("flipbevel"===$n){if(Ht>100)Rt=ot.mult(-1);else{const gn=Ht*Ue.add(ot).mag()/Ue.sub(ot).mag();Rt._perp()._mult(gn*(Fn?-1:1))}this.addCurrentVertex(re,Rt,0,0,H),this.addCurrentVertex(re,Rt.mult(-1),0,0,H)}else if("bevel"===$n||"fakeround"===$n){const gn=-Math.sqrt(Ht*Ht-1),bn=Fn?gn:0,Wn=Fn?0:gn;if(de&&this.addCurrentVertex(re,Ue,bn,Wn,H),"fakeround"===$n){const un=Math.round(180*Vt/Math.PI/20);for(let $i=1;$i<un;$i++){let lr=$i/un;if(.5!==lr){const ir=lr-.5;lr+=lr*ir*(lr-1)*((1.0904+Ot*(Ot*(3.55645-1.43519*Ot)-3.2452))*ir*ir+(.848013+Ot*(.215638*Ot-1.06021)))}const dr=ot.sub(Ue)._mult(lr)._add(Ue)._unit()._mult(Fn?-1:1);this.addHalfVertex(re,dr.x,dr.y,!1,Fn,0,H)}}Me&&this.addCurrentVertex(re,ot,-bn,-Wn,H)}else if("butt"===$n)this.addCurrentVertex(re,Rt,0,0,H);else if("square"===$n){const gn=de?1:-1;de||this.addCurrentVertex(re,Rt,gn,gn,H),this.addCurrentVertex(re,Rt,0,0,H),de&&this.addCurrentVertex(re,Rt,gn,gn,H)}else"round"===$n&&(de&&(this.addCurrentVertex(re,Ue,0,0,H),this.addCurrentVertex(re,Ue,1,1,H,!0)),Me&&(this.addCurrentVertex(re,ot,-1,-1,H,!0),this.addCurrentVertex(re,ot,0,0,H)));if(En&&wt<D-1){const gn=re.dist(Me);if(gn>2*V){const bn=re.add(Me.sub(re)._mult(V/gn)._round());this.updateDistance(re,bn),this.addCurrentVertex(bn,ot,0,0,H),re=bn}}}}addCurrentVertex(e,o,l,h,m,y=!1){const C=o.y*h-o.x,D=-o.y-o.x*h;this.addHalfVertex(e,o.x+o.y*l,o.y-o.x*l,y,!1,l,m),this.addHalfVertex(e,C,D,y,!0,-h,m)}addHalfVertex({x:e,y:o},l,h,m,y,C,D){this.layoutVertexArray.emplaceBack((e<<1)+(m?1:0),(o<<1)+(y?1:0),Math.round(63*l)+128,Math.round(63*h)+128,1+(0===C?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const R=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),D.primitiveLength++),y?this.e2=R:this.e1=R}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}si("LineBucket",Bh,{omit:["layers","patternFeatures"]});const wp=new ut({"line-cap":new ht(Qe.layout_line["line-cap"]),"line-join":new ht(Qe.layout_line["line-join"]),"line-miter-limit":new Je(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Je(Qe.layout_line["line-round-limit"]),"line-sort-key":new ht(Qe.layout_line["line-sort-key"])});var Nh={paint:new ut({"line-opacity":new ht(Qe.paint_line["line-opacity"]),"line-color":new ht(Qe.paint_line["line-color"]),"line-translate":new Je(Qe.paint_line["line-translate"]),"line-translate-anchor":new Je(Qe.paint_line["line-translate-anchor"]),"line-width":new ht(Qe.paint_line["line-width"]),"line-gap-width":new ht(Qe.paint_line["line-gap-width"]),"line-offset":new ht(Qe.paint_line["line-offset"]),"line-blur":new ht(Qe.paint_line["line-blur"]),"line-dasharray":new ln(Qe.paint_line["line-dasharray"]),"line-pattern":new ln(Qe.paint_line["line-pattern"]),"line-gradient":new vn(Qe.paint_line["line-gradient"])}),layout:wp};const zh=new class extends ht{possiblyEvaluate(s,e){return e=new we(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(s,e)}evaluate(s,e,o,l){return e=dn({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(s,e,o,l)}}(Nh.paint.properties["line-width"].specification);function ld(s,e){return e>0?e+2*s:s}zh.useIntegerZoom=!0;const Cp=Gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cd=Gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ud=Gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ep=Gn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dd=Gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ap=Gn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Gn([{name:"triangle",components:3,type:"Uint16"}]),Gn([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Gn([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Gn([{type:"Float32",name:"offsetX"}]),Gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ha=128;function Vh(s,e){const{expression:o}=e;if("constant"===o.kind)return{kind:"constant",layoutSize:o.evaluate(new we(s+1))};if("source"===o.kind)return{kind:"source"};{const{zoomStops:l,interpolationType:h}=o;let m=0;for(;m<l.length&&l[m]<=s;)m++;m=Math.max(0,m-1);let y=m;for(;y<l.length&&l[y]<s+1;)y++;y=Math.min(l.length-1,y);const C=l[m],D=l[y];return"composite"===o.kind?{kind:"composite",minZoom:C,maxZoom:D,interpolationType:h}:{kind:"camera",minZoom:C,maxZoom:D,minSize:o.evaluate(new we(C)),maxSize:o.evaluate(new we(D)),interpolationType:h}}}function _u(s,{uSize:e,uSizeT:o},{lowerSize:l,upperSize:h}){return"source"===s.kind?l/ha:"composite"===s.kind?Nt(l/ha,h/ha,o):e}function Wc(s,e){let o=0,l=0;if("constant"===s.kind)l=s.layoutSize;else if("source"!==s.kind){const{interpolationType:h,minZoom:m,maxZoom:y}=s,C=h?Ft(tr.interpolationFactor(h,e,m,y),0,1):0;"camera"===s.kind?l=Nt(s.minSize,s.maxSize,C):o=C}return{uSizeT:o,uSize:l}}var hg=Object.freeze({__proto__:null,getSizeData:Vh,evaluateSizeForFeature:_u,evaluateSizeForZoom:Wc,SIZE_PACK_FACTOR:ha});function Dp(s,e,o){return s.sections.forEach(l=>{l.text=function(h,m,y){const C=m.layout.get("text-transform").evaluate(y,{});return"uppercase"===C?h=h.toLocaleUpperCase():"lowercase"===C&&(h=h.toLocaleLowerCase()),_e.applyArabicShaping&&(h=_e.applyArabicShaping(h)),h}(l.text,e,o)}),s}const Ec={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Sp(s){return"\ufe36"===s||"\ufe48"===s||"\ufe38"===s||"\ufe44"===s||"\ufe42"===s||"\ufe3e"===s||"\ufe3c"===s||"\ufe3a"===s||"\ufe18"===s||"\ufe40"===s||"\ufe10"===s||"\ufe13"===s||"\ufe14"===s||"\uff40"===s||"\uffe3"===s||"\ufe11"===s||"\ufe12"===s}function _y(s){return"\ufe35"===s||"\ufe47"===s||"\ufe37"===s||"\ufe43"===s||"\ufe41"===s||"\ufe3d"===s||"\ufe3b"===s||"\ufe39"===s||"\ufe17"===s||"\ufe3f"===s}var Uh=function(s,e,o,l,h){var m,y,C=8*h-l-1,D=(1<<C)-1,R=D>>1,V=-7,H=o?h-1:0,re=o?-1:1,de=s[e+H];for(H+=re,m=de&(1<<-V)-1,de>>=-V,V+=C;V>0;m=256*m+s[e+H],H+=re,V-=8);for(y=m&(1<<-V)-1,m>>=-V,V+=l;V>0;y=256*y+s[e+H],H+=re,V-=8);if(0===m)m=1-R;else{if(m===D)return y?NaN:1/0*(de?-1:1);y+=Math.pow(2,l),m-=R}return(de?-1:1)*y*Math.pow(2,m-l)},Mp=function(s,e,o,l,h,m){var y,C,D,R=8*m-h-1,V=(1<<R)-1,H=V>>1,re=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,de=l?0:m-1,Me=l?1:-1,Ue=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(C=isNaN(e)?1:0,y=V):(y=Math.floor(Math.log(e)/Math.LN2),e*(D=Math.pow(2,-y))<1&&(y--,D*=2),(e+=y+H>=1?re/D:re*Math.pow(2,1-H))*D>=2&&(y++,D/=2),y+H>=V?(C=0,y=V):y+H>=1?(C=(e*D-1)*Math.pow(2,h),y+=H):(C=e*Math.pow(2,H-1)*Math.pow(2,h),y=0));h>=8;s[o+de]=255&C,de+=Me,C/=256,h-=8);for(y=y<<h|C,R+=h;R>0;s[o+de]=255&y,de+=Me,y/=256,R-=8);s[o+de-Me]|=128*Ue},Yc=jr;function jr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var jh=4294967296,za=1/jh,Tp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ol(s){return s.type===jr.Bytes?s.readVarint()+s.pos:s.pos+1}function Ip(s,e,o){var l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(l);for(var h=o.pos-1;h>=s;h--)o.buf[h+l]=o.buf[h]}function fg(s,e){for(var o=0;o<s.length;o++)e.writeVarint(s[o])}function pg(s,e){for(var o=0;o<s.length;o++)e.writeSVarint(s[o])}function Pp(s,e){for(var o=0;o<s.length;o++)e.writeFloat(s[o])}function mg(s,e){for(var o=0;o<s.length;o++)e.writeDouble(s[o])}function gg(s,e){for(var o=0;o<s.length;o++)e.writeBoolean(s[o])}function _g(s,e){for(var o=0;o<s.length;o++)e.writeFixed32(s[o])}function ur(s,e){for(var o=0;o<s.length;o++)e.writeSFixed32(s[o])}function Fp(s,e){for(var o=0;o<s.length;o++)e.writeFixed64(s[o])}function Rp(s,e){for(var o=0;o<s.length;o++)e.writeSFixed64(s[o])}function Ac(s,e){return(s[e]|s[e+1]<<8|s[e+2]<<16)+16777216*s[e+3]}function zo(s,e,o){s[o]=e,s[o+1]=e>>>8,s[o+2]=e>>>16,s[o+3]=e>>>24}function Gh(s,e){return(s[e]|s[e+1]<<8|s[e+2]<<16)+(s[e+3]<<24)}function yg(s,e,o){e.glyphs=[],1===s&&o.readMessage($h,e)}function $h(s,e,o){if(3===s){const{id:l,bitmap:h,width:m,height:y,left:C,top:D,advance:R}=o.readMessage(Tl,{});e.glyphs.push({id:l,bitmap:new Ql({width:m+6,height:y+6},h),metrics:{width:m,height:y,left:C,top:D,advance:R}})}else 4===s?e.ascender=o.readSVarint():5===s&&(e.descender=o.readSVarint())}function Tl(s,e,o){1===s?e.id=o.readVarint():2===s?e.bitmap=o.readBytes():3===s?e.width=o.readVarint():4===s?e.height=o.readVarint():5===s?e.left=o.readSVarint():6===s?e.top=o.readSVarint():7===s&&(e.advance=o.readVarint())}function yu(s){let e=0,o=0;for(const y of s)e+=y.w*y.h,o=Math.max(o,y.w);s.sort((y,C)=>C.h-y.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let h=0,m=0;for(const y of s)for(let C=l.length-1;C>=0;C--){const D=l[C];if(!(y.w>D.w||y.h>D.h)){if(y.x=D.x,y.y=D.y,m=Math.max(m,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===D.w&&y.h===D.h){const R=l.pop();C<l.length&&(l[C]=R)}else y.h===D.h?(D.x+=y.w,D.w-=y.w):y.w===D.w?(D.y+=y.h,D.h-=y.h):(l.push({x:D.x+y.w,y:D.y,w:D.w-y.w,h:y.h}),D.y+=y.h,D.h-=y.h);break}}return{w:h,h:m,fill:e/(h*m)||0}}jr.prototype={destroy:function(){this.buf=null},readFields:function(s,e,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),h=l>>3,m=this.pos;this.type=7&l,s(h,e,this),this.pos===m&&this.skip(l)}return e},readMessage:function(s,e){return this.readFields(s,e,this.readVarint()+this.pos)},readFixed32:function(){var s=Ac(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Gh(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Ac(this.buf,this.pos)+Ac(this.buf,this.pos+4)*jh;return this.pos+=8,s},readSFixed64:function(){var s=Ac(this.buf,this.pos)+Gh(this.buf,this.pos+4)*jh;return this.pos+=8,s},readFloat:function(){var s=Uh(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Uh(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var e,o,l=this.buf;return e=127&(o=l[this.pos++]),o<128?e:(e|=(127&(o=l[this.pos++]))<<7,o<128?e:(e|=(127&(o=l[this.pos++]))<<14,o<128?e:(e|=(127&(o=l[this.pos++]))<<21,o<128?e:function(h,m,y){var C,D,R=y.buf;if(C=(112&(D=R[y.pos++]))>>4,D<128||(C|=(127&(D=R[y.pos++]))<<3,D<128)||(C|=(127&(D=R[y.pos++]))<<10,D<128)||(C|=(127&(D=R[y.pos++]))<<17,D<128)||(C|=(127&(D=R[y.pos++]))<<24,D<128)||(C|=(1&(D=R[y.pos++]))<<31,D<128))return function(s,e,o){return o?4294967296*e+(s>>>0):4294967296*(e>>>0)+(s>>>0)}(h,C,m);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=l[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,e=this.pos;return this.pos=s,s-e>=12&&Tp?Tp.decode(this.buf.subarray(e,s)):function(o,l,h){for(var m="",y=l;y<h;){var C,D,R,V=o[y],H=null,re=V>239?4:V>223?3:V>191?2:1;if(y+re>h)break;1===re?V<128&&(H=V):2===re?128==(192&(C=o[y+1]))&&(H=(31&V)<<6|63&C)<=127&&(H=null):3===re?(D=o[y+2],128==(192&(C=o[y+1]))&&128==(192&D)&&((H=(15&V)<<12|(63&C)<<6|63&D)<=2047||H>=55296&&H<=57343)&&(H=null)):4===re&&(D=o[y+2],R=o[y+3],128==(192&(C=o[y+1]))&&128==(192&D)&&128==(192&R)&&((H=(15&V)<<18|(63&C)<<12|(63&D)<<6|63&R)<=65535||H>=1114112)&&(H=null)),null===H?(H=65533,re=1):H>65535&&(H-=65536,m+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),m+=String.fromCharCode(H),y+=re}return m}(this.buf,e,s)},readBytes:function(){var s=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,s);return this.pos=s,e},readPackedVarint:function(s,e){if(this.type!==jr.Bytes)return s.push(this.readVarint(e));var o=ol(this);for(s=s||[];this.pos<o;)s.push(this.readVarint(e));return s},readPackedSVarint:function(s){if(this.type!==jr.Bytes)return s.push(this.readSVarint());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==jr.Bytes)return s.push(this.readBoolean());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==jr.Bytes)return s.push(this.readFloat());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==jr.Bytes)return s.push(this.readDouble());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==jr.Bytes)return s.push(this.readFixed32());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==jr.Bytes)return s.push(this.readSFixed32());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==jr.Bytes)return s.push(this.readFixed64());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==jr.Bytes)return s.push(this.readSFixed64());var e=ol(this);for(s=s||[];this.pos<e;)s.push(this.readSFixed64());return s},skip:function(s){var e=7&s;if(e===jr.Varint)for(;this.buf[this.pos++]>127;);else if(e===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===jr.Fixed32)this.pos+=4;else{if(e!==jr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(s,e){this.writeVarint(s<<3|e)},realloc:function(s){for(var e=this.length||16;e<this.pos+s;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),zo(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),zo(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),zo(this.buf,-1&s,this.pos),zo(this.buf,Math.floor(s*za),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),zo(this.buf,-1&s,this.pos),zo(this.buf,Math.floor(s*za),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(e,o){var l,h,m,C;if(e>=0?(l=e%4294967296|0,h=e/4294967296|0):(h=~(-e/4294967296),4294967295^(l=~(-e%4294967296))?l=l+1|0:(l=0,h=h+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),m=l,(C=o).buf[C.pos++]=127&m|128,m>>>=7,C.buf[C.pos++]=127&m|128,m>>>=7,C.buf[C.pos++]=127&m|128,m>>>=7,C.buf[C.pos++]=127&m|128,C.buf[C.pos]=127&(m>>>=7),function(m,y){var C=(7&m)<<4;y.buf[y.pos++]|=C|((m>>>=3)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m)))))}(h,o)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var e=this.pos;this.pos=function(l,h,m){for(var y,C,D=0;D<h.length;D++){if((y=h.charCodeAt(D))>55295&&y<57344){if(!C){y>56319||D+1===h.length?(l[m++]=239,l[m++]=191,l[m++]=189):C=y;continue}if(y<56320){l[m++]=239,l[m++]=191,l[m++]=189,C=y;continue}y=C-55296<<10|y-56320|65536,C=null}else C&&(l[m++]=239,l[m++]=191,l[m++]=189,C=null);y<128?l[m++]=y:(y<2048?l[m++]=y>>6|192:(y<65536?l[m++]=y>>12|224:(l[m++]=y>>18|240,l[m++]=y>>12&63|128),l[m++]=y>>6&63|128),l[m++]=63&y|128)}return m}(this.buf,s,this.pos);var o=this.pos-e;o>=128&&Ip(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(s){this.realloc(4),Mp(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Mp(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var e=s.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=s[o]},writeRawMessage:function(s,e){this.pos++;var o=this.pos;s(e,this);var l=this.pos-o;l>=128&&Ip(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(s,e,o){this.writeTag(s,jr.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(s,e){e.length&&this.writeMessage(s,fg,e)},writePackedSVarint:function(s,e){e.length&&this.writeMessage(s,pg,e)},writePackedBoolean:function(s,e){e.length&&this.writeMessage(s,gg,e)},writePackedFloat:function(s,e){e.length&&this.writeMessage(s,Pp,e)},writePackedDouble:function(s,e){e.length&&this.writeMessage(s,mg,e)},writePackedFixed32:function(s,e){e.length&&this.writeMessage(s,_g,e)},writePackedSFixed32:function(s,e){e.length&&this.writeMessage(s,ur,e)},writePackedFixed64:function(s,e){e.length&&this.writeMessage(s,Fp,e)},writePackedSFixed64:function(s,e){e.length&&this.writeMessage(s,Rp,e)},writeBytesField:function(s,e){this.writeTag(s,jr.Bytes),this.writeBytes(e)},writeFixed32Field:function(s,e){this.writeTag(s,jr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(s,e){this.writeTag(s,jr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(s,e){this.writeTag(s,jr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(s,e){this.writeTag(s,jr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(s,e){this.writeTag(s,jr.Varint),this.writeVarint(e)},writeSVarintField:function(s,e){this.writeTag(s,jr.Varint),this.writeSVarint(e)},writeStringField:function(s,e){this.writeTag(s,jr.Bytes),this.writeString(e)},writeFloatField:function(s,e){this.writeTag(s,jr.Fixed32),this.writeFloat(e)},writeDoubleField:function(s,e){this.writeTag(s,jr.Fixed64),this.writeDouble(e)},writeBooleanField:function(s,e){this.writeVarintField(s,Boolean(e))}};class hd{constructor(e,{pixelRatio:o,version:l,stretchX:h,stretchY:m,content:y}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=h,this.stretchY=m,this.content=y,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fd{constructor(e,o){const l={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(e,l,m),this.addImages(o,h,m);const{w:y,h:C}=yu(m),D=new da({width:y||1,height:C||1});for(const R in e){const V=e[R],H=l[R].paddedRect;da.copy(V.data,D,{x:0,y:0},{x:H.x+1,y:H.y+1},V.data)}for(const R in o){const V=o[R],H=h[R].paddedRect,re=H.x+1,de=H.y+1,Me=V.data.width,Ue=V.data.height;da.copy(V.data,D,{x:0,y:0},{x:re,y:de},V.data),da.copy(V.data,D,{x:0,y:Ue-1},{x:re,y:de-1},{width:Me,height:1}),da.copy(V.data,D,{x:0,y:0},{x:re,y:de+Ue},{width:Me,height:1}),da.copy(V.data,D,{x:Me-1,y:0},{x:re-1,y:de},{width:1,height:Ue}),da.copy(V.data,D,{x:0,y:0},{x:re+Me,y:de},{width:1,height:Ue})}this.image=D,this.iconPositions=l,this.patternPositions=h}addImages(e,o,l){for(const h in e){const m=e[h],y={x:0,y:0,w:m.data.width+2,h:m.data.height+2};l.push(y),o[h]=new hd(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,o){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),o)}patchUpdatedImage(e,o,l){if(!e||!o||e.version===o.version)return;e.version=o.version;const[h,m]=e.tl;l.update(o.data,void 0,{x:h,y:m})}}si("ImagePosition",hd),si("ImageAtlas",fd);const Va={horizontal:1,vertical:2,horizontalOnly:3};class Qc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const l=new Qc;return l.scale=e||1,l.fontStack=o,l}static forImage(e){const o=new Qc;return o.imageName=e,o}}class vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const l=new vu;for(let h=0;h<e.sections.length;h++){const m=e.sections[h];m.image?l.addImageSection(m):l.addTextSection(m,o)}return l}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(o,l){let h="";for(let m=0;m<o.length;m++){const y=o.charCodeAt(m+1)||null,C=o.charCodeAt(m-1)||null;h+=!l&&(y&&ah(y)&&!Ec[o[m+1]]||C&&ah(C)&&!Ec[o[m-1]])||!Ec[o[m]]?o[m]:Ec[o[m]]}return h}(this.text,e)}trim(){let e=0;for(let l=0;l<this.text.length&&Dc[this.text.charCodeAt(l)];l++)e++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=e&&Dc[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const l=new vu;return l.text=this.text.substring(e,o),l.sectionIndex=this.sectionIndex.slice(e,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(Qc.forText(e.scale,e.fontStack||o));const l=this.sections.length-1;for(let h=0;h<e.text.length;++h)this.sectionIndex.push(l)}addImageSection(e){const o=e.image?e.image.name:"";if(0===o.length)return void fi("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Qc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):fi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qa(s,e,o,l,h,m,y,C,D,R,V,H,re,de,Me,Ue){const ot=vu.fromFeature(s,h);let wt;H===Va.vertical&&ot.verticalizePunctuation(re);const{processBidirectionalText:Rt,processStyledBidirectionalText:Ot}=_e;if(Rt&&1===ot.sections.length){wt=[];const Vt=Rt(ot.toString(),Zh(ot,R,m,e,l,de,Me));for(const En of Vt){const Fn=new vu;Fn.text=En,Fn.sections=ot.sections;for(let Cn=0;Cn<En.length;Cn++)Fn.sectionIndex.push(0);wt.push(Fn)}}else if(Ot){wt=[];const Vt=Ot(ot.text,ot.sectionIndex,Zh(ot,R,m,e,l,de,Me));for(const En of Vt){const Fn=new vu;Fn.text=En[0],Fn.sectionIndex=En[1],Fn.sections=ot.sections,wt.push(Fn)}}else wt=function(Vt,En){const Fn=[],Cn=Vt.text;let $n=0;for(const gn of En)Fn.push(Vt.substring($n,gn)),$n=gn;return $n<Cn.length&&Fn.push(Vt.substring($n,Cn.length)),Fn}(ot,Zh(ot,R,m,e,l,de,Me));const zt=[],Ht={positionedLines:zt,text:ot.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:H,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Vt,En,Fn,Cn,$n,gn,bn,Wn,un,$i,lr,dr){let ir=0,wi=0,Gr=0;const Fi="right"===Wn?1:"left"===Wn?0:.5;let fs=!1;for(const Wr of $n){const vs=Wr.getSections();for(const ps of vs){if(ps.imageName)continue;const Qs=En[ps.fontStack];if(Qs&&(fs=void 0!==Qs.ascender&&void 0!==Qs.descender,!fs))break}if(!fs)break}let Ns=0;for(const Wr of $n){Wr.trim();const vs=Wr.getMaxScale(),ps=24*(vs-1),Qs={positionedGlyphs:[],lineOffset:0};Vt.positionedLines[Ns]=Qs;const es=Qs.positionedGlyphs;let Nr=0;if(!Wr.length()){wi+=gn,++Ns;continue}let Gs=0,xs=0;for(let po=0;po<Wr.length();po++){const bs=Wr.getSection(po),wa=Wr.getSectionIndex(po),mo=Wr.getCharCode(po);let Ar=bs.scale,ms=null,ta=null,Uo=null,ll=24,Ka=0;const sc=!(un===Va.horizontal||!lr&&!Zl(mo)||lr&&(Dc[mo]||(ks=mo,fc(ks)||$l(ks)||El(ks)||_a(ks)||il(ks))));if(bs.imageName){const cl=Cn[bs.imageName];if(!cl)continue;Uo=bs.imageName,Vt.iconsInText=Vt.iconsInText||!0,ta=cl.paddedRect;const Co=cl.displaySize;Ar=24*Ar/dr,ms={width:Co[0],height:Co[1],left:1,top:-3,advance:sc?Co[1]:Co[0],localGlyph:!1},Ka=fs?-ms.height*Ar:24*vs-17-Co[1]*Ar,ll=ms.advance;const ul=(sc?Co[0]:Co[1])*Ar-24*vs;ul>0&&ul>Nr&&(Nr=ul)}else{const cl=Fn[bs.fontStack];if(!cl)continue;cl[mo]&&(ta=cl[mo]);const Co=En[bs.fontStack];if(!Co)continue;const ul=Co.glyphs[mo];if(!ul)continue;if(ms=ul.metrics,ll=8203!==mo?24:0,fs){const dl=void 0!==Co.ascender?Math.abs(Co.ascender):0,go=void 0!==Co.descender?Math.abs(Co.descender):0,tu=(dl+go)*Ar;Gs<tu&&(Gs=tu,xs=(dl-go)/2*Ar),Ka=-dl*Ar}else Ka=24*(vs-Ar)-17}sc?(Vt.verticalizable=!0,es.push({glyph:mo,imageName:Uo,x:ir,y:wi+Ka,vertical:sc,scale:Ar,localGlyph:ms.localGlyph,fontStack:bs.fontStack,sectionIndex:wa,metrics:ms,rect:ta}),ir+=ll*Ar+$i):(es.push({glyph:mo,imageName:Uo,x:ir,y:wi+Ka,vertical:sc,scale:Ar,localGlyph:ms.localGlyph,fontStack:bs.fontStack,sectionIndex:wa,metrics:ms,rect:ta}),ir+=ms.advance*Ar+$i)}0!==es.length&&(Gr=Math.max(ir-$i,Gr),fs?qh(es,Fi,Nr,xs,gn*vs/2):qh(es,Fi,Nr,0,gn/2)),ir=0;const Ss=gn*vs+Nr;Qs.lineOffset=Math.max(Nr,ps),wi+=Ss,++Ns}var ks;const fo=wi,{horizontalAlign:Ds,verticalAlign:cs}=Op(bn);(function(Wr,vs,ps,Qs,es,Nr){const Gs=(vs-ps)*es,xs=-Nr*Qs;for(const Ss of Wr)for(const po of Ss.positionedGlyphs)po.x+=Gs,po.y+=xs})(Vt.positionedLines,Fi,Ds,cs,Gr,fo),Vt.top+=-cs*fo,Vt.bottom=Vt.top+fo,Vt.left+=-Ds*Gr,Vt.right=Vt.left+Gr,Vt.hasBaseline=fs}(Ht,e,o,l,wt,y,C,D,H,R,re,Ue),!function(Vt){for(const En of Vt)if(0!==En.positionedGlyphs.length)return!1;return!0}(zt)&&Ht}const Dc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function md(s,e,o,l,h,m){if(e.imageName){const y=l[e.imageName];return y?y.displaySize[0]*e.scale*24/m+h:0}{const y=o[e.fontStack],C=y&&y.glyphs[s];return C?C.metrics.advance*e.scale+h:0}}function vg(s,e,o,l){const h=Math.pow(s-e,2);return l?s<e?h/2:2*h:h+Math.abs(o)*o}function xg(s,e,o){let l=0;return 10===s&&(l-=1e4),o&&(l+=150),40!==s&&65288!==s||(l+=50),41!==e&&65289!==e||(l+=50),l}function Hh(s,e,o,l,h,m){let y=null,C=vg(e,o,h,m);for(const D of l){const R=vg(e-D.x,o,h,m)+D.badness;R<=C&&(y=D,C=R)}return{index:s,x:e,priorBreak:y,badness:C}}function bg(s){return s?bg(s.priorBreak).concat(s.index):[]}function Zh(s,e,o,l,h,m,y){if("point"!==m)return[];if(!s)return[];const C=[],D=function(re,de,Me,Ue,ot,wt){let Rt=0;for(let Ot=0;Ot<re.length();Ot++){const zt=re.getSection(Ot);Rt+=md(re.getCharCode(Ot),zt,Ue,ot,de,wt)}return Rt/Math.max(1,Math.ceil(Rt/Me))}(s,e,o,l,h,y),R=s.text.indexOf("\u200b")>=0;let V=0;for(let re=0;re<s.length();re++){const de=s.getSection(re),Me=s.getCharCode(re);if(Dc[Me]||(V+=md(Me,de,l,h,e,y)),re<s.length()-1){const Ue=!((H=Me)<11904||!(lt(H)||Te(H)||la(H)||aa(H)||Di(H)||su(H)||At(H)||M(H)||nr(H)||Rr(H)||li(H)||Al(H)||Y(H)||P(H)||L(H)||mn(H)||ue(H)||nl(H)||io(H)||yr(H)));(pd[Me]||Ue||de.imageName)&&C.push(Hh(re+1,V,D,C,xg(Me,s.getCharCode(re+1),Ue&&R),!1))}}var H;return bg(Hh(s.length(),V,D,C,0,!0))}function Op(s){let e=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function qh(s,e,o,l,h){if(!(e||o||l||h))return;const m=s.length-1,y=s[m],C=(y.x+y.metrics.advance*y.scale)*e;for(let D=0;D<=m;D++)s[D].x-=C,s[D].y+=o+l+h}function kp(s,e,o){const{horizontalAlign:l,verticalAlign:h}=Op(o),m=e[0]-s.displaySize[0]*l,y=e[1]-s.displaySize[1]*h;return{image:s,top:y,bottom:y+s.displaySize[1],left:m,right:m+s.displaySize[0]}}function Lp(s,e,o,l,h,m){const y=s.image;let C;if(y.content){const ot=y.content,wt=y.pixelRatio||1;C=[ot[0]/wt,ot[1]/wt,y.displaySize[0]-ot[2]/wt,y.displaySize[1]-ot[3]/wt]}const D=e.left*m,R=e.right*m;let V,H,re,de;"width"===o||"both"===o?(de=h[0]+D-l[3],H=h[0]+R+l[1]):(de=h[0]+(D+R-y.displaySize[0])/2,H=de+y.displaySize[0]);const Me=e.top*m,Ue=e.bottom*m;return"height"===o||"both"===o?(V=h[1]+Me-l[0],re=h[1]+Ue+l[2]):(V=h[1]+(Me+Ue-y.displaySize[1])/2,re=V+y.displaySize[1]),{image:y,top:V,right:H,bottom:re,left:de,collisionPadding:C}}class al extends ve{constructor(e,o,l,h){super(e,o),this.angle=l,void 0!==h&&(this.segment=h)}clone(){return new al(this.x,this.y,this.angle,this.segment)}}function wg(s,e,o,l,h){if(void 0===e.segment)return!0;let m=e,y=e.segment+1,C=0;for(;C>-o/2;){if(y--,y<0)return!1;C-=s[y].dist(m),m=s[y]}C+=s[y].dist(s[y+1]),y++;const D=[];let R=0;for(;C<o/2;){const V=s[y],H=s[y+1];if(!H)return!1;let re=s[y-1].angleTo(V)-V.angleTo(H);for(re=Math.abs((re+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:C,angleDelta:re}),R+=re;C-D[0].distance>l;)R-=D.shift().angleDelta;if(R>h)return!1;y++,C+=V.dist(H)}return!0}function Cg(s){let e=0;for(let o=0;o<s.length-1;o++)e+=s[o].dist(s[o+1]);return e}function Eg(s,e,o){return s?.6*e*o:0}function Ag(s,e){return Math.max(s?s.right-s.left:0,e?e.right-e.left:0)}function yy(s,e,o,l,h,m){const y=Eg(o,h,m),C=Ag(o,l)*m;let D=0;const R=Cg(s)/2;for(let V=0;V<s.length-1;V++){const H=s[V],re=s[V+1],de=H.dist(re);if(D+de>R){const Me=(R-D)/de,Ue=Nt(H.x,re.x,Me),ot=Nt(H.y,re.y,Me),wt=new al(Ue,ot,re.angleTo(H),V);return!y||wg(s,wt,C,y,e)?wt:void 0}D+=de}}function vy(s,e,o,l,h,m,y,C,D){const R=Eg(l,m,y),V=Ag(l,h),H=V*y,re=0===s[0].x||s[0].x===D||0===s[0].y||s[0].y===D;return e-H<e/4&&(e=H+e/4),Dg(s,re?e/2*C%e:(V/2+2*m)*y*C%e,e,R,o,H,re,!1,D)}function Dg(s,e,o,l,h,m,y,C,D){const R=m/2,V=Cg(s);let H=0,re=e-o,de=[];for(let Me=0;Me<s.length-1;Me++){const Ue=s[Me],ot=s[Me+1],wt=Ue.dist(ot),Rt=ot.angleTo(Ue);for(;re+o<H+wt;){re+=o;const Ot=(re-H)/wt,zt=Nt(Ue.x,ot.x,Ot),Ht=Nt(Ue.y,ot.y,Ot);if(zt>=0&&zt<D&&Ht>=0&&Ht<D&&re-R>=0&&re+R<=V){const Vt=new al(zt,Ht,Rt,Me);Vt._round(),l&&!wg(s,Vt,m,l,h)||de.push(Vt)}}H+=wt}return C||de.length||y||(de=Dg(s,H/2,o,l,h,m,y,!0,D)),de}function Sg(s,e,o,l,h){const m=[];for(let y=0;y<s.length;y++){const C=s[y];let D;for(let R=0;R<C.length-1;R++){let V=C[R],H=C[R+1];V.x<e&&H.x<e||(V.x<e?V=new ve(e,V.y+(e-V.x)/(H.x-V.x)*(H.y-V.y))._round():H.x<e&&(H=new ve(e,V.y+(e-V.x)/(H.x-V.x)*(H.y-V.y))._round()),V.y<o&&H.y<o||(V.y<o?V=new ve(V.x+(o-V.y)/(H.y-V.y)*(H.x-V.x),o)._round():H.y<o&&(H=new ve(V.x+(o-V.y)/(H.y-V.y)*(H.x-V.x),o)._round()),V.x>=l&&H.x>=l||(V.x>=l?V=new ve(l,V.y+(l-V.x)/(H.x-V.x)*(H.y-V.y))._round():H.x>=l&&(H=new ve(l,V.y+(l-V.x)/(H.x-V.x)*(H.y-V.y))._round()),V.y>=h&&H.y>=h||(V.y>=h?V=new ve(V.x+(h-V.y)/(H.y-V.y)*(H.x-V.x),h)._round():H.y>=h&&(H=new ve(V.x+(h-V.y)/(H.y-V.y)*(H.x-V.x),h)._round()),D&&V.equals(D[D.length-1])||(D=[V],m.push(D)),D.push(H)))))}}return m}si("Anchor",al);var Mg=Ua,xy=Ua,xu=1e20;function Ua(s,e,o,l,h,m){this.fontSize=s||24,this.buffer=void 0===e?3:e,this.cutoff=l||.25,this.fontFamily=h||"sans-serif",this.fontWeight=m||"normal",this.radius=o||8;var y=this.size=this.fontSize+2*this.buffer,C=y+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function gd(s,e,o,l,h,m){for(var y=0;y<e;y++)Bp(s,y,e,o,l,h,m);for(var C=0;C<o;C++)Bp(s,C*e,1,e,l,h,m)}function Bp(s,e,o,l,h,m,y){var C,D,R,V;for(m[0]=0,y[0]=-xu,y[1]=xu,C=0;C<l;C++)h[C]=s[e+C*o];for(C=1,D=0,R=0;C<l;C++){do{R=(h[C]-h[V=m[D]]+C*C-V*V)/(C-V)/2}while(R<=y[D]&&--D>-1);m[++D]=C,y[D]=R,y[D+1]=xu}for(C=0,D=0;C<l;C++){for(;y[D+1]<C;)D++;s[e+C*o]=h[V=m[D]]+(C-V)*(C-V)}}Ua.prototype._draw=function(s,e){var o,l,h,m,y,C,D,R,V,H=this.ctx.measureText(s),re=H.width,de=2*this.buffer;e&&this.useMetrics?(y=Math.floor(H.actualBoundingBoxAscent),R=this.buffer+Math.ceil(H.actualBoundingBoxAscent),C=this.buffer,D=this.buffer,o=(l=Math.min(this.size,Math.ceil(H.actualBoundingBoxRight-H.actualBoundingBoxLeft)))+de,h=(m=Math.min(this.size-C,Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent)))+de,this.ctx.textBaseline="alphabetic"):(o=l=this.size,h=m=this.size,y=19*this.fontSize/24,C=D=0,R=this.middle,this.ctx.textBaseline="middle"),l&&m&&(this.ctx.clearRect(D,C,l,m),this.ctx.fillText(s,this.buffer,R),V=this.ctx.getImageData(D,C,l,m));var Me=new Uint8ClampedArray(o*h);return function(Ue,ot,wt,Rt,Ot,zt,Ht){zt.fill(xu,0,ot*wt),Ht.fill(0,0,ot*wt);for(var Vt=(ot-Rt)/2,En=0;En<Ot;En++)for(var Fn=0;Fn<Rt;Fn++){var Cn=(En+Vt)*ot+Fn+Vt,$n=Ue.data[4*(En*Rt+Fn)+3]/255;if(1===$n)zt[Cn]=0,Ht[Cn]=xu;else if(0===$n)zt[Cn]=xu,Ht[Cn]=0;else{var gn=Math.max(0,.5-$n),bn=Math.max(0,$n-.5);zt[Cn]=gn*gn,Ht[Cn]=bn*bn}}}(V,o,h,l,m,this.gridOuter,this.gridInner),gd(this.gridOuter,o,h,this.f,this.v,this.z),gd(this.gridInner,o,h,this.f,this.v,this.z),function(Ue,ot,wt,Rt,Ot,zt,Ht){for(var Vt=0;Vt<ot*wt;Vt++){var En=Math.sqrt(Rt[Vt])-Math.sqrt(Ot[Vt]);Ue[Vt]=Math.round(255-255*(En/zt+Ht))}}(Me,o,h,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Me,metrics:{width:l,height:m,sdfWidth:o,sdfHeight:h,top:y,left:0,advance:re}}},Ua.prototype.draw=function(s){return this._draw(s,!1).data},Ua.prototype.drawWithMetrics=function(s){return this._draw(s,!0)},Mg.default=xy;const _d={none:0,ideographs:1,all:2};class Jl{constructor(e,o,l){this.requestManager=e,this.localGlyphMode=o,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,o){const l=[];for(const h in e)for(const m of e[h])l.push({stack:h,id:m});Jt(l,({stack:h,id:m},y)=>{let C=this.entries[h];C||(C=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let D=C.glyphs[m];if(void 0!==D)return void y(null,{stack:h,id:m,glyph:D});if(D=this._tinySDF(C,h,m),D)return C.glyphs[m]=D,void y(null,{stack:h,id:m,glyph:D});const R=Math.floor(m/256);if(256*R>65535)return void y(new Error("glyphs > 65535 not supported"));if(C.ranges[R])return void y(null,{stack:h,id:m,glyph:D});let V=C.requests[R];V||(V=C.requests[R]=[],Jl.loadGlyphRange(h,R,this.url,this.requestManager,(H,re)=>{if(re){C.ascender=re.ascender,C.descender=re.descender;for(const de in re.glyphs)this._doesCharSupportLocalGlyph(+de)||(C.glyphs[+de]=re.glyphs[+de]);C.ranges[R]=!0}for(const de of V)de(H,re);delete C.requests[R]})),V.push((H,re)=>{H?y(H):re&&y(null,{stack:h,id:m,glyph:re.glyphs[m]||null})})},(h,m)=>{if(h)o(h);else if(m){const y={};for(const{stack:C,id:D,glyph:R}of m)void 0===y[C]&&(y[C]={}),void 0===y[C].glyphs&&(y[C].glyphs={}),y[C].glyphs[D]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},y[C].ascender=this.entries[C].ascender,y[C].descender=this.entries[C].descender;o(null,y)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==_d.none&&(this.localGlyphMode===_d.all?!!this.localFontFamily:!!this.localFontFamily&&(Rr(e)||uo(e)||Y(e)||ue(e))||M(e))}_tinySDF(e,o,l){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(l))return;let m=e.tinySDF;if(!m){let Ue="400";/bold/i.test(o)?Ue="900":/medium/i.test(o)?Ue="500":/light/i.test(o)&&(Ue="200"),m=e.tinySDF=new Jl.TinySDF(48,6,16,.25,h,Ue)}if(this.localGlyphs[m.fontWeight][l])return this.localGlyphs[m.fontWeight][l];const{data:y,metrics:C}=m.drawWithMetrics(String.fromCharCode(l)),{sdfWidth:D,sdfHeight:R,width:V,height:H,left:re,top:de,advance:Me}=C;return this.localGlyphs[m.fontWeight][l]={id:l,bitmap:new Ql({width:D,height:R},y),metrics:{width:V/2,height:H/2,left:re/2,top:de/2-27,advance:Me/2,localGlyph:!0}}}}function Wh(s,e,o,l){const h=[],m=s.image,y=m.pixelRatio,C=m.paddedRect.w-2,D=m.paddedRect.h-2,R=s.right-s.left,V=s.bottom-s.top,H=m.stretchX||[[0,C]],re=m.stretchY||[[0,D]],de=(gn,bn)=>gn+bn[1]-bn[0],Me=H.reduce(de,0),Ue=re.reduce(de,0),ot=C-Me,wt=D-Ue;let Rt=0,Ot=Me,zt=0,Ht=Ue,Vt=0,En=ot,Fn=0,Cn=wt;if(m.content&&l){const gn=m.content;Rt=Xc(H,0,gn[0]),zt=Xc(re,0,gn[1]),Ot=Xc(H,gn[0],gn[2]),Ht=Xc(re,gn[1],gn[3]),Vt=gn[0]-Rt,Fn=gn[1]-zt,En=gn[2]-gn[0]-Ot,Cn=gn[3]-gn[1]-Ht}const $n=(gn,bn,Wn,un)=>{const $i=Wa(gn.stretch-Rt,Ot,R,s.left),lr=bu(gn.fixed-Vt,En,gn.stretch,Me),dr=Wa(bn.stretch-zt,Ht,V,s.top),ir=bu(bn.fixed-Fn,Cn,bn.stretch,Ue),wi=Wa(Wn.stretch-Rt,Ot,R,s.left),Gr=bu(Wn.fixed-Vt,En,Wn.stretch,Me),Fi=Wa(un.stretch-zt,Ht,V,s.top),fs=bu(un.fixed-Fn,Cn,un.stretch,Ue),Ns=new ve($i,dr),ks=new ve(wi,dr),fo=new ve(wi,Fi),Ds=new ve($i,Fi),cs=new ve(lr/y,ir/y),Wr=new ve(Gr/y,fs/y),vs=e*Math.PI/180;if(vs){const es=Math.sin(vs),Nr=Math.cos(vs),Gs=[Nr,-es,es,Nr];Ns._matMult(Gs),ks._matMult(Gs),Ds._matMult(Gs),fo._matMult(Gs)}const ps=gn.stretch+gn.fixed,Qs=bn.stretch+bn.fixed;return{tl:Ns,tr:ks,bl:Ds,br:fo,tex:{x:m.paddedRect.x+1+ps,y:m.paddedRect.y+1+Qs,w:Wn.stretch+Wn.fixed-ps,h:un.stretch+un.fixed-Qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:cs,pixelOffsetBR:Wr,minFontScaleX:En/y/R,minFontScaleY:Cn/y/V,isSDF:o}};if(l&&(m.stretchX||m.stretchY)){const gn=Np(H,ot,Me),bn=Np(re,wt,Ue);for(let Wn=0;Wn<gn.length-1;Wn++){const un=gn[Wn],$i=gn[Wn+1];for(let lr=0;lr<bn.length-1;lr++)h.push($n(un,bn[lr],$i,bn[lr+1]))}}else h.push($n({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:D+1}));return h}function Xc(s,e,o){let l=0;for(const h of s)l+=Math.max(e,Math.min(o,h[1]))-Math.max(e,Math.min(o,h[0]));return l}function Np(s,e,o){const l=[{fixed:-1,stretch:0}];for(const[h,m]of s){const y=l[l.length-1];l.push({fixed:h-y.stretch,stretch:y.stretch}),l.push({fixed:h-y.stretch,stretch:y.stretch+(m-h)})}return l.push({fixed:e+1,stretch:o}),l}function Wa(s,e,o,l){return s/e*o+l}function bu(s,e,o,l){return s-e*o/l}function Tg(s,e,o,l){const h=e+s.positionedLines[l].lineOffset;return 0===l?o+h/2:o+(h+(e+s.positionedLines[l-1].lineOffset))/2}Jl.loadGlyphRange=function(s,e,o,l,h){const m=256*e,y=m+255,C=l.transformRequest(l.normalizeGlyphsURL(o).replace("{fontstack}",s).replace("{range}",`${m}-${y}`),ze.Glyphs);K(C,(D,R)=>{if(D)h(D);else if(R){const V={},H=new Yc(R).readFields(yg,{});for(const re of H.glyphs)V[re.id]=re;h(null,{glyphs:V,ascender:H.ascender,descender:H.descender})}})},Jl.TinySDF=Mg;class by{constructor(e=[],o=Yh){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:l}=this,h=o[e];for(;e>0;){const m=e-1>>1,y=o[m];if(l(h,y)>=0)break;o[e]=y,e=m}o[e]=h}_down(e){const{data:o,compare:l}=this,h=this.length>>1,m=o[e];for(;e<h;){let y=1+(e<<1),C=o[y];const D=y+1;if(D<this.length&&l(o[D],C)<0&&(y=D,C=o[D]),l(C,m)>=0)break;o[e]=C,e=y}o[e]=m}}function Yh(s,e){return s<e?-1:s>e?1:0}function Ig(s,e=1,o=!1){let l=1/0,h=1/0,m=-1/0,y=-1/0;const C=s[0];for(let de=0;de<C.length;de++){const Me=C[de];(!de||Me.x<l)&&(l=Me.x),(!de||Me.y<h)&&(h=Me.y),(!de||Me.x>m)&&(m=Me.x),(!de||Me.y>y)&&(y=Me.y)}const D=Math.min(m-l,y-h);let R=D/2;const V=new by([],zp);if(0===D)return new ve(l,h);for(let de=l;de<m;de+=D)for(let Me=h;Me<y;Me+=D)V.push(new Jc(de+R,Me+R,R,s));let H=function(de){let Me=0,Ue=0,ot=0;const wt=de[0];for(let Rt=0,Ot=wt.length,zt=Ot-1;Rt<Ot;zt=Rt++){const Ht=wt[Rt],Vt=wt[zt],En=Ht.x*Vt.y-Vt.x*Ht.y;Ue+=(Ht.x+Vt.x)*En,ot+=(Ht.y+Vt.y)*En,Me+=3*En}return new Jc(Ue/Me,ot/Me,0,de)}(s),re=V.length;for(;V.length;){const de=V.pop();(de.d>H.d||!H.d)&&(H=de,o&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,re)),de.max-H.d<=e||(R=de.h/2,V.push(new Jc(de.p.x-R,de.p.y-R,R,s)),V.push(new Jc(de.p.x+R,de.p.y-R,R,s)),V.push(new Jc(de.p.x-R,de.p.y+R,R,s)),V.push(new Jc(de.p.x+R,de.p.y+R,R,s)),re+=4)}return o&&(console.log(`num probes: ${re}`),console.log(`best distance: ${H.d}`)),H.p}function zp(s,e){return e.max-s.max}function Jc(s,e,o,l){this.p=new ve(s,e),this.h=o,this.d=function(h,m){let y=!1,C=1/0;for(let D=0;D<m.length;D++){const R=m[D];for(let V=0,H=R.length,re=H-1;V<H;re=V++){const de=R[V],Me=R[re];de.y>h.y!=Me.y>h.y&&h.x<(Me.x-de.x)*(h.y-de.y)/(Me.y-de.y)+de.x&&(y=!y),C=Math.min(C,Hm(h,de,Me))}}return(y?1:-1)*Math.sqrt(C)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const Kh=Number.POSITIVE_INFINITY,wu=Math.sqrt(2);function Sc(s,e){return e[1]!==Kh?function(o,l,h){let m=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),o){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(o){case"top-right":case"bottom-right":case"right":m=-l;break;case"top-left":case"bottom-left":case"left":m=l}return[m,y]}(s,e[0],e[1]):function(o,l){let h=0,m=0;l<0&&(l=0);const y=l/wu;switch(o){case"top-right":case"top-left":m=y-7;break;case"bottom-right":case"bottom-left":m=7-y;break;case"bottom":m=7-l;break;case"top":m=l-7}switch(o){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,m]}(s,e[0])}function Qh(s,e,o,l,h,m,y,C){s.createArrays(),s.tilePixelRatio=Lr/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const D=s.layers[0].layout,R=s.layers[0]._unevaluatedLayout._values,V={};if("composite"===s.textSizeData.kind){const{minZoom:de,maxZoom:Me}=s.textSizeData;V.compositeTextSizes=[R["text-size"].possiblyEvaluate(new we(de),y),R["text-size"].possiblyEvaluate(new we(Me),y)]}if("composite"===s.iconSizeData.kind){const{minZoom:de,maxZoom:Me}=s.iconSizeData;V.compositeIconSizes=[R["icon-size"].possiblyEvaluate(new we(de),y),R["icon-size"].possiblyEvaluate(new we(Me),y)]}V.layoutTextSize=R["text-size"].possiblyEvaluate(new we(C+1),y),V.layoutIconSize=R["icon-size"].possiblyEvaluate(new we(C+1),y),V.textMaxSize=R["text-size"].possiblyEvaluate(new we(18),y);const H="map"===D.get("text-rotation-alignment")&&"point"!==D.get("symbol-placement"),re=D.get("text-size");for(const de of s.features){const Me=D.get("text-font").evaluate(de,{},y).join(","),Ue=re.evaluate(de,{},y),ot=V.layoutTextSize.evaluate(de,{},y),wt=(V.layoutIconSize.evaluate(de,{},y),{horizontal:{},vertical:void 0}),Rt=de.text;let Ot,zt=[0,0];if(Rt){const En=Rt.toString(),Fn=24*D.get("text-letter-spacing").evaluate(de,{},y),Cn=24*D.get("text-line-height").evaluate(de,{},y),$n=Hf(En)?Fn:0,gn=D.get("text-anchor").evaluate(de,{},y),bn=D.get("text-variable-anchor");if(!bn){const ir=D.get("text-radial-offset").evaluate(de,{},y);zt=ir?Sc(gn,[24*ir,Kh]):D.get("text-offset").evaluate(de,{},y).map(wi=>24*wi)}let Wn=H?"center":D.get("text-justify").evaluate(de,{},y);const un=D.get("symbol-placement"),$i="point"===un,lr="point"===un?24*D.get("text-max-width").evaluate(de,{},y):0,dr=ir=>{s.allowVerticalPlacement&&Hl(En)&&(wt.vertical=qa(Rt,e,o,h,Me,lr,Cn,gn,ir,$n,zt,Va.vertical,!0,un,ot,Ue))};if(!H&&bn){const ir="auto"===Wn?bn.map(Gr=>ec(Gr)):[Wn];let wi=!1;for(let Gr=0;Gr<ir.length;Gr++){const Fi=ir[Gr];if(!wt.horizontal[Fi])if(wi)wt.horizontal[Fi]=wt.horizontal[0];else{const fs=qa(Rt,e,o,h,Me,lr,Cn,"center",Fi,$n,zt,Va.horizontal,!1,un,ot,Ue);fs&&(wt.horizontal[Fi]=fs,wi=1===fs.positionedLines.length)}}dr("left")}else{if("auto"===Wn&&(Wn=ec(gn)),$i||D.get("text-writing-mode").indexOf("horizontal")>=0||!Hl(En)){const ir=qa(Rt,e,o,h,Me,lr,Cn,gn,Wn,$n,zt,Va.horizontal,!1,un,ot,Ue);ir&&(wt.horizontal[Wn]=ir)}dr("point"===un?"left":Wn)}}let Ht=!1;if(de.icon&&de.icon.name){const En=l[de.icon.name];En&&(Ot=kp(h[de.icon.name],D.get("icon-offset").evaluate(de,{},y),D.get("icon-anchor").evaluate(de,{},y)),Ht=En.sdf,void 0===s.sdfIcons?s.sdfIcons=En.sdf:s.sdfIcons!==En.sdf&&fi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(En.pixelRatio!==s.pixelRatio||0!==D.get("icon-rotate").constantOr(1))&&(s.iconsNeedLinear=!0))}const Vt=Xh(wt.horizontal)||wt.vertical;s.iconsInText||(s.iconsInText=!!Vt&&Vt.iconsInText),(Vt||Ot)&&Cu(s,de,wt,Ot,l,V,ot,0,zt,Ht,y)}m&&s.generateCollisionDebugBuffers(C,s.collisionBoxArray)}function ec(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cu(s,e,o,l,h,m,y,C,D,R,V){let H=m.textMaxSize.evaluate(e,{},V);void 0===H&&(H=y);const re=s.layers[0].layout,de=re.get("icon-offset").evaluate(e,{},V),Me=Xh(o.horizontal)||o.vertical,Ue=y/24,ot=s.tilePixelRatio*H/24,wt=s.tilePixelRatio*re.get("symbol-spacing"),Rt=re.get("text-padding")*s.tilePixelRatio,Ot=re.get("icon-padding")*s.tilePixelRatio,zt=Qt(re.get("text-max-angle")),Ht="map"===re.get("text-rotation-alignment")&&"point"!==re.get("symbol-placement"),Vt="map"===re.get("icon-rotation-alignment")&&"point"!==re.get("symbol-placement"),En=re.get("symbol-placement"),Fn=wt/2,Cn=re.get("icon-text-fit");let $n;l&&"none"!==Cn&&(s.allowVerticalPlacement&&o.vertical&&($n=Lp(l,o.vertical,Cn,re.get("icon-text-fit-padding"),de,Ue)),Me&&(l=Lp(l,Me,Cn,re.get("icon-text-fit-padding"),de,Ue)));const gn=(bn,Wn)=>{Wn.x<0||Wn.x>=Lr||Wn.y<0||Wn.y>=Lr||function(un,$i,lr,dr,ir,wi,Gr,Fi,fs,Ns,ks,fo,Ds,cs,Wr,vs,ps,Qs,es,Nr,Gs,xs,Ss,po){const bs=un.addToLineVertexArray($i,lr);let wa,mo,Ar,ms,ta,Uo,ll,Ka=0,sc=0,cl=0,Co=0,ul=-1,dl=-1;const go={};let tu=zu(""),Ca=0,Tc=0;if(void 0===Fi._unevaluatedLayout.getValue("text-radial-offset")?[Ca,Tc]=Fi.layout.get("text-offset").evaluate(Nr,{},Ss).map(Ls=>24*Ls):(Ca=24*Fi.layout.get("text-radial-offset").evaluate(Nr,{},Ss),Tc=Kh),un.allowVerticalPlacement&&dr.vertical){const Ls=dr.vertical;if(cs)Uo=Au(Ls),Gr&&(ll=Au(Gr));else{const _o=Fi.layout.get("text-rotate").evaluate(Nr,{},Ss)+90;Ar=Eu(fs,$i,Ns,ks,fo,Ls,Ds,_o,Wr),Gr&&(ms=Eu(fs,$i,Ns,ks,fo,Gr,ps,_o))}}if(ir){const Ls=Fi.layout.get("icon-rotate").evaluate(Nr,{},Ss),_o="none"!==Fi.layout.get("icon-text-fit"),Xs=Wh(ir,Ls,xs,_o),kl=Gr?Wh(Gr,Ls,xs,_o):void 0;mo=Eu(fs,$i,Ns,ks,fo,ir,ps,Ls),Ka=4*Xs.length;const Iu=un.iconSizeData;let yo=null;"source"===Iu.kind?(yo=[ha*Fi.layout.get("icon-size").evaluate(Nr,{},Ss)],yo[0]>xa&&fi(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Iu.kind&&(yo=[ha*Gs.compositeIconSizes[0].evaluate(Nr,{},Ss),ha*Gs.compositeIconSizes[1].evaluate(Nr,{},Ss)],(yo[0]>xa||yo[1]>xa)&&fi(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),un.addSymbols(un.icon,Xs,yo,es,Qs,Nr,!1,$i,bs.lineStartIndex,bs.lineLength,-1,Ss),ul=un.icon.placedSymbolArray.length-1,kl&&(sc=4*kl.length,un.addSymbols(un.icon,kl,yo,es,Qs,Nr,Va.vertical,$i,bs.lineStartIndex,bs.lineLength,-1,Ss),dl=un.icon.placedSymbolArray.length-1)}for(const Ls in dr.horizontal){const _o=dr.horizontal[Ls];wa||(tu=zu(_o.text),cs?ta=Au(_o):wa=Eu(fs,$i,Ns,ks,fo,_o,Ds,Fi.layout.get("text-rotate").evaluate(Nr,{},Ss),Wr));const Xs=1===_o.positionedLines.length;if(cl+=Vp(un,$i,_o,wi,Fi,cs,Nr,Wr,bs,dr.vertical?Va.horizontal:Va.horizontalOnly,Xs?Object.keys(dr.horizontal):[Ls],go,ul,Gs,Ss),Xs)break}dr.vertical&&(Co+=Vp(un,$i,dr.vertical,wi,Fi,cs,Nr,Wr,bs,Va.vertical,["vertical"],go,dl,Gs,Ss));let Ol=-1;const _f=(Ls,_o)=>Ls?Math.max(Ls,_o):_o;Ol=_f(ta,Ol),Ol=_f(Uo,Ol),Ol=_f(ll,Ol);const Rd=Ol>-1?1:0;Rd&&(Ol*=po/24),un.glyphOffsetArray.length>=tc.MAX_GLYPHS&&fi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Nr.sortKey&&un.addToSortKeyRanges(un.symbolInstances.length,Nr.sortKey),un.symbolInstances.emplaceBack($i.x,$i.y,go.right>=0?go.right:-1,go.center>=0?go.center:-1,go.left>=0?go.left:-1,go.vertical>=0?go.vertical:-1,ul,dl,tu,void 0!==wa?wa:un.collisionBoxArray.length,void 0!==wa?wa+1:un.collisionBoxArray.length,void 0!==Ar?Ar:un.collisionBoxArray.length,void 0!==Ar?Ar+1:un.collisionBoxArray.length,void 0!==mo?mo:un.collisionBoxArray.length,void 0!==mo?mo+1:un.collisionBoxArray.length,ms||un.collisionBoxArray.length,ms?ms+1:un.collisionBoxArray.length,Ns,cl,Co,Ka,sc,Rd,0,Ca,Tc,Ol)}(s,Wn,bn,o,l,h,$n,s.layers[0],s.collisionBoxArray,e.index,e.sourceLayerIndex,s.index,Rt,Ht,D,0,Ot,Vt,de,e,m,R,V,y)};if("line"===En)for(const bn of Sg(e.geometry,0,0,Lr,Lr)){const Wn=vy(bn,wt,zt,o.vertical||Me,l,24,ot,s.overscaling,Lr);for(const un of Wn){const $i=Me;$i&&Jh(s,$i.text,Fn,un)||gn(bn,un)}}else if("line-center"===En){for(const bn of e.geometry)if(bn.length>1){const Wn=yy(bn,zt,o.vertical||Me,l,24,ot);Wn&&gn(bn,Wn)}}else if("Polygon"===e.type)for(const bn of Na(e.geometry,0)){const Wn=Ig(bn,16);gn(bn[0],new al(Wn.x,Wn.y,0))}else if("LineString"===e.type)for(const bn of e.geometry)gn(bn,new al(bn[0].x,bn[0].y,0));else if("Point"===e.type)for(const bn of e.geometry)for(const Wn of bn)gn([Wn],new al(Wn.x,Wn.y,0))}const xa=32640;function Vp(s,e,o,l,h,m,y,C,D,R,V,H,re,de,Me){const Ue=function(Rt,Ot,zt,Ht,Vt,En,Fn,Cn){const $n=[];if(0===Ot.positionedLines.length)return $n;const gn=Ht.layout.get("text-rotate").evaluate(En,{})*Math.PI/180,bn=function(dr){const ir=dr[0],wi=dr[1],Gr=ir*wi;return Gr>0?[ir,-wi]:Gr<0?[-ir,wi]:0===ir?[wi,ir]:[wi,-ir]}(zt);let Wn=Math.abs(Ot.top-Ot.bottom);for(const dr of Ot.positionedLines)Wn-=dr.lineOffset;const un=Ot.positionedLines.length,$i=Wn/un;let lr=Ot.top-zt[1];for(let dr=0;dr<un;++dr){const ir=Ot.positionedLines[dr];lr=Tg(Ot,$i,lr,dr);for(const wi of ir.positionedGlyphs){if(!wi.rect)continue;const Gr=wi.rect||{};let Fi=4,fs=!0,Ns=1,ks=0;const fo=(Vt||Cn)&&wi.vertical,Ds=wi.metrics.advance*wi.scale/2,cs=wi.metrics,Wr=wi.rect;if(null===Wr)continue;if(Cn&&Ot.verticalizable&&(ks=wi.imageName?Ds-wi.metrics.width*wi.scale/2:0),wi.imageName){const Ar=Fn[wi.imageName];if(!Ar)continue;fs=Ar.sdf,Ns=Ar.pixelRatio,Fi=1/Ns}const vs=Vt?[wi.x+Ds,wi.y]:[0,0];let ps=[0,0],Qs=[0,0],es=!1;Vt||(fo?(Qs=[wi.x+Ds+bn[0],wi.y+bn[1]-ks],es=!0):ps=[wi.x+Ds+zt[0],wi.y+zt[1]-ks]);const Nr=Wr.w*wi.scale/(Ns*(wi.localGlyph?2:1)),Gs=Wr.h*wi.scale/(Ns*(wi.localGlyph?2:1));let xs,Ss,po,bs;if(fo){const Ar=wi.y-lr,ms=new ve(-Ds,Ds-Ar),ta=-Math.PI/2,Uo=new ve(...Qs);xs=new ve(-Ds+ps[0],ps[1]),xs._rotateAround(ta,ms)._add(Uo),xs.x+=-Ar+Ds,xs.y-=(cs.left-Fi)*wi.scale;const ll=wi.imageName?cs.advance*wi.scale:24*wi.scale,Ka=String.fromCharCode(wi.glyph);Sp(Ka)?xs.x+=(1-Fi)*wi.scale:_y(Ka)?xs.x+=ll-cs.height*wi.scale+(-Fi-1)*wi.scale:xs.x+=wi.imageName||cs.width+2*Fi===Wr.w&&cs.height+2*Fi===Wr.h?(ll-Gs)/2:(ll-(cs.height+2*Fi)*wi.scale)/2,Ss=new ve(xs.x,xs.y-Nr),po=new ve(xs.x+Gs,xs.y),bs=new ve(xs.x+Gs,xs.y-Nr)}else{const Ar=(cs.left-Fi)*wi.scale-Ds+ps[0],ms=(-cs.top-Fi)*wi.scale+ps[1],ta=Ar+Nr,Uo=ms+Gs;xs=new ve(Ar,ms),Ss=new ve(ta,ms),po=new ve(Ar,Uo),bs=new ve(ta,Uo)}if(gn){let Ar;Ar=Vt?new ve(0,0):es?new ve(bn[0],bn[1]):new ve(zt[0],zt[1]),xs._rotateAround(gn,Ar),Ss._rotateAround(gn,Ar),po._rotateAround(gn,Ar),bs._rotateAround(gn,Ar)}const wa=new ve(0,0),mo=new ve(0,0);$n.push({tl:xs,tr:Ss,bl:po,br:bs,tex:Gr,writingMode:Ot.writingMode,glyphOffset:vs,sectionIndex:wi.sectionIndex,isSDF:fs,pixelOffsetTL:wa,pixelOffsetBR:mo,minFontScaleX:0,minFontScaleY:0})}}return $n}(0,o,C,h,m,y,l,s.allowVerticalPlacement),ot=s.textSizeData;let wt=null;"source"===ot.kind?(wt=[ha*h.layout.get("text-size").evaluate(y,{},Me)],wt[0]>xa&&fi(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===ot.kind&&(wt=[ha*de.compositeTextSizes[0].evaluate(y,{},Me),ha*de.compositeTextSizes[1].evaluate(y,{},Me)],(wt[0]>xa||wt[1]>xa)&&fi(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Ue,wt,C,m,y,R,e,D.lineStartIndex,D.lineLength,re,Me);for(const Rt of V)H[Rt]=s.text.placedSymbolArray.length-1;return 4*Ue.length}function Xh(s){for(const e in s)return s[e];return null}function Eu(s,e,o,l,h,m,y,C,D){let R=m.top,V=m.bottom,H=m.left,re=m.right;const de=m.collisionPadding;if(de&&(H-=de[0],R-=de[1],re+=de[2],V+=de[3]),C){const Me=new ve(H,R),Ue=new ve(re,R),ot=new ve(H,V),wt=new ve(re,V),Rt=Qt(C);let Ot=new ve(0,0);D&&(Ot=new ve(D[0],D[1])),Me._rotateAround(Rt,Ot),Ue._rotateAround(Rt,Ot),ot._rotateAround(Rt,Ot),wt._rotateAround(Rt,Ot),H=Math.min(Me.x,Ue.x,ot.x,wt.x),re=Math.max(Me.x,Ue.x,ot.x,wt.x),R=Math.min(Me.y,Ue.y,ot.y,wt.y),V=Math.max(Me.y,Ue.y,ot.y,wt.y)}return s.emplaceBack(e.x,e.y,H,R,re,V,y,o,l,h),s.length-1}function Au(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const e=s.bottom-s.top;return e>0?Math.max(10,e):null}function Jh(s,e,o,l){const h=s.compareText;if(e in h){const m=h[e];for(let y=m.length-1;y>=0;y--)if(l.dist(m[y])<o)return!0}else h[e]=[];return h[e].push(l),!1}const Up=bc.VectorTileFeature.types,yd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vd(s,e,o,l,h,m,y,C,D,R,V,H,re){const de=C?Math.min(xa,Math.round(C[0])):0,Me=C?Math.min(xa,Math.round(C[1])):0;s.emplaceBack(e,o,Math.round(32*l),Math.round(32*h),m,y,(de<<1)+(D?1:0),Me,16*R,16*V,256*H,256*re)}function xd(s,e,o){s.emplaceBack(e.x,e.y,o),s.emplaceBack(e.x,e.y,o),s.emplaceBack(e.x,e.y,o),s.emplaceBack(e.x,e.y,o)}function wy(s){for(const e of s.sections)if(ou(e.text))return!0;return!1}class bd{constructor(e){this.layoutVertexArray=new ls,this.indexArray=new Jr,this.programConfigurations=e,this.segments=new ho,this.dynamicLayoutVertexArray=new ca,this.opacityVertexArray=new wo,this.placedSymbolArray=new Nu}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,o,l,h){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,cd.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,yd,!0),this.opacityVertexBuffer.itemSize=1),(l||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}si("SymbolBuffers",bd);class wd{constructor(e,o,l){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new l,this.segments=new ho,this.collisionVertexArray=new ar,this.collisionVertexArrayExt=new ca}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ud.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Ep.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}si("CollisionBuffers",wd);class tc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(y=>y.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Uc([]),this.placementViewportMatrix=Uc([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vh(this.zoom,o["text-size"]),this.iconSizeData=Vh(this.zoom,o["icon-size"]);const l=this.layers[0].layout,h=l.get("symbol-sort-key"),m=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==h.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(y=>Va[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=e.sourceID}createArrays(){this.text=new bd(new gc(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new bd(new gc(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new au,this.lineVertexArray=new uh,this.symbolInstances=new Wl}calculateGlyphDependencies(e,o,l,h,m){for(let y=0;y<e.length;y++)if(o[e.charCodeAt(y)]=!0,h&&m){const C=Ec[e.charAt(y)];C&&(o[C.charCodeAt(0)]=!0)}}populate(e,o,l){const h=this.layers[0],m=h.layout,y=m.get("text-font"),C=m.get("text-field"),D=m.get("icon-image"),R=("constant"!==C.value.kind||C.value.value instanceof Ni&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==y.value.kind||y.value.value.length>0),V="constant"!==D.value.kind||!!D.value.value||Object.keys(D.parameters).length>0,H=m.get("symbol-sort-key");if(this.features=[],!R&&!V)return;const re=o.iconDependencies,de=o.glyphDependencies,Me=o.availableImages,Ue=new we(this.zoom);for(const{feature:ot,id:wt,index:Rt,sourceLayerIndex:Ot}of e){const zt=h._featureFilter.needGeometry,Ht=zc(ot,zt);if(!h._featureFilter.filter(Ue,Ht,l))continue;let Vt,En;if(zt||(Ht.geometry=_c(ot)),R){const Cn=h.getValueAndResolveTokens("text-field",Ht,l,Me),$n=Ni.factory(Cn);wy($n)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===te()||this.hasRTLText&&_e.isParsed())&&(Vt=Dp($n,h,Ht))}if(V){const Cn=h.getValueAndResolveTokens("icon-image",Ht,l,Me);En=Cn instanceof $r?Cn:$r.fromString(Cn)}if(!Vt&&!En)continue;const Fn=this.sortFeaturesByKey?H.evaluate(Ht,{},l):void 0;if(this.features.push({id:wt,text:Vt,icon:En,index:Rt,sourceLayerIndex:Ot,geometry:Ht.geometry,properties:ot.properties,type:Up[ot.type],sortKey:Fn}),En&&(re[En.name]=!0),Vt){const Cn=y.evaluate(Ht,{},l).join(","),$n="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Va.vertical)>=0;for(const gn of Vt.sections)if(gn.image)re[gn.image.name]=!0;else{const bn=Hl(Vt.toString()),Wn=gn.fontStack||Cn,un=de[Wn]=de[Wn]||{};this.calculateGlyphDependencies(gn.text,un,$n,this.allowVerticalPlacement,bn)}}}"line"===m.get("symbol-placement")&&(this.features=function(ot){const wt={},Rt={},Ot=[];let zt=0;function Ht(Cn){Ot.push(ot[Cn]),zt++}function Vt(Cn,$n,gn){const bn=Rt[Cn];return delete Rt[Cn],Rt[$n]=bn,Ot[bn].geometry[0].pop(),Ot[bn].geometry[0]=Ot[bn].geometry[0].concat(gn[0]),bn}function En(Cn,$n,gn){const bn=wt[$n];return delete wt[$n],wt[Cn]=bn,Ot[bn].geometry[0].shift(),Ot[bn].geometry[0]=gn[0].concat(Ot[bn].geometry[0]),bn}function Fn(Cn,$n,gn){const bn=gn?$n[0][$n[0].length-1]:$n[0][0];return`${Cn}:${bn.x}:${bn.y}`}for(let Cn=0;Cn<ot.length;Cn++){const $n=ot[Cn],gn=$n.geometry,bn=$n.text?$n.text.toString():null;if(!bn){Ht(Cn);continue}const Wn=Fn(bn,gn),un=Fn(bn,gn,!0);if(Wn in Rt&&un in wt&&Rt[Wn]!==wt[un]){const $i=En(Wn,un,gn),lr=Vt(Wn,un,Ot[$i].geometry);delete wt[Wn],delete Rt[un],Rt[Fn(bn,Ot[lr].geometry,!0)]=lr,Ot[$i].geometry=null}else Wn in Rt?Vt(Wn,un,gn):un in wt?En(Wn,un,gn):(Ht(Cn),wt[Wn]=zt-1,Rt[un]=zt-1)}return Ot.filter(Cn=>Cn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ot,wt)=>ot.sortKey-wt.sortKey)}update(e,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,l))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const l=this.lineVertexArray.length;if(void 0!==e.segment){let h=e.dist(o[e.segment+1]),m=e.dist(o[e.segment]);const y={};for(let C=e.segment+1;C<o.length;C++)y[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:h},C<o.length-1&&(h+=o[C+1].dist(o[C]));for(let C=e.segment||0;C>=0;C--)y[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:m},C>0&&(m+=o[C-1].dist(o[C]));for(let C=0;C<o.length;C++){const D=y[C];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,o,l,h,m,y,C,D,R,V,H,re){const de=e.indexArray,Me=e.layoutVertexArray,Ue=e.segments.prepareSegment(4*o.length,Me,de,this.canOverlap?y.sortKey:void 0),ot=this.glyphOffsetArray.length,wt=Ue.vertexLength,Rt=this.allowVerticalPlacement&&C===Va.vertical?Math.PI/2:0,Ot=y.text&&y.text.sections;for(let zt=0;zt<o.length;zt++){const{tl:Ht,tr:Vt,bl:En,br:Fn,tex:Cn,pixelOffsetTL:$n,pixelOffsetBR:gn,minFontScaleX:bn,minFontScaleY:Wn,glyphOffset:un,isSDF:$i,sectionIndex:lr}=o[zt],dr=Ue.vertexLength,ir=un[1];vd(Me,D.x,D.y,Ht.x,ir+Ht.y,Cn.x,Cn.y,l,$i,$n.x,$n.y,bn,Wn),vd(Me,D.x,D.y,Vt.x,ir+Vt.y,Cn.x+Cn.w,Cn.y,l,$i,gn.x,$n.y,bn,Wn),vd(Me,D.x,D.y,En.x,ir+En.y,Cn.x,Cn.y+Cn.h,l,$i,$n.x,gn.y,bn,Wn),vd(Me,D.x,D.y,Fn.x,ir+Fn.y,Cn.x+Cn.w,Cn.y+Cn.h,l,$i,gn.x,gn.y,bn,Wn),xd(e.dynamicLayoutVertexArray,D,Rt),de.emplaceBack(dr,dr+1,dr+2),de.emplaceBack(dr+1,dr+2,dr+3),Ue.vertexLength+=4,Ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(un[0]),zt!==o.length-1&&lr===o[zt+1].sectionIndex||e.programConfigurations.populatePaintArrays(Me.length,y,y.index,{},re,Ot&&Ot[lr])}e.placedSymbolArray.emplaceBack(D.x,D.y,ot,this.glyphOffsetArray.length-ot,wt,R,V,D.segment,l?l[0]:0,l?l[1]:0,h[0],h[1],C,0,!1,0,H,0)}_commitLayoutVertex(e,o,l,h,m){e.emplaceBack(o.x,o.y,l,h,Math.round(m.x),Math.round(m.y))}_addCollisionDebugVertices(e,o,l,h,m){const y=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),C=y.vertexLength,D=m.anchorX,R=m.anchorY;for(let H=0;H<4;H++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(o,-e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,e.padding),l.collisionVertexArrayExt.emplaceBack(o,-e.padding,e.padding),this._commitLayoutVertex(l.layoutVertexArray,h,D,R,new ve(e.x1,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,h,D,R,new ve(e.x2,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,h,D,R,new ve(e.x2,e.y2)),this._commitLayoutVertex(l.layoutVertexArray,h,D,R,new ve(e.x1,e.y2)),y.vertexLength+=4;const V=l.indexArray;V.emplaceBack(C,C+1),V.emplaceBack(C+1,C+2),V.emplaceBack(C+2,C+3),V.emplaceBack(C+3,C),y.primitiveLength+=4}_addTextDebugCollisionBoxes(e,o,l,h,m,y){for(let C=h;C<m;C++){const D=l.get(C),R=this.getSymbolInstanceTextSize(e,y,o,C);this._addCollisionDebugVertices(D,R,this.textCollisionBox,D.anchorPoint,y)}}_addIconDebugCollisionBoxes(e,o,l,h,m,y){for(let C=h;C<m;C++){const D=l.get(C),R=this.getSymbolInstanceIconSize(e,o,C);this._addCollisionDebugVertices(D,R,this.iconCollisionBox,D.anchorPoint,y)}}generateCollisionDebugBuffers(e,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wd(ro,dd.members,ya),this.iconCollisionBox=new wd(ro,dd.members,ya);const l=Wc(this.iconSizeData,e),h=Wc(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,e,o,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(h,e,o,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(l,e,o,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(l,e,o,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(e,o,l,h){const m=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),y=_u(this.textSizeData,e,m)/24;return this.tilePixelRatio*y}getSymbolInstanceIconSize(e,o,l){const h=this.icon.placedSymbolArray.get(l),m=_u(this.iconSizeData,e,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(e,o,l){e.emplaceBack(o,-l,-l),e.emplaceBack(o,l,-l),e.emplaceBack(o,l,l),e.emplaceBack(o,-l,l)}_updateTextDebugCollisionBoxes(e,o,l,h,m,y){for(let C=h;C<m;C++){const D=l.get(C),R=this.getSymbolInstanceTextSize(e,y,o,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,R,D.padding)}}_updateIconDebugCollisionBoxes(e,o,l,h,m){for(let y=h;y<m;y++){const C=l.get(y),D=this.getSymbolInstanceIconSize(e,o,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,C.padding)}}updateCollisionDebugBuffers(e,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=Wc(this.iconSizeData,e),h=Wc(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,e,o,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(h,e,o,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(l,e,o,y.iconBoxStartIndex,y.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(l,e,o,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,o,l,h,m,y,C,D,R){const V={};for(let H=o;H<l;H++){const re=e.get(H);V.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,padding:re.padding,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.textFeatureIndex=re.featureIndex;break}for(let H=h;H<m;H++){const re=e.get(H);V.verticalTextBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,padding:re.padding,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.verticalTextFeatureIndex=re.featureIndex;break}for(let H=y;H<C;H++){const re=e.get(H);V.iconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,padding:re.padding,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.iconFeatureIndex=re.featureIndex;break}for(let H=D;H<R;H++){const re=e.get(H);V.verticalIconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,padding:re.padding,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.verticalIconFeatureIndex=re.featureIndex;break}return V}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const l=e.placedSymbolArray.get(o),h=l.vertexStartIndex+4*l.numGlyphs;for(let m=l.vertexStartIndex;m<h;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const o=Math.sin(e),l=Math.cos(e),h=[],m=[],y=[];for(let C=0;C<this.symbolInstances.length;++C){y.push(C);const D=this.symbolInstances.get(C);h.push(0|Math.round(o*D.anchorX+l*D.anchorY)),m.push(D.featureIndex)}return y.sort((C,D)=>h[C]-h[D]||m[D]-m[C]),y}addToSortKeyRanges(e,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((h,m,y)=>{h>=0&&y.indexOf(h)===m&&this.addIndicesForPlacedSymbol(this.text,h)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}si("SymbolBucket",tc,{omit:["layers","collisionBoxArray","features","compareText"]}),tc.MAX_GLYPHS=65535,tc.addDynamicAttributes=xd;const jp=new ut({"symbol-placement":new Je(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Je(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Je(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Je(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Je(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Je(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Je(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Je(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Je(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Je(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(Qe.layout_symbol["icon-image"]),"icon-rotate":new ht(Qe.layout_symbol["icon-rotate"]),"icon-padding":new Je(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Je(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(Qe.layout_symbol["icon-offset"]),"icon-anchor":new ht(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Je(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Je(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Je(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new ht(Qe.layout_symbol["text-field"]),"text-font":new ht(Qe.layout_symbol["text-font"]),"text-size":new ht(Qe.layout_symbol["text-size"]),"text-max-width":new ht(Qe.layout_symbol["text-max-width"]),"text-line-height":new ht(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new ht(Qe.layout_symbol["text-justify"]),"text-radial-offset":new ht(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Je(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new ht(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Je(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Je(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new ht(Qe.layout_symbol["text-rotate"]),"text-padding":new Je(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Je(Qe.layout_symbol["text-keep-upright"]),"text-transform":new ht(Qe.layout_symbol["text-transform"]),"text-offset":new ht(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Je(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Je(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Je(Qe.layout_symbol["text-optional"])});var ef={paint:new ut({"icon-opacity":new ht(Qe.paint_symbol["icon-opacity"]),"icon-color":new ht(Qe.paint_symbol["icon-color"]),"icon-halo-color":new ht(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Je(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Je(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(Qe.paint_symbol["text-opacity"]),"text-color":new ht(Qe.paint_symbol["text-color"],{runtimeType:In,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new ht(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new ht(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Je(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Je(Qe.paint_symbol["text-translate-anchor"])}),layout:jp};class Gp{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:$e,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}si("FormatSectionOverride",Gp,{omit:["defaultValue"]});class Vo extends Za{constructor(e){super(e,ef)}recalculate(e,o){super.recalculate(e,o),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const h=[];for(const m of l)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,o,l,h){const m=this.layout.get(e).evaluate(o,{},l,h),y=this._unevaluatedLayout._values[e];return y.isDataDriven()||Fr(y.value)||!m?m:(C=o.properties,m.replace(/{([^{}]+)}/g,(R,V)=>V in C?String(C[V]):""));var C}createBucket(e){return new tc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of ef.paint.overridableProperties){if(!Vo.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),l=new Gp(o),h=new Ps(l,o.property.specification);let m=null;m="constant"===o.value.kind||"source"===o.value.kind?new Cs("source",h):new ds("composite",h,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new nt(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&Vo.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const l=e.get("text-field"),h=ef.paint.properties[o];let m=!1;const y=C=>{for(const D of C)if(h.overrides&&h.overrides.hasOverride(D))return void(m=!0)};if("constant"===l.value.kind&&l.value.value instanceof Ni)y(l.value.value.sections);else if("source"===l.value.kind){const C=R=>{m||(R instanceof Ne&&wr(R.value)===B?y(R.value.sections):R instanceof yn?y(R.sections):R.eachChild(C))},D=l.value;D._styleExpression&&C(D._styleExpression.expression)}return m}getProgramConfiguration(e){return new Dl(this,e)}}var Pg={paint:new ut({"background-color":new Je(Qe.paint_background["background-color"]),"background-pattern":new fn(Qe.paint_background["background-pattern"]),"background-opacity":new Je(Qe.paint_background["background-opacity"])})},Fg={paint:new ut({"raster-opacity":new Je(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Je(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Je(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Je(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Je(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Je(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Je(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Je(Qe.paint_raster["raster-fade-duration"])})};class Cy extends Za{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Ey={paint:new ut({"sky-type":new Je(Qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Je(Qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Je(Qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Je(Qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Je(Qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new vn(Qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Je(Qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Je(Qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Je(Qe.paint_sky["sky-opacity"])})};function Cd(s,e,o){const l=jc(0,0,1),h=Bo(vc());return function(m,y,C){C*=.5;var D=y[0],R=y[1],V=y[2],H=y[3],re=Math.sin(C),de=Math.cos(C);m[0]=D*de-V*re,m[1]=R*de+H*re,m[2]=V*de+D*re,m[3]=H*de-R*re}(h,h,o?-Qt(s)+Math.PI:Qt(s)),Xu(h,h,-Qt(e)),sp(l,l,h),rp(l,l)}const Ay={circle:class extends Za{constructor(s){super(s,Wm)}createBucket(s){return new yc(s)}queryRadius(s){const e=s;return Wu("circle-radius",this,e)+Wu("circle-stroke-width",this,e)+gh(this.paint.get("circle-translate"))}queryIntersectsFeature(s,e,o,l,h,m,y,C){const D="map"===this.paint.get("circle-pitch-alignment");if(D&&s.queryGeometry.isAboveHorizon)return!1;const R=np(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,s.pixelToTileUnitsFactor),V=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o),H=D?V*s.pixelToTileUnitsFactor:V;for(const re of l)for(const de of re){const Me=de.add(R),Ue=C&&m.elevation?m.elevation.exaggeration()*C.getElevationAt(Me.x,Me.y,!0):0,ot=D?Me:op(Me,Ue,y),wt=D?s.tilespaceRays.map(zt=>cu(zt,Ue)):s.queryGeometry.screenGeometry;let Rt=H;const Ot=Qu([],[de.x,de.y,Ue,1],y);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Rt*=Ot[3]/m.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Rt*=m.cameraToCenterDistance/Ot[3]),sl(wt,ot,Rt))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Dl(this,s)}},heatmap:class extends Za{createBucket(s){return new Ju(s)}constructor(s){super(s,Qm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){"heatmap-color"===s&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=td({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Dl(this,s)}},hillshade:class extends Za{constructor(s){super(s,Xm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(s){return new Dl(this,s)}},fill:class extends Za{constructor(s){super(s,dp)}getProgramIds(){const s=this.paint.get("fill-pattern"),e=s&&s.constantOr(1),o=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(s){return new Dl(this,s)}recalculate(s,e){super.recalculate(s,e);const o=this.paint._values["fill-outline-color"];"constant"===o.value.kind&&void 0===o.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new sd(s)}queryRadius(){return gh(this.paint.get("fill-translate"))}queryIntersectsFeature(s,e,o,l,h,m){return!s.queryGeometry.isAboveHorizon&&Vc(_h(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,s.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends Za{constructor(s){super(s,mp)}createBucket(s){return new od(s)}queryRadius(){return gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Dl(this,s)}queryIntersectsFeature(s,e,o,l,h,m,y,C,D){const R=np(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,s.pixelToTileUnitsFactor),V=this.paint.get("fill-extrusion-height").evaluate(e,o),H=this.paint.get("fill-extrusion-base").evaluate(e,o),re=[0,0],de=C&&m.elevation,Me=m.elevation?m.elevation.exaggeration():1;if(de){const wt=s.tile.getBucket(this).centroidVertexArray,Rt=D+1;if(Rt<wt.length){const Ot=wt.get(Rt);re[0]=Ot.a_centroid_pos0,re[1]=Ot.a_centroid_pos1}}if(0===re[0]&&1===re[1])return!1;const Ue=(wt=l,Rt=H,Ot=V,zt=R,Ht=y,(Vt=de?C:null)?function($n,gn,bn,Wn,un,$i,lr,dr,ir){const wi=[],Gr=[],Fi=[0,0,0,1];for(const fs of $n){const Ns=[],ks=[];for(const fo of fs){const Ds=fo.x+Wn.x,cs=fo.y+Wn.y,Wr=yp(Ds,cs,gn,bn,$i,lr,dr,ir);Fi[0]=Ds,Fi[1]=cs,Fi[2]=Wr.base,Fi[3]=1,Qu(Fi,Fi,un),Fi[3]=Math.max(Fi[3],1e-5);const vs=_p([Fi[0]/Fi[3],Fi[1]/Fi[3],Fi[2]/Fi[3]]);Fi[0]=Ds,Fi[1]=cs,Fi[2]=Wr.top,Fi[3]=1,Qu(Fi,Fi,un),Fi[3]=Math.max(Fi[3],1e-5);const ps=_p([Fi[0]/Fi[3],Fi[1]/Fi[3],Fi[2]/Fi[3]]);Ns.push(vs),ks.push(ps)}wi.push(Ns),Gr.push(ks)}return[wi,Gr]}(wt,Rt,Ot,zt,Ht,Vt,re,Me,m.center.lat):function($n,gn,bn,Wn,un){const $i=[],lr=[],dr=un[8]*gn,ir=un[9]*gn,wi=un[10]*gn,Gr=un[11]*gn,Fi=un[8]*bn,fs=un[9]*bn,Ns=un[10]*bn,ks=un[11]*bn;for(const fo of $n){const Ds=[],cs=[];for(const Wr of fo){const vs=Wr.x+Wn.x,ps=Wr.y+Wn.y,Qs=un[0]*vs+un[4]*ps+un[12],es=un[1]*vs+un[5]*ps+un[13],Nr=un[2]*vs+un[6]*ps+un[14],Gs=un[3]*vs+un[7]*ps+un[15],xs=Qs+dr,Ss=es+ir,po=Nr+wi,bs=Math.max(Gs+Gr,1e-5),wa=Qs+Fi,mo=es+fs,Ar=Nr+Ns,ms=Math.max(Gs+ks,1e-5),ta=new ve(xs/bs,Ss/bs);ta.z=po/bs,Ds.push(ta);const Uo=new ve(wa/ms,mo/ms);Uo.z=Ar/ms,cs.push(Uo)}$i.push(Ds),lr.push(cs)}return[$i,lr]}(wt,Rt,Ot,zt,Ht)),ot=s.queryGeometry;var wt,Rt,Ot,zt,Ht,Vt;return function(wt,Rt,Ot){let zt=1/0;Vc(Ot,Rt)&&(zt=gp(Ot,Rt[0]));for(let Ht=0;Ht<Rt.length;Ht++){const Vt=Rt[Ht],En=wt[Ht];for(let Fn=0;Fn<Vt.length-1;Fn++){const Cn=Vt[Fn],$n=[Cn,Vt[Fn+1],En[Fn+1],En[Fn],Cn];ph(Ot,$n)&&(zt=Math.min(zt,gp(Ot,$n)))}}return zt!==1/0&&zt}(Ue[0],Ue[1],ot.isPointQuery()?ot.screenBounds:ot.screenGeometry)}},line:class extends Za{constructor(s){super(s,Nh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if("line-gradient"===s){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Ae,this.gradientVersion=(this.gradientVersion+1)%Ke}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,e){super.recalculate(s,e),this.paint._values["line-floorwidth"]=zh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Bh(s)}getProgramIds(){const s=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),o=this.paint.get("line-gradient");return[e?"linePattern":s?"lineSDF":o?"lineGradient":"line"]}getProgramConfiguration(s){return new Dl(this,s)}queryRadius(s){const e=s,o=ld(Wu("line-width",this,e),Wu("line-gap-width",this,e)),l=Wu("line-offset",this,e);return o/2+Math.abs(l)+gh(this.paint.get("line-translate"))}queryIntersectsFeature(s,e,o,l,h,m){if(s.queryGeometry.isAboveHorizon)return!1;const y=_h(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,s.pixelToTileUnitsFactor),C=s.pixelToTileUnitsFactor/2*ld(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),D=this.paint.get("line-offset").evaluate(e,o);return D&&(l=function(R,V){const H=[],re=new ve(0,0);for(let de=0;de<R.length;de++){const Me=R[de],Ue=[];for(let ot=0;ot<Me.length;ot++){const wt=Me[ot-1],Rt=Me[ot],Ot=Me[ot+1],zt=0===ot?re:Rt.sub(wt)._unit()._perp(),Ht=ot===Me.length-1?re:Ot.sub(Rt)._unit()._perp(),Vt=zt._add(Ht)._unit();Vt._mult(1/(Vt.x*Ht.x+Vt.y*Ht.y)),Ue.push(Vt._mult(V)._add(Rt))}H.push(Ue)}return H}(l,D*s.pixelToTileUnitsFactor)),function(R,V,H){for(let re=0;re<V.length;re++){const de=V[re];if(R.length>=3)for(let Me=0;Me<de.length;Me++)if(Kl(R,de[Me]))return!0;if(Jf(R,de,H))return!0}return!1}(y,l,C)}isTileClipped(){return!0}},symbol:Vo,background:class extends Za{constructor(s){super(s,Pg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Za{constructor(s){super(s,Fg)}getProgramIds(){return["raster"]}},sky:class extends Za{constructor(s){super(s,Ey),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){"sky-gradient"===s?this._updateColorRamp():"sky-atmosphere-sun"!==s&&"sky-atmosphere-halo-color"!==s&&"sky-atmosphere-color"!==s&&"sky-atmosphere-sun-intensity"!==s||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=td({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(s,e){const o=this.paint.get("sky-type");if("atmosphere"===o){const l=this.paint.get("sky-atmosphere-sun"),h=!l,m=s.style.light,y=m.properties.get("position");return h&&"viewport"===m.properties.get("anchor")&&fi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?Cd(y.azimuthal,90-y.polar,e):Cd(l[0],90-l[1],e)}if("gradient"===o){const l=this.paint.get("sky-gradient-center");return Cd(l[0],90-l[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return"atmosphere"===s?["skyboxCapture","skybox"]:"gradient"===s?["skyboxGradient"]:null}}},{HTMLImageElement:$p,HTMLCanvasElement:Ed,HTMLVideoElement:tf,ImageData:Hp,ImageBitmap:Ad}=Oe;class Dd{constructor(e,o,l,h){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(o,h)}update(e,o,l){const{width:h,height:m}=e,y=!(this.size&&this.size[0]===h&&this.size[1]===m||l),{context:C}=this,{gl:D}=C;if(this.useMipmap=Boolean(o&&o.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!o||!1!==o.premultiply)),y)this.size=[h,m],e instanceof $p||e instanceof Ed||e instanceof tf||e instanceof Hp||Ad&&e instanceof Ad?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,e):D.texImage2D(D.TEXTURE_2D,0,this.format,h,m,0,this.format,D.UNSIGNED_BYTE,e.data);else{const{x:R,y:V}=l||{x:0,y:0};e instanceof $p||e instanceof Ed||e instanceof tf||e instanceof Hp||Ad&&e instanceof Ad?D.texSubImage2D(D.TEXTURE_2D,0,R,V,D.RGBA,D.UNSIGNED_BYTE,e):D.texSubImage2D(D.TEXTURE_2D,0,R,V,h,m,D.RGBA,D.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D)}bind(e,o,l){const{context:h}=this,{gl:m}=h;m.bindTexture(m.TEXTURE_2D,this.texture),l!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=m.LINEAR),e!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,e),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,l||e),this.filter=e),o!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class nc{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof ys?new ys(e.lng,e.lat):ys.convert(e),this}setSouthWest(e){return this._sw=e instanceof ys?new ys(e.lng,e.lat):ys.convert(e),this}extend(e){const o=this._sw,l=this._ne;let h,m;if(e instanceof ys)h=e,m=e;else{if(!(e instanceof nc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(nc.convert(e)):this.extend(ys.convert(e)):this;if(h=e._sw,m=e._ne,!h||!m)return this}return o||l?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),l.lng=Math.max(m.lng,l.lng),l.lat=Math.max(m.lat,l.lat)):(this._sw=new ys(h.lng,h.lat),this._ne=new ys(m.lng,m.lat)),this}getCenter(){return new ys((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ys(this.getWest(),this.getNorth())}getSouthEast(){return new ys(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:l}=ys.convert(e);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&h}static convert(e){return!e||e instanceof nc?e:new nc(e)}}const Zp=6371008.8;class ys{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ys(Mn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,l=this.lat*o,h=e.lat*o,m=Math.sin(l)*Math.sin(h)+Math.cos(l)*Math.cos(h)*Math.cos((e.lng-this.lng)*o);return Zp*Math.acos(Math.min(m,1))}toBounds(e=0){const o=360*e/40075017,l=o/Math.cos(Math.PI/180*this.lat);return new nc(new ys(this.lng-l,this.lat-o),new ys(this.lng+l,this.lat+o))}static convert(e){if(e instanceof ys)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new ys(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new ys(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const qp=2*Math.PI*Zp;function Wp(s){return qp*Math.cos(s*Math.PI/180)}function nf(s){return(180+s)/360}function rf(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function sf(s,e){return s/Wp(e)}function ba(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Du(s,e){return s*Wp(ba(e))}class eu{constructor(e,o,l=0){this.x=+e,this.y=+o,this.z=+l}static fromLngLat(e,o=0){const l=ys.convert(e);return new eu(nf(l.lng),rf(l.lat),sf(o,l.lat))}toLngLat(){return new ys(360*this.x-180,ba(this.y))}toAltitude(){return Du(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/qp*(e=ba(this.y),1/Math.cos(e*Math.PI/180));var e}}class af{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.image=new Ql({width:e,height:o}),this.positions={},this.uploaded=!1}getDash(e,o){const l=this.getKey(e,o);return this.positions[l]}trim(){const e=this.width,o=this.height=ci(this.nextRow);this.image.resize({width:e,height:o})}getKey(e,o){return e.join(",")+o}getDashRanges(e,o,l){const h=[];let m=e.length%2==1?-e[e.length-1]*l:0,y=e[0]*l,C=!0;h.push({left:m,right:y,isDash:C,zeroLength:0===e[0]});let D=e[0];for(let R=1;R<e.length;R++){C=!C;const V=e[R];m=D*l,D+=V,y=D*l,h.push({left:m,right:y,isDash:C,zeroLength:0===V})}return h}addRoundDash(e,o,l){const h=o/2;for(let m=-l;m<=l;m++){const y=this.width*(this.nextRow+l+m);let C=0,D=e[C];for(let R=0;R<this.width;R++){R/D.right>1&&(D=e[++C]);const V=Math.abs(R-D.left),H=Math.abs(R-D.right),re=Math.min(V,H);let de;const Me=m/l*(h+1);if(D.isDash){const Ue=h-Math.abs(Me);de=Math.sqrt(re*re+Ue*Ue)}else de=h-Math.sqrt(re*re+Me*Me);this.image.data[y+R]=Math.max(0,Math.min(255,de+128))}}}addRegularDash(e,o){for(let D=e.length-1;D>=0;--D){const R=e[D],V=e[D+1];R.zeroLength?e.splice(D,1):V&&V.isDash===R.isDash&&(V.left=R.left,e.splice(D,1))}const l=e[0],h=e[e.length-1];l.isDash===h.isDash&&(l.left=h.left-this.width,h.right=l.right+this.width);const m=this.width*this.nextRow;let y=0,C=e[y];for(let D=0;D<this.width;D++){D/C.right>1&&(C=e[++y]);const R=Math.abs(D-C.left),V=Math.abs(D-C.right),H=Math.min(R,V);this.image.data[m+D]=Math.max(0,Math.min(255,(C.isDash?H:-H)+o+128))}}addDash(e,o){const l=this.getKey(e,o);if(this.positions[l])return this.positions[l];const h="round"===o,m=h?7:0,y=2*m+1;if(this.nextRow+y>this.height)return fi("LineAtlas out of space"),null;0===e.length&&e.push(1);let C=0;for(let V=0;V<e.length;V++)e[V]<0&&(fi("Negative value is found in line dasharray, replacing values with 0"),e[V]=0),C+=e[V];if(0!==C){const V=this.width/C,H=this.getDashRanges(e,this.width,V);h?this.addRoundDash(H,V,m):this.addRegularDash(H,"square"===o?.5*V:0)}const D=this.nextRow+m;this.nextRow+=y;const R={tl:[D,m],br:[C,0]};return this.positions[l]=R,R}}si("LineAtlas",af);class Dy{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Yp=Oe.performance;function Kp(s){const e=s?s.url.toString():void 0;return Yp.getEntriesByName(e)}class Rg{constructor(){this.tasks={},this.taskQueue=[],zn(["process"],this),this.invoker=new Dy(this.process),this.nextId=0}add(e,o){const l=this.nextId++,h=function({type:m,isSymbolTile:y,zoom:C}){return C=C||0,"message"===m?0:"maybePrepare"!==m||y?"parseTile"!==m||y?"parseTile"===m&&y?300-C:"maybePrepare"===m&&y?400-C:500:200-C:100-C}(o);if(0===h){Ut();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:e,metadata:o,priority:h,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){Ut();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const o=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let e=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<o&&(o=m.priority,e=h)}if(null===e)return null;const l=this.taskQueue[e];return this.taskQueue.splice(e,1),l}remove(){this.invoker.remove()}}function Qp(s,e,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[s*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class Su{constructor(e,o,l){this.z=e,this.x=o,this.y=l,this.key=ic(0,e,e,o,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o){const l=(m=this.y,y=this.z,C=Qp(256*(h=this.x),256*(m=Math.pow(2,y)-m-1),y),D=Qp(256*(h+1),256*(m+1),y),C[0]+","+C[1]+","+D[0]+","+D[1]);var h,m,y,C,D;const R=function(V,H,re){let de,Me="";for(let Ue=V;Ue>0;Ue--)de=1<<Ue-1,Me+=(H&de?1:0)+(re&de?2:0);return Me}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===o?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",R).replace("{bbox-epsg-3857}",l)}getTilePoint(e){const o=Math.pow(2,this.z);return new ve((e.x*o-this.x)*Lr,(e.y*o-this.y)*Lr)}getTileVec3(e){const o=Math.pow(2,this.z);return jc((e.x*o-this.x)*Lr,(e.y*o-this.y)*Lr,Du(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xp{constructor(e,o){this.wrap=e,this.canonical=o,this.key=ic(e,o.z,o.z,o.x,o.y)}}class Jo{constructor(e,o,l,h,m){this.overscaledZ=e,this.wrap=o,this.canonical=new Su(l,+h,+m),this.key=0===o&&e===l?this.canonical.key:ic(o,e,l,h,m)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new Jo(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jo(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o=!0){if(this.overscaledZ===e&&o)return this.key;if(e>this.canonical.z)return ic(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-e;return ic(this.wrap*+o,e,e,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new Jo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,h=2*this.canonical.y;return[new Jo(o,this.wrap,o,l,h),new Jo(o,this.wrap,o,l+1,h),new Jo(o,this.wrap,o,l,h+1),new Jo(o,this.wrap,o,l+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Jo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Jo(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new eu(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new eu(e.x-this.wrap,e.y,e.z))}}function ic(s,e,o,l,h){const m=1<<Math.min(o,22);let y=m*(h%m)+l%m;return s&&o<22&&(y+=m*m*((s<0?-2*s-1:2*s)%(1<<2*(22-o)))),16*(32*y+o)+(e-o)}si("CanonicalTileID",Su),si("OverscaledTileID",Jo,{omit:["projMatrix"]});class Sd{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const l=e[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Jp{constructor(e,o,l,h,m){this.type="Feature",this._vectorTileFeature=e,e._z=o,e._x=l,e._y=h,this.properties=e.properties,this.id=m}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const o in this)"_geometry"!==o&&"_vectorTileFeature"!==o&&(e[o]=this[o]);return e}}var lf=Gn([{name:"a_pos",type:"Int16",components:2}]);class Md{constructor(e,o,l){this.tileID=e,this.uid=Ai(),this.uses=0,this.tileSize=o,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<di.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,o,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(h,m){const y={};if(!m)return y;for(const C of h){const D=C.layerIds.map(R=>m.getLayer(R)).filter(Boolean);if(0!==D.length){C.layers=D,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(R=>D.filter(V=>V.id===R)[0]));for(const R of D)y[R.id]=C}}return y}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof tc){if(this.hasSymbolBuckets=!0,!l)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof tc&&m.hasRTLText){this.hasRTLText=!0,_e.isLoading()||_e.isLoaded()||"deferred"!==te()||he();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(h).queryRadius(m))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new rl}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const l in this.buckets){const h=this.buckets[l];h.uploadPending()&&h.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dd(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dd(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Dd(e,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,l,h,m,y,C,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:C,transform:y,params:m},e,o,l):{}}querySourceFeatures(e,o){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const h=l.loadVTLayers(),m=o?o.sourceLayer:"",y=h._geojsonTileLayer||h[m];if(!y)return;const C=pr(o&&o.filter),{z:D,x:R,y:V}=this.tileID.canonical,H={z:D,x:R,y:V};for(let re=0;re<y.length;re++){const de=y.feature(re);if(C.needGeometry){const ot=zc(de,!0);if(!C.filter(new we(this.tileID.overscaledZ),ot,this.tileID.canonical))continue}else if(!C.filter(new we(this.tileID.overscaledZ),de))continue;const Me=l.getId(de,m),Ue=new Jp(de,D,R,V,Me);Ue.tile=H,e.push(Ue)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const l=an(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const l=Date.now();let h=!1;if(this.expirationTime>l)h=!1;else if(o)if(this.expirationTime<o)h=!0;else{const m=this.expirationTime-o;m?this.expirationTime=l+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const l=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!o.style.hasLayer(h))continue;const m=this.buckets[h],y=m.layers[0].sourceLayer||"_geojsonTileLayer",C=l[y],D=e[y];if(!C||!D||0===Object.keys(D).length)continue;m.update(D,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=o&&o.style&&o.style.getLayer(h);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(m)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<di.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=di.now()+e}setDependencies(e,o){const l={};for(const h of o)l[h]=!0;this.dependencies[e]=l}hasDependency(e,o){for(const l of e){const h=this.dependencies[l];if(h)for(const m of o)if(h[m])return!0}return!1}clearQueryDebugViz(){}}class em{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,l){const h=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},dn(this.stateChanges[e][h],l),null===this.deletedStates[e]){this.deletedStates[e]={};for(const m in this.state[e])m!==h&&(this.deletedStates[e][m]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][h]){this.deletedStates[e][h]={};for(const m in this.state[e][h])l[m]||(this.deletedStates[e][h][m]=null)}else for(const m in l)this.deletedStates[e]&&this.deletedStates[e][h]&&null===this.deletedStates[e][h][m]&&delete this.deletedStates[e][h][m]}removeFeatureState(e,o,l){if(null===this.deletedStates[e])return;const h=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&void 0!==o)null!==this.deletedStates[e][h]&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][l]=null);else if(void 0!==o)if(this.stateChanges[e]&&this.stateChanges[e][h])for(l in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][l]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,o){const l=String(o),h=dn({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const m=this.deletedStates[e][o];if(null===m)return{};for(const y in m)delete h[y]}return h}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const l={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),dn(this.state[h][y],this.stateChanges[h][y]),m[y]=this.state[h][y];l[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(null===this.deletedStates[h])for(const y in this.state[h])m[y]={},this.state[h][y]={};else for(const y in this.deletedStates[h]){if(null===this.deletedStates[h][y])this.state[h][y]={};else for(const C of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][C];m[y]=this.state[h][y]}l[h]=l[h]||{},dn(l[h],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(l).length)for(const h in e)e[h].setFeatureState(l,o)}}class tm{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,o){const l=this.toIdx(e,o);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(e,o){return this.leaves[this.toIdx(e,o)]}toIdx(e,o){return o*this.size+e}}function nm(s,e,o,l){let h=0,m=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(l[y])<1e-15){if(o[y]<s[y]||o[y]>e[y])return null}else{const C=1/l[y];let D=(s[y]-o[y])*C,R=(e[y]-o[y])*C;if(D>R){const V=D;D=R,R=V}if(D>h&&(h=D),R<m&&(m=R),h>m)return null}return h}function Td(s,e,o,l,h,m,y,C,D,R,V){const H=l-s,re=h-e,de=m-o,Me=y-s,Ue=C-e,ot=D-o,wt=V[1]*ot-V[2]*Ue,Rt=V[2]*Me-V[0]*ot,Ot=V[0]*Ue-V[1]*Me,zt=H*wt+re*Rt+de*Ot;if(Math.abs(zt)<1e-15)return null;const Ht=1/zt,Vt=R[0]-s,En=R[1]-e,Fn=R[2]-o,Cn=(Vt*wt+En*Rt+Fn*Ot)*Ht;if(Cn<0||Cn>1)return null;const $n=En*de-Fn*re,gn=Fn*H-Vt*de,bn=Vt*re-En*H,Wn=(V[0]*$n+V[1]*gn+V[2]*bn)*Ht;return Wn<0||Cn+Wn>1?null:(Me*$n+Ue*gn+ot*bn)*Ht}function Og(s,e,o){return(s-e)/(o-e)}function im(s,e,o,l,h,m,y,C,D){const R=1<<o,V=m-l,H=y-h,re=(s+1)/R*V+l,de=(e+0)/R*H+h,Me=(e+1)/R*H+h;C[0]=(s+0)/R*V+l,C[1]=de,D[0]=re,D[1]=Me}class cf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(m){const y=Math.ceil(Math.log2(m.dim/8)),C=[];let D=Math.ceil(Math.pow(2,y));const R=1/D,V=(de,Me,Ue,ot,wt)=>{const Rt=ot?1:0,Ot=(de+1)*Ue-Rt,zt=Me*Ue,Ht=(Me+1)*Ue-Rt;wt[0]=de*Ue,wt[1]=zt,wt[2]=Ot,wt[3]=Ht};let H=new tm(D);const re=[];for(let de=0;de<D*D;de++){V(de%D,Math.floor(de/D),R,!1,re);const Me=Il(re[0],re[1],m),Ue=Il(re[2],re[1],m),ot=Il(re[2],re[3],m),wt=Il(re[0],re[3],m);H.minimums.push(Math.min(Me,Ue,ot,wt)),H.maximums.push(Math.max(Me,Ue,ot,wt)),H.leaves.push(1)}for(C.push(H),D/=2;D>=1;D/=2){const de=C[C.length-1];H=new tm(D);for(let Me=0;Me<D*D;Me++){V(Me%D,Math.floor(Me/D),2,!0,re);const Ue=de.getElevation(re[0],re[1]),ot=de.getElevation(re[2],re[1]),wt=de.getElevation(re[2],re[3]),Rt=de.getElevation(re[0],re[3]),Ot=de.isLeaf(re[0],re[1]),zt=de.isLeaf(re[2],re[1]),Ht=de.isLeaf(re[2],re[3]),Vt=de.isLeaf(re[0],re[3]),En=Math.min(Ue.min,ot.min,wt.min,Rt.min),Fn=Math.max(Ue.max,ot.max,wt.max,Rt.max),Cn=Ot&&zt&&Ht&&Vt;H.maximums.push(Fn),H.minimums.push(En),H.leaves.push(Fn-En<=5&&Cn?1:0)}C.push(H)}return C}(this.dem),l=o.length-1,h=o[l];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,l,0)}raycastRoot(e,o,l,h,m,y,C=1){return nm([e,o,-100],[l,h,this.maximums[0]*C],m,y)}raycast(e,o,l,h,m,y,C=1){if(!this.nodeCount)return null;const D=this.raycastRoot(e,o,l,h,m,y,C);if(null==D)return null;const R=[],V=[],H=[],re=[],de=[{idx:0,t:D,nodex:0,nodey:0,depth:0}];for(;de.length>0;){const{idx:Me,t:Ue,nodex:ot,nodey:wt,depth:Rt}=de.pop();if(this.leaves[Me]){im(ot,wt,Rt,e,o,l,h,H,re);const zt=1<<Rt,Ht=(ot+0)/zt,Vt=(ot+1)/zt,En=(wt+0)/zt,Fn=(wt+1)/zt,Cn=Il(Ht,En,this.dem)*C,$n=Il(Vt,En,this.dem)*C,gn=Il(Vt,Fn,this.dem)*C,bn=Il(Ht,Fn,this.dem)*C,Wn=Td(H[0],H[1],Cn,re[0],H[1],$n,re[0],re[1],gn,m,y),un=Td(re[0],re[1],gn,H[0],re[1],bn,H[0],H[1],Cn,m,y),$i=Math.min(null!==Wn?Wn:Number.MAX_VALUE,null!==un?un:Number.MAX_VALUE);if($i!==Number.MAX_VALUE)return $i;{const lr=bh([],m,y,Ue);if(uf(Cn,$n,bn,gn,Og(lr[0],H[0],re[0]),Og(lr[1],H[1],re[1]))>=lr[2])return Ue}continue}let Ot=0;for(let zt=0;zt<this._siblingOffset.length;zt++){im((ot<<1)+this._siblingOffset[zt][0],(wt<<1)+this._siblingOffset[zt][1],Rt+1,e,o,l,h,H,re),H[2]=-100,re[2]=this.maximums[this.childOffsets[Me]+zt]*C;const Ht=nm(H,re,m,y);if(null!=Ht){const Vt=Ht;R[zt]=Vt;let En=!1;for(let Fn=0;Fn<Ot&&!En;Fn++)Vt>=R[V[Fn]]&&(V.splice(Fn,0,zt),En=!0);En||(V[Ot]=zt),Ot++}}for(let zt=0;zt<Ot;zt++){const Ht=V[zt];de.push({idx:this.childOffsets[Me]+Ht,t:R[Ht],nodex:(ot<<1)+this._siblingOffset[Ht][0],nodey:(wt<<1)+this._siblingOffset[Ht][1],depth:Rt+1})}}return null}_addNode(e,o,l){return this.minimums.push(e),this.maximums.push(o),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(e,o,l,h,m){if(1===e[h].isLeaf(o,l))return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const y=h-1,C=e[y];let D,R=0;for(let V=0;V<this._siblingOffset.length;V++){const H=2*o+this._siblingOffset[V][0],re=2*l+this._siblingOffset[V][1],de=C.getElevation(H,re),Me=C.isLeaf(H,re),Ue=this._addNode(de.min,de.max,Me);Me&&(R|=1<<V),D||(D=Ue)}for(let V=0;V<this._siblingOffset.length;V++)R&1<<V||this._construct(e,2*o+this._siblingOffset[V][0],2*l+this._siblingOffset[V][1],y,D+V)}}function uf(s,e,o,l,h,m){return Nt(Nt(s,o,m),Nt(e,l,m),h)}function Il(s,e,o){const l=o.dim,h=Ft(s*l-.5,0,l-1),m=Ft(e*l-.5,0,l-1),y=Math.floor(h),C=Math.floor(m),D=Math.min(y+1,l-1),R=Math.min(C+1,l-1);return uf(o.get(y,C),o.get(D,C),o.get(y,R),o.get(D,R),h-y,m-C)}const df={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Mu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,o,l,h=!1,m=!1){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&"mapbox"!==l&&"terrarium"!==l)return fi(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const y=this.dim=o.height-2;if(this.data=new Uint32Array(o.data.buffer),this.encoding=l||"mapbox",this.borderReady=h,!h){for(let C=0;C<y;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(y,C)]=this.data[this._idx(y-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,y)]=this.data[this._idx(C,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new cf(this)}get(e,o,l=!1){const h=new Uint8Array(this.data.buffer);l&&(e=Ft(e,-1,this.dim),o=Ft(o,-1,this.dim));const m=4*this._idx(e,o);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}static getUnpackVector(e){return df[e]}get unpackVector(){return df[this.encoding]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,l){return(256*e*256+256*o+l)/10-1e4}_unpackTerrarium(e,o,l){return 256*e+o+l/256-32768}static pack(e,o){const l=[0,0,0,0],h=Mu.getUnpackVector(o);let m=Math.floor((e+h[3])/h[2]);return l[2]=m%256,m=Math.floor(m/256),l[1]=m%256,m=Math.floor(m/256),l[0]=m,l}getPixels(){return new da({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,o,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,m=o*this.dim+this.dim,y=l*this.dim,C=l*this.dim+this.dim;switch(o){case-1:h=m-1;break;case 1:m=h+1}switch(l){case-1:y=C-1;break;case 1:C=y+1}const D=-o*this.dim,R=-l*this.dim;for(let V=y;V<C;V++)for(let H=h;H<m;H++)this.data[this._idx(H,V)]=e.data[this._idx(H+D,V+R)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}si("DEMData",Mu),si("DemMinMaxQuadTree",cf,{omit:["dem"]});class Pl{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,l){const h=e.wrapped().key;void 0===this.data[h]&&(this.data[h]=[]);const m={value:o,timeout:void 0};if(void 0!==l&&(m.timeout=setTimeout(()=>{this.remove(e,m)},l)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const l=e.wrapped().key,h=void 0===o?0:this.data[l].indexOf(o),m=this.data[l][h];return this.data[l].splice(h,1),m.timeout&&clearTimeout(m.timeout),0===this.data[l].length&&delete this.data[l],this.onRemove(m.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const l in this.data)for(const h of this.data[l])e(h.value)||o.push(h);for(const l of o)this.remove(l.value.tileID,l)}}class Fl{constructor(e,o,l){this.func=e,this.mask=o,this.range=l}}Fl.ReadOnly=!1,Fl.ReadWrite=!0,Fl.disabled=new Fl(519,Fl.ReadOnly,[0,1]);class ff{constructor(e,o,l,h,m,y){this.test=e,this.ref=o,this.mask=l,this.fail=h,this.depthFail=m,this.pass=y}}ff.disabled=new ff({func:519,mask:0},0,0,7680,7680,7680);class Rl{constructor(e,o,l){this.blendFunction=e,this.blendColor=o,this.mask=l}}Rl.Replace=[1,0],Rl.disabled=new Rl(Rl.Replace,_i.transparent,[!1,!1,!1,!1]),Rl.unblended=new Rl(Rl.Replace,_i.transparent,[!0,!0,!0,!0]),Rl.alphaBlended=new Rl([1,771],_i.transparent,[!0,!0,!0,!0]);class ea{constructor(e,o,l){this.enable=e,this.mode=o,this.frontFace=l}}ea.disabled=new ea(!1,1029,2305),ea.backCCW=new ea(!0,1029,2305),ea.backCW=new ea(!0,1029,2304),ea.frontCW=new ea(!0,1028,2304),ea.frontCCW=new ea(!0,1028,2305);class Ya extends nn{constructor(e,o,l){super(),this.id=e,this._onlySymbols=l,o.on("data",h=>{"source"===h.dataType&&"metadata"===h.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===h.dataType&&"content"===h.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Pl(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new em}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const o=this._tiles[e];if("loaded"!==o.state&&"errored"!==o.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,o){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,o)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const l=this._tiles[o];l.upload(e),l.prepare(this.map.style.imageManager)}}getIds(){return qt(this._tiles).map(e=>e.tileID).sort(rm).map(e=>e.key)}getRenderableIds(e){const o=[];for(const l in this._tiles)this._isIdRenderable(+l,e)&&o.push(this._tiles[l]);return e?o.sort((l,h)=>{const m=l.tileID,y=h.tileID,C=new ve(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),D=new ve(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-y.overscaledZ||D.y-C.y||D.x-C.x}).map(l=>l.tileID.key):o.map(l=>l.tileID).sort(rm).map(l=>l.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,o){const l=this._tiles[e];l&&("loading"!==l.state&&(l.state=o),this._loadTile(l,this._tileLoaded.bind(this,l,e,o)))}_tileLoaded(e,o,l,h){if(h)return e.state="errored",void(404!==h.status?this._source.fire(new mt(h,{tile:e})):this.update(this.transform));e.timeAdded=di.now(),"expired"===l&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ge("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const o=this.getRenderableIds();for(let h=0;h<o.length;h++){const m=o[h];if(e.neighboringTiles&&e.neighboringTiles[m]){const y=this.getTileByID(m);l(e,y),l(y,e)}}function l(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=m.tileID.canonical.x-h.tileID.canonical.x;const C=m.tileID.canonical.y-h.tileID.canonical.y,D=Math.pow(2,h.tileID.canonical.z),R=m.tileID.key;0===y&&0===C||Math.abs(C)>1||(Math.abs(y)>1&&(1===Math.abs(y+D)?y+=D:1===Math.abs(y-D)&&(y-=D)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,y,C),h.neighboringTiles&&h.neighboringTiles[R]&&(h.neighboringTiles[R].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,l,h){for(const m in this._tiles){let y=this._tiles[m];if(h[m]||!y.hasData()||y.tileID.overscaledZ<=o||y.tileID.overscaledZ>l)continue;let C=y.tileID;for(;y&&y.tileID.overscaledZ>o+1;){const R=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[R.key],y&&y.hasData()&&(C=R)}let D=C;for(;D.overscaledZ>o;)if(D=D.scaledTo(D.overscaledZ-1),e[D.key]){h[C.key]=C;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const l=this._loadedParentTiles[e.key];return l&&l.tileID.overscaledZ>=o?l:null}for(let l=e.overscaledZ-1;l>=o;l--){const h=e.scaledTo(l),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,o){o=o||this._source.tileSize;const l=Math.ceil(e.width/o)+1,h=Math.ceil(e.height/o)+1,m=Math.floor(l*h*5),y="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(e){const o=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,o){const l={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+o),l[m.tileID.key]=m}this._tiles=l;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(e,o,l){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let h;this.updateCacheSize(e,o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new Jo(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(h=e.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(C=>this._source.hasTile(C)))):h=[];const m=this._updateRetainedTiles(h);if(Pd(this._source.type)&&0!==h.length){const C={},D={},R=Object.keys(m);for(const H of R){const re=m[H],de=this._tiles[H];if(!de||de.fadeEndTime&&de.fadeEndTime<=di.now())continue;const Me=this.findLoadedParent(re,Math.max(re.overscaledZ-Ya.maxOverzooming,this._source.minzoom));Me&&(this._addTile(Me.tileID),C[Me.tileID.key]=Me.tileID),D[H]=re}const V=h[h.length-1].overscaledZ;for(const H in this._tiles){const re=this._tiles[H];if(m[H]||!re.hasData())continue;let de=re.tileID;for(;de.overscaledZ>V;){de=de.scaledTo(de.overscaledZ-1);const Me=this._tiles[de.key];if(Me&&Me.hasData()&&D[de.key]){m[H]=re.tileID;break}}}for(const H in C)m[H]||(this._coveredTiles[H]=!0,m[H]=C[H])}for(const C in m)this._tiles[C].clearFadeHold();const y=function(C,D){const R=[];for(const V in C)V in D||R.push(V);return R}(this._tiles,m);for(const C of y){const D=this._tiles[C];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const o={};if(0===e.length)return o;const l={},h=e[e.length-1].overscaledZ,m=e[0].overscaledZ,y=Math.max(m-Ya.maxOverzooming,this._source.minzoom),C=Math.max(m+Ya.maxUnderzooming,this._source.minzoom),D={};for(const R of e){const V=this._addTile(R);o[R.key]=R,V.hasData()||h<this._source.maxzoom&&(D[R.key]=R)}this._retainLoadedChildren(D,h,C,o);for(const R of e){let V=this._tiles[R.key];if(V.hasData())continue;if(R.canonical.z>=this._source.maxzoom){const re=R.children(this._source.maxzoom)[0],de=this.getTile(re);if(de&&de.hasData()){o[re.key]=re;continue}}else{const re=R.children(this._source.maxzoom);if(o[re[0].key]&&o[re[1].key]&&o[re[2].key]&&o[re[3].key])continue}let H=V.wasRequested();for(let re=R.overscaledZ-1;re>=y;--re){const de=R.scaledTo(re);if(l[de.key]||(l[de.key]=!0,V=this.getTile(de),!V&&H&&(V=this._addTile(de)),V&&(o[de.key]=de,H=V.wasRequested(),V.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let l,h=this._tiles[e].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){l=this._loadedParentTiles[h.key];break}o.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(l=this._getLoadedTile(m),l)break;h=m}for(const m of o)this._loadedParentTiles[m]=l}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const l=Boolean(o);return l||(o=new Md(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))),o?(o.uses++,this._tiles[e.key]=o,l||this._source.fire(new Ge("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const l=o.getExpiryTimeout();l&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},l))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&"reloading"!==o.state?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,o,l){const h=[],m=this.transform;if(!m)return h;for(const y in this._tiles){const C=this._tiles[y];if(l&&C.clearQueryDebugViz(),C.holdingForFade())continue;const D=e.containsTile(C,m,o);D&&h.push(D)}return h}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(l=>this._tiles[l].tileID);for(const l of o)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Pd(this._source.type))for(const e in this._tiles){const o=this._tiles[e];if(void 0!==o.fadeEndTime&&o.fadeEndTime>=di.now())return!0}return!1}setFeatureState(e,o,l){this._state.updateState(e=e||"_geojsonTileLayer",o,l)}removeFeatureState(e,o,l){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,l)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,l){const h=this._tiles[e];h&&h.setDependencies(o,l)}reloadTilesForDependencies(e,o){for(const l in this._tiles)this._tiles[l].hasDependency(e,o)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(e,o))}}function rm(s,e){const o=Math.abs(2*s.wrap)-+(s.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return s.overscaledZ-e.overscaledZ||l-o||e.canonical.y-s.canonical.y||e.canonical.x-s.canonical.x}function Pd(s){return"raster"===s||"image"===s||"video"===s}Ya.maxOverzooming=10,Ya.maxUnderzooming=3;class Tu{constructor(e,o,l){this._demTile=e,this._dem=this._demTile.dem,this._scale=o,this._offset=l}static create(e,o,l){const h=l||e.findDEMTileFor(o);if(!h||!h.dem)return;const m=h.dem,y=h.tileID,C=1<<o.canonical.z-y.canonical.z;return new Tu(h,h.tileSize/Lr/C,[(o.canonical.x/C-y.canonical.x)*m.dim,(o.canonical.y/C-y.canonical.y)*m.dim])}tileCoordToPixel(e,o){const l=o*this._scale+this._offset[1],h=Math.floor(e*this._scale+this._offset[0]),m=Math.floor(l);return new ve(h,m)}getElevationAt(e,o,l,h){const m=e*this._scale+this._offset[0],y=o*this._scale+this._offset[1],C=Math.floor(m),D=Math.floor(y),R=this._dem;return h=!!h,l?Nt(Nt(R.get(C,D,h),R.get(C,D+1,h),y-D),Nt(R.get(C+1,D,h),R.get(C+1,D+1,h),y-D),m-C):R.get(C,D,h)}getElevationAtPixel(e,o,l){return this._dem.get(e,o,!!l)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*sf(1,e)*this._dem.stride}}class sm{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Fa(Lr,16,0),this.featureIndexArray=new qf,this.promoteId=o}insert(e,o,l,h,m,y=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,h,m,y);const D=this.grid;for(let R=0;R<o.length;R++){const V=o[R],H=[1/0,1/0,-1/0,-1/0];for(let re=0;re<V.length;re++){const de=V[re];H[0]=Math.min(H[0],de.x),H[1]=Math.min(H[1],de.y),H[2]=Math.max(H[2],de.x),H[3]=Math.max(H[3],de.y)}H[0]<Lr&&H[1]<Lr&&H[2]>=0&&H[3]>=0&&D.insert(C,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new bc.VectorTile(new Yc(this.rawTileData)).layers,this.sourceLayerCoder=new Sd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,o,l,h){this.loadVTLayers();const m=e.params||{},y=pr(m.filter),C=e.tileResult,D=e.transform,R=C.bufferedTilespaceBounds,V=this.grid.query(R.min.x,R.min.y,R.max.x,R.max.y,(Me,Ue,ot,wt)=>qu(C.bufferedTilespaceGeometry,Me,Ue,ot,wt));V.sort(kg);let H=null;D.elevation&&V.length>0&&(H=Tu.create(D.elevation,this.tileID));const re={};let de;for(let Me=0;Me<V.length;Me++){const Ue=V[Me];if(Ue===de)continue;de=Ue;const ot=this.featureIndexArray.get(Ue);let wt=null;this.loadMatchingFeature(re,ot,y,m.layers,m.availableImages,o,l,h,(Rt,Ot,zt,Ht=0)=>(wt||(wt=_c(Rt)),Ot.queryIntersectsFeature(C,Rt,zt,wt,this.z,e.transform,e.pixelPosMatrix,H,Ht)))}return re}loadMatchingFeature(e,o,l,h,m,y,C,D,R){const{featureIndex:V,bucketIndex:H,sourceLayerIndex:re,layoutVertexArrayOffset:de}=o,Me=this.bucketLayerIDs[H];if(h&&!function(Rt,Ot){for(let zt=0;zt<Rt.length;zt++)if(Ot.indexOf(Rt[zt])>=0)return!0;return!1}(h,Me))return;const Ue=this.sourceLayerCoder.decode(re),ot=this.vtLayers[Ue].feature(V);if(l.needGeometry){const Rt=zc(ot,!0);if(!l.filter(new we(this.tileID.overscaledZ),Rt,this.tileID.canonical))return}else if(!l.filter(new we(this.tileID.overscaledZ),ot))return;const wt=this.getId(ot,Ue);for(let Rt=0;Rt<Me.length;Rt++){const Ot=Me[Rt];if(h&&h.indexOf(Ot)<0)continue;const zt=y[Ot];if(!zt)continue;let Ht={};void 0!==wt&&D&&(Ht=D.getState(zt.sourceLayer||"_geojsonTileLayer",wt));const Vt=dn({},C[Ot]);Vt.paint=pf(Vt.paint,zt.paint,ot,Ht,m),Vt.layout=pf(Vt.layout,zt.layout,ot,Ht,m);const En=!R||R(ot,zt,Ht,de);if(!En)continue;const Fn=new Jp(ot,this.z,this.x,this.y,wt);Fn.layer=Vt;let Cn=e[Ot];void 0===Cn&&(Cn=e[Ot]=[]),Cn.push({featureIndex:V,feature:Fn,intersectionZ:En})}}lookupSymbolFeatures(e,o,l,h,m,y,C,D){const R={};this.loadVTLayers();const V=pr(m);for(const H of e)this.loadMatchingFeature(R,{bucketIndex:l,sourceLayerIndex:h,featureIndex:H,layoutVertexArrayOffset:0},V,y,C,D,o);return R}hasLayer(e){for(const o of this.bucketLayerIDs)for(const l of o)if(e===l)return!0;return!1}getId(e,o){let l=e.id;return this.promoteId&&(l=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[o]],"boolean"==typeof l&&(l=Number(l))),l}}function pf(s,e,o,l,h){return ii(s,(m,y)=>{const C=e instanceof Ct?e.get(y):null;return C&&C.evaluate?C.evaluate(o,l,h):C})}function kg(s,e){return e-s}si("FeatureIndex",sm,{omit:["rawTileData","sourceLayerCoder"]});class Fd{constructor(e){const o={},l=[];for(const C in e){const D=e[C],R=o[C]={};for(const V in D.glyphs){const H=D.glyphs[+V];if(!H||0===H.bitmap.width||0===H.bitmap.height)continue;const re=H.metrics.localGlyph?2:1,de={x:0,y:0,w:H.bitmap.width+2*re,h:H.bitmap.height+2*re};l.push(de),R[V]=de}}const{w:h,h:m}=yu(l),y=new Ql({width:h||1,height:m||1});for(const C in e){const D=e[C];for(const R in D.glyphs){const V=D.glyphs[+R];if(!V||0===V.bitmap.width||0===V.bitmap.height)continue;const H=o[C][R],re=V.metrics.localGlyph?2:1;Ql.copy(V.bitmap,y,{x:0,y:0},{x:H.x+re,y:H.y+re},V.bitmap)}}this.image=y,this.positions=o}}si("GlyphAtlas",Fd);class Lg{constructor(e){this.tileID=new Jo(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,o,l,h,m){this.status="parsing",this.data=e,this.collisionBoxArray=new rl;const y=new Sd(Object.keys(e.layers).sort()),C=new sm(this.tileID,this.promoteId);C.bucketLayerIDs=[];const D={},R=new af(256,256),V={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:R,availableImages:l},H=o.familiesBySource[this.source];for(const Ht in H){const Vt=e.layers[Ht];if(!Vt)continue;let En=!1,Fn=!1;for(const gn of H[Ht])"symbol"===gn[0].type?En=!0:Fn=!0;if(!0===this.isSymbolTile&&!En||!1===this.isSymbolTile&&!Fn)continue;1===Vt.version&&fi(`Vector tile source "${this.source}" layer "${Ht}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Cn=y.encode(Ht),$n=[];for(let gn=0;gn<Vt.length;gn++){const bn=Vt.feature(gn),Wn=C.getId(bn,Ht);$n.push({feature:bn,id:Wn,index:gn,sourceLayerIndex:Cn})}for(const gn of H[Ht]){const bn=gn[0];void 0!==this.isSymbolTile&&"symbol"===bn.type!==this.isSymbolTile||bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||"none"!==bn.visibility&&(mf(gn,this.zoom,l),(D[bn.id]=bn.createBucket({index:C.bucketLayerIDs.length,layers:gn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cn,sourceID:this.source,enableTerrain:this.enableTerrain})).populate($n,V,this.tileID.canonical),C.bucketLayerIDs.push(gn.map(Wn=>Wn.id)))}}let re,de,Me,Ue;R.trim();const ot={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},wt=ii(V.glyphDependencies,Ht=>Object.keys(Ht).map(Number));Object.keys(wt).length?h.send("getGlyphs",{uid:this.uid,stacks:wt},(Ht,Vt)=>{re||(re=Ht,de=Vt,zt.call(this))},void 0,!1,ot):de={};const Rt=Object.keys(V.iconDependencies);Rt.length?h.send("getImages",{icons:Rt,source:this.source,tileID:this.tileID,type:"icons"},(Ht,Vt)=>{re||(re=Ht,Me=Vt,zt.call(this))},void 0,!1,ot):Me={};const Ot=Object.keys(V.patternDependencies);function zt(){if(re)return m(re);if(de&&Me&&Ue){const Ht=new Fd(de),Vt=new fd(Me,Ue);for(const En in D){const Fn=D[En];Fn instanceof tc?(mf(Fn.layers,this.zoom,l),Qh(Fn,de,Ht.positions,Me,Vt.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):Fn.hasPattern&&(Fn instanceof Bh||Fn instanceof sd||Fn instanceof od)&&(mf(Fn.layers,this.zoom,l),Fn.addFeatures(V,this.tileID.canonical,Vt.patternPositions))}this.status="done",m(null,{buckets:qt(D).filter(En=>!En.isEmpty()),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ht.image,lineAtlas:R,imageAtlas:Vt,glyphMap:this.returnDependencies?de:null,iconMap:this.returnDependencies?Me:null,glyphPositions:this.returnDependencies?Ht.positions:null})}}Ot.length?h.send("getImages",{icons:Ot,source:this.source,tileID:this.tileID,type:"patterns"},(Ht,Vt)=>{re||(re=Ht,Ue=Vt,zt.call(this))},void 0,!1,ot):Ue={},zt.call(this)}}function mf(s,e,o){const l=new we(e);for(const h of s)h.recalculate(l,o)}class gf{constructor(e){this.entries={},this.scheduler=e}request(e,o,l,h){const m=this.entries[e]=this.entries[e]||{callbacks:[]};if(m.result){const[y,C]=m.result;return this.scheduler?this.scheduler.add(()=>{h(y,C)},o):h(y,C),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=l((y,C)=>{m.result=[y,C];for(const D of m.callbacks)this.scheduler?this.scheduler.add(()=>{D(y,C)},o):D(y,C);setTimeout(()=>delete this.entries[e],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(y=>y!==h),m.callbacks.length||(m.cancel(),delete this.entries[e]))}}}function Mc(s,e,o){const l=JSON.stringify(s.request);return s.data&&(this.deduped.entries[l]={result:[null,s.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},h=>{const m=K(s.request,(y,C,D,R)=>{y?h(y):C&&h(null,{vectorTile:o?void 0:new bc.VectorTile(new Yc(C)),rawData:C,cacheControl:D,expires:R})});return()=>{m.cancel(),h()}},e)}c.ARRAY_TYPE=ua,c.AUTH_ERR_MSG=en,c.Actor=class{constructor(s,e,o){this.target=s,this.parent=e,this.mapId=o,this.callbacks={},this.cancelCallbacks={},zn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ut()?s:Oe,this.scheduler=new Rg}send(s,e,o,l,h=!1,m){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=m,this.callbacks[y]=o);const C=An(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:s,hasCallback:!!o,targetMapId:l,mustQueue:h,sourceMapId:this.mapId,data:Cl(e,C)},C),{cancel:()=>{o&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(s){const e=s.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l.cancel()}else if(e.mustQueue||Ut()){const l=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,e),l&&l.metadata||{type:"message"})}else this.processTask(o,e)}processTask(s,e){if("<response>"===e.type){const o=this.callbacks[s];delete this.callbacks[s],o&&(e.error?o(Ra(e.error)):o(null,Ra(e.data)))}else{const o=An(this.globalScope)?void 0:[],l=e.hasCallback?(m,y)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:m?Cl(m):null,data:Cl(y,o)},o)}:m=>{},h=Ra(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,h,l);else if(this.parent.getWorkerSource){const m=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,m[0],h.source)[m[1]](h,l)}else l(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.CanonicalTileID=Su,c.Color=_i,c.ColorMode=Rl,c.CullFaceMode=ea,c.DEMData=Mu,c.DataConstantProperty=Je,c.DedupedRequest=gf,c.DepthMode=Fl,c.EXTENT=Lr,c.Elevation=class{getAtPointOrZero(s,e=0){return this.getAtPoint(s,e)||0}getAtPoint(s,e,o=!0){null==e&&(e=null);const l=this._source();if(!l||s.y<0||s.y>1)return e;const h=l.getSource().maxzoom,m=1<<h,y=Math.floor(s.x),C=s.x-y,D=new Jo(h,y,h,Math.floor(C*m),Math.floor(s.y*m)),R=this.findDEMTileFor(D);if(!R||!R.dem)return e;const V=R.dem,H=1<<R.tileID.canonical.z,re=(C*H-R.tileID.canonical.x)*V.dim,de=(s.y*H-R.tileID.canonical.y)*V.dim,Me=Math.floor(re),Ue=Math.floor(de);return(o?this.exaggeration():1)*Nt(Nt(V.get(Me,Ue),V.get(Me,Ue+1),de-Ue),Nt(V.get(Me+1,Ue),V.get(Me+1,Ue+1),de-Ue),re-Me)}getAtTileOffset(s,e,o){const l=1<<s.canonical.z;return this.getAtPointOrZero(new eu(s.wrap+(s.canonical.x+e/Lr)/l,(s.canonical.y+o/Lr)/l))}getForTilePoints(s,e,o,l){const h=Tu.create(this,s,l);return!!h&&(e.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],o)}),!0)}getMinMaxForTile(s){const e=this.findDEMTileFor(s);if(!e||!e.dem)return null;const o=e.dem.tree,l=e.tileID,h=1<<s.canonical.z-l.canonical.z;let m=s.canonical.x/h-l.canonical.x,y=s.canonical.y/h-l.canonical.y,C=0;for(let D=0;D<s.canonical.z-l.canonical.z&&!o.leaves[C];D++){m*=2,y*=2;const R=2*Math.floor(y)+Math.floor(m);C=o.childOffsets[C]+R,m%=1,y%=1}return{min:this.exaggeration()*o.minimums[C],max:this.exaggeration()*o.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,e,o){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},c.ErrorEvent=mt,c.EvaluationParameters=we,c.Event=Ge,c.Evented=nn,c.GlyphManager=Jl,c.ImagePosition=hd,c.LineAtlas=af,c.LngLat=ys,c.LngLatBounds=nc,c.LocalGlyphMode=_d,c.MAX_SAFE_INTEGER=Ke,c.MercatorCoordinate=eu,c.ONE_EM=24,c.OverscaledTileID=Jo,c.Properties=ut,c.RGBAImage=da,c.RequestManager=class{constructor(s,e,o){this._transformRequestFn=s,this._customAccessToken=e,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const s=function(){let e="";for(let o=0;o<10;o++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",oi,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,e){return this._transformRequestFn&&this._transformRequestFn(s,e)||{url:s}}normalizeStyleURL(s,e){if(!at(s))return s;const o=sn(s);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeGlyphsURL(s,e){if(!at(s))return s;const o=sn(s);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeSourceURL(s,e){if(!at(s))return s;const o=sn(s);return o.path=`/v4/${o.authority}.json`,o.params.push("secure"),this._makeAPIURL(o,this._customAccessToken||e)}normalizeSpriteURL(s,e,o,l){const h=sn(s);return at(s)?(h.path=`/styles/v1${h.path}/sprite${e}${o}`,this._makeAPIURL(h,this._customAccessToken||l)):(h.path+=`${e}${o}`,Un(h))}normalizeTileURL(s,e,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!at(s))return s;const l=sn(s);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||o&&"raster"!==l.authority&&512===o?"@2x":""}${ki.supported?".webp":"$1"}`),"raster"===l.authority?l.path=`/${Vn.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${Vn.TILE_URL_VERSION}${l.path}`);const h=this._customAccessToken||function(m){for(const y of m){const C=y.match(/^access_token=(.*)$/);if(C)return C[1]}return null}(l.params)||Vn.ACCESS_TOKEN;return Vn.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,h)}canonicalizeTileURL(s,e){const o=sn(s);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return s;let l="mapbox://";o.path.match(/^\/raster\/v1\//)?l+=`raster/${o.path.replace(`/${Vn.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${o.path.replace(`/${Vn.TILE_URL_VERSION}/`,"")}`;let h=o.params;return e&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(l+=`?${h.join("&")}`),l}canonicalizeTileset(s,e){const o=!!e&&at(e),l=[];for(const h of s.tiles||[])xt(h)?l.push(this.canonicalizeTileURL(h,o)):l.push(h);return l}_makeAPIURL(s,e){const o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=sn(Vn.API_URL);if(s.protocol=l.protocol,s.authority=l.authority,"http"===s.protocol){const h=s.params.indexOf("secure");h>=0&&s.params.splice(h,1)}if("/"!==l.path&&(s.path=`${l.path}${s.path}`),!Vn.REQUIRE_ACCESS_TOKEN)return Un(s);if(e=e||Vn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return s.params=s.params.filter(h=>-1===h.indexOf("access_token")),s.params.push(`access_token=${e||""}`),Un(s)}},c.ResourceType=ze,c.SegmentVector=ho,c.SourceCache=Ya,c.StencilMode=ff,c.StructArrayLayout1ui2=Ko,c.StructArrayLayout2f1f2i16=Oa,c.StructArrayLayout2i4=Si,c.StructArrayLayout2ui4=ya,c.StructArrayLayout3f12=ca,c.StructArrayLayout3ui6=Jr,c.StructArrayLayout4i8=Er,c.Texture=Dd,c.Tile=Md,c.Transitionable=He,c.Uniform1f=Uu,c.Uniform1i=class extends va{constructor(s,e){super(s,e),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},c.Uniform2f=class extends va{constructor(s,e){super(s,e),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},c.Uniform3f=class extends va{constructor(s,e){super(s,e),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},c.Uniform4f=Yf,c.UniformColor=Um,c.UniformMatrix3f=class extends va{constructor(s,e){super(s,e),this.current=hh}set(s){for(let e=0;e<9;e++)if(s[e]!==this.current[e]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}},c.UniformMatrix4f=class extends va{constructor(s,e){super(s,e),this.current=ju}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let e=1;e<16;e++)if(s[e]!==this.current[e]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},c.UnwrappedTileID=Xp,c.ValidationError=It,c.VectorTileWorkerSource=class extends nn{constructor(s,e,o,l,h){super(),this.actor=s,this.layerIndex=e,this.availableImages=o,this.loadVectorData=h||Mc,this.loading={},this.loaded={},this.deduped=new gf(s.scheduler),this.isSpriteLoaded=l,this.scheduler=s.scheduler}loadTile(s,e){const o=s.uid,l=s&&s.request,h=l&&l.collectResourceTiming,m=this.loading[o]=new Lg(s);m.abort=this.loadVectorData(s,(y,C)=>{const D=!this.loading[o];if(delete this.loading[o],D||y||!C)return m.status="done",D||(this.loaded[o]=m),e(y);const R=C.rawData,V={};C.expires&&(V.expires=C.expires),C.cacheControl&&(V.cacheControl=C.cacheControl),m.vectorTile=C.vectorTile||new bc.VectorTile(new Yc(R));const H=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(re,de)=>{if(re||!de)return e(re);const Me={};if(h){const Ue=Kp(l);Ue.length>0&&(Me.resourceTiming=JSON.parse(JSON.stringify(Ue)))}e(null,dn({rawTileData:R.slice(0)},de,V,Me))})};this.isSpriteLoaded?H():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(H,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):H()}),this.loaded=this.loaded||{},this.loaded[o]=m})}reloadTile(s,e){const o=this.loaded,l=s.uid,h=this;if(o&&o[l]){const m=o[l];m.showCollisionBoxes=s.showCollisionBoxes,m.enableTerrain=!!s.enableTerrain;const y=(C,D)=>{const R=m.reloadCallback;R&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,R)),e(C,D)};"parsing"===m.status?m.reloadCallback=y:"done"===m.status&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(s,e){const o=s.uid,l=this.loading[o];l&&(l.abort&&l.abort(),delete this.loading[o]),e()}removeTile(s,e){const o=this.loaded,l=s.uid;o&&o[l]&&delete o[l],e()}},c.WritingMode=Va,c.ZoomHistory=hc,c.add=function(s,e,o){return s[0]=e[0]+o[0],s[1]=e[1]+o[1],s[2]=e[2]+o[2],s},c.addDynamicAttributes=xd,c.altitudeFromMercatorZ=Du,c.asyncAll=Jt,c.bezier=kt,c.bindAll=zn,c.bufferConvexPolygon=function(s,e){const o=[];for(let l=0;l<s.length;l++){const h=Mn(l-1,-1,s.length-1),m=Mn(l+1,-1,s.length-1),y=s[l],C=s[m],D=s[h].sub(y).unit(),R=C.sub(y).unit(),V=R.angleWithSep(D.x,D.y),H=D.add(R).unit().mult(-1*e/Math.sin(V/2));o.push(y.add(H))}return o},c.cacheEntryPossiblyAdded=function(s){Ze++,Ze>jt&&(s.getActor().send("enforceCacheSizeLimit",gt),Ze=0)},c.clamp=Ft,c.clearTileCache=function(s){const e=Oe.caches.delete(Wt);s&&e.catch(s).then(()=>s())},c.clipLine=Sg,c.clone=function(s){var e=new ua(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e},c.clone$1=function(s){var e=new ua(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e},c.clone$2=vi,c.collisionCircleLayout=Ap,c.config=Vn,c.conjugate=function(s,e){return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s[3]=e[3],s},c.copy=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s},c.create=Yu,c.create$1=function(){var s=new ua(16);return ua!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},c.create$2=yh,c.createExpression=no,c.createFilter=pr,c.createLayout=Gn,c.createStyleLayer=function(s){return"custom"===s.type?new Cy(s):new Ay[s.type](s)},c.cross=function(s,e,o){var l=e[0],h=e[1],m=e[2],y=o[0],C=o[1],D=o[2];return s[0]=h*D-m*C,s[1]=m*y-l*D,s[2]=l*C-h*y,s},c.degToRad=Qt,c.div=function(s,e,o){return s[0]=e[0]/o[0],s[1]=e[1]/o[1],s[2]=e[2]/o[2],s},c.dot=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]},c.dot$1=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]*e[3]},c.ease=Kt,c.easeCubicInOut=St,c.emitValidationErrors=dc,c.endsWith=Ln,c.enforceCacheSizeLimit=function(s){Dn(),pe&&pe.then(e=>{e.keys().then(o=>{for(let l=0;l<o.length-s;l++)e.delete(o[l])})})},c.evaluateSizeForFeature=_u,c.evaluateSizeForZoom=Wc,c.evaluateVariableOffset=Sc,c.evented=G,c.exactEquals=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]&&s[3]===e[3]},c.exactEquals$1=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]},c.exported=di,c.exported$1=ki,c.extend=dn,c.filterObject=On,c.fromMat4=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[4],s[4]=e[5],s[5]=e[6],s[6]=e[8],s[7]=e[9],s[8]=e[10],s},c.fromQuat=function(s,e){var o=e[0],l=e[1],h=e[2],m=e[3],y=o+o,C=l+l,D=h+h,R=o*y,V=l*y,H=l*C,re=h*y,de=h*C,Me=h*D,Ue=m*y,ot=m*C,wt=m*D;return s[0]=1-H-Me,s[1]=V+wt,s[2]=re-ot,s[3]=0,s[4]=V-wt,s[5]=1-R-Me,s[6]=de+Ue,s[7]=0,s[8]=re+ot,s[9]=de-Ue,s[10]=1-R-H,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},c.fromRotation=function(s,e){var o=Math.sin(e),l=Math.cos(e);return s[0]=l,s[1]=o,s[2]=0,s[3]=-o,s[4]=l,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},c.fromScaling=function(s,e){return s[0]=e[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=e[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=e[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},c.furthestTileCorner=function(s){const e=Math.round((s+45+360)%360/90)%4;return Dt[e]},c.getAABBPointSquareDist=function(s,e,o){let l=0;for(let h=0;h<2;++h){const m=o?o[h]:0;s[h]>m&&(l+=(s[h]-m)*(s[h]-m)),e[h]<m&&(l+=(m-e[h])*(m-e[h]))}return l},c.getAnchorAlignment=Op,c.getAnchorJustification=ec,c.getBounds=function(s){let e=1/0,o=1/0,l=-1/0,h=-1/0;for(const m of s)e=Math.min(e,m.x),o=Math.min(o,m.y),l=Math.max(l,m.x),h=Math.max(h,m.y);return{min:new ve(e,o),max:new ve(l,h)}},c.getImage=W,c.getJSON=function(s,e){return oe(dn(s,{type:"json"}),e)},c.getMapSessionAPI=Kn,c.getPerformanceMeasurement=Kp,c.getRTLTextPluginStatus=te,c.getReferrer=me,c.getVideo=function(s,e){const o=Oe.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let l=0;l<s.length;l++){const h=Oe.document.createElement("source");z(s[l])||(o.crossOrigin="Anonymous"),h.src=s[l],o.appendChild(h)}return{cancel:()=>{}}},c.identity=Uc,c.identity$1=Bo,c.invert=function(s,e){var o=e[0],l=e[1],h=e[2],m=e[3],y=e[4],C=e[5],D=e[6],R=e[7],V=e[8],H=e[9],re=e[10],de=e[11],Me=e[12],Ue=e[13],ot=e[14],wt=e[15],Rt=o*C-l*y,Ot=o*D-h*y,zt=o*R-m*y,Ht=l*D-h*C,Vt=l*R-m*C,En=h*R-m*D,Fn=V*Ue-H*Me,Cn=V*ot-re*Me,$n=V*wt-de*Me,gn=H*ot-re*Ue,bn=H*wt-de*Ue,Wn=re*wt-de*ot,un=Rt*Wn-Ot*bn+zt*gn+Ht*$n-Vt*Cn+En*Fn;return un?(s[0]=(C*Wn-D*bn+R*gn)*(un=1/un),s[1]=(h*bn-l*Wn-m*gn)*un,s[2]=(Ue*En-ot*Vt+wt*Ht)*un,s[3]=(re*Vt-H*En-de*Ht)*un,s[4]=(D*$n-y*Wn-R*Cn)*un,s[5]=(o*Wn-h*$n+m*Cn)*un,s[6]=(ot*zt-Me*En-wt*Ot)*un,s[7]=(V*En-re*zt+de*Ot)*un,s[8]=(y*bn-C*$n+R*Fn)*un,s[9]=(l*$n-o*bn-m*Fn)*un,s[10]=(Me*Vt-Ue*zt+wt*Rt)*un,s[11]=(H*zt-V*Vt-de*Rt)*un,s[12]=(C*Cn-y*gn-D*Fn)*un,s[13]=(o*gn-l*Cn+h*Fn)*un,s[14]=(Ue*Ot-Me*Ht-ot*Rt)*un,s[15]=(V*Ht-H*Ot+re*Rt)*un,s):null},c.isMapAuthenticated=function(s){return vt.has(s)},c.isMapboxURL=at,c.latFromMercatorY=ba,c.len=py,c.length=Os,c.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},c.loadVectorTile=Mc,c.makeRequest=oe,c.mercatorXfromLng=nf,c.mercatorYfromLat=rf,c.mercatorZfromAltitude=sf,c.mul=function(s,e,o){return s[0]=e[0]*o[0],s[1]=e[1]*o[1],s[2]=e[2]*o[2],s[3]=e[3]*o[3],s},c.mul$1=xh,c.mul$2=Km,c.multiply=vh,c.multiply$1=Ku,c.nextPowerOfTwo=ci,c.normalize=rp,c.normalize$1=function(s,e){var o=e[0],l=e[1],h=e[2],m=e[3],y=o*o+l*l+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),s[0]=o*y,s[1]=l*y,s[2]=h*y,s[3]=m*y,s},c.number=Nt,c.ortho=function(s,e,o,l,h,m,y){var C=1/(e-o),D=1/(l-h),R=1/(m-y);return s[0]=-2*C,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*D,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*R,s[11]=0,s[12]=(e+o)*C,s[13]=(h+l)*D,s[14]=(y+m)*R,s[15]=1,s},c.pbf=Yc,c.perspective=function(s,e,o,l,h){var m,y=1/Math.tan(e/2);return s[0]=y/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=y,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,null!=h&&h!==1/0?(s[10]=(h+l)*(m=1/(l-h)),s[14]=2*h*l*m):(s[10]=-1,s[14]=-2*l),s},c.pick=function(s,e){const o={};for(let l=0;l<e.length;l++){const h=e[l];h in s&&(o[h]=s[h])}return o},c.plugin=_e,c.pointGeometry=ve,c.polygonIntersectsBox=qu,c.polygonIntersectsPolygon=ph,c.polygonizeBounds=function(s,e,o=0,l=!0){const h=new ve(o,o),m=s.sub(h),y=e.add(h),C=[m,new ve(y.x,m.y),y,new ve(m.x,y.y)];return l&&C.push(m),C},c.posAttributes=lf,c.postMapLoadEvent=cr,c.postTurnstileEvent=Zn,c.potpack=yu,c.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},c.radToDeg=function(s){return s*Pt},c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.registerForPluginStateChange=function(s){return s({pluginStatus:v,pluginURL:w}),G.on("pluginStateChange",s),s},c.removeAuthState=function(s){vt.delete(s)},c.renderColorRamp=td,c.rotateX=function(s,e,o){var l=Math.sin(o),h=Math.cos(o),m=e[4],y=e[5],C=e[6],D=e[7],R=e[8],V=e[9],H=e[10],re=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=m*h+R*l,s[5]=y*h+V*l,s[6]=C*h+H*l,s[7]=D*h+re*l,s[8]=R*h-m*l,s[9]=V*h-y*l,s[10]=H*h-C*l,s[11]=re*h-D*l,s},c.rotateX$1=Xu,c.rotateY=function(s,e,o){var l=Math.sin(o),h=Math.cos(o),m=e[0],y=e[1],C=e[2],D=e[3],R=e[8],V=e[9],H=e[10],re=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=m*h-R*l,s[1]=y*h-V*l,s[2]=C*h-H*l,s[3]=D*h-re*l,s[8]=m*l+R*h,s[9]=y*l+V*h,s[10]=C*l+H*h,s[11]=D*l+re*h,s},c.rotateZ=function(s,e,o){var l=Math.sin(o),h=Math.cos(o),m=e[0],y=e[1],C=e[2],D=e[3],R=e[4],V=e[5],H=e[6],re=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=m*h+R*l,s[1]=y*h+V*l,s[2]=C*h+H*l,s[3]=D*h+re*l,s[4]=R*h-m*l,s[5]=V*h-y*l,s[6]=H*h-C*l,s[7]=re*h-D*l,s},c.rotateZ$1=function(s,e,o){o*=.5;var l=e[0],h=e[1],m=e[2],y=e[3],C=Math.sin(o),D=Math.cos(o);return s[0]=l*D+h*C,s[1]=h*D-l*C,s[2]=m*D+y*C,s[3]=y*D-m*C,s},c.scale=function(s,e,o){return s[0]=e[0]*o,s[1]=e[1]*o,s[2]=e[2]*o,s},c.scale$1=function(s,e,o){var l=o[0],h=o[1],m=o[2];return s[0]=e[0]*l,s[1]=e[1]*l,s[2]=e[2]*l,s[3]=e[3]*l,s[4]=e[4]*h,s[5]=e[5]*h,s[6]=e[6]*h,s[7]=e[7]*h,s[8]=e[8]*m,s[9]=e[9]*m,s[10]=e[10]*m,s[11]=e[11]*m,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},c.scale$2=function(s,e,o){return s[0]=e[0]*o,s[1]=e[1]*o,s[2]=e[2]*o,s[3]=e[3]*o,s},c.scaleAndAdd=bh,c.setCacheLimits=function(s,e){gt=s,jt=e},c.setRTLTextPlugin=function(s,e,o=!1){if(v===f||v===i||v===u)throw new Error("setRTLTextPlugin cannot be called multiple times.");w=di.resolveURL(s),v=f,p=e,k(),o||he()},c.smoothstep=function(s,e,o){return(o=Ft((o-s)/(e-s),0,1))*o*(3-2*o)},c.spec=Qe,c.storeAuthState=function(s,e){e?vt.add(s):vt.delete(s)},c.sub=Ym,c.subtract=ip,c.symbolSize=hg,c.transformMat3=function(s,e,o){var l=e[0],h=e[1],m=e[2];return s[0]=l*o[0]+h*o[3]+m*o[6],s[1]=l*o[1]+h*o[4]+m*o[7],s[2]=l*o[2]+h*o[5]+m*o[8],s},c.transformMat4=Qu,c.transformMat4$1=function(s,e,o){var l=e[0],h=e[1],m=e[2],y=o[3]*l+o[7]*h+o[11]*m+o[15];return s[0]=(o[0]*l+o[4]*h+o[8]*m+o[12])/(y=y||1),s[1]=(o[1]*l+o[5]*h+o[9]*m+o[13])/y,s[2]=(o[2]*l+o[6]*h+o[10]*m+o[14])/y,s},c.transformQuat=sp,c.translate=function(s,e,o){var l,h,m,y,C,D,R,V,H,re,de,Me,Ue=o[0],ot=o[1],wt=o[2];return e===s?(s[12]=e[0]*Ue+e[4]*ot+e[8]*wt+e[12],s[13]=e[1]*Ue+e[5]*ot+e[9]*wt+e[13],s[14]=e[2]*Ue+e[6]*ot+e[10]*wt+e[14],s[15]=e[3]*Ue+e[7]*ot+e[11]*wt+e[15]):(h=e[1],m=e[2],y=e[3],C=e[4],D=e[5],R=e[6],V=e[7],H=e[8],re=e[9],de=e[10],Me=e[11],s[0]=l=e[0],s[1]=h,s[2]=m,s[3]=y,s[4]=C,s[5]=D,s[6]=R,s[7]=V,s[8]=H,s[9]=re,s[10]=de,s[11]=Me,s[12]=l*Ue+C*ot+H*wt+e[12],s[13]=h*Ue+D*ot+re*wt+e[13],s[14]=m*Ue+R*ot+de*wt+e[14],s[15]=y*Ue+V*ot+Me*wt+e[15]),s},c.triggerPluginCompletionEvent=T,c.uniqueId=Ai,c.validateCustomStyleLayer=function(s){const e=[],o=s.id;return void 0===o&&e.push({message:`layers.${o}: missing required property "id"`}),void 0===s.render&&e.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&"2d"!==s.renderingMode&&"3d"!==s.renderingMode&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},c.validateFog=sa,c.validateLight=Pa,c.validateStyle=ra,c.values=qt,c.vectorTile=bc,c.version="2.4.0",c.warnOnce=fi,c.window=Oe,c.wrap=Mn}),I(0,function(c){function Xe(oe){const K=typeof oe;if("number"===K||"boolean"===K||"string"===K||null==oe)return JSON.stringify(oe);if(Array.isArray(oe)){let z="[";for(const O of oe)z+=`${Xe(O)},`;return`${z}]`}const N=Object.keys(oe).sort();let Q="{";for(let z=0;z<N.length;z++)Q+=`${JSON.stringify(N[z])}:${Xe(oe[N[z]])},`;return`${Q}}`}function Ie(oe){let K="";for(const N of c.refProperties)K+=`/${Xe(oe[N])}`;return K}class _{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,N){for(const z of K){this._layerConfigs[z.id]=z;const O=this._layers[z.id]=c.createStyleLayer(z);O._featureFilter=c.createFilter(O.filter),this.keyCache[z.id]&&delete this.keyCache[z.id]}for(const z of N)delete this.keyCache[z],delete this._layerConfigs[z],delete this._layers[z];this.familiesBySource={};const Q=function(z,O){const le={};for(let W=0;W<z.length;W++){const $=O&&O[z[W].id]||Ie(z[W]);O&&(O[z[W].id]=$);let Ee=le[$];Ee||(Ee=le[$]=[]),Ee.push(z[W])}const J=[];for(const W in le)J.push(le[W]);return J}(c.values(this._layerConfigs),this.keyCache);for(const z of Q){const O=z.map(Ge=>this._layers[Ge.id]),le=O[0];if("none"===le.visibility)continue;const J=le.source||"";let W=this.familiesBySource[J];W||(W=this.familiesBySource[J]={});const $=le.sourceLayer||"_geojsonTileLayer";let Ee=W[$];Ee||(Ee=W[$]=[]),Ee.push(O)}}}const{ImageBitmap:ve}=c.window;class xe{loadTile(K,N){const{uid:Q,encoding:z,rawImageData:O,padding:le,buildQuadTree:J}=K,W=ve&&O instanceof ve?this.getImageData(O,le):O;N(null,new c.DEMData(Q,W,z,le<1,J))}getImageData(K,N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(K.width,K.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=K.width,this.offscreenCanvas.height=K.height,this.offscreenCanvasContext.drawImage(K,0,0,K.width,K.height);const Q=this.offscreenCanvasContext.getImageData(-N,-N,K.width+2*N,K.height+2*N);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:Q.width,height:Q.height},Q.data)}}var Oe=function oe(K,N){var Q,z=K&&K.type;if("FeatureCollection"===z)for(Q=0;Q<K.features.length;Q++)oe(K.features[Q],N);else if("GeometryCollection"===z)for(Q=0;Q<K.geometries.length;Q++)oe(K.geometries[Q],N);else if("Feature"===z)oe(K.geometry,N);else if("Polygon"===z)Ke(K.coordinates,N);else if("MultiPolygon"===z)for(Q=0;Q<K.coordinates.length;Q++)Ke(K.coordinates[Q],N);return K};function Ke(oe,K){if(0!==oe.length){st(oe[0],K);for(var N=1;N<oe.length;N++)st(oe[N],!K)}}function st(oe,K){for(var N=0,Q=0,z=oe.length,O=z-1;Q<z;O=Q++)N+=(oe[Q][0]-oe[O][0])*(oe[O][1]+oe[Q][1]);N>=0!=!!K&&oe.reverse()}const Pt=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Qt{constructor(K){this._feature=K,this.extent=c.EXTENT,this.type=K.type,this.properties=K.tags,"id"in K&&!isNaN(K.id)&&(this.id=parseInt(K.id,10))}loadGeometry(){if(1===this._feature.type){const K=[];for(const N of this._feature.geometry)K.push([new c.pointGeometry(N[0],N[1])]);return K}{const K=[];for(const N of this._feature.geometry){const Q=[];for(const z of N)Q.push(new c.pointGeometry(z[0],z[1]));K.push(Q)}return K}}toGeoJSON(K,N,Q){return Pt.call(this,K,N,Q)}}class Dt{constructor(K){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=K.length,this._features=K}feature(K){return new Qt(this._features[K])}}var St=c.vectorTile.VectorTileFeature,kt=Kt;function Kt(oe,K){this.options=K||{},this.features=oe,this.length=oe.length}function Ft(oe,K){this.id="number"==typeof oe.id?oe.id:void 0,this.type=oe.type,this.rawGeometry=1===oe.type?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=K||4096}Kt.prototype.feature=function(oe){return new Ft(this.features[oe],this.options.extent)},Ft.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var K=0;K<oe.length;K++){for(var N=oe[K],Q=[],z=0;z<N.length;z++)Q.push(new c.pointGeometry(N[z][0],N[z][1]));this.geometry.push(Q)}return this.geometry},Ft.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,K=1/0,N=-1/0,Q=1/0,z=-1/0,O=0;O<oe.length;O++)for(var le=oe[O],J=0;J<le.length;J++){var W=le[J];K=Math.min(K,W.x),N=Math.max(N,W.x),Q=Math.min(Q,W.y),z=Math.max(z,W.y)}return[K,Q,N,z]},Ft.prototype.toGeoJSON=St.prototype.toGeoJSON;var Mn=qt,Jt=kt;function qt(oe){var K=new c.pbf;return function(N,Q){for(var z in N.layers)Q.writeMessage(3,dn,N.layers[z])}(oe,K),K.finish()}function dn(oe,K){var N;K.writeVarintField(15,oe.version||1),K.writeStringField(1,oe.name||""),K.writeVarintField(5,oe.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<oe.length;N++)Q.feature=oe.feature(N),K.writeMessage(2,Hn,Q);var z=Q.keys;for(N=0;N<z.length;N++)K.writeStringField(3,z[N]);var O=Q.values;for(N=0;N<O.length;N++)K.writeMessage(4,zn,O[N])}function Hn(oe,K){var N=oe.feature;void 0!==N.id&&K.writeVarintField(1,N.id),K.writeMessage(2,Ai,oe),K.writeVarintField(3,N.type),K.writeMessage(4,ni,N)}function Ai(oe,K){var N=oe.feature,Q=oe.keys,z=oe.values,O=oe.keycache,le=oe.valuecache;for(var J in N.properties){var W=O[J];void 0===W&&(Q.push(J),O[J]=W=Q.length-1),K.writeVarint(W);var $=N.properties[J],Ee=typeof $;"string"!==Ee&&"boolean"!==Ee&&"number"!==Ee&&($=JSON.stringify($));var Ge=Ee+":"+$,mt=le[Ge];void 0===mt&&(z.push($),le[Ge]=mt=z.length-1),K.writeVarint(mt)}}function Ri(oe,K){return(K<<3)+(7&oe)}function ci(oe){return oe<<1^oe>>31}function ni(oe,K){for(var N=oe.loadGeometry(),Q=oe.type,z=0,O=0,le=N.length,J=0;J<le;J++){var W=N[J],$=1;1===Q&&($=W.length),K.writeVarint(Ri(1,$));for(var Ee=3===Q?W.length-1:W.length,Ge=0;Ge<Ee;Ge++){1===Ge&&1!==Q&&K.writeVarint(Ri(2,Ee-1));var mt=W[Ge].x-z,nn=W[Ge].y-O;K.writeVarint(ci(mt)),K.writeVarint(ci(nn)),z+=mt,O+=nn}3===Q&&K.writeVarint(Ri(7,1))}}function zn(oe,K){var N=typeof oe;"string"===N?K.writeStringField(1,oe):"boolean"===N?K.writeBooleanField(7,oe):"number"===N&&(oe%1!=0?K.writeDoubleField(3,oe):oe<0?K.writeSVarintField(6,oe):K.writeVarintField(5,oe))}function Ln(oe,K,N,Q,z,O){if(z-Q<=N)return;const le=Q+z>>1;ii(oe,K,le,Q,z,O%2),Ln(oe,K,N,Q,le-1,O+1),Ln(oe,K,N,le+1,z,O+1)}function ii(oe,K,N,Q,z,O){for(;z>Q;){if(z-Q>600){const $=z-Q+1,Ee=N-Q+1,Ge=Math.log($),mt=.5*Math.exp(2*Ge/3),nn=.5*Math.sqrt(Ge*mt*($-mt)/$)*(Ee-$/2<0?-1:1);ii(oe,K,N,Math.max(Q,Math.floor(N-Ee*mt/$+nn)),Math.min(z,Math.floor(N+($-Ee)*mt/$+nn)),O)}const le=K[2*N+O];let J=Q,W=z;for(On(oe,K,Q,N),K[2*z+O]>le&&On(oe,K,Q,z);J<W;){for(On(oe,K,J,W),J++,W--;K[2*J+O]<le;)J++;for(;K[2*W+O]>le;)W--}K[2*Q+O]===le?On(oe,K,Q,W):(W++,On(oe,K,W,z)),W<=N&&(Q=W+1),N<=W&&(z=W-1)}}function On(oe,K,N,Q){vi(oe,N,Q),vi(K,2*N,2*Q),vi(K,2*N+1,2*Q+1)}function vi(oe,K,N){const Q=oe[K];oe[K]=oe[N],oe[N]=Q}function xi(oe,K,N,Q){const z=oe-N,O=K-Q;return z*z+O*O}Mn.fromVectorTileJs=qt,Mn.fromGeojsonVt=function(oe,K){K=K||{};var N={};for(var Q in oe)N[Q]=new kt(oe[Q].features,K),N[Q].name=Q,N[Q].version=K.version,N[Q].extent=K.extent;return qt({layers:N})},Mn.GeoJSONWrapper=Jt;const fi=oe=>oe[0],Ki=oe=>oe[1];class rn{constructor(K,N=fi,Q=Ki,z=64,O=Float64Array){this.nodeSize=z,this.points=K;const le=K.length<65536?Uint16Array:Uint32Array,J=this.ids=new le(K.length),W=this.coords=new O(2*K.length);for(let $=0;$<K.length;$++)J[$]=$,W[2*$]=N(K[$]),W[2*$+1]=Q(K[$]);Ln(J,W,z,0,J.length-1,0)}range(K,N,Q,z){return function(O,le,J,W,$,Ee,Ge){const mt=[0,O.length-1,0],nn=[];let Qe,It;for(;mt.length;){const Bt=mt.pop(),Sn=mt.pop(),Nn=mt.pop();if(Sn-Nn<=Ge){for(let bi=Nn;bi<=Sn;bi++)Qe=le[2*bi],It=le[2*bi+1],Qe>=J&&Qe<=$&&It>=W&&It<=Ee&&nn.push(O[bi]);continue}const Qn=Math.floor((Nn+Sn)/2);Qe=le[2*Qn],It=le[2*Qn+1],Qe>=J&&Qe<=$&&It>=W&&It<=Ee&&nn.push(O[Qn]);const hi=(Bt+1)%2;(0===Bt?J<=Qe:W<=It)&&(mt.push(Nn),mt.push(Qn-1),mt.push(hi)),(0===Bt?$>=Qe:Ee>=It)&&(mt.push(Qn+1),mt.push(Sn),mt.push(hi))}return nn}(this.ids,this.coords,K,N,Q,z,this.nodeSize)}within(K,N,Q){return function(z,O,le,J,W,$){const Ee=[0,z.length-1,0],Ge=[],mt=W*W;for(;Ee.length;){const nn=Ee.pop(),Qe=Ee.pop(),It=Ee.pop();if(Qe-It<=$){for(let hi=It;hi<=Qe;hi++)xi(O[2*hi],O[2*hi+1],le,J)<=mt&&Ge.push(z[hi]);continue}const Bt=Math.floor((It+Qe)/2),Sn=O[2*Bt],Nn=O[2*Bt+1];xi(Sn,Nn,le,J)<=mt&&Ge.push(z[Bt]);const Qn=(nn+1)%2;(0===nn?le-W<=Sn:J-W<=Nn)&&(Ee.push(It),Ee.push(Bt-1),Ee.push(Qn)),(0===nn?le+W>=Sn:J+W>=Nn)&&(Ee.push(Bt+1),Ee.push(Qe),Ee.push(Qn))}return Ge}(this.ids,this.coords,K,N,Q,this.nodeSize)}}const Ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},an=Math.fround||(ct=new Float32Array(1),oe=>(ct[0]=+oe,ct[0]));var ct;class Et{constructor(K){this.options=ki(Object.create(Ut),K),this.trees=new Array(this.options.maxZoom+1)}load(K){const{log:N,minZoom:Q,maxZoom:z,nodeSize:O}=this.options;N&&console.time("total time");const le=`prepare ${K.length} points`;N&&console.time(le),this.points=K;let J=[];for(let W=0;W<K.length;W++)K[W].geometry&&J.push(pn(K[W],W));this.trees[z+1]=new rn(J,Mi,Ti,O,Float32Array),N&&console.timeEnd(le);for(let W=z;W>=Q;W--){const $=+Date.now();J=this._cluster(J,W),this.trees[W]=new rn(J,Mi,Ti,O,Float32Array),N&&console.log("z%d: %d clusters in %dms",W,J.length,+Date.now()-$)}return N&&console.timeEnd("total time"),this}getClusters(K,N){let Q=((K[0]+180)%360+360)%360-180;const z=Math.max(-90,Math.min(90,K[1]));let O=180===K[2]?180:((K[2]+180)%360+360)%360-180;const le=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)Q=-180,O=180;else if(Q>O){const Ee=this.getClusters([Q,z,180,le],N),Ge=this.getClusters([-180,z,O,le],N);return Ee.concat(Ge)}const J=this.trees[this._limitZoom(N)],W=J.range(di(Q),Ei(le),di(O),Ei(z)),$=[];for(const Ee of W){const Ge=J.points[Ee];$.push(Ge.numPoints?An(Ge):this.points[Ge.index])}return $}getChildren(K){const N=this._getOriginId(K),Q=this._getOriginZoom(K),z="No cluster with the specified id.",O=this.trees[Q];if(!O)throw new Error(z);const le=O.points[N];if(!le)throw new Error(z);const J=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),W=O.within(le.x,le.y,J),$=[];for(const Ee of W){const Ge=O.points[Ee];Ge.parentId===K&&$.push(Ge.numPoints?An(Ge):this.points[Ge.index])}if(0===$.length)throw new Error(z);return $}getLeaves(K,N,Q){const z=[];return this._appendLeaves(z,K,N=N||10,Q=Q||0,0),z}getTile(K,N,Q){const z=this.trees[this._limitZoom(K)],O=Math.pow(2,K),{extent:le,radius:J}=this.options,W=J/le,$=(Q-W)/O,Ee=(Q+1+W)/O,Ge={features:[]};return this._addTileFeatures(z.range((N-W)/O,$,(N+1+W)/O,Ee),z.points,N,Q,O,Ge),0===N&&this._addTileFeatures(z.range(1-W/O,$,1,Ee),z.points,O,Q,O,Ge),N===O-1&&this._addTileFeatures(z.range(0,$,W/O,Ee),z.points,-1,Q,O,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(K){let N=this._getOriginZoom(K)-1;for(;N<=this.options.maxZoom;){const Q=this.getChildren(K);if(N++,1!==Q.length)break;K=Q[0].properties.cluster_id}return N}_appendLeaves(K,N,Q,z,O){const le=this.getChildren(N);for(const J of le){const W=J.properties;if(W&&W.cluster?O+W.point_count<=z?O+=W.point_count:O=this._appendLeaves(K,W.cluster_id,Q,z,O):O<z?O++:K.push(J),K.length===Q)break}return O}_addTileFeatures(K,N,Q,z,O,le){for(const J of K){const W=N[J],$=W.numPoints;let Ee,Ge,mt;if($)Ee=Bn(W),Ge=W.x,mt=W.y;else{const It=this.points[W.index];Ee=It.properties,Ge=di(It.geometry.coordinates[0]),mt=Ei(It.geometry.coordinates[1])}const nn={type:1,geometry:[[Math.round(this.options.extent*(Ge*O-Q)),Math.round(this.options.extent*(mt*O-z))]],tags:Ee};let Qe;$?Qe=W.id:this.options.generateId?Qe=W.index:this.points[W.index].id&&(Qe=this.points[W.index].id),void 0!==Qe&&(nn.id=Qe),le.features.push(nn)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(+K,this.options.maxZoom+1))}_cluster(K,N){const Q=[],{radius:z,extent:O,reduce:le,minPoints:J}=this.options,W=z/(O*Math.pow(2,N));for(let $=0;$<K.length;$++){const Ee=K[$];if(Ee.zoom<=N)continue;Ee.zoom=N;const Ge=this.trees[N+1],mt=Ge.within(Ee.x,Ee.y,W),nn=Ee.numPoints||1;let Qe=nn;for(const It of mt){const Bt=Ge.points[It];Bt.zoom>N&&(Qe+=Bt.numPoints||1)}if(Qe>=J){let It=Ee.x*nn,Bt=Ee.y*nn,Sn=le&&nn>1?this._map(Ee,!0):null;const Nn=($<<5)+(N+1)+this.points.length;for(const Qn of mt){const hi=Ge.points[Qn];if(hi.zoom<=N)continue;hi.zoom=N;const bi=hi.numPoints||1;It+=hi.x*bi,Bt+=hi.y*bi,hi.parentId=Nn,le&&(Sn||(Sn=this._map(Ee,!0)),le(Sn,this._map(hi)))}Ee.parentId=Nn,Q.push(tn(It/Qe,Bt/Qe,Nn,Qe,Sn))}else if(Q.push(Ee),Qe>1)for(const It of mt){const Bt=Ge.points[It];Bt.zoom<=N||(Bt.zoom=N,Q.push(Bt))}}return Q}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,N){if(K.numPoints)return N?ki({},K.properties):K.properties;const Q=this.points[K.index].properties,z=this.options.map(Q);return N&&z===Q?ki({},z):z}}function tn(oe,K,N,Q,z){return{x:an(oe),y:an(K),zoom:1/0,id:N,parentId:-1,numPoints:Q,properties:z}}function pn(oe,K){const[N,Q]=oe.geometry.coordinates;return{x:an(di(N)),y:an(Ei(Q)),zoom:1/0,index:K,parentId:-1}}function An(oe){return{type:"Feature",id:oe.id,properties:Bn(oe),geometry:{type:"Point",coordinates:[(K=oe.x,360*(K-.5)),Vn(oe.y)]}};var K}function Bn(oe){const K=oe.numPoints,N=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K;return ki(ki({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:K,point_count_abbreviated:N})}function di(oe){return oe/360+.5}function Ei(oe){const K=Math.sin(oe*Math.PI/180),N=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return N<0?0:N>1?1:N}function Vn(oe){const K=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function ki(oe,K){for(const N in K)oe[N]=K[N];return oe}function Mi(oe){return oe.x}function Ti(oe){return oe.y}function er(oe,K,N,Q){for(var z,O=Q,le=N-K>>1,J=N-K,W=oe[K],$=oe[K+1],Ee=oe[N],Ge=oe[N+1],mt=K+3;mt<N;mt+=3){var nn=Zi(oe[mt],oe[mt+1],W,$,Ee,Ge);if(nn>O)z=mt,O=nn;else if(nn===O){var Qe=Math.abs(mt-le);Qe<J&&(z=mt,J=Qe)}}O>Q&&(z-K>3&&er(oe,K,z,Q),oe[z+2]=O,N-z>3&&er(oe,z,N,Q))}function Zi(oe,K,N,Q,z,O){var le=z-N,J=O-Q;if(0!==le||0!==J){var W=((oe-N)*le+(K-Q)*J)/(le*le+J*J);W>1?(N=z,Q=O):W>0&&(N+=le*W,Q+=J*W)}return(le=oe-N)*le+(J=K-Q)*J}function ei(oe,K,N,Q){var z={id:void 0===oe?null:oe,type:K,geometry:N,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(O){var le=O.geometry,J=O.type;if("Point"===J||"MultiPoint"===J||"LineString"===J)oi(O,le);else if("Polygon"===J||"MultiLineString"===J)for(var W=0;W<le.length;W++)oi(O,le[W]);else if("MultiPolygon"===J)for(W=0;W<le.length;W++)for(var $=0;$<le[W].length;$++)oi(O,le[W][$])}(z),z}function oi(oe,K){for(var N=0;N<K.length;N+=3)oe.minX=Math.min(oe.minX,K[N]),oe.minY=Math.min(oe.minY,K[N+1]),oe.maxX=Math.max(oe.maxX,K[N]),oe.maxY=Math.max(oe.maxY,K[N+1])}function en(oe,K,N,Q){if(K.geometry){var z=K.geometry.coordinates,O=K.geometry.type,le=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),J=[],W=K.id;if(N.promoteId?W=K.properties[N.promoteId]:N.generateId&&(W=Q||0),"Point"===O)at(z,J);else if("MultiPoint"===O)for(var $=0;$<z.length;$++)at(z[$],J);else if("LineString"===O)xt(z,J,le,!1);else if("MultiLineString"===O){if(N.lineMetrics){for($=0;$<z.length;$++)xt(z[$],J=[],le,!1),oe.push(ei(W,"LineString",J,K.properties));return}xn(z,J,le,!1)}else if("Polygon"===O)xn(z,J,le,!0);else{if("MultiPolygon"!==O){if("GeometryCollection"===O){for($=0;$<K.geometry.geometries.length;$++)en(oe,{id:W,geometry:K.geometry.geometries[$],properties:K.properties},N,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for($=0;$<z.length;$++){var Ee=[];xn(z[$],Ee,le,!0),J.push(Ee)}}oe.push(ei(W,O,J,K.properties))}}function at(oe,K){K.push(sn(oe[0])),K.push(Un(oe[1])),K.push(0)}function xt(oe,K,N,Q){for(var z,O,le=0,J=0;J<oe.length;J++){var W=sn(oe[J][0]),$=Un(oe[J][1]);K.push(W),K.push($),K.push(0),J>0&&(le+=Q?(z*$-W*O)/2:Math.sqrt(Math.pow(W-z,2)+Math.pow($-O,2))),z=W,O=$}var Ee=K.length-3;K[2]=1,er(K,0,Ee,N),K[Ee+2]=1,K.size=Math.abs(le),K.start=0,K.end=K.size}function xn(oe,K,N,Q){for(var z=0;z<oe.length;z++){var O=[];xt(oe[z],O,N,Q),K.push(O)}}function sn(oe){return oe/360+.5}function Un(oe){var K=Math.sin(oe*Math.PI/180),N=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return N<0?0:N>1?1:N}function ui(oe,K,N,Q,z,O,le,J){if(Q/=K,O>=(N/=K)&&le<Q)return oe;if(le<N||O>=Q)return null;for(var W=[],$=0;$<oe.length;$++){var Ee=oe[$],Ge=Ee.geometry,mt=Ee.type,nn=0===z?Ee.minX:Ee.minY,Qe=0===z?Ee.maxX:Ee.maxY;if(nn>=N&&Qe<Q)W.push(Ee);else if(!(Qe<N||nn>=Q)){var It=[];if("Point"===mt||"MultiPoint"===mt)Xn(Ge,It,N,Q,z);else if("LineString"===mt)Xt(Ge,It,N,Q,z,!1,J.lineMetrics);else if("MultiLineString"===mt)Bi(Ge,It,N,Q,z,!1);else if("Polygon"===mt)Bi(Ge,It,N,Q,z,!0);else if("MultiPolygon"===mt)for(var Bt=0;Bt<Ge.length;Bt++){var Sn=[];Bi(Ge[Bt],Sn,N,Q,z,!0),Sn.length&&It.push(Sn)}if(It.length){if(J.lineMetrics&&"LineString"===mt){for(Bt=0;Bt<It.length;Bt++)W.push(ei(Ee.id,mt,It[Bt],Ee.tags));continue}"LineString"!==mt&&"MultiLineString"!==mt||(1===It.length?(mt="LineString",It=It[0]):mt="MultiLineString"),"Point"!==mt&&"MultiPoint"!==mt||(mt=3===It.length?"Point":"MultiPoint"),W.push(ei(Ee.id,mt,It,Ee.tags))}}}return W.length?W:null}function Xn(oe,K,N,Q,z){for(var O=0;O<oe.length;O+=3){var le=oe[O+z];le>=N&&le<=Q&&(K.push(oe[O]),K.push(oe[O+1]),K.push(oe[O+2]))}}function Xt(oe,K,N,Q,z,O,le){for(var J,W,$=Zn(oe),Ee=0===z?Ui:Kn,Ge=oe.start,mt=0;mt<oe.length-3;mt+=3){var nn=oe[mt],Qe=oe[mt+1],It=oe[mt+2],Bt=oe[mt+3],Sn=oe[mt+4],Nn=0===z?nn:Qe,Qn=0===z?Bt:Sn,hi=!1;le&&(J=Math.sqrt(Math.pow(nn-Bt,2)+Math.pow(Qe-Sn,2))),Nn<N?Qn>N&&(W=Ee($,nn,Qe,Bt,Sn,N),le&&($.start=Ge+J*W)):Nn>Q?Qn<Q&&(W=Ee($,nn,Qe,Bt,Sn,Q),le&&($.start=Ge+J*W)):cr($,nn,Qe,It),Qn<N&&Nn>=N&&(W=Ee($,nn,Qe,Bt,Sn,N),hi=!0),Qn>Q&&Nn<=Q&&(W=Ee($,nn,Qe,Bt,Sn,Q),hi=!0),!O&&hi&&(le&&($.end=Ge+J*W),K.push($),$=Zn(oe)),le&&(Ge+=J)}var bi=oe.length-3;nn=oe[bi],Qe=oe[bi+1],It=oe[bi+2],(Nn=0===z?nn:Qe)>=N&&Nn<=Q&&cr($,nn,Qe,It),bi=$.length-3,O&&bi>=3&&($[bi]!==$[0]||$[bi+1]!==$[1])&&cr($,$[0],$[1],$[2]),$.length&&K.push($)}function Zn(oe){var K=[];return K.size=oe.size,K.start=oe.start,K.end=oe.end,K}function Bi(oe,K,N,Q,z,O){for(var le=0;le<oe.length;le++)Xt(oe[le],K,N,Q,z,O,!1)}function cr(oe,K,N,Q){oe.push(K),oe.push(N),oe.push(Q)}function Ui(oe,K,N,Q,z,O){var le=(O-K)/(Q-K);return oe.push(O),oe.push(N+(z-N)*le),oe.push(1),le}function Kn(oe,K,N,Q,z,O){var le=(O-N)/(z-N);return oe.push(K+(Q-K)*le),oe.push(O),oe.push(1),le}function vt(oe,K){for(var N=[],Q=0;Q<oe.length;Q++){var z,O=oe[Q],le=O.type;if("Point"===le||"MultiPoint"===le||"LineString"===le)z=Wt(O.geometry,K);else if("MultiLineString"===le||"Polygon"===le){z=[];for(var J=0;J<O.geometry.length;J++)z.push(Wt(O.geometry[J],K))}else if("MultiPolygon"===le)for(z=[],J=0;J<O.geometry.length;J++){for(var W=[],$=0;$<O.geometry[J].length;$++)W.push(Wt(O.geometry[J][$],K));z.push(W)}N.push(ei(O.id,le,z,O.tags))}return N}function Wt(oe,K){var N=[];N.size=oe.size,void 0!==oe.start&&(N.start=oe.start,N.end=oe.end);for(var Q=0;Q<oe.length;Q+=3)N.push(oe[Q]+K,oe[Q+1],oe[Q+2]);return N}function pe(oe,K){if(oe.transformed)return oe;var N,Q,z,O=1<<oe.z,le=oe.x,J=oe.y;for(N=0;N<oe.features.length;N++){var W=oe.features[N],$=W.geometry,Ee=W.type;if(W.geometry=[],1===Ee)for(Q=0;Q<$.length;Q+=2)W.geometry.push(ke($[Q],$[Q+1],K,O,le,J));else for(Q=0;Q<$.length;Q++){var Ge=[];for(z=0;z<$[Q].length;z+=2)Ge.push(ke($[Q][z],$[Q][z+1],K,O,le,J));W.geometry.push(Ge)}}return oe.transformed=!0,oe}function ke(oe,K,N,Q,z,O){return[Math.round(N*(oe*Q-z)),Math.round(N*(K*Q-O))]}function gt(oe,K,N,Q,z){for(var O=K===z.maxZoom?0:z.tolerance/((1<<K)*z.extent),le={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:Q,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},J=0;J<oe.length;J++){le.numFeatures++,jt(le,oe[J],O,z);var W=oe[J].minX,$=oe[J].minY,Ee=oe[J].maxX,Ge=oe[J].maxY;W<le.minX&&(le.minX=W),$<le.minY&&(le.minY=$),Ee>le.maxX&&(le.maxX=Ee),Ge>le.maxY&&(le.maxY=Ge)}return le}function jt(oe,K,N,Q){var z=K.geometry,O=K.type,le=[];if("Point"===O||"MultiPoint"===O)for(var J=0;J<z.length;J+=3)le.push(z[J]),le.push(z[J+1]),oe.numPoints++,oe.numSimplified++;else if("LineString"===O)Dn(le,z,oe,N,!1,!1);else if("MultiLineString"===O||"Polygon"===O)for(J=0;J<z.length;J++)Dn(le,z[J],oe,N,"Polygon"===O,0===J);else if("MultiPolygon"===O)for(var W=0;W<z.length;W++){var $=z[W];for(J=0;J<$.length;J++)Dn(le,$[J],oe,N,!0,0===J)}if(le.length){var Ee=K.tags||null;if("LineString"===O&&Q.lineMetrics){for(var Ge in Ee={},K.tags)Ee[Ge]=K.tags[Ge];Ee.mapbox_clip_start=z.start/z.size,Ee.mapbox_clip_end=z.end/z.size}var mt={geometry:le,type:"Polygon"===O||"MultiPolygon"===O?3:"LineString"===O||"MultiLineString"===O?2:1,tags:Ee};null!==K.id&&(mt.id=K.id),oe.features.push(mt)}}function Dn(oe,K,N,Q,z,O){var le=Q*Q;if(Q>0&&K.size<(z?le:Q))N.numPoints+=K.length/3;else{for(var J=[],W=0;W<K.length;W+=3)(0===Q||K[W+2]>le)&&(N.numSimplified++,J.push(K[W]),J.push(K[W+1])),N.numPoints++;z&&function($,Ee){for(var Ge=0,mt=0,nn=$.length,Qe=nn-2;mt<nn;Qe=mt,mt+=2)Ge+=($[mt]-$[Qe])*($[mt+1]+$[Qe+1]);if(Ge>0===Ee)for(mt=0,nn=$.length;mt<nn/2;mt+=2){var It=$[mt],Bt=$[mt+1];$[mt]=$[nn-2-mt],$[mt+1]=$[nn-1-mt],$[nn-2-mt]=It,$[nn-1-mt]=Bt}}(J,O),oe.push(J)}}function ri(oe,K){var N=(K=this.options=function(z,O){for(var le in O)z[le]=O[le];return z}(Object.create(this.options),K)).debug;if(N&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var z,O,le,J,W,$,Q=function(z,O){var le=[];if("FeatureCollection"===z.type)for(var J=0;J<z.features.length;J++)en(le,z.features[J],O,J);else en(le,"Feature"===z.type?z:{geometry:z},O);return le}(oe,K);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(z=Q,O=K,le=O.buffer/O.extent,J=z,W=ui(z,1,-1-le,le,0,-1,2,O),$=ui(z,1,1-le,2+le,0,-1,2,O),(W||$)&&(J=ui(z,1,-le,1+le,0,-1,2,O)||[],W&&(J=vt(W,1).concat(J)),$&&(J=J.concat(vt($,-1)))),Q=J).length&&this.splitTile(Q,0,0,0),N&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ze(oe,K,N){return 32*((1<<oe)*N+K)+oe}function ze(oe,K){const N=oe.tileID.canonical;if(!this._geoJSONIndex)return K(null,null);const Q=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!Q)return K(null,null);const z=new Dt(Q.features);let O=Mn(z);0===O.byteOffset&&O.byteLength===O.buffer.byteLength||(O=new Uint8Array(O)),K(null,{vectorTile:z,rawData:O.buffer})}ri.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ri.prototype.splitTile=function(oe,K,N,Q,z,O,le){for(var J=[oe,K,N,Q],W=this.options,$=W.debug;J.length;){Q=J.pop(),N=J.pop(),K=J.pop(),oe=J.pop();var Ee=1<<K,Ge=Ze(K,N,Q),mt=this.tiles[Ge];if(!mt&&($>1&&console.time("creation"),mt=this.tiles[Ge]=gt(oe,K,N,Q,W),this.tileCoords.push({z:K,x:N,y:Q}),$)){$>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,N,Q,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var nn="z"+K;this.stats[nn]=(this.stats[nn]||0)+1,this.total++}if(mt.source=oe,z){if(K===W.maxZoom||K===z)continue;var Qe=1<<z-K;if(N!==Math.floor(O/Qe)||Q!==Math.floor(le/Qe))continue}else if(K===W.indexMaxZoom||mt.numPoints<=W.indexMaxPoints)continue;if(mt.source=null,0!==oe.length){$>1&&console.time("clipping");var It,Bt,Sn,Nn,Qn,hi,bi=.5*W.buffer/W.extent,$e=.5-bi,rt=.5+bi,bt=1+bi;It=Bt=Sn=Nn=null,Qn=ui(oe,Ee,N-bi,N+rt,0,mt.minX,mt.maxX,W),hi=ui(oe,Ee,N+$e,N+bt,0,mt.minX,mt.maxX,W),oe=null,Qn&&(It=ui(Qn,Ee,Q-bi,Q+rt,1,mt.minY,mt.maxY,W),Bt=ui(Qn,Ee,Q+$e,Q+bt,1,mt.minY,mt.maxY,W),Qn=null),hi&&(Sn=ui(hi,Ee,Q-bi,Q+rt,1,mt.minY,mt.maxY,W),Nn=ui(hi,Ee,Q+$e,Q+bt,1,mt.minY,mt.maxY,W),hi=null),$>1&&console.timeEnd("clipping"),J.push(It||[],K+1,2*N,2*Q),J.push(Bt||[],K+1,2*N,2*Q+1),J.push(Sn||[],K+1,2*N+1,2*Q),J.push(Nn||[],K+1,2*N+1,2*Q+1)}}},ri.prototype.getTile=function(oe,K,N){var Q=this.options,z=Q.extent,O=Q.debug;if(oe<0||oe>24)return null;var le=1<<oe,J=Ze(oe,K=(K%le+le)%le,N);if(this.tiles[J])return pe(this.tiles[J],z);O>1&&console.log("drilling down to z%d-%d-%d",oe,K,N);for(var W,$=oe,Ee=K,Ge=N;!W&&$>0;)$--,Ee=Math.floor(Ee/2),Ge=Math.floor(Ge/2),W=this.tiles[Ze($,Ee,Ge)];return W&&W.source?(O>1&&console.log("found parent tile z%d-%d-%d",$,Ee,Ge),O>1&&console.time("drilling down"),this.splitTile(W.source,$,Ee,Ge,oe,K,N),O>1&&console.timeEnd("drilling down"),this.tiles[J]?pe(this.tiles[J],z):null):null};class Ce extends c.VectorTileWorkerSource{constructor(K,N,Q,z,O){super(K,N,Q,z,ze),O&&(this.loadGeoJSON=O)}loadData(K,N){const Q=K&&K.request,z=Q&&Q.collectResourceTiming;this.loadGeoJSON(K,(O,le)=>{if(O||!le)return N(O);if("object"!=typeof le)return N(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{Oe(le,!0);try{if(K.filter){const W=c.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===W.result)throw new Error(W.value.map(Ee=>`${Ee.key}: ${Ee.message}`).join(", "));const $=le.features.filter(Ee=>W.value.evaluate({zoom:0},Ee));le={type:"FeatureCollection",features:$}}this._geoJSONIndex=K.cluster?new Et(function({superclusterOptions:W,clusterProperties:$}){if(!$||!W)return W;const Ee={},Ge={},mt={accumulated:null,zoom:0},nn={properties:null},Qe=Object.keys($);for(const It of Qe){const[Bt,Sn]=$[It],Nn=c.createExpression(Sn),Qn=c.createExpression("string"==typeof Bt?[Bt,["accumulated"],["get",It]]:Bt);Ee[It]=Nn.value,Ge[It]=Qn.value}return W.map=It=>{nn.properties=It;const Bt={};for(const Sn of Qe)Bt[Sn]=Ee[Sn].evaluate(mt,nn);return Bt},W.reduce=(It,Bt)=>{nn.properties=Bt;for(const Sn of Qe)mt.accumulated=It[Sn],It[Sn]=Ge[Sn].evaluate(mt,nn)},W}(K)).load(le.features):new ri(W=le,K.geojsonVtOptions)}catch(W){return N(W)}this.loaded={};const J={};if(z){const W=c.getPerformanceMeasurement(Q);W&&(J.resourceTiming={},J.resourceTiming[K.source]=JSON.parse(JSON.stringify(W)))}N(null,J)}var W})}reloadTile(K,N){const Q=this.loaded;return Q&&Q[K.uid]?super.reloadTile(K,N):this.loadTile(K,N)}loadGeoJSON(K,N){if(K.request)c.getJSON(K.request,N);else{if("string"!=typeof K.data)return N(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));try{return N(null,JSON.parse(K.data))}catch(Q){return N(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(K,N){try{N(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(Q){N(Q)}}getClusterChildren(K,N){try{N(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(Q){N(Q)}}getClusterLeaves(K,N){try{N(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(Q){N(Q)}}}class me{constructor(K){this.self=K,this.actor=new c.Actor(K,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:c.VectorTileWorkerSource,geojson:Ce},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(N,Q)=>{if(this.workerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.workerSourceTypes[N]=Q},this.self.registerRTLTextPlugin=N=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=N.applyArabicShaping,c.plugin.processBidirectionalText=N.processBidirectionalText,c.plugin.processStyledBidirectionalText=N.processStyledBidirectionalText}}checkIfReady(K,N,Q){Q()}setReferrer(K,N){this.referrer=N}spriteLoaded(K,N){this.isSpriteLoaded=N;for(const Q in this.workerSources[K]){const z=this.workerSources[K][Q];for(const O in z)z[O]instanceof c.VectorTileWorkerSource&&(z[O].isSpriteLoaded=N,z[O].fire(new c.Event("isSpriteLoaded")))}}setImages(K,N,Q){this.availableImages[K]=N;for(const z in this.workerSources[K]){const O=this.workerSources[K][z];for(const le in O)O[le].availableImages=N}Q()}enableTerrain(K,N,Q){this.terrain=N,Q()}setLayers(K,N,Q){this.getLayerIndex(K).replace(N),Q()}updateLayers(K,N,Q){this.getLayerIndex(K).update(N.layers,N.removedIds),Q()}loadTile(K,N,Q){const z=this.enableTerrain?c.extend({enableTerrain:this.terrain},N):N;this.getWorkerSource(K,N.type,N.source).loadTile(z,Q)}loadDEMTile(K,N,Q){const z=this.enableTerrain?c.extend({buildQuadTree:this.terrain},N):N;this.getDEMWorkerSource(K,N.source).loadTile(z,Q)}reloadTile(K,N,Q){const z=this.enableTerrain?c.extend({enableTerrain:this.terrain},N):N;this.getWorkerSource(K,N.type,N.source).reloadTile(z,Q)}abortTile(K,N,Q){this.getWorkerSource(K,N.type,N.source).abortTile(N,Q)}removeTile(K,N,Q){this.getWorkerSource(K,N.type,N.source).removeTile(N,Q)}removeSource(K,N,Q){if(!this.workerSources[K]||!this.workerSources[K][N.type]||!this.workerSources[K][N.type][N.source])return;const z=this.workerSources[K][N.type][N.source];delete this.workerSources[K][N.type][N.source],void 0!==z.removeSource?z.removeSource(N,Q):Q()}loadWorkerSource(K,N,Q){try{this.self.importScripts(N.url),Q()}catch(z){Q(z.toString())}}syncRTLPluginState(K,N,Q){try{c.plugin.setState(N);const z=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&null!=z){this.self.importScripts(z);const O=c.plugin.isParsed();Q(O?void 0:new Error(`RTL Text Plugin failed to import scripts from ${z}`),O)}}catch(z){Q(z.toString())}}getAvailableImages(K){let N=this.availableImages[K];return N||(N=[]),N}getLayerIndex(K){let N=this.layerIndexes[K];return N||(N=this.layerIndexes[K]=new _),N}getWorkerSource(K,N,Q){return this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][N]||(this.workerSources[K][N]={}),this.workerSources[K][N][Q]||(this.workerSources[K][N][Q]=new this.workerSourceTypes[N]({send:(z,O,le,J,W,$)=>{this.actor.send(z,O,le,K,W,$)},scheduler:this.actor.scheduler},this.getLayerIndex(K),this.getAvailableImages(K),this.isSpriteLoaded)),this.workerSources[K][N][Q]}getDEMWorkerSource(K,N){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][N]||(this.demWorkerSources[K][N]=new xe),this.demWorkerSources[K][N]}enforceCacheSizeLimit(K,N){c.enforceCacheSizeLimit(N)}getWorkerPerformanceMetrics(K,N,Q){Q(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new me(self)),me}),I(0,function(c){var Xe=Ie;function Ie(f){return i=f,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,v,w=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(w);try{v=new Worker(T),p=!0}catch(k){p=!1}return v&&v.terminate(),URL.revokeObjectURL(T),p}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var p=document.createElement("canvas");p.width=p.height=1;var v=p.getContext("2d");if(!v)return!1;var w=v.getImageData(0,0,1,1);return w&&w.width===p.width}()||(void 0===_[u=i&&i.failIfMajorPerformanceCaveat]&&(_[u]=function(p){var v,T,k,G,w=(T=p,k=document.createElement("canvas"),(G=Object.create(Ie.webGLContextAttributes)).failIfMajorPerformanceCaveat=T,k.getContext("webgl",G)||k.getContext("experimental-webgl",G));if(!w)return!1;try{v=w.createShader(w.VERTEX_SHADER)}catch(T){return!1}return!(!v||w.isContextLost())&&(w.shaderSource(v,"void main() {}"),w.compileShader(v),!0===w.getShaderParameter(v,w.COMPILE_STATUS))}(u)),!_[u]||document.documentMode));var i,u}var _={};function ve(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let u=0;u<f.length;u++)if(!ve(f[u],i[u]))return!1;return!0}if("object"==typeof f&&null!==f&&null!==i){if("object"!=typeof i||Object.keys(f).length!==Object.keys(i).length)return!1;for(const u in f)if(!ve(f[u],i[u]))return!1;return!0}return f===i}Ie.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const xe={create:function(f,i,u){const p=c.window.document.createElement(f);return void 0!==i&&(p.className=i),u&&u.appendChild(p),p},createNS:function(f,i){return c.window.document.createElementNS(f,i)}},Oe=c.window.document&&c.window.document.documentElement.style,Ke=Oe&&void 0!==Oe.userSelect?"userSelect":"WebkitUserSelect";let st;xe.disableDrag=function(){Oe&&Ke&&(st=Oe[Ke],Oe[Ke]="none")},xe.enableDrag=function(){Oe&&Ke&&(Oe[Ke]=st)},xe.setTransform=function(f,i){f.style.transform=i};let Pt=!1;try{const f=Object.defineProperty({},"passive",{get(){Pt=!0}});c.window.addEventListener("test",f,f),c.window.removeEventListener("test",f,f)}catch(f){Pt=!1}xe.addEventListener=function(f,i,u,p={}){f.addEventListener(i,u,"passive"in p&&Pt?p:p.capture)},xe.removeEventListener=function(f,i,u,p={}){f.removeEventListener(i,u,"passive"in p&&Pt?p:p.capture)};const Qt=function(f){f.preventDefault(),f.stopPropagation(),c.window.removeEventListener("click",Qt,!0)};function Dt(f,i,u){const p=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new c.pointGeometry((u.clientX-i.left)*p,(u.clientY-i.top)*p)}xe.suppressClick=function(){c.window.addEventListener("click",Qt,!0),c.window.setTimeout(()=>{c.window.removeEventListener("click",Qt,!0)},0)},xe.mousePos=function(f,i){const u=f.getBoundingClientRect();return Dt(f,u,i)},xe.touchPos=function(f,i){const u=f.getBoundingClientRect(),p=[];for(let v=0;v<i.length;v++)p.push(Dt(f,u,i[v]));return p},xe.mouseButton=function(f){return void 0!==c.window.InstallTrigger&&2===f.button&&f.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},xe.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};class St{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,p){const v=c.dot(u,this.dir);if(Math.abs(v)<1e-6)return!1;const w=c.dot(c.sub(c.create(),i,this.pos),u)/v,T=c.scaleAndAdd(c.create(),this.pos,this.dir,w);return c.copy(p,T),!0}}class kt{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const v=Math.pow(2,p),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const G=c.transformMat4([],k,i),te=1/G[3]/u*v;return c.mul(G,G,[te,te,1/G[3],te])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const G=c.sub([],w[k[0]],w[k[1]]),te=c.sub([],w[k[2]],w[k[1]]),he=c.normalize([],c.cross([],G,te)),_e=-c.dot(he,w[k[1]]);return he.concat(_e)});return new kt(w,T)}}class Kt{constructor(i,u){this.min=i,this.max=u,this.center=c.scale([],c.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],p=c.clone(this.min),v=c.clone(this.max);for(let w=0;w<u.length;w++)p[w]=u[w]?this.min[w]:this.center[w],v[w]=u[w]?this.center[w]:this.max[w];return v[2]=this.max[2],new Kt(p,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let v=0;v<i.planes.length;v++){const w=i.planes[v];let T=0;for(let k=0;k<u.length;k++)T+=c.dot$1(w,u[k])>=0;if(0===T)return 0;T!==u.length&&(p=!1)}if(p)return 2;for(let v=0;v<3;v++){let w=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const G=i.points[k][v]-this.min[v];w=Math.min(w,G),T=Math.max(T,G)}if(T<0||w>this.max[v]-this.min[v])return 0}return 1}}function Ft(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Mn extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const v of i){if(v[0]<p||v[1]<v[0]||u<v[1])return!1;p=v[1]}return!0}_validateContent(i,u){return!(i&&(4!==i.length||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){u.version=this.images[i].version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const v of i){this.images[v]||this.fire(new c.Event("styleimagemissing",{id:v}));const w=this.images[v];w?p[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:c.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},w=new c.ImagePosition(v,p);this.patterns[i]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const w in this.patterns)i.push(this.patterns[w].bin);const{w:u,h:p}=c.potpack(i),v=this.atlasImage;v.resize({width:u||1,height:p||1});for(const w in this.patterns){const{bin:T}=this.patterns[w],k=T.x+1,G=T.y+1,te=this.images[w].data,he=te.width,_e=te.height;c.RGBAImage.copy(te,v,{x:0,y:0},{x:k,y:G},{width:he,height:_e}),c.RGBAImage.copy(te,v,{x:0,y:_e-1},{x:k,y:G-1},{width:he,height:1}),c.RGBAImage.copy(te,v,{x:0,y:0},{x:k,y:G+_e},{width:he,height:1}),c.RGBAImage.copy(te,v,{x:he-1,y:0},{x:k-1,y:G},{width:1,height:_e}),c.RGBAImage.copy(te,v,{x:0,y:0},{x:k+he,y:G},{width:1,height:_e})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.images[u];Ft(p)&&this.updateImage(u,p)}}}const Jt=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(f,i){return function([u,p,v]){const w=c.degToRad(p+90),T=c.degToRad(v);return{x:u*Math.cos(w)*Math.sin(T),y:u*Math.sin(w)*Math.sin(T),z:u*Math.cos(T),azimuthal:p,polar:v}}(f.expression.evaluate(i))}interpolate(f,i,u){return{x:c.number(f.x,i.x,u),y:c.number(f.y,i.y,u),z:c.number(f.z,i.z,u),azimuthal:c.number(f.azimuthal,i.azimuthal,u),polar:c.number(f.polar,i.polar,u)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),qt="-transition";class dn extends c.Evented{constructor(i){super(),this._transitionable=new c.Transitionable(Jt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.validateLight,i,u))for(const p in i){const v=i[p];c.endsWith(p,qt)?this._transitionable.setTransition(p.slice(0,-qt.length),v):this._transitionable.setValue(p,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||!1!==p.validate)&&c.emitValidationErrors(this,i.call(c.validateStyle,c.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}const Hn=new c.Properties({source:new c.DataConstantProperty(c.spec.terrain.source),exaggeration:new c.DataConstantProperty(c.spec.terrain.exaggeration)}),Ai="-transition";class Ri extends c.Evented{constructor(i){super(),this._transitionable=new c.Transitionable(Hn),this.set(i),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(i){for(const u in i){const p=i[u];c.endsWith(u,Ai)?this._transitionable.setTransition(u.slice(0,-Ai.length),p):this._transitionable.setValue(u,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function ci(f,i,u,p){const v=c.smoothstep(45,65,u),[w,T]=ni(f,p),k=c.length(i);let G=1-Math.min(1,Math.exp((k-w)/(T-w)*-6));return G*=G*G,G=Math.min(1,1.00747*G),G*v*f.alpha}function ni(f,i){const u=.5/Math.tan(.5*i);return[f.range[0]+u,f.range[1]+u]}const zn=new c.Properties({range:new c.DataConstantProperty(c.spec.fog.range),color:new c.DataConstantProperty(c.spec.fog.color),"horizon-blend":new c.DataConstantProperty(c.spec.fog["horizon-blend"])}),Ln="-transition";class ii extends c.Evented{constructor(i){super(),this._transitionable=new c.Transitionable(zn),this.set(i),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,u={}){if(!this._validate(c.validateFog,i,u))for(const p in i){const v=i[p];c.endsWith(p,Ln)?this._transitionable.setTransition(p.slice(0,-Ln.length),v):this._transitionable.setValue(p,v)}}getOpacity(i){const u=this.properties&&this.properties.get("color")||1;return c.smoothstep(45,65,i)*u.a}getOpacityAtLatLng(i,u){return function(p,v,w){const T=c.MercatorCoordinate.fromLngLat(v),k=w.elevation?w.elevation.getAtPointOrZero(T):0,G=[T.x,T.y,k];return c.transformMat4$1(G,G,w.mercatorFogMatrix),ci(p,G,w.pitch,w._fov)}(this.state,i,u)}getFovAdjustedRange(i){return ni(this.state,i)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||!1!==p.validate)&&c.emitValidationErrors(this,i.call(c.validateStyle,c.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class On{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const p=this.workerPool.acquire(this.id);for(let v=0;v<p.length;v++){const w=new On.Actor(p[v],u,this.id);w.name=`Worker ${v}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,u,p){c.asyncAll(this.actors,(v,w)=>{v.send(i,u,w)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function vi(f,i,u){return i*(c.EXTENT/(f.tileSize*Math.pow(2,u-f.tileID.overscaledZ)))}On.Actor=c.Actor;class xi{constructor(i,u,p,v){this.screenBounds=i,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(w=>v.pointCoordinate3D(w)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(i,u){let p,v;if(i instanceof c.pointGeometry||"number"==typeof i[0]){const w=c.pointGeometry.convert(i);p=[c.pointGeometry.convert(i)],v=u.isPointAboveHorizon(w)}else{const w=c.pointGeometry.convert(i[0]),T=c.pointGeometry.convert(i[1]);p=[w,T],v=c.polygonizeBounds(w,T).every(k=>u.isPointAboveHorizon(k))}return new xi(p,u.getCameraPoint(),v,u)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(i){return c.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const u=this.screenBounds[0],p=1===this.screenBounds.length?this.screenBounds[0].add(new c.pointGeometry(1,1)):this.screenBounds[1],v=c.polygonizeBounds(u,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<p.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?v[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(v[3]=this.cameraPoint)),c.bufferConvexPolygon(v,i)}containsTile(i,u,p){const v=i.queryPadding+1,w=p?this._bufferedCameraMercator(v,u).map(Re=>i.tileID.getTilePoint(Re)):this._bufferedScreenMercator(v,u).map(Re=>i.tileID.getTilePoint(Re)),T=this.screenGeometryMercator.map(Re=>i.tileID.getTileVec3(Re)),k=T.map(Re=>new c.pointGeometry(Re[0],Re[1])),G=u.getFreeCameraOptions().position||new c.MercatorCoordinate(0,0,0),te=i.tileID.getTileVec3(G),he=T.map(Re=>{const je=c.sub(Re,Re,te);return c.normalize(je,je),new St(te,je)}),_e=vi(i,1,u.zoom);if(c.polygonIntersectsBox(w,0,0,c.EXTENT,c.EXTENT))return{queryGeometry:this,tilespaceGeometry:k,tilespaceRays:he,bufferedTilespaceGeometry:w,bufferedTilespaceBounds:(we=c.getBounds(w),we.min.x=c.clamp(we.min.x,0,c.EXTENT),we.min.y=c.clamp(we.min.y,0,c.EXTENT),we.max.x=c.clamp(we.max.x,0,c.EXTENT),we.max.y=c.clamp(we.max.y,0,c.EXTENT),we),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:_e};var we}_bufferedScreenMercator(i,u){const p=fi(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{const v=this.bufferedScreenGeometry(i).map(w=>u.pointCoordinate3D(w));return this._screenRaycastCache[p]=v,v}}_bufferedCameraMercator(i,u){const p=fi(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{const v=this.bufferedCameraGeometry(i).map(w=>u.pointCoordinate3D(w));return this._cameraRaycastCache[p]=v,v}}}function fi(f){return 100*f|0}function Ki(f,i,u){const p=function(v,w){if(v)return u(v);if(w){const T=c.pick(c.extend(w,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(T.vectorLayers=w.vector_layers,T.vectorLayerIds=T.vectorLayers.map(k=>k.id)),T.tiles=i.canonicalizeTileset(T,f.url),u(null,T)}};return f.url?c.getJSON(i.transformRequest(i.normalizeSourceURL(f.url),c.ResourceType.Source),p):c.exported.frame(()=>p(null,f))}class rn{constructor(i,u,p){this.bounds=c.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*u),v=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*u),w=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*u),T=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=p&&i.x<w&&i.y>=v&&i.y<T}}class Ut{constructor(i,u,p){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const an={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ct{constructor(i,u,p,v){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=i;const w=i.gl;this.buffer=w.createBuffer(),i.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const v=u.attributes[this.attributes[p].name];void 0!==v&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,u,p){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],T=u.attributes[w.name];void 0!==T&&i.vertexAttribPointer(T,w.components,i[an[w.type]],!1,this.itemSize,w.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Et{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tn extends Et{getDefault(){return c.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class pn extends Et{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class An extends Et{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Bn extends Et{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class di extends Et{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ei extends Et{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Vn extends Et{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class ki extends Et{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Mi extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ti extends Et{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class er extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Zi extends Et{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ei extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class oi extends Et{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class en extends Et{getDefault(){return c.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class at extends Et{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xt extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class xn extends Et{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class sn extends Et{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Un extends Et{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ui extends Et{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Xn extends Et{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Xt extends Et{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Zn extends Et{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Bi extends Et{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class cr extends Et{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ui extends Et{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Kn extends Et{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class vt extends Et{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Wt extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class pe extends Et{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ke extends Et{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class gt extends ke{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class jt extends ke{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Dn extends jt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ri{constructor(i,u,p,v){this.context=i,this.width=u,this.height=p;const w=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new gt(i,w),v&&(this.depthAttachment=new jt(i,w))}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Ze{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new tn(this),this.clearDepth=new pn(this),this.clearStencil=new An(this),this.colorMask=new Bn(this),this.depthMask=new di(this),this.stencilMask=new Ei(this),this.stencilFunc=new Vn(this),this.stencilOp=new ki(this),this.stencilTest=new Mi(this),this.depthRange=new Ti(this),this.depthTest=new er(this),this.depthFunc=new Zi(this),this.blend=new ei(this),this.blendFunc=new oi(this),this.blendColor=new en(this),this.blendEquation=new at(this),this.cullFace=new xt(this),this.cullFaceSide=new xn(this),this.frontFace=new sn(this),this.program=new Un(this),this.activeTexture=new ui(this),this.viewport=new Xn(this),this.bindFramebuffer=new Xt(this),this.bindRenderbuffer=new Zn(this),this.bindTexture=new Bi(this),this.bindVertexBuffer=new cr(this),this.bindElementBuffer=new Ui(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Kn(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new Wt(this),this.pixelStoreUnpackFlipY=new pe(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Ut(this,i,u)}createVertexBuffer(i,u,p){return new ct(this,i,u,p)}createRenderbuffer(i,u,p){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),w}createFramebuffer(i,u,p){return new ri(this,i,u,p)}clear({color:i,depth:u,stencil:p}){const v=this.gl;let w=0;i&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),void 0!==p&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(w)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){ve(i.blendFunction,c.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ze extends c.Evented{constructor(i,u,p,v){super(),this.id=i,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},u),c.extend(this,c.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ki(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.ErrorEvent(i)):u&&(c.extend(this,u),u.bounds&&(this.tileBounds=new rn(u.bounds,this.minzoom,this.maxzoom)),c.postTurnstileEvent(u.tiles),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=c.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=c.getImage(this.map._requestManager.transformRequest(v,c.ResourceType.Tile),(w,T,k,G)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(w)i.state="errored",u(w);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:k,expires:G});const te=this.map.painter.context,he=te.gl;i.texture=this.map.painter.getTileTexture(T.width),i.texture?i.texture.update(T,{useMipmap:!0}):(i.texture=new c.Texture(te,T,he.RGBA,{useMipmap:!0}),i.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),te.extTextureFilterAnisotropic&&he.texParameterf(he.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax)),i.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Ce;var me=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class oe extends c.Evented{constructor(i,u,p,v){super(),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(i,u){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(p,v)=>{this._loaded=!0,p?this.fire(new c.ErrorEvent(p)):v&&(this.image=c.exported.getImageData(v),i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(v){let w=1/0,T=1/0,k=-1/0,G=-1/0;for(const we of v)w=Math.min(w,we.x),T=Math.min(T,we.y),k=Math.max(k,we.x),G=Math.max(G,we.y);const te=Math.max(k-w,G-T),he=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),_e=Math.pow(2,he);return new c.CanonicalTileID(he,Math.floor((w+k)/2*_e),Math.floor((T+G)/2*_e))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new c.StructArrayLayout4i8,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,me.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new c.Texture(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const p in this.tiles){const v=this.tiles[p];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const K={vector:class extends c.Evented{constructor(f,i,u,p){if(super(),this.id=f,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(i,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p),this._tileWorkers={},this._deduped=new c.DedupedRequest}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ki(this._options,this.map._requestManager,(f,i)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new c.ErrorEvent(f)):i&&(c.extend(this,i),i.bounds&&(this.tileBounds=new rn(i.bounds,this.minzoom,this.maxzoom)),c.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f();const i=this.map.style._getSourceCaches(this.id);for(const u of i)u.clearTiles();this.load()}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(f,i){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(u,c.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(p.request.collectResourceTiming=this._collectResourceTiming,f.actor&&"expired"!==f.state)"loading"===f.state?f.reloadCallback=i:f.request=f.actor.send("reloadTile",p,v.bind(this));else if(f.actor=this._tileWorkers[u]=this._tileWorkers[u]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",p,v.bind(this),void 0,!0);else{const w=c.loadVectorTile.call({deduped:this._deduped},p,(T,k)=>{T||!k?v.call(this,T):(p.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},f.actor&&f.actor.send("loadTile",p,v.bind(this),void 0,!0))},!0);f.request={cancel:w}}function v(w,T){return delete f.request,f.aborted?i(null):w&&404!==w.status?i(w):(T&&T.resourceTiming&&(f.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&f.setExpiryData(T),f.loadVectorData(T,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:ze,"raster-dem":class extends ze{constructor(f,i,u,p){super(f,i,u,p),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(v,w){v&&(f.state="errored",i(v)),w&&(f.dem=w,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=c.getImage(this.map._requestManager.transformRequest(u,c.ResourceType.Tile),function(v,w,T,k){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(v)f.state="errored",i(v);else if(w){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:T,expires:k});const G=c.window.ImageBitmap&&w instanceof c.window.ImageBitmap&&(null==Ce&&(Ce=c.window.OffscreenCanvas&&new c.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof c.window.createImageBitmap),Ce),te=1-(w.width-c.prevPowerOfTwo(w.width))/2;te<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const he=G?w:c.exported.getImageData(w,te),_e={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:he,encoding:this.encoding,padding:te};f.actor&&"expired"!==f.state||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",_e,p.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const i=f.canonical,u=Math.pow(2,i.z),p=(i.x-1+u)%u,v=0===i.x?f.wrap-1:f.wrap,w=(i.x+1+u)%u,T=i.x+1===u?f.wrap+1:f.wrap,k={};return k[new c.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y).key]={backfilled:!1},k[new c.OverscaledTileID(f.overscaledZ,T,i.z,w,i.y).key]={backfilled:!1},i.y>0&&(k[new c.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y-1).key]={backfilled:!1},k[new c.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},k[new c.OverscaledTileID(f.overscaledZ,T,i.z,w,i.y-1).key]={backfilled:!1}),i.y+1<u&&(k[new c.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y+1).key]={backfilled:!1},k[new c.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},k[new c.OverscaledTileID(f.overscaledZ,T,i.z,w,i.y+1).key]={backfilled:!1}),k}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends c.Evented{constructor(f,i,u,p){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(p),this._data=i.data,this._options=c.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*v,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*v,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:c.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,u,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:u},p),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new c.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=c.extend({},this.workerOptions),i=this._data;"string"==typeof i?(f.request=this.map._requestManager.transformRequest(c.exported.resolveURL(i),c.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(u,p)=>{if(this._loaded=!0,this._pendingLoad=null,u)this.fire(new c.ErrorEvent(u));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&p&&p.resourceTiming&&p.resourceTiming[this.id]&&(v.resourceTiming=p.resourceTiming[this.id]),this.fire(new c.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,i){const u=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(u,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(p,v)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):p?i(p):(f.loadVectorData(v,this.map.painter,"reloadTile"===u),i(null))),void 0,"loadTile"===u)}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends oe{constructor(f,i,u,p){super(f,i,u,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,c.ResourceType.Source).url);c.getVideo(this.urls,(i,u)=>{this._loaded=!0,i?this.fire(new c.ErrorEvent(i)):u&&(this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,me.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const u in this.tiles){const p=this.tiles[u];"loaded"!==p.state&&(p.state="loaded",p.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:oe,canvas:class extends oe{constructor(f,i,u,p){super(f,i,u,p),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(v=>!Array.isArray(v)||2!==v.length||v.some(w=>"number"!=typeof w))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,me.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(i,this.canvas,u.RGBA,{premultiply:!0});for(const p in this.tiles){const v=this.tiles[p];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}}},N=function(f,i,u,p){const v=new K[i.type](f,i,u,p);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Q(f,i){const u=c.identity([]);return c.scale$1(u,u,[.5*f.width,.5*-f.height,1]),c.translate(u,u,[1,-1,0]),c.multiply(u,u,f.calculateProjMatrix(i.toUnwrapped()))}function z(f,i,u,p,v,w,T,k=!1){const G=f.tilesIn(p,T,k);G.sort(le);const te=[];for(const _e of G)te.push({wrappedTileID:_e.tile.tileID.wrapped().key,queryResults:_e.tile.queryRenderedFeatures(i,u,f._state,_e,v,w,Q(f.transform,_e.tile.tileID),k)});const he=function(_e){const we={},Re={};for(const je of _e){const He=je.queryResults,_t=je.wrappedTileID,Le=Re[_t]=Re[_t]||{};for(const Ye in He){const nt=He[Ye],Ct=Le[Ye]=Le[Ye]||{},Je=we[Ye]=we[Ye]||[];for(const ht of nt)Ct[ht.featureIndex]||(Ct[ht.featureIndex]=!0,Je.push(ht))}}return we}(te);for(const _e in he)he[_e].forEach(we=>{const Re=we.feature,je=f.getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=je});return he}function O(f,i){const u=f.getRenderableIds().map(w=>f.getTileByID(w)),p=[],v={};for(let w=0;w<u.length;w++){const T=u[w],k=T.tileID.canonical.key;v[k]||(v[k]=!0,T.querySourceFeatures(p,i))}return p}function le(f,i){const u=f.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function J(){return null!=ou.workerClass?new ou.workerClass:new c.window.Worker(ou.workerUrl)}const W="mapboxgl_preloaded_worker_pool";class ${constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<$.workerCount;)this.workers.push(new J);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[W]}numActive(){return Object.keys(this.active).length}}let Ee;function Ge(){return Ee||(Ee=new $),Ee}function mt(f,i){const u={};for(const p in f)"ref"!==p&&(u[p]=f[p]);return c.refProperties.forEach(p=>{p in i&&(u[p]=i[p])}),u}function nn(f){f=f.slice();const i=Object.create(null);for(let u=0;u<f.length;u++)i[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=mt(f[u],i[f[u].ref]));return f}$.workerCount=2;const Qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function It(f,i,u){u.push({command:Qe.addSource,args:[f,i[f]]})}function Bt(f,i,u){i.push({command:Qe.removeSource,args:[f]}),u[f]=!0}function Sn(f,i,u,p){Bt(f,u,p),It(f,i,u)}function Nn(f,i,u){let p;for(p in f[u])if(f[u].hasOwnProperty(p)&&"data"!==p&&!ve(f[u][p],i[u][p]))return!1;for(p in i[u])if(i[u].hasOwnProperty(p)&&"data"!==p&&!ve(f[u][p],i[u][p]))return!1;return!0}function Qn(f,i,u,p,v,w){let T;for(T in i=i||{},f=f||{})f.hasOwnProperty(T)&&(ve(f[T],i[T])||u.push({command:w,args:[p,T,i[T],v]}));for(T in i)i.hasOwnProperty(T)&&!f.hasOwnProperty(T)&&(ve(f[T],i[T])||u.push({command:w,args:[p,T,i[T],v]}))}function hi(f){return f.id}function bi(f,i){return f[i.id]=i,f}class $e{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=c.clamp(i,0,1);let u=1,p=this._distances[u];const v=i*this.paddedLength+this.padding;for(;p<v&&u<this._distances.length;)p=this._distances[++u];const w=u-1,T=this._distances[w],k=p-T,G=k>0?(v-T)/k:0;return this.points[w].mult(1-G).add(this.points[u].mult(G))}}class rt{constructor(i,u,p){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,v,w){this._forEachCell(u,p,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(i,u,p,v){this._forEachCell(u-v,p-v,u+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(v)}_insertBoxCell(i,u,p,v,w,T){this.boxCells[w].push(T)}_insertCircleCell(i,u,p,v,w,T){this.circleCells[w].push(T)}_query(i,u,p,v,w,T){if(p<0||i>this.width||v<0||u>this.height)return!w&&[];const k=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=v){if(w)return!0;for(let G=0;G<this.boxKeys.length;G++)k.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const te=this.circles[3*G],he=this.circles[3*G+1],_e=this.circles[3*G+2];k.push({key:this.circleKeys[G],x1:te-_e,y1:he-_e,x2:te+_e,y2:he+_e})}return T?k.filter(T):k}return this._forEachCell(i,u,p,v,this._queryCell,k,{hitTest:w,seenUids:{box:{},circle:{}}},T),w?k.length>0:k}_queryCircle(i,u,p,v,w){const T=i-p,k=i+p,G=u-p,te=u+p;if(k<0||T>this.width||te<0||G>this.height)return!v&&[];const he=[];return this._forEachCell(T,G,k,te,this._queryCellCircle,he,{hitTest:v,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},w),v?he.length>0:he}query(i,u,p,v,w){return this._query(i,u,p,v,!1,w)}hitTest(i,u,p,v,w){return this._query(i,u,p,v,!0,w)}hitTestCircle(i,u,p,v){return this._queryCircle(i,u,p,!0,v)}_queryCell(i,u,p,v,w,T,k,G){const te=k.seenUids,he=this.boxCells[w];if(null!==he){const we=this.bboxes;for(const Re of he)if(!te.box[Re]){te.box[Re]=!0;const je=4*Re;if(i<=we[je+2]&&u<=we[je+3]&&p>=we[je+0]&&v>=we[je+1]&&(!G||G(this.boxKeys[Re]))){if(k.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[Re],x1:we[je],y1:we[je+1],x2:we[je+2],y2:we[je+3]})}}}const _e=this.circleCells[w];if(null!==_e){const we=this.circles;for(const Re of _e)if(!te.circle[Re]){te.circle[Re]=!0;const je=3*Re;if(this._circleAndRectCollide(we[je],we[je+1],we[je+2],i,u,p,v)&&(!G||G(this.circleKeys[Re]))){if(k.hitTest)return T.push(!0),!0;{const He=we[je],_t=we[je+1],Le=we[je+2];T.push({key:this.circleKeys[Re],x1:He-Le,y1:_t-Le,x2:He+Le,y2:_t+Le})}}}}}_queryCellCircle(i,u,p,v,w,T,k,G){const te=k.circle,he=k.seenUids,_e=this.boxCells[w];if(null!==_e){const Re=this.bboxes;for(const je of _e)if(!he.box[je]){he.box[je]=!0;const He=4*je;if(this._circleAndRectCollide(te.x,te.y,te.radius,Re[He+0],Re[He+1],Re[He+2],Re[He+3])&&(!G||G(this.boxKeys[je])))return T.push(!0),!0}}const we=this.circleCells[w];if(null!==we){const Re=this.circles;for(const je of we)if(!he.circle[je]){he.circle[je]=!0;const He=3*je;if(this._circlesCollide(Re[He],Re[He+1],Re[He+2],te.x,te.y,te.radius)&&(!G||G(this.circleKeys[je])))return T.push(!0),!0}}}_forEachCell(i,u,p,v,w,T,k,G){const te=this._convertToXCellCoord(i),he=this._convertToYCellCoord(u),_e=this._convertToXCellCoord(p),we=this._convertToYCellCoord(v);for(let Re=te;Re<=_e;Re++)for(let je=he;je<=we;je++)if(w.call(this,i,u,p,v,this.xCellCount*je+Re,T,k,G))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,v,w,T){const k=v-i,G=w-u,te=p+T;return te*te>k*k+G*G}_circleAndRectCollide(i,u,p,v,w,T,k){const G=(T-v)/2,te=Math.abs(i-(v+G));if(te>G+p)return!1;const he=(k-w)/2,_e=Math.abs(u-(w+he));if(_e>he+p)return!1;if(te<=G||_e<=he)return!0;const we=te-G,Re=_e-he;return we*we+Re*Re<=p*p}}const bt=Math.tan(85*Math.PI/180);function Yt(f,i,u,p,v){const w=c.create$1();return i?(c.scale$1(w,w,[1/v,1/v,1]),u||c.rotateZ(w,w,p.angle)):c.multiply(w,p.labelPlaneMatrix,f),w}function In(f,i,u,p,v){if(i){const w=c.clone$1(f);return c.scale$1(w,w,[v,v,1]),u||c.rotateZ(w,w,-p.angle),w}return p.glCoordMatrix}function dt(f,i,u=0){const p=[f.x,f.y,u,1];u?c.transformMat4(p,p,i):ji(p,p,i);const v=p[3];return{point:new c.pointGeometry(p[0]/v,p[1]/v),signedDistanceFromCamera:v}}function et(f,i){return Math.min(.5+f/i*.5,1.5)}function ae(f,i){const u=f[0]/f[3],p=f[1]/f[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function B(f,i,u,p,v,w,T,k,G){const te=p?f.textSizeData:f.iconSizeData,he=c.evaluateSizeForZoom(te,u.transform.zoom),_e=[256/u.width*2+1,256/u.height*2+1],we=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;we.clear();const Re=f.lineVertexArray,je=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,He=u.transform.width/u.transform.height;let _t=!1;for(let Le=0;Le<je.length;Le++){const Ye=je.get(Le);if(Ye.writingMode!==c.WritingMode.vertical||_t||0!==Le&&je.get(Le-1).writingMode===c.WritingMode.horizontal||(_t=!0),Ye.hidden||Ye.writingMode===c.WritingMode.vertical&&!_t){pi(Ye.numGlyphs,we);continue}_t=!1;const nt=G?G({x:Ye.anchorX,y:Ye.anchorY}):0,Ct=[Ye.anchorX,Ye.anchorY,nt,1];if(c.transformMat4(Ct,Ct,i),!ae(Ct,_e)){pi(Ye.numGlyphs,we);continue}const Je=et(u.transform.cameraToCenterDistance,Ct[3]),ht=c.evaluateSizeForFeature(te,he,Ye),ln=T?ht/Je:ht*Je,fn=new c.pointGeometry(Ye.anchorX,Ye.anchorY),vn=dt(fn,v,nt);if(vn.signedDistanceFromCamera<=0){pi(Ye.numGlyphs,we);continue}const ut=vn.point;let jn={};const Tn=T?null:G,gi=We(Ye,ln,!1,k,i,v,w,f.glyphOffsetArray,Re,we,ut,fn,jn,He,Tn);_t=gi.useVertical,Tn&&gi.needsFlipping&&(jn={}),(gi.notEnoughRoom||_t||gi.needsFlipping&&We(Ye,ln,!0,k,i,v,w,f.glyphOffsetArray,Re,we,ut,fn,jn,He,Tn).notEnoughRoom)&&pi(Ye.numGlyphs,we)}p?f.text.dynamicLayoutVertexBuffer.updateData(we):f.icon.dynamicLayoutVertexBuffer.updateData(we)}function q(f,i,u,p,v,w,T,k,G,te,he,_e,we){const Re=k.glyphStartIndex+k.numGlyphs,je=k.lineStartIndex,He=k.lineStartIndex+k.lineLength,_t=i.getoffsetX(k.glyphStartIndex),Le=i.getoffsetX(Re-1),Ye=$t(f*_t,u,p,v,w,T,k.segment,je,He,G,te,he,_e,we,!0);if(!Ye)return null;const nt=$t(f*Le,u,p,v,w,T,k.segment,je,He,G,te,he,_e,we,!0);return nt?{first:Ye,last:nt}:null}function be(f,i,u,p){return f.writingMode===c.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:f.writingMode===c.WritingMode.vertical?i.y<u.y?{needsFlipping:!0}:null:0!==f.flipState&&function(v,w,T){const k=(w.x-v.x)*T;return 0===k||Math.abs((w.y-v.y)/k)>bt}(i,u,p)?1===f.flipState?{needsFlipping:!0}:null:i.x>u.x?{needsFlipping:!0}:null}function We(f,i,u,p,v,w,T,k,G,te,he,_e,we,Re,je){const He=i/24,_t=f.lineOffsetX*He,Le=f.lineOffsetY*He;let Ye;if(f.numGlyphs>1){const nt=f.glyphStartIndex+f.numGlyphs,Ct=f.lineStartIndex,Je=f.lineStartIndex+f.lineLength,ht=q(He,k,_t,Le,u,he,_e,f,G,w,we,je);if(!ht)return{notEnoughRoom:!0};const ln=dt(ht.first.point,T).point,fn=dt(ht.last.point,T).point;if(p&&!u){const vn=be(f,ln,fn,Re);if(f.flipState=vn&&vn.needsFlipping?1:2,vn)return vn}Ye=[ht.first];for(let vn=f.glyphStartIndex+1;vn<nt-1;vn++)Ye.push($t(He*k.getoffsetX(vn),_t,Le,u,he,_e,f.segment,Ct,Je,G,w,we,je));Ye.push(ht.last)}else{if(p&&!u){const Ct=dt(_e,v).point,Je=f.lineStartIndex+f.segment+1,ht=new c.pointGeometry(G.getx(Je),G.gety(Je)),ln=dt(ht,v),fn=be(f,Ct,ln.signedDistanceFromCamera>0?ln.point:Mt(_e,ht,Ct,1,v),Re);if(f.flipState=fn&&fn.needsFlipping?1:2,fn)return fn}const nt=$t(He*k.getoffsetX(f.glyphStartIndex),_t,Le,u,he,_e,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,G,w,we,je);if(!nt)return{notEnoughRoom:!0};Ye=[nt]}for(const nt of Ye)c.addDynamicAttributes(te,nt.point,nt.angle);return{}}function Mt(f,i,u,p,v,w){const T=f.add(f.sub(i)._unit()),k=dt(T,v,w?w(T):0).point,G=u.sub(k);return u.add(G._mult(p/G.mag()))}function $t(f,i,u,p,v,w,T,k,G,te,he,_e,we,Re,je){const He=p?f-i:f+i;let _t=He>0?1:-1,Le=0;p&&(_t*=-1,Le=Math.PI),_t<0&&(Le+=Math.PI);let Ye=_t>0?k+T:k+T+1,nt=v,Ct=v,Je=0,ht=0;const ln=Math.abs(He),fn=[],vn=[];let ut=w;const jn=()=>{const Si=Ye-_t;return 0===Je?w:new c.pointGeometry(te.getx(Si),te.gety(Si))},Tn=()=>Mt(jn(),ut,Ct,ln-Je+1,he,we);for(;Je+ht<=ln;){if(Ye+=_t,Ye<k||Ye>=G)return null;if(Ct=nt,fn.push(nt),Re&&vn.push(ut||jn()),nt=_e[Ye],void 0===nt){ut=new c.pointGeometry(te.getx(Ye),te.gety(Ye));const Si=dt(ut,he,we?we(ut):0);nt=Si.signedDistanceFromCamera>0?_e[Ye]=Si.point:Tn()}else ut=null;Je+=ht,ht=Ct.dist(nt)}je&&we&&(ut=ut||new c.pointGeometry(te.getx(Ye),te.gety(Ye)),_e[Ye]=nt=void 0===_e[Ye]?nt:Tn(),ht=Ct.dist(nt));const gi=(ln-Je)/ht,qn=nt.sub(Ct),Gn=qn.mult(gi)._add(Ct);u&&Gn._add(qn._unit()._perp()._mult(u*_t));const Hi=Le+Math.atan2(nt.y-Ct.y,nt.x-Ct.x);return fn.push(Gn),Re&&(ut=ut||new c.pointGeometry(te.getx(Ye),te.gety(Ye)),vn.push(function(Si,Er,Ir){const Zr=1-Ir;return new c.pointGeometry(Si.x*Zr+Er.x*Ir,Si.y*Zr+Er.y*Ir)}(vn.length>0?vn[vn.length-1]:ut,ut,gi))),{point:Gn,angle:Hi,path:fn,tilePath:vn}}const ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pi(f,i){for(let u=0;u<f;u++){const p=i.length;i.resize(p+4),i.float32.set(ti,3*p)}}function ji(f,i,u){const p=i[0],v=i[1];return f[0]=u[0]*p+u[4]*v+u[12],f[1]=u[1]*p+u[5]*v+u[13],f[3]=u[3]*p+u[7]*v+u[15],f}const Vi=100;class _i{constructor(i,u,p=new rt(i.width+200,i.height+200,25),v=new rt(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=v,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Vi,this.screenBottomBoundary=i.height+Vi,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=u}placeCollisionBox(i,u,p,v,w,T,k){const G=this.projectAndGetPerspectiveRatio(T,u.anchorPointX,u.anchorPointY,u.elevation,u.tileID),te=w*G.perspectiveRatio,he=(u.x1*i+p.x-u.padding)*te+G.point.x,_e=(u.y1*i+p.y-u.padding)*te+G.point.y,we=(u.x2*i+p.x+u.padding)*te+G.point.x,Re=(u.y2*i+p.y+u.padding)*te+G.point.y,je=G.perspectiveRatio<=.55||G.aboveHorizon;return!this.isInsideGrid(he,_e,we,Re)||!v&&this.grid.hitTest(he,_e,we,Re,k)||je?{box:[],offscreen:!1}:{box:[he,_e,we,Re],offscreen:this.isOffscreen(he,_e,we,Re)}}placeCollisionCircles(i,u,p,v,w,T,k,G,te,he,_e,we,Re,je){const He=[],_t=this.transform.elevation,Le=_t?Tn=>_t.getAtTileOffset(je,Tn.x,Tn.y):Tn=>0,Ye=new c.pointGeometry(u.anchorX,u.anchorY),nt=Le(Ye),Ct=this.projectAndGetPerspectiveRatio(T,Ye.x,Ye.y,nt,je),{perspectiveRatio:Je}=Ct,ht=(he?w/Je:w*Je)/c.ONE_EM,ln=dt(Ye,k,nt).point,fn=Ct.signedDistanceFromCamera>0?q(ht,v,u.lineOffsetX*ht,u.lineOffsetY*ht,!1,ln,Ye,u,p,k,{},_t&&!he?Le:null,he&&!!_t):null;let vn=!1,ut=!1,jn=!0;if(fn&&!Ct.aboveHorizon){const Tn=.5*we*Je+Re,gi=new c.pointGeometry(-100,-100),qn=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Gn=new $e,Hi=fn.first,Si=fn.last;let Er=[];for(let or=Hi.path.length-1;or>=1;or--)Er.push(Hi.path[or]);for(let or=1;or<Si.path.length;or++)Er.push(Si.path[or]);const Ir=2.5*Tn;if(G){const or=Er.map(_t?(kr,ls)=>{const ca=Le(ls<Hi.path.length-1?Hi.tilePath[Hi.path.length-1-ls]:Si.tilePath[ls-Hi.path.length+2]);return dt(kr,G,ca)}:kr=>dt(kr,G));Er=or.some(kr=>kr.signedDistanceFromCamera<=0)?[]:or.map(kr=>kr.point)}let Zr=[];if(Er.length>0){const or=Er[0].clone(),kr=Er[0].clone();for(let ls=1;ls<Er.length;ls++)or.x=Math.min(or.x,Er[ls].x),or.y=Math.min(or.y,Er[ls].y),kr.x=Math.max(kr.x,Er[ls].x),kr.y=Math.max(kr.y,Er[ls].y);Zr=or.x>=gi.x&&kr.x<=qn.x&&or.y>=gi.y&&kr.y<=qn.y?[Er]:kr.x<gi.x||or.x>qn.x||kr.y<gi.y||or.y>qn.y?[]:c.clipLine([Er],gi.x,gi.y,qn.x,qn.y)}for(const or of Zr){Gn.reset(or,.25*Tn);let kr=0;kr=Gn.length<=.5*Tn?1:Math.ceil(Gn.paddedLength/Ir)+1;for(let ls=0;ls<kr;ls++){const ca=ls/Math.max(kr-1,1),wo=Gn.lerp(ca),Us=wo.x+Vi,ro=wo.y+Vi;He.push(Us,ro,Tn,0);const Oa=Us-Tn,ar=ro-Tn,Jr=Us+Tn,Dr=ro+Tn;if(jn=jn&&this.isOffscreen(Oa,ar,Jr,Dr),ut=ut||this.isInsideGrid(Oa,ar,Jr,Dr),!i&&this.grid.hitTestCircle(Us,ro,Tn,_e)&&(vn=!0,!te))return{circles:[],offscreen:!1,collisionDetected:vn}}}}return{circles:!te&&vn||!ut?[]:He,offscreen:jn,collisionDetected:vn}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let p=1/0,v=1/0,w=-1/0,T=-1/0;for(const he of i){const _e=new c.pointGeometry(he.x+Vi,he.y+Vi);p=Math.min(p,_e.x),v=Math.min(v,_e.y),w=Math.max(w,_e.x),T=Math.max(T,_e.y),u.push(_e)}const k=this.grid.query(p,v,w,T).concat(this.ignoredGrid.query(p,v,w,T)),G={},te={};for(const he of k){const _e=he.key;if(void 0===G[_e.bucketInstanceId]&&(G[_e.bucketInstanceId]={}),G[_e.bucketInstanceId][_e.featureIndex])continue;const we=[new c.pointGeometry(he.x1,he.y1),new c.pointGeometry(he.x2,he.y1),new c.pointGeometry(he.x2,he.y2),new c.pointGeometry(he.x1,he.y2)];c.polygonIntersectsPolygon(u,we)&&(G[_e.bucketInstanceId][_e.featureIndex]=!0,void 0===te[_e.bucketInstanceId]&&(te[_e.bucketInstanceId]=[]),te[_e.bucketInstanceId].push(_e.featureIndex))}return te}insertCollisionBox(i,u,p,v,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:w},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,v,w){const T=u?this.ignoredGrid:this.grid,k={bucketInstanceId:p,featureIndex:v,collisionGroupID:w};for(let G=0;G<i.length;G+=4)T.insertCircle(k,i[G],i[G+1],i[G+2])}projectAndGetPerspectiveRatio(i,u,p,v,w){const T=[u,p,v||0,1];let k=!1;if(v||this.transform.pitch>0){c.transformMat4(T,T,i);let G=!1;this.fogState&&w&&(G=function(te,he,_e,we,Re,je){const He=je.calculateFogTileMatrix(Re),_t=[he,_e,we];return c.transformMat4$1(_t,_t,He),ci(te,_t,je.pitch,je._fov)}(this.fogState,u,p,v||0,w.toUnwrapped(),this.transform)>.9),k=T[2]>T[3]||G}else ji(T,T,i);return{point:new c.pointGeometry((T[0]/T[3]+1)/2*this.transform.width+Vi,(-T[1]/T[3]+1)/2*this.transform.height+Vi),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/T[3]*.5,1.5),signedDistanceFromCamera:T[3],aboveHorizon:k}}isOffscreen(i,u,p,v){return p<Vi||i>=this.screenRightBoundary||v<Vi||u>this.screenBottomBoundary}isInsideGrid(i,u,p,v){return p>=0&&i<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.identity([]);return c.translate(i,i,[-100,-100,0]),i}}class zr{constructor(i,u,p,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):v&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class Mr{constructor(i,u,p,v,w){this.text=new zr(i?i.text:null,u,p,w),this.icon=new zr(i?i.icon:null,u,v,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ni{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class $r{constructor(){this.invProjMatrix=c.create$1(),this.viewportMatrix=c.create$1(),this.circles=[]}}class Or{constructor(i,u,p,v,w){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=w}}class vr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function wr(f,i,u,p,v){const{horizontalAlign:w,verticalAlign:T}=c.getAnchorAlignment(f),k=-(w-.5)*i,G=-(T-.5)*u,te=c.evaluateVariableOffset(f,p);return new c.pointGeometry(k+te[0]*v,G+te[1]*v)}function ts(f,i,u,p,v){const w=new c.pointGeometry(f,i);return u&&w._rotate(p?v:-v),w}class Ne{constructor(i,u,p,v,w){this.transform=i.clone(),this.collisionIndex=new _i(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new vr(p),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,v){const w=p.getBucket(u),T=p.latestFeatureIndex;if(!w||!T||u.id!==w.layerIds[0])return;const k=p.collisionBoxArray,G=w.layers[0].layout,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),he=p.tileSize/c.EXTENT,_e=this.transform.calculateProjMatrix(p.tileID.toUnwrapped()),we="map"===G.get("text-pitch-alignment"),Re="map"===G.get("text-rotation-alignment"),je=vi(p,1,this.transform.zoom),He=Yt(_e,we,Re,this.transform,je);let _t=null;if(we){const Ye=In(_e,we,Re,this.transform,je);_t=c.multiply([],this.transform.labelPlaneMatrix,Ye)}this.retainedQueryData[w.bucketInstanceId]=new Or(w.bucketInstanceId,T,w.sourceLayerIndex,w.index,p.tileID);const Le={bucket:w,layout:G,posMatrix:_e,textLabelPlaneMatrix:He,labelToScreenMatrix:_t,scale:te,textPixelRatio:he,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:c.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const Ye of w.sortKeyRanges){const{sortKey:nt,symbolInstanceStart:Ct,symbolInstanceEnd:Je}=Ye;i.push({sortKey:nt,symbolInstanceStart:Ct,symbolInstanceEnd:Je,parameters:Le})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Le})}attemptAnchorPlacement(i,u,p,v,w,T,k,G,te,he,_e,we,Re,je,He,_t,Le,Ye){const nt=[we.textOffset0,we.textOffset1],Ct=wr(i,p,v,nt,w),Je=this.collisionIndex.placeCollisionBox(w,u,ts(Ct.x,Ct.y,T,k,this.transform.angle),_e,G,te,he.predicate);if((!_t||0!==this.collisionIndex.placeCollisionBox(je.getSymbolInstanceIconSize(Ye,this.transform.zoom,Re),_t,ts(Ct.x,Ct.y,T,k,this.transform.angle),_e,G,te,he.predicate).box.length)&&Je.box.length>0){let ht;return this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[we.crossTileID].anchor),this.variableOffsets[we.crossTileID]={textOffset:nt,width:p,height:v,anchor:i,textScale:w,prevAnchor:ht},this.markUsedJustification(je,i,we,He),je.allowVerticalPlacement&&(this.markUsedOrientation(je,He,we),this.placedOrientations[we.crossTileID]=He),{shift:Ct,placedGlyphBoxes:Je}}}placeLayerBucketPart(i,u,p){const{bucket:v,layout:w,posMatrix:T,textLabelPlaneMatrix:k,labelToScreenMatrix:G,textPixelRatio:te,holdingForFade:he,collisionBoxArray:_e,partiallyEvaluatedTextSize:we,partiallyEvaluatedIconSize:Re,collisionGroup:je}=i.parameters,He=w.get("text-optional"),_t=w.get("icon-optional"),Le=w.get("text-allow-overlap"),Ye=w.get("icon-allow-overlap"),nt="map"===w.get("text-rotation-alignment"),Ct="map"===w.get("text-pitch-alignment"),Je="none"!==w.get("icon-text-fit"),ht="viewport-y"===w.get("symbol-z-order"),ln=Le&&(Ye||!v.hasIconData()||_t),fn=Ye&&(Le||!v.hasTextData()||He);!v.collisionArrays&&_e&&v.deserializeCollisionBoxes(_e),p&&v.updateCollisionDebugBuffers(this.transform.zoom,_e);const vn=(ut,jn,Tn)=>{if(u[ut.crossTileID])return;if(he)return void(this.placements[ut.crossTileID]=new Ni(!1,!1,!1));let gi=!1,qn=!1,Gn=!0,Hi=null,Si={box:null,offscreen:null},Er={box:null,offscreen:null},Ir=null,Zr=null,or=null,kr=0,ls=0,ca=0;Tn.textFeatureIndex?kr=Tn.textFeatureIndex:ut.useRuntimeCollisionCircles&&(kr=ut.featureIndex),Tn.verticalTextFeatureIndex&&(ls=Tn.verticalTextFeatureIndex);const wo=ar=>{ar.tileID=this.retainedQueryData[v.bucketInstanceId].tileID,(this.transform.elevation||ar.elevation)&&(ar.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[v.bucketInstanceId].tileID,ar.anchorPointX,ar.anchorPointY):0)},Us=Tn.textBox;if(Us){wo(Us);const ar=Dr=>{let qr=c.WritingMode.horizontal;if(v.allowVerticalPlacement&&!Dr&&this.prevPlacement){const Rs=this.prevPlacement.placedOrientations[ut.crossTileID];Rs&&(this.placedOrientations[ut.crossTileID]=Rs,qr=Rs,this.markUsedOrientation(v,qr,ut))}return qr},Jr=(Dr,qr)=>{if(v.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Tn.verticalTextBox){for(const Rs of v.writingModes)if(Rs===c.WritingMode.vertical?(Si=qr(),Er=Si):Si=Dr(),Si&&Si.box&&Si.box.length)break}else Si=Dr()};if(w.get("text-variable-anchor")){let Dr=w.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ut.crossTileID]){const is=this.prevPlacement.variableOffsets[ut.crossTileID];Dr.indexOf(is.anchor)>0&&(Dr=Dr.filter(ko=>ko!==is.anchor),Dr.unshift(is.anchor))}const qr=(is,ko,ya)=>{const Ko=v.getSymbolInstanceTextSize(we,ut,this.transform.zoom,jn),Lo=(is.x2-is.x1)*Ko+2*is.padding,ka=(is.y2-is.y1)*Ko+2*is.padding,rl=Je&&!Ye?ko:null;rl&&wo(rl);let Qo={box:[],offscreen:!1};const Nu=Le?2*Dr.length:Dr.length;for(let ql=0;ql<Nu;++ql){const Wl=this.attemptAnchorPlacement(Dr[ql%Dr.length],is,Lo,ka,Ko,nt,Ct,te,T,je,ql>=Dr.length,ut,jn,v,ya,rl,we,Re);if(Wl&&(Qo=Wl.placedGlyphBoxes,Qo&&Qo.box&&Qo.box.length)){gi=!0,Hi=Wl.shift;break}}return Qo};Jr(()=>qr(Us,Tn.iconBox,c.WritingMode.horizontal),()=>{const is=Tn.verticalTextBox;return is&&wo(is),v.allowVerticalPlacement&&!(Si&&Si.box&&Si.box.length)&&ut.numVerticalGlyphVertices>0&&is?qr(is,Tn.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),Si&&(gi=Si.box,Gn=Si.offscreen);const Rs=ar(Si&&Si.box);if(!gi&&this.prevPlacement){const is=this.prevPlacement.variableOffsets[ut.crossTileID];is&&(this.variableOffsets[ut.crossTileID]=is,this.markUsedJustification(v,is.anchor,ut,Rs))}}else{const Dr=(qr,Rs)=>{const is=v.getSymbolInstanceTextSize(we,ut,this.transform.zoom,jn),ko=this.collisionIndex.placeCollisionBox(is,qr,new c.pointGeometry(0,0),Le,te,T,je.predicate);return ko&&ko.box&&ko.box.length&&(this.markUsedOrientation(v,Rs,ut),this.placedOrientations[ut.crossTileID]=Rs),ko};Jr(()=>Dr(Us,c.WritingMode.horizontal),()=>{const qr=Tn.verticalTextBox;return v.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&qr?(wo(qr),Dr(qr,c.WritingMode.vertical)):{box:null,offscreen:null}}),ar(Si&&Si.box&&Si.box.length)}}if(Ir=Si,gi=Ir&&Ir.box&&Ir.box.length>0,Gn=Ir&&Ir.offscreen,ut.useRuntimeCollisionCircles){const ar=v.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex>=0?ut.centerJustifiedTextSymbolIndex:ut.verticalPlacedTextSymbolIndex),Jr=c.evaluateSizeForFeature(v.textSizeData,we,ar),Dr=w.get("text-padding");Zr=this.collisionIndex.placeCollisionCircles(Le,ar,v.lineVertexArray,v.glyphOffsetArray,Jr,T,k,G,p,Ct,je.predicate,ut.collisionCircleDiameter,Dr,this.retainedQueryData[v.bucketInstanceId].tileID),gi=Le||Zr.circles.length>0&&!Zr.collisionDetected,Gn=Gn&&Zr.offscreen}if(Tn.iconFeatureIndex&&(ca=Tn.iconFeatureIndex),Tn.iconBox){const ar=Jr=>{wo(Jr);const Dr=Je&&Hi?ts(Hi.x,Hi.y,nt,Ct,this.transform.angle):new c.pointGeometry(0,0),qr=v.getSymbolInstanceIconSize(Re,this.transform.zoom,jn);return this.collisionIndex.placeCollisionBox(qr,Jr,Dr,Ye,te,T,je.predicate)};Er&&Er.box&&Er.box.length&&Tn.verticalIconBox?(or=ar(Tn.verticalIconBox),qn=or.box.length>0):(or=ar(Tn.iconBox),qn=or.box.length>0),Gn=Gn&&or.offscreen}const ro=He||0===ut.numHorizontalGlyphVertices&&0===ut.numVerticalGlyphVertices,Oa=_t||0===ut.numIconVertices;if(ro||Oa?Oa?ro||(qn=qn&&gi):gi=qn&&gi:qn=gi=qn&&gi,gi&&Ir&&Ir.box&&this.collisionIndex.insertCollisionBox(Ir.box,w.get("text-ignore-placement"),v.bucketInstanceId,Er&&Er.box&&ls?ls:kr,je.ID),qn&&or&&this.collisionIndex.insertCollisionBox(or.box,w.get("icon-ignore-placement"),v.bucketInstanceId,ca,je.ID),Zr&&(gi&&this.collisionIndex.insertCollisionCircles(Zr.circles,w.get("text-ignore-placement"),v.bucketInstanceId,kr,je.ID),p)){const ar=v.bucketInstanceId;let Jr=this.collisionCircleArrays[ar];void 0===Jr&&(Jr=this.collisionCircleArrays[ar]=new $r);for(let Dr=0;Dr<Zr.circles.length;Dr+=4)Jr.circles.push(Zr.circles[Dr+0]),Jr.circles.push(Zr.circles[Dr+1]),Jr.circles.push(Zr.circles[Dr+2]),Jr.circles.push(Zr.collisionDetected?1:0)}this.placements[ut.crossTileID]=new Ni(gi||ln,qn||fn,Gn||v.justReloaded),u[ut.crossTileID]=!0};if(ht){const ut=v.getSortedSymbolIndexes(this.transform.angle);for(let jn=ut.length-1;jn>=0;--jn){const Tn=ut[jn];vn(v.symbolInstances.get(Tn),Tn,v.collisionArrays[Tn])}}else for(let ut=i.symbolInstanceStart;ut<i.symbolInstanceEnd;ut++)vn(v.symbolInstances.get(ut),ut,v.collisionArrays[ut]);if(p&&v.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[v.bucketInstanceId];c.invert(ut.invProjMatrix,T),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,u,p,v){let w;w=v===c.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(u)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of T)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=w>=0&&k!==w?0:p.crossTileID)}markUsedOrientation(i,u,p){const v=u===c.WritingMode.horizontal||u===c.WritingMode.horizontalOnly?u:0,w=u===c.WritingMode.vertical?u:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of T)i.text.placedSymbolArray.get(k).placedOrientation=v;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(i):1,w=u?u.opacities:{},T=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const G in this.placements){const te=this.placements[G],he=w[G];he?(this.opacities[G]=new Mr(he,v,te.text,te.icon),p=p||te.text!==he.text.placed||te.icon!==he.icon.placed):(this.opacities[G]=new Mr(null,v,te.text,te.icon,te.skipFade),p=p||te.text||te.icon)}for(const G in w){const te=w[G];if(!this.opacities[G]){const he=new Mr(te,v,!1,!1);he.isHidden()||(this.opacities[G]=he,p=p||te.text.placed||te.icon.placed)}}for(const G in T)this.variableOffsets[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.variableOffsets[G]=T[G]);for(const G in k)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=k[G]);p?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const v of u){const w=v.getBucket(i);w&&v.latestFeatureIndex&&i.id===w.layerIds[0]&&this.updateBucketOpacities(w,p,v.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,w=new Mr(null,0,!1,!1,!0),T=v.get("text-allow-overlap"),k=v.get("icon-allow-overlap"),G=v.get("text-variable-anchor"),te="map"===v.get("text-rotation-alignment"),he="map"===v.get("text-pitch-alignment"),_e="none"!==v.get("icon-text-fit"),we=new Mr(null,0,T&&(k||!i.hasIconData()||v.get("icon-optional")),k&&(T||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const Re=(je,He,_t)=>{for(let Le=0;Le<He/4;Le++)je.opacityVertexArray.emplaceBack(_t)};for(let je=0;je<i.symbolInstances.length;je++){const He=i.symbolInstances.get(je),{numHorizontalGlyphVertices:_t,numVerticalGlyphVertices:Le,crossTileID:Ye}=He;let nt=this.opacities[Ye];u[Ye]?nt=w:nt||(nt=we,this.opacities[Ye]=nt),u[Ye]=!0;const Ct=He.numIconVertices>0,Je=this.placedOrientations[He.crossTileID],ht=Je===c.WritingMode.vertical,ln=Je===c.WritingMode.horizontal||Je===c.WritingMode.horizontalOnly;if(_t>0||Le>0){const fn=xr(nt.text);Re(i.text,_t,ht?Vr:fn),Re(i.text,Le,ln?Vr:fn);const vn=nt.text.isHidden();[He.rightJustifiedTextSymbolIndex,He.centerJustifiedTextSymbolIndex,He.leftJustifiedTextSymbolIndex].forEach(Tn=>{Tn>=0&&(i.text.placedSymbolArray.get(Tn).hidden=vn||ht?1:0)}),He.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(He.verticalPlacedTextSymbolIndex).hidden=vn||ln?1:0);const ut=this.variableOffsets[He.crossTileID];ut&&this.markUsedJustification(i,ut.anchor,He,Je);const jn=this.placedOrientations[He.crossTileID];jn&&(this.markUsedJustification(i,"left",He,jn),this.markUsedOrientation(i,jn,He))}if(Ct){const fn=xr(nt.icon);He.placedIconSymbolIndex>=0&&(Re(i.icon,He.numIconVertices,ht?Vr:fn),i.icon.placedSymbolArray.get(He.placedIconSymbolIndex).hidden=nt.icon.isHidden()),He.verticalPlacedIconSymbolIndex>=0&&(Re(i.icon,He.numVerticalIconVertices,ln?Vr:fn),i.icon.placedSymbolArray.get(He.verticalPlacedIconSymbolIndex).hidden=nt.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const fn=i.collisionArrays[je];if(fn){let vn=new c.pointGeometry(0,0);if(fn.textBox||fn.verticalTextBox){let jn=!0;if(G){const Tn=this.variableOffsets[Ye];Tn?(vn=wr(Tn.anchor,Tn.width,Tn.height,Tn.textOffset,Tn.textScale),te&&vn._rotate(he?this.transform.angle:-this.transform.angle)):jn=!1}fn.textBox&&it(i.textCollisionBox.collisionVertexArray,nt.text.placed,!jn||ht,vn.x,vn.y),fn.verticalTextBox&&it(i.textCollisionBox.collisionVertexArray,nt.text.placed,!jn||ln,vn.x,vn.y)}const ut=Boolean(!ln&&fn.verticalIconBox);fn.iconBox&&it(i.iconCollisionBox.collisionVertexArray,nt.icon.placed,ut,_e?vn.x:0,_e?vn.y:0),fn.verticalIconBox&&it(i.iconCollisionBox.collisionVertexArray,nt.icon.placed,!ut,_e?vn.x:0,_e?vn.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const je=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=je.invProjMatrix,i.placementViewportMatrix=je.viewportMatrix,i.collisionCircleArray=je.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function it(f,i,u,p,v){f.emplaceBack(i?1:0,u?1:0,p||0,v||0),f.emplaceBack(i?1:0,u?1:0,p||0,v||0),f.emplaceBack(i?1:0,u?1:0,p||0,v||0),f.emplaceBack(i?1:0,u?1:0,p||0,v||0)}const se=Math.pow(2,25),qe=Math.pow(2,24),yn=Math.pow(2,17),kn=Math.pow(2,16),Xi=Math.pow(2,9),Hr=Math.pow(2,8),Hs=Math.pow(2,1);function xr(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;const i=f.placed?1:0,u=Math.floor(127*f.opacity);return u*se+i*qe+u*yn+i*kn+u*Xi+i*Hr+u*Hs+i}const Vr=0;class Ms{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,v,w){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(T,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((k,G)=>k.sortKey-G.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,w())return!0;return!1}}class vo{constructor(i,u,p,v,w,T,k,G){this.placement=new Ne(i,w,T,k,G),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const v=c.exported.now(),w=()=>{const T=c.exported.now()-v;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=u[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if("symbol"===T.type&&(!T.minzoom||T.minzoom<=k)&&(!T.maxzoom||T.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ms(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ts=512/c.EXTENT/2;class Zs{constructor(i,u,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let v=0;v<u.length;v++){const w=u.get(v),T=w.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,i)})}}getScaledCoordinates(i,u){const p=Ts/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*c.EXTENT+i.anchorX)*p),y:Math.floor((u.canonical.y*c.EXTENT+i.anchorY)*p)}}findMatches(i,u,p){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let w=0;w<i.length;w++){const T=i.get(w);if(T.crossTileID)continue;const k=this.indexedSymbolInstances[T.key];if(!k)continue;const G=this.getScaledCoordinates(T,u);for(const te of k)if(Math.abs(te.coord.x-G.x)<=v&&Math.abs(te.coord.y-G.y)<=v&&!p[te.crossTileID]){p[te.crossTileID]=!0,T.crossTileID=te.crossTileID;break}}}}class ja{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ma{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(0!==u)for(const p in this.indexes){const v=this.indexes[p],w={};for(const T in v){const k=v[T];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),w[k.tileID.key]=k}this.indexes[p]=w}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const w in this.indexes){const T=this.indexes[w];if(Number(w)>i.overscaledZ)for(const k in T){const G=T[k];G.tileID.isChildOf(i)&&G.findMatches(u.symbolInstances,i,v)}else{const k=T[i.scaledTo(Number(w)).key];k&&k.findMatches(u.symbolInstances,i,v)}}for(let w=0;w<u.symbolInstances.length;w++){const T=u.symbolInstances.get(w);T.crossTileID||(T.crossTileID=p.generate(),v[T.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Zs(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p in u.indexedSymbolInstances)for(const v of u.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const v=this.indexes[p];for(const w in v)i[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[w]),delete v[w],u=!0)}return u}}class eo{constructor(){this.layerIndexes={},this.crossTileIDs=new ja,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let v=this.layerIndexes[i.id];void 0===v&&(v=this.layerIndexes[i.id]=new ma);let w=!1;const T={};v.handleWrapJump(p);for(const k of u){const G=k.getBucket(i);G&&i.id===G.layerIds[0]&&(G.bucketInstanceId||(G.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(k.tileID,G,this.crossTileIDs)&&(w=!0),T[G.bucketInstanceId]=!0)}return v.removeStaleBuckets(T)&&(w=!0),w}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const $o=(f,i)=>c.emitValidationErrors(f,i&&i.filter(u=>"source.canvas"!==u.identifier)),Ho=c.pick(Qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),xo=c.pick(Qe,["setCenter","setZoom","setBearing","setPitch"]),Do=function(){const f={},i=c.spec.$version;for(const u in c.spec.$root){const p=c.spec.$root[u];if(p.required){let v=null;v="version"===u?i:"array"===p.type?[]:{},null!=v&&(f[u]=v)}}return f}(),bo={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class us extends c.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new On(Ge(),this),this.imageManager=new Mn,this.imageManager.setEventedParent(this),this.glyphManager=new c.GlyphManager(i._requestManager,u.localFontFamily?c.LocalGlyphMode.all:u.localIdeographFontFamily?c.LocalGlyphMode.ideographs:c.LocalGlyphMode.none,u.localFontFamily||u.localIdeographFontFamily),this.lineAtlas=new c.LineAtlas(256,512),this.crossTileSymbolIndex=new eo,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const p=this;this._rtlTextPluginCallback=us.registerForPluginStateChange(v=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,T)=>{if(c.triggerPluginCompletionEvent(w),T&&T.every(k=>k))for(const k in p._sourceCaches){const G=p._sourceCaches[k],te=G.getSource().type;"vector"!==te&&"geojson"!==te||G.reload()}})}),this.on("data",v=>{if("source"!==v.dataType||"metadata"!==v.sourceDataType)return;const w=this.getSource(v.sourceId);if(w&&w.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===w.id&&this._validateLayer(k)}})}loadURL(i,u={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const p="boolean"==typeof u.validate?u.validate:!c.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,u.accessToken);const v=this.map._requestManager.transformRequest(i,c.ResourceType.Style);this._request=c.getJSON(v,(w,T)=>{this._request=null,w?this.fire(new c.ErrorEvent(w)):T&&this._load(T,p)})}loadJSON(i,u={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(i,!1!==u.validate)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(Do,!1)}_updateLayerCount(i,u){const p=u?1:-1;i.is3D()&&(this._num3DLayers+=p),"circle"===i.type&&(this._numCircleLayers+=p),"symbol"===i.type&&(this._numSymbolLayers+=p)}_load(i,u){if(u&&$o(this,c.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const p=nn(this.stylesheet.layers);this._order=p.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of p)v=c.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new dn(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,p,v){let w,T,k;const G=c.exported.devicePixelRatio>1?"@2x":"";let te=c.getJSON(p.transformRequest(p.normalizeSpriteURL(u,G,".json"),c.ResourceType.SpriteJSON),(we,Re)=>{te=null,k||(k=we,w=Re,_e())}),he=c.getImage(p.transformRequest(p.normalizeSpriteURL(u,G,".png"),c.ResourceType.SpriteImage),(we,Re)=>{he=null,k||(k=we,T=Re,_e())});function _e(){if(k)v(k);else if(w&&T){const we=c.exported.getImageData(T),Re={};for(const je in w){const{width:He,height:_t,x:Le,y:Ye,sdf:nt,pixelRatio:Ct,stretchX:Je,stretchY:ht,content:ln}=w[je],fn=new c.RGBAImage({width:He,height:_t});c.RGBAImage.copy(we,fn,{x:Le,y:Ye},{x:0,y:0},{width:He,height:_t}),Re[je]={data:fn,pixelRatio:Ct,sdf:nt,stretchX:Je,stretchY:ht,content:ln}}v(null,Re)}}return{cancel(){te&&(te.cancel(),te=null),he&&(he.cancel(),he=null)}}}(i,this.map._requestManager,(u,p)=>{if(this._spriteRequest=null,u)this.fire(new c.ErrorEvent(u));else if(p)for(const v in p)this.imageManager.addImage(v,p[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.getSource(i.source);if(!u)return;const p=i.sourceLayer;p&&("geojson"===u.type||u.vectorLayerIds&&-1===u.vectorLayerIds.indexOf(p))&&this.fire(new c.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${u.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const p of i){const v=this._layers[p];"custom"!==v.type&&u.push(v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&bo[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const T in this._updatedSources){const k=this._updatedSources[T];"reload"===k?this._reloadSource(T):"clear"===k&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const p={};for(const v in this._sourceCaches){const w=this._sourceCaches[v];p[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];if(w.recalculate(i,this._availableImages),!w.isHidden(i.zoom)){const k=this._getLayerSourceCache(w);k&&(k.used=!0)}const T=this.map.painter;if(T){const k=w.getProgramIds();if(!k)continue;const G=w.getProgramConfiguration(i.zoom);for(const te of k)T.useProgram(te,G)}}for(const v in p){const w=this._sourceCaches[v];p[v]!==w.used&&w.getSource().fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),$o(this,c.validateStyle(i)))return!1;(i=c.clone$2(i)).layers=nn(i.layers);const u=function(v,w){if(!v)return[{command:Qe.setStyle,args:[w]}];let T=[];try{if(!ve(v.version,w.version))return[{command:Qe.setStyle,args:[w]}];ve(v.center,w.center)||T.push({command:Qe.setCenter,args:[w.center]}),ve(v.zoom,w.zoom)||T.push({command:Qe.setZoom,args:[w.zoom]}),ve(v.bearing,w.bearing)||T.push({command:Qe.setBearing,args:[w.bearing]}),ve(v.pitch,w.pitch)||T.push({command:Qe.setPitch,args:[w.pitch]}),ve(v.sprite,w.sprite)||T.push({command:Qe.setSprite,args:[w.sprite]}),ve(v.glyphs,w.glyphs)||T.push({command:Qe.setGlyphs,args:[w.glyphs]}),ve(v.transition,w.transition)||T.push({command:Qe.setTransition,args:[w.transition]}),ve(v.light,w.light)||T.push({command:Qe.setLight,args:[w.light]}),ve(v.fog,w.fog)||T.push({command:Qe.setFog,args:[w.fog]});const k={},G=[];!function(_e,we,Re,je){let He;for(He in we=we||{},_e=_e||{})_e.hasOwnProperty(He)&&(we.hasOwnProperty(He)||Bt(He,Re,je));for(He in we)we.hasOwnProperty(He)&&(_e.hasOwnProperty(He)?ve(_e[He],we[He])||("geojson"===_e[He].type&&"geojson"===we[He].type&&Nn(_e,we,He)?Re.push({command:Qe.setGeoJSONSourceData,args:[He,we[He].data]}):Sn(He,we,Re,je)):It(He,we,Re))}(v.sources,w.sources,G,k);const te=[];v.layers&&v.layers.forEach(_e=>{k[_e.source]?T.push({command:Qe.removeLayer,args:[_e.id]}):te.push(_e)});let he=v.terrain;he&&k[he.source]&&(T.push({command:Qe.setTerrain,args:[void 0]}),he=void 0),T=T.concat(G),ve(he,w.terrain)||T.push({command:Qe.setTerrain,args:[w.terrain]}),function(_e,we,Re){we=we||[];const je=(_e=_e||[]).map(hi),He=we.map(hi),_t=_e.reduce(bi,{}),Le=we.reduce(bi,{}),Ye=je.slice(),nt=Object.create(null);let Ct,Je,ht,ln,fn,vn,ut;for(Ct=0,Je=0;Ct<je.length;Ct++)ht=je[Ct],Le.hasOwnProperty(ht)?Je++:(Re.push({command:Qe.removeLayer,args:[ht]}),Ye.splice(Ye.indexOf(ht,Je),1));for(Ct=0,Je=0;Ct<He.length;Ct++)ht=He[He.length-1-Ct],Ye[Ye.length-1-Ct]!==ht&&(_t.hasOwnProperty(ht)?(Re.push({command:Qe.removeLayer,args:[ht]}),Ye.splice(Ye.lastIndexOf(ht,Ye.length-Je),1)):Je++,vn=Ye[Ye.length-Ct],Re.push({command:Qe.addLayer,args:[Le[ht],vn]}),Ye.splice(Ye.length-Ct,0,ht),nt[ht]=!0);for(Ct=0;Ct<He.length;Ct++)if(ht=He[Ct],ln=_t[ht],fn=Le[ht],!nt[ht]&&!ve(ln,fn))if(ve(ln.source,fn.source)&&ve(ln["source-layer"],fn["source-layer"])&&ve(ln.type,fn.type)){for(ut in Qn(ln.layout,fn.layout,Re,ht,null,Qe.setLayoutProperty),Qn(ln.paint,fn.paint,Re,ht,null,Qe.setPaintProperty),ve(ln.filter,fn.filter)||Re.push({command:Qe.setFilter,args:[ht,fn.filter]}),ve(ln.minzoom,fn.minzoom)&&ve(ln.maxzoom,fn.maxzoom)||Re.push({command:Qe.setLayerZoomRange,args:[ht,fn.minzoom,fn.maxzoom]}),ln)ln.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?Qn(ln[ut],fn[ut],Re,ht,ut.slice(6),Qe.setPaintProperty):ve(ln[ut],fn[ut])||Re.push({command:Qe.setLayerProperty,args:[ht,ut,fn[ut]]}));for(ut in fn)fn.hasOwnProperty(ut)&&!ln.hasOwnProperty(ut)&&"layout"!==ut&&"paint"!==ut&&"filter"!==ut&&"metadata"!==ut&&"minzoom"!==ut&&"maxzoom"!==ut&&(0===ut.indexOf("paint.")?Qn(ln[ut],fn[ut],Re,ht,ut.slice(6),Qe.setPaintProperty):ve(ln[ut],fn[ut])||Re.push({command:Qe.setLayerProperty,args:[ht,ut,fn[ut]]}))}else Re.push({command:Qe.removeLayer,args:[ht]}),vn=Ye[Ye.lastIndexOf(ht)+1],Re.push({command:Qe.addLayer,args:[fn,vn]})}(te,w.layers,T)}catch(k){console.warn("Unable to compute style diff:",k),T=[{command:Qe.setStyle,args:[w]}]}return T}(this.serialize(),i).filter(v=>!(v.command in xo));if(0===u.length)return!1;const p=u.filter(v=>!(v.command in Ho));if(p.length>0)throw new Error(`Unimplemented: ${p.map(v=>v.command).join(", ")}.`);return u.forEach(v=>{"setTransition"!==v.command&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),void 0!==this.getSource(i))throw new Error("There is already a source with this ID");if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.validateStyle.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=N(i,u,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i}));const w=T=>{const k=(T?"symbol:":"other:")+i,G=this._sourceCaches[k]=new c.SourceCache(k,v,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[i]=G,G.style=this,G.onAdd(this.map)};w(!1),"vector"!==u.type&&"geojson"!==u.type||w(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const u=this.getSource(i);if(void 0===u)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===i)return this.fire(new c.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new c.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this._getSourceCaches(i);for(const v of p)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){this._checkLoaded(),this.getSource(i).setData(u),this._changed=!0}getSource(i){const u=this._getSourceCache(i);return u&&u.getSource()}addLayer(i,u,p={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new c.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let w;if("custom"===i.type){if($o(this,c.validateCustomStyleLayer(i)))return;w=c.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(v,i.source),i=c.clone$2(i),i=c.extend(i,{source:v})),this._validate(c.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},p))return;w=c.createStyleLayer(i),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const T=u?this._order.indexOf(u):this._order.length;if(u&&-1===T)return void this.fire(new c.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`)));this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=w;const k=this._getLayerSourceCache(w);if(this._removedLayers[v]&&w.source&&k&&"custom"!==w.type){const G=this._removedLayers[v];delete this._removedLayers[v],G.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",k.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const v=u?this._order.indexOf(u):this._order.length;u&&-1===v?this.fire(new c.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));u.setEventedParent(null),this._updateLayerCount(u,!1);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const u in this._layers)if(this._layers[u].type===i)return!0;return!1}setLayerZoomRange(i,u,p){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===u&&v.maxzoom===p||(null!=u&&(v.minzoom=u),null!=p&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,u,p={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!ve(v.filter,u))return null==u?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(c.validateStyle.filter,`layers.${v.id}.filter`,u,null,p)||(v.filter=c.clone$2(u),this._updateLayer(v)))}else this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){return c.clone$2(this.getLayer(i).filter)}setLayoutProperty(i,u,p,v={}){this._checkLoaded();const w=this.getLayer(i);w?ve(w.getLayoutProperty(u),p)||(w.setLayoutProperty(u,p,v),this._updateLayer(w)):this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,u,p,v={}){this._checkLoaded();const w=this.getLayer(i);w?ve(w.getPaintProperty(u),p)||(w.setPaintProperty(u,p,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,v=i.sourceLayer,w=this.getSource(p);if(void 0===w)return void this.fire(new c.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const T=w.type;if("geojson"===T&&v)return void this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===T&&!v)return void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===i.id&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(p);for(const G of k)G.setFeatureState(v,i.id,u)}removeFeatureState(i,u){this._checkLoaded();const p=i.source,v=this.getSource(p);if(void 0===v)return void this.fire(new c.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const w=v.type,T="vector"===w?i.sourceLayer:void 0;if("vector"===w&&!T)return void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&"string"!=typeof i.id&&"number"!=typeof i.id)return void this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(p);for(const G of k)G.removeFeatureState(T,i.id,u)}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,v=this.getSource(u);if(void 0!==v){if("vector"!==v.type||p)return void 0===i.id&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(u)[0].getFeatureState(p,i.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const u in this._sourceCaches){const p=this._sourceCaches[u].getSource();i[p.id]||(i[p.id]=p.serialize())}return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i,layers:this._serializeLayers(this._order)},u=>void 0!==u)}_updateLayer(i){this._updatedLayers[i.id]=!0;const u=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&u&&"raster"!==u.getSource().type&&(this._updatedSources[i.source]="reload",u.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=T=>"fill-extrusion"===this._layers[T].type,p={},v=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(u(k)){p[k]=T;for(const G of i){const te=G[k];if(te)for(const he of te)v.push(he)}}}v.sort((T,k)=>k.intersectionZ-T.intersectionZ);const w=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(u(k))for(let G=v.length-1;G>=0;G--){const te=v[G].feature;if(p[te.layer.id]<T)break;w.push(te),v.pop()}else for(const G of i){const te=G[k];if(te)for(const he of te)w.push(he.feature)}}return w}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const G of u.layers){const te=this._layers[G];if(!te)return this.fire(new c.ErrorEvent(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];v[te.source]=!0}}const w=[];u.availableImages=this._availableImages;const T=u&&u.layers?u.layers.some(G=>{const te=this.getLayer(G);return te&&te.is3D()}):this.has3DLayers(),k=xi.createFromScreenPoints(i,p);for(const G in this._sourceCaches){const te=this._sourceCaches[G].getSource().id;u.layers&&!v[te]||w.push(z(this._sourceCaches[G],this._layers,this._serializedLayers,k,u,p,T,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(G,te,he,_e,we,Re,je){const He={},_t=Re.queryRenderedSymbols(_e),Le=[];for(const Ye of Object.keys(_t).map(Number))Le.push(je[Ye]);Le.sort(le);for(const Ye of Le){const nt=Ye.featureIndex.lookupSymbolFeatures(_t[Ye.bucketInstanceId],te,Ye.bucketIndex,Ye.sourceLayerIndex,we.filter,we.layers,we.availableImages,G);for(const Ct in nt){const Je=He[Ct]=He[Ct]||[],ht=nt[Ct];ht.sort((ln,fn)=>{const vn=Ye.featureSortOrder;if(vn){const ut=vn.indexOf(ln.featureIndex);return vn.indexOf(fn.featureIndex)-ut}return fn.featureIndex-ln.featureIndex});for(const ln of ht)Je.push(ln)}}for(const Ye in He)He[Ye].forEach(nt=>{const Ct=nt.feature,Je=he(G[Ye]).getFeatureState(Ct.layer["source-layer"],Ct.id);Ct.source=Ct.layer.source,Ct.layer["source-layer"]&&(Ct.sourceLayer=Ct.layer["source-layer"]),Ct.state=Je});return He}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this._getSourceCaches(i);let v=[];for(const w of p)v=v.concat(O(w,u));return v}addSourceType(i,u,p){return us.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(us.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const T in i)if(!ve(i[T],p[T])){v=!0;break}if(!v)return;const w={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(w)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(i){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof i.source){const u="terrain-dem-src";this.addSource(u,i.source),i=c.clone$2(i),i=c.extend(i,{source:u})}if(!this._validate(c.validateStyle.terrain,"terrain",i)){if(this.terrain){const u=this.terrain,p=u.get();for(const v in i)if(!ve(i[v],p[v])){u.set(i),this.stylesheet.terrain=i;const w={now:c.exported.now(),transition:c.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(w);break}}else this._createTerrain(i);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(i){const u=this.fog=new ii(i);this.stylesheet.fog=i;const p={now:c.exported.now(),transition:c.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(p)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog,p=u.get();for(const v in i)if(!ve(i[v],p[v])){u.set(i),this.stylesheet.fog=i;const w={now:c.exported.now(),transition:c.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(w);break}}else this._createFog(i);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(p=>this.isLayerDraped(this._layers[p])),u=this._order.filter(p=>!this.isLayerDraped(this._layers[p]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...u)}_createTerrain(i){const u=this.terrain=new Ri(i);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const p={now:c.exported.now(),transition:c.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(p)}_force3DLayerUpdate(){for(const i in this._layers){const u=this._layers[i];"fill-extrusion"===u.type&&this._updateLayer(u)}}_validate(i,u,p,v,w={}){return(!w||!1!==w.validate)&&$o(this,i.call(c.validateStyle,c.extend({key:u,style:this.serialize(),value:p,styleSpec:c.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const u=this._getSourceCaches(i);for(const p of u)p.clearTiles()}_reloadSource(i){const u=this._getSourceCaches(i);for(const p of u)p.resume(),p.reload()}_updateSources(i){for(const u in this._sourceCaches)this._sourceCaches[u].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const u=this._sourceCaches[i];u.resume(),u.reload()}}_updatePlacement(i,u,p,v,w=!1){let T=!1,k=!1;const G={};for(const te of this._order){const he=this._layers[te];if("symbol"!==he.type)continue;if(!G[he.source]){const we=this._getLayerSourceCache(he);if(!we)continue;G[he.source]=we.getRenderableIds(!0).map(Re=>we.getTileByID(Re)).sort((Re,je)=>je.tileID.overscaledZ-Re.tileID.overscaledZ||(Re.tileID.isLessThan(je.tileID)?-1:1))}const _e=this.crossTileSymbolIndex.addLayer(he,G[he.source],i.center.lng);T=T||_e}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||0===p,this._layerOrderChanged&&this.fire(new c.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),i.zoom))&&(this.pauseablePlacement=new vo(i,this._order,w,u,p,v,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),k=!0),T&&this.pauseablePlacement.placement.setStale()),k||T)for(const te of this._order){const he=this._layers[te];"symbol"===he.type&&this.placement.updateLayerOpacities(he,G[he.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const v=w=>{w&&w.setDependencies(u.tileID.key,u.type,u.icons)};v(this._otherSourceCaches[u.source]),v(this._symbolSourceCaches[u.source])}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p)}getResource(i,u,p){return c.makeRequest(u,p)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return"symbol"===i.type?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const u=[];return this._otherSourceCaches[i]&&u.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&u.push(this._symbolSourceCaches[i]),u}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}us.getSourceType=function(f){return K[f]},us.setSourceType=function(f,i){K[f]=i},us.registerForPluginStateChange=c.registerForPluginStateChange;var ga="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",so="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let So={},Is={};So=Ji("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),Is=Ji("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const to=Ji("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),oo=ga;var Mo={background:Ji("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Ji("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Ji("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Ji("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ji("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Ji("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ji("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ji("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Ji("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Ji("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Ji("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Ji("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Ji("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Ji("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Ji("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ji("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Ji("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:Ji("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Ji("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:Ji("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Ji("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Ji("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:Ji("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Ji("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:Ji("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Ji("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ji("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",so),skyboxGradient:Ji("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",so),skyboxCapture:Ji("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function Ji(f,i,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,w=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),T=f.match(v),k=i.match(v),G=ga.match(v);let te=k?k.concat(T):T;u||(So.staticUniforms&&(te=So.staticUniforms.concat(te)),Is.staticUniforms&&(te=Is.staticUniforms.concat(te))),te&&(te=te.concat(G));const he={};return{fragmentSource:f=f.replace(p,(_e,we,Re,je,He)=>(he[He]=!0,"define"===we?`\n#ifndef HAS_UNIFORM_u_${He}\nvarying ${Re} ${je} ${He};\n#else\nuniform ${Re} ${je} u_${He};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${He}\n    ${Re} ${je} ${He} = u_${He};\n#endif\n`)),vertexSource:i=i.replace(p,(_e,we,Re,je,He)=>{const _t="float"===je?"vec2":"vec4",Le=He.match(/color/)?"color":_t;return he[He]?"define"===we?`\n#ifndef HAS_UNIFORM_u_${He}\nuniform lowp float u_${He}_t;\nattribute ${Re} ${_t} a_${He};\nvarying ${Re} ${je} ${He};\n#else\nuniform ${Re} ${je} u_${He};\n#endif\n`:"vec4"===Le?`\n#ifndef HAS_UNIFORM_u_${He}\n    ${He} = a_${He};\n#else\n    ${Re} ${je} ${He} = u_${He};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${He}\n    ${He} = unpack_mix_${Le}(a_${He}, u_${He}_t);\n#else\n    ${Re} ${je} ${He} = u_${He};\n#endif\n`:"define"===we?`\n#ifndef HAS_UNIFORM_u_${He}\nuniform lowp float u_${He}_t;\nattribute ${Re} ${_t} a_${He};\n#else\nuniform ${Re} ${je} u_${He};\n#endif\n`:"vec4"===Le?`\n#ifndef HAS_UNIFORM_u_${He}\n    ${Re} ${je} ${He} = a_${He};\n#else\n    ${Re} ${je} ${He} = u_${He};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${He}\n    ${Re} ${je} ${He} = unpack_mix_${Le}(a_${He}, u_${He}_t);\n#else\n    ${Re} ${je} ${He} = u_${He};\n#endif\n`}),staticAttributes:w,staticUniforms:te}}class Zo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,v,w,T,k,G){this.context=i;let te=this.boundPaintVertexBuffers.length!==v.length;for(let he=0;!te&&he<v.length;he++)this.boundPaintVertexBuffers[he]!==v[he]&&(te=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===p&&!te&&this.boundIndexBuffer===w&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===G?(i.bindVertexArrayOES.set(this.vao),k&&k.bind(),w&&w.dynamicDraw&&w.bind(),G&&G.bind()):this.freshBind(u,p,v,w,T,k,G)}freshBind(i,u,p,v,w,T,k){let G;const te=i.numAttributes,he=this.context,_e=he.gl;if(he.extVertexArrayObject)this.vao&&this.destroy(),this.vao=he.extVertexArrayObject.createVertexArrayOES(),he.bindVertexArrayOES.set(this.vao),G=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=k;else{G=he.currentNumAttributes||0;for(let we=te;we<G;we++)_e.disableVertexAttribArray(we)}u.enableAttributes(_e,i);for(const we of p)we.enableAttributes(_e,i);T&&T.enableAttributes(_e,i),k&&k.enableAttributes(_e,i),u.bind(),u.setVertexAttribPointers(_e,i,w);for(const we of p)we.bind(),we.setVertexAttribPointers(_e,i,w);T&&(T.bind(),T.setVertexAttribPointers(_e,i,w)),v&&v.bind(),k&&(k.bind(),k.setVertexAttribPointers(_e,i,w)),he.currentNumAttributes=te}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ce(f,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new c.MercatorCoordinate(0,p/u).toLngLat().lat,new c.MercatorCoordinate(0,(p+1)/u).toLngLat().lat]}function ee(f,i,u,p,v,w,T){const k=f.context,G=k.gl,te=u.fbo;if(!te)return;f.prepareDrawTile(i);const he=f.useProgram("hillshade");k.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,te.colorAttachment.get());const _e=((we,Re,je,He)=>{const _t=je.paint.get("hillshade-shadow-color"),Le=je.paint.get("hillshade-highlight-color"),Ye=je.paint.get("hillshade-accent-color");let nt=je.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===je.paint.get("hillshade-illumination-anchor")&&(nt-=we.transform.angle);const Ct=!we.options.moving;return{u_matrix:He||we.transform.calculateProjMatrix(Re.tileID.toUnwrapped(),Ct),u_image:0,u_latrange:ce(0,Re.tileID),u_light:[je.paint.get("hillshade-exaggeration"),nt],u_shadow:_t,u_highlight:Le,u_accent:Ye}})(f,u,p,f.terrain?i.projMatrix:null);f.prepareDrawProgram(k,he,i.toUnwrapped()),he.draw(k,G.TRIANGLES,v,w,T,c.CullFaceMode.disabled,_e,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function U(f,i,u){if(!i.needsDEMTextureUpload)return;const p=f.context,v=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(u.stride);const w=u.getPixels();i.demTexture?i.demTexture.update(w,{premultiply:!1}):i.demTexture=new c.Texture(p,w,v.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Ae(f,i,u,p,v,w){const T=f.context,k=T.gl;if(!i.dem)return;const G=i.dem;if(T.activeTexture.set(k.TEXTURE1),U(f,i,G),!i.demTexture)return;i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const te=G.dim;T.activeTexture.set(k.TEXTURE0);let he=i.fbo;if(!he){const _e=new c.Texture(T,{width:te,height:te,data:null},k.RGBA);_e.bind(k.LINEAR,k.CLAMP_TO_EDGE),he=i.fbo=T.createFramebuffer(te,te,!0),he.colorAttachment.set(_e.texture)}T.bindFramebuffer.set(he.framebuffer),T.viewport.set([0,0,te,te]),f.useProgram("hillshadePrepare").draw(T,k.TRIANGLES,p,v,w,c.CullFaceMode.disabled,((_e,we)=>{const Re=we.stride,je=c.create$1();return c.ortho(je,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(je,je,[0,-c.EXTENT,0]),{u_matrix:je,u_image:1,u_dimension:[Re,Re],u_zoom:_e.overscaledZ,u_unpack:we.unpackVector}})(i.tileID,G),u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),i.needsHillshadePrepare=!1}const Nt=(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_image0:new c.Uniform1i(f,i.u_image0),u_skirt_height:new c.Uniform1f(f,i.u_skirt_height)}),ai=(f,i)=>({u_matrix:f,u_image0:0,u_skirt_height:i}),Sr=new class{constructor(){this.operations={}}newMorphing(f,i,u,p,v){if(f in this.operations){const w=this.operations[f];w.to.tileID.key!==u.tileID.key&&(w.queued=u)}else this.operations[f]={startTime:p,phase:0,duration:v,from:i,to:u,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const u=this.operations[i];for(u.phase=(f-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},gs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function To(f,i){const u=1<<f.z;return!i&&(0===f.x||f.x===u-1)||0===f.y||f.y===u-1}const Da=f=>({u_matrix:f});function X(f,i,u,p,v){if(v>0){const w=c.exported.now(),T=(w-f.timeAdded)/v,k=i?(w-i.timeAdded)/v:-1,G=u.getSource(),te=p.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),he=!i||Math.abs(i.tileID.overscaledZ-te)>Math.abs(f.tileID.overscaledZ-te),_e=he&&f.refreshedUponExpiration?1:c.clamp(he?T:1-k,0,1);return f.refreshedUponExpiration&&T>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-_e}:{opacity:_e,mix:0}}return{opacity:1,mix:0}}class De extends c.SourceCache{constructor(i){const u=N("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new On(Ge(),null),i.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,u,p){if(i.freezeTileCoverage)return;this.transform=i;const v=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,T)=>{if(w[T.key]="",!this._tiles[T.key]){const k=new c.Tile(T,this._source.tileSize*T.overscaleFactor(),i.tileZoom);k.state="loaded",this._tiles[T.key]=k}return w},{});for(const w in this._tiles)w in v||(this.freeFBO(w),this._tiles[w].state="unloaded",delete this._tiles[w])}freeFBO(i){const u=this.proxyCachedFBO[i];if(void 0!==u){const p=Object.values(u);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ie extends c.OverscaledTileID{constructor(i,u,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=u,this.projMatrix=p}}class Pe extends c.Elevation{constructor(i,u){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,v,w]=function(G){const te=new c.StructArrayLayout4i8,he=new c.StructArrayLayout3ui6;te.reserve(17161),he.reserve(33800);const we=c.EXTENT/128,Re=c.EXTENT+we/2,je=Re+we;for(let _t=-we;_t<je;_t+=we)for(let Le=-we;Le<je;Le+=we){const Ye=Le<0||Le>Re||_t<0||_t>Re?24575:0,nt=c.clamp(Math.round(Le),0,c.EXTENT),Ct=c.clamp(Math.round(_t),0,c.EXTENT);te.emplaceBack(nt+Ye,Ct,nt,Ct)}const He=(_t,Le)=>{const Ye=131*Le+_t;he.emplaceBack(Ye+1,Ye,Ye+131),he.emplaceBack(Ye+131,Ye+131+1,Ye+1)};for(let _t=1;_t<129;_t++)for(let Le=1;Le<129;Le++)He(Le,_t);return[0,129].forEach(_t=>{for(let Le=0;Le<130;Le++)He(Le,_t),He(_t,Le)}),[te,he,32768]}(),T=i.context;this.gridBuffer=T.createVertexBuffer(p,me.members),this.gridIndexBuffer=T.createIndexBuffer(v),this.gridSegments=c.SegmentVector.simpleSegment(0,0,p.length,v.length),this.gridNoSkirtSegments=c.SegmentVector.simpleSegment(0,0,p.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new De(u.map),this.orthoMatrix=c.create$1(),c.ortho(this.orthoMatrix,0,c.EXTENT,0,c.EXTENT,0,1);const k=T.gl;this._overlapStencilMode=new c.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,u,p){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const v=i.terrain.properties;this.sourceCache=i._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const w=()=>{this.sourceCache.used&&c.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const T=this.sourceCache.getSource().tileSize/128,k=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(u,T*k,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),u.updateElevation(!p),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==i.efficiency&&c.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&"source"===i.dataType?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):"style"===i.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=0===p._centerAltitude&&-1===this.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(p.center),-1),this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=u.getIds().map(G=>{const te=u.getTileByID(G).tileID;return te.projMatrix=p.calculateProjMatrix(te.toUnwrapped()),te});(function(G,te){const he=te.transform.pointCoordinate(te.transform.getCameraPoint()),_e=new c.pointGeometry(he.x,he.y);G.sort((we,Re)=>{if(Re.overscaledZ-we.overscaledZ)return Re.overscaledZ-we.overscaledZ;const je=new c.pointGeometry(we.canonical.x+(1<<we.canonical.z)*we.wrap,we.canonical.y),He=new c.pointGeometry(Re.canonical.x+(1<<Re.canonical.z)*Re.wrap,Re.canonical.y),_t=_e.mult(1<<we.canonical.z);return _t.x-=.5,_t.y-=.5,_t.distSqr(je)-_t.distSqr(He)})})(v,this.painter),this._previousZoom=p.zoom;const w=this.proxyToSource||{};this.proxyToSource={},v.forEach(G=>{this.proxyToSource[G.key]={}}),this.terrainTileForTile={};const T=this._style._sourceCaches;for(const G in T){const te=T[G];if(!te.used||(te!==this.sourceCache&&(this._findCoveringTileCache[te.id]={}),this._setupProxiedCoordsForOrtho(te,i[G],w),te.usedForTerrain))continue;const he=i[G];te.getSource().reparseOverscaled&&this._assignTerrainTiles(he)}this.proxiedCoords[u.id]=v.map(G=>new ie(G,G.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=c.exported.now();const k={};this._visibleDemTiles=[];for(const G of this.proxyCoords){const te=this.terrainTileForTile[G.key];if(!te)continue;const he=te.tileID.key;he in k||(this._visibleDemTiles.push(te),k[he]=he)}}_assignTerrainTiles(i){this._initializing||i.forEach(u=>{if(this.terrainTileForTile[u.key])return;const p=this._findTileCoveringTileID(u,this.sourceCache);p&&(this.terrainTileForTile[u.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,u=i.gl;for(const p in this.terrainTileForTile){const v=this.terrainTileForTile[p],w=v.dem;!w||v.demTexture&&!v.needsDEMTextureUpload||(i.activeTexture.set(u.TEXTURE1),U(this.painter,v,w))}}_prepareDemTileUniforms(i,u,p,v){if(!u||null==u.demTexture)return!1;const w=i.tileID.canonical,T=Math.pow(2,u.tileID.canonical.z-w.z),k=v||"";return p[`u_dem_tl${k}`]=[w.x*T%1,w.y*T%1],p[`u_dem_scale${k}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let i=0;const u=this._visibleDemTiles.reduce((p,v)=>{if(!v.dem)return p;const w=v.dem.tree.minimums[0];return w>0&&i++,p+w},0);return i?u/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,u=i.gl;i.activeTexture.set(u.TEXTURE2);const p=this._getLoadedAreaMinimum(),v={width:1,height:1,data:new Uint8Array(c.DEMData.pack(p,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(v,{premultiply:!1}):w=this._emptyDEMTexture=new c.Texture(i,v,u.RGBA,{premultiply:!1}),w}setupElevationDraw(i,u,p){const v=this.painter.context,w=v.gl,T=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:c.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;T.u_dem_size=this.sourceCache.getSource().tileSize,T.u_exaggeration=this.exaggeration();let G=null,te=null,he=1;if(p&&p.morphing&&this._useVertexMorphing){const _e=p.morphing.srcDemTile,we=p.morphing.dstDemTile;he=p.morphing.phase,_e&&we&&(this._prepareDemTileUniforms(i,_e,T,"_prev")&&(te=_e),this._prepareDemTileUniforms(i,we,T)&&(G=we))}if(te&&G?(v.activeTexture.set(w.TEXTURE2),G.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),v.activeTexture.set(w.TEXTURE4),te.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),T.u_dem_lerp=he):(G=this.terrainTileForTile[i.tileID.key],v.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(i,G,T)?G.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST)),p&&p.useDepthForOcclusion&&(v.activeTexture.set(w.TEXTURE3),this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),T.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),p&&p.useMeterToDem&&G){const _e=(1<<G.tileID.canonical.z)*c.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=_e}p&&p.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),u.setTerrainUniformValues(v,T)}renderToBackBuffer(i){const u=this.painter,p=this.painter.context;0!==i.length&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,u.width,u.height]),this.renderingToTexture=!1,function(v,w,T,k,G){const te=v.context,he=te.gl;let _e,we;const Re=v.options.showTerrainWireframe?2:0,je=(nt,Ct)=>{if(we===nt)return;const Je=[gs[nt]];Ct&&Je.push(gs[Re]),_e=v.useProgram("terrainRaster",null,Je),we=nt},He=v.colorModeForRenderPass(),_t=new c.DepthMode(he.LEQUAL,c.DepthMode.ReadWrite,v.depthRangeFor3D);Sr.update(G);const Le=v.transform,Ye=6*Math.pow(1.5,22-Le.zoom)*w.exaggeration();(Re?[!1,!0]:[!1]).forEach(nt=>{we=-1;const Ct=nt?he.LINES:he.TRIANGLES,[Je,ht]=nt?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const vn of k){const ut=T.getTile(vn),jn=c.StencilMode.disabled,Tn=w.prevTerrainTileForTile[vn.key],gi=w.terrainTileForTile[vn.key];fn=gi,null!=(ln=Tn)&&null!=fn&&ln.hasData()&&fn.hasData()&&null!=ln.demTexture&&null!=fn.demTexture&&ln.tileID.key!==fn.tileID.key&&Sr.newMorphing(vn.key,Tn,gi,G,250),te.activeTexture.set(he.TEXTURE0),ut.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST);const qn=Sr.getMorphValuesForProxy(vn.key),Gn=qn?1:0;let Hi;qn&&(Hi={morphing:{srcDemTile:qn.from,dstDemTile:qn.to,phase:c.easeCubicInOut(qn.phase)}});const Si=ai(vn.projMatrix,To(vn.canonical,Le.renderWorldCopies)?Ye/10:Ye);je(Gn,nt),w.setupElevationDraw(ut,_e,Hi),v.prepareDrawProgram(te,_e,vn.toUnwrapped()),_e.draw(te,Ct,_t,jn,He,c.CullFaceMode.backCCW,Si,"terrain_raster",w.gridBuffer,Je,ht)}var ln,fn})}(u,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,i.splice(0,i.length))}renderBatch(i){if(0===this._drapedRenderBatches.length)return i+1;this.renderingToTexture=!0;const u=this.painter,p=this.painter.context,v=this.proxySourceCache,w=this.proxiedCoords[v.id],T=this._drapedRenderBatches.shift(),k=[],G=u.style.order;let te=0;for(const he of w){const _e=v.getTileByID(he.proxyTileKey),we=v.proxyCachedFBO[he.key]?v.proxyCachedFBO[he.key][i]:void 0,Re=void 0!==we?v.renderCache[we]:this.pool[te++],je=void 0!==we;if(_e.texture=Re.tex,je&&!Re.dirty){k.push(_e.tileID);continue}let He;p.bindFramebuffer.set(Re.fb.framebuffer),this.renderedToTile=!1,Re.dirty&&(p.clear({color:c.Color.transparent}),Re.dirty=!1);for(let _t=T.start;_t<=T.end;++_t){const Le=u.style._layers[G[_t]];if(Le.isHidden(u.transform.zoom))continue;const Ye=u.style._getLayerSourceCache(Le),nt=Ye?this.proxyToSource[he.key][Ye.id]:[he];if(!nt)continue;const Ct=nt;p.viewport.set([0,0,Re.fb.width,Re.fb.height]),He!==(Ye?Ye.id:null)&&(this._setupStencil(Re,nt,Le,Ye),He=Ye?Ye.id:null),u.renderLayer(u,Ye,Le,Ct)}this.renderedToTile?(Re.dirty=!0,k.push(_e.tileID)):je||--te,5===te&&(te=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,u.width,u.height]),T.end+1}postRender(){}renderCacheEfficiency(i){const u=i.order.length;if(0===u)return{efficiency:100};let p,v=0,w=0,T=!1;for(let k=0;k<u;++k){const G=i._layers[i.order[k]];this._style.isLayerDraped(G)?(T&&++v,++w):T||(T=!0,p=G.id)}return 0===w?{efficiency:100}:{efficiency:100*(1-v/w),firstUndrapedLayer:p}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{i=Math.min(i,u.dem.tree.minimums[0])}),0===i?i:(i-30)*this._exaggeration}raycast(i,u,p){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const T=w.tileID,k=Math.pow(2,T.overscaledZ),{x:G,y:te}=T.canonical,he=G/k,_e=(G+1)/k,we=te/k,Re=(te+1)/k;return{minx:he,miny:we,maxx:_e,maxy:Re,t:w.dem.tree.raycastRoot(he,we,_e,Re,i,u,p),tile:w}});v.sort((w,T)=>(null!==w.t?w.t:Number.MAX_VALUE)-(null!==T.t?T.t:Number.MAX_VALUE));for(const w of v){if(null==w.t)return null;const T=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,i,u,p);if(null!=T)return T}return null}_createFBO(){const i=this.painter.context,u=i.gl,p=this.drapeBufferSize;i.activeTexture.set(u.TEXTURE0);const v=new c.Texture(i,{width:p[0],height:p[1],data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE);const w=i.createFramebuffer(p[0],p[1],!1);return w.colorAttachment.set(v.texture),w.depthAttachment=new Dn(i,w.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&u.texParameterf(u.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:w,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const u=this._style._layers[i],p=u.isHidden(this.painter.transform.zoom),v=u.getCrossfadeParameters(),w=!!v&&1!==v.t,T=u.hasTransition();return"custom"!==u.type&&!p&&(w||T)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u]._source instanceof ze){i=!0;break}if(i)for(let u=0;u<this._style.order.length;++u){const p=this._style._layers[this._style.order[u]],v=p.isHidden(this.painter.transform.zoom),w=this._style._getLayerSourceCache(p);if("raster"!==p.type||v||!w)continue;const T=p.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const G=this.proxyToSource[k.key][w.id];if(G)for(const te of G){const he=X(w.getTile(te),w.findLoadedParent(te,0),w,this.painter.transform,T);(1!==he.opacity||0!==he.mix)&&this._clearRenderCacheForTile(w.id,te)}}}}_setupDrapedRenderBatches(){const i=this._style.order,u=i.length;if(0===u)return;const p=[];let v,w=0,T=this._style._layers[i[w]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++w<u;)T=this._style._layers[i[w]];for(;w<u;++w){const k=this._style._layers[i[w]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?void 0===v&&(v=w):void 0!==v&&(p.push({start:v,end:w-1}),v=void 0))}void 0!==v&&p.push({start:v,end:w-1}),this._drapedRenderBatches=p}_setupRenderCache(i){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const T=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let k=0;k<T.length;++k){const G=Object.values(T[k]);u.renderCachePool.push(...G)}}return}this._clearRasterFadeFromRenderCache();const p=this.proxyCoords,v=this._tilesDirty;for(let T=p.length-1;T>=0;T--){const k=p[T];if(u.getTileByID(k.key),void 0!==u.proxyCachedFBO[k.key]){const G=i[k.key],te=this.proxyToSource[k.key];let he=0;for(const _e in te){const we=te[_e],Re=G[_e];if(!Re||Re.length!==we.length||we.some((je,He)=>je!==Re[He]||v[_e]&&v[_e].hasOwnProperty(je.key))){he=-1;break}++he}for(const _e in u.proxyCachedFBO[k.key])u.renderCache[u.proxyCachedFBO[k.key][_e]].dirty=he<0||he!==Object.values(G).length}}const w=[...this._drapedRenderBatches];w.sort((T,k)=>k.end-k.start-(T.end-T.start));for(const T of w)for(const k of p){if(u.proxyCachedFBO[k.key])continue;let G=u.renderCachePool.pop();void 0===G&&u.renderCache.length<50&&(G=u.renderCache.length,u.renderCache.push(this._createFBO())),void 0!==G&&(u.proxyCachedFBO[k.key]={},u.proxyCachedFBO[k.key][T.start]=G,u.renderCache[G].dirty=!0)}this._tilesDirty={}}_setupStencil(i,u,p,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,T=w.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let k;if(p.isTileClipped())k=u.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):c.StencilMode.disabled}_renderTileClippingMasks(i,u){const p=this.painter,v=this.painter.context,w=v.gl;p._tileClippingMaskIDs={},v.setColorMode(c.ColorMode.disabled),v.setDepthMode(c.DepthMode.disabled);const T=p.useProgram("clippingMask");for(const k of i){const G=p._tileClippingMaskIDs[k.key]=--u;T.draw(v,w.TRIANGLES,c.DepthMode.disabled,new c.StencilMode({func:w.ALWAYS,mask:0},G,255,w.KEEP,w.KEEP,w.REPLACE),c.ColorMode.disabled,c.CullFaceMode.disabled,Da(k.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const u=this.painter.transform;if(i.x<0||i.x>u.width||i.y<0||i.y>u.height)return null;const p=[i.x,i.y,1,1];c.transformMat4(p,p,u.pixelMatrixInverse),c.scale$2(p,p,1/p[3]),p[0]/=u.worldSize,p[1]/=u.worldSize;const v=u._camera.position,w=c.mercatorZfromAltitude(1,u.center.lat),T=[v[0],v[1],v[2]/w,0],k=c.subtract([],p.slice(0,3),T);c.normalize(k,k);const G=this.raycast(T,k,this._exaggeration);return null!==G&&G?(c.scaleAndAdd(T,T,k,G),T[3]=T[2],T[2]*=w,T):null}drawDepth(){const i=this.painter,u=i.context,p=this.proxySourceCache,v=Math.ceil(i.width),w=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===w||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const T=u.gl,k=u.createFramebuffer(v,w,!0);u.activeTexture.set(T.TEXTURE0);const G=new c.Texture(u,{width:v,height:w,data:null},T.RGBA);G.bind(T.NEAREST,T.CLAMP_TO_EDGE),k.colorAttachment.set(G.texture);const te=u.createRenderbuffer(u.gl.DEPTH_COMPONENT16,v,w);k.depthAttachment.set(te),this._depthFBO=k,this._depthTexture=G}u.bindFramebuffer.set(this._depthFBO.framebuffer),u.viewport.set([0,0,v,w]),function(T,k,G,te){const he=T.context,_e=he.gl;he.clear({depth:1});const we=T.useProgram("terrainDepth"),Re=new c.DepthMode(_e.LESS,c.DepthMode.ReadWrite,T.depthRangeFor3D);for(const je of te){const He=G.getTile(je),_t=ai(je.projMatrix,0);k.setupElevationDraw(He,we),we.draw(he,_e.TRIANGLES,Re,c.StencilMode.disabled,c.ColorMode.unblended,c.CullFaceMode.backCCW,_t,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(i,this,p,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,u,p){if(i.getSource()instanceof oe)return this._setupProxiedCoordsForImageSource(i,u,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const v=this.proxiedCoords[i.id]=[],w=this.proxyCoords;for(let k=0;k<w.length;k++){const G=w[k],te=this._findTileCoveringTileID(G,i);if(te){const he=this._createProxiedId(G,te,p[G.key]&&p[G.key][i.id]);v.push(he),this.proxyToSource[G.key][i.id]=[he]}}let T=!1;for(let k=0;k<u.length;k++){const G=i.getTile(u[k]);if(!G||!G.hasData())continue;const te=this._findTileCoveringTileID(G.tileID,this.proxySourceCache);if(te&&te.tileID.canonical.z!==G.tileID.canonical.z){const he=this.proxyToSource[te.tileID.key][i.id],_e=this._createProxiedId(te.tileID,G,p[te.tileID.key]&&p[te.tileID.key][i.id]);he?he.splice(he.length-1,0,_e):this.proxyToSource[te.tileID.key][i.id]=[_e],v.push(_e),T=!0}}this._sourceTilesOverlap[i.id]=T}_setupProxiedCoordsForImageSource(i,u,p){if(!i.getSource().loaded())return;const v=this.proxiedCoords[i.id]=[],w=this.proxyCoords,T=i.getSource(),k=new c.pointGeometry(T.tileID.x,T.tileID.y)._div(1<<T.tileID.z),G=T.coordinates.map(c.MercatorCoordinate.fromLngLat).reduce((he,_e)=>(he.min.x=Math.min(he.min.x,_e.x-k.x),he.min.y=Math.min(he.min.y,_e.y-k.y),he.max.x=Math.max(he.max.x,_e.x-k.x),he.max.y=Math.max(he.max.y,_e.y-k.y),he),{min:new c.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new c.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),te=(he,_e)=>{const we=he.wrap+he.canonical.x/(1<<he.canonical.z),Re=he.canonical.y/(1<<he.canonical.z),je=c.EXTENT/(1<<he.canonical.z),He=_e.wrap+_e.canonical.x/(1<<_e.canonical.z),_t=_e.canonical.y/(1<<_e.canonical.z);return we+je<He+G.min.x||we>He+G.max.x||Re+je<_t+G.min.y||Re>_t+G.max.y};for(let he=0;he<w.length;he++){const _e=w[he];for(let we=0;we<u.length;we++){const Re=i.getTile(u[we]);if(!Re||!Re.hasData()||te(_e,Re.tileID))continue;const je=this._createProxiedId(_e,Re,p[_e.key]&&p[_e.key][i.id]),He=this.proxyToSource[_e.key][i.id];He?He.push(je):this.proxyToSource[_e.key][i.id]=[je],v.push(je)}}}_createProxiedId(i,u,p){let v=this.orthoMatrix;if(p){const w=p.find(T=>T.key===u.tileID.key);if(w)return w}if(u.tileID.key!==i.key){const w=i.canonical.z-u.tileID.canonical.z;let T,k,G;v=c.create$1();const te=u.tileID.wrap-i.wrap<<i.overscaledZ;w>0?(T=c.EXTENT>>w,k=T*((u.tileID.canonical.x<<w)-i.canonical.x+te),G=T*((u.tileID.canonical.y<<w)-i.canonical.y)):(T=c.EXTENT<<-w,k=c.EXTENT*(u.tileID.canonical.x-(i.canonical.x+te<<-w)),G=c.EXTENT*(u.tileID.canonical.y-(i.canonical.y<<-w))),c.ortho(v,0,T,0,T,0,1),c.translate(v,v,[k,G,0])}return new ie(u.tileID,i.key,v)}_findTileCoveringTileID(i,u){let p=u.getTile(i);if(p&&p.hasData())return p;const v=this._findCoveringTileCache[u.id],w=v[i.key];if(p=w?u.getTileByID(w):null,p&&p.hasData()||null===w)return p;let T=p?p.tileID:i,k=T.overscaledZ;const G=u.getSource().minzoom,te=[];if(!w){const _e=u.getSource().maxzoom;if(i.canonical.z>=_e){const we=i.canonical.z-_e;u.getSource().reparseOverscaled?(k=Math.max(i.canonical.z+2,u.transform.tileZoom),T=new c.OverscaledTileID(k,i.wrap,_e,i.canonical.x>>we,i.canonical.y>>we)):0!==we&&(k=_e,T=new c.OverscaledTileID(k,i.wrap,_e,i.canonical.x>>we,i.canonical.y>>we))}T.key!==i.key&&(te.push(T.key),p=u.getTile(T))}const he=_e=>{te.forEach(we=>{v[we]=_e}),te.length=0};for(k-=1;k>=G&&(!p||!p.hasData());k--){p&&he(p.tileID.key);const _e=T.calculateScaledKey(k);if(p=u.getTileByID(_e),p&&p.hasData())break;const we=v[_e];if(null===we)break;void 0===we?te.push(_e):p=u.getTileByID(we)}return he(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(i){this.renderedToTile=!0}_clearRenderCacheForTile(i,u){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[u.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(u){let p,v,w;const T=new c.StructArrayLayout2ui4,k=131;for(v=1;v<129;v++){for(p=1;p<129;p++)w=v*k+p,T.emplaceBack(w,w+1),T.emplaceBack(w,w+k),T.emplaceBack(w+1,w+k),128===v&&T.emplaceBack(w+k,w+k+1);T.emplaceBack(w+1,w+1+k)}return T}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=c.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function pt(f){const i=[];for(let u=0;u<f.length;u++){if(null===f[u])continue;const p=f[u].split(" ");i.push(p.pop())}return i}class cn{static cacheKey(i,u,p){let v=`${i}${p?p.cacheKey:""}`;for(const w of u)v+=`/${w}`;return v}constructor(i,u,p,v,w,T){const k=i.gl;this.program=k.createProgram();const G=pt(p.staticAttributes),te=v?v.getBinderAttributes():[],he=G.concat(te),_e=p.staticUniforms?pt(p.staticUniforms):[],we=v?v.getBinderUniforms():[],Re=_e.concat(we),je=[];for(const Je of Re)je.indexOf(Je)<0&&je.push(Je);let He=v?v.defines():[];He=He.concat(T.map(Je=>`#define ${Je}`));const _t=He.concat(to.fragmentSource,oo,Is.fragmentSource,p.fragmentSource).join("\n"),Le=He.concat(to.vertexSource,oo,Is.vertexSource,So.vertexSource,p.vertexSource).join("\n"),Ye=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Ye,_t),k.compileShader(Ye),k.attachShader(this.program,Ye);const nt=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(nt,Le),k.compileShader(nt),k.attachShader(this.program,nt),this.attributes={};const Ct={};this.numAttributes=he.length;for(let Je=0;Je<this.numAttributes;Je++)he[Je]&&(k.bindAttribLocation(this.program,Je,he[Je]),this.attributes[he[Je]]=Je);k.linkProgram(this.program),k.deleteShader(nt),k.deleteShader(Ye);for(let Je=0;Je<je.length;Je++){const ht=je[Je];if(ht&&!Ct[ht]){const ln=k.getUniformLocation(this.program,ht);ln&&(Ct[ht]=ln)}}var Je,ht;this.fixedUniforms=w(i,Ct),this.binderUniforms=v?v.getUniforms(i,Ct):[],-1!==T.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new c.Uniform1i(Je=i,(ht=Ct).u_dem),u_dem_prev:new c.Uniform1i(Je,ht.u_dem_prev),u_dem_unpack:new c.Uniform4f(Je,ht.u_dem_unpack),u_dem_tl:new c.Uniform2f(Je,ht.u_dem_tl),u_dem_scale:new c.Uniform1f(Je,ht.u_dem_scale),u_dem_tl_prev:new c.Uniform2f(Je,ht.u_dem_tl_prev),u_dem_scale_prev:new c.Uniform1f(Je,ht.u_dem_scale_prev),u_dem_size:new c.Uniform1f(Je,ht.u_dem_size),u_dem_lerp:new c.Uniform1f(Je,ht.u_dem_lerp),u_exaggeration:new c.Uniform1f(Je,ht.u_exaggeration),u_depth:new c.Uniform1i(Je,ht.u_depth),u_depth_size_inv:new c.Uniform2f(Je,ht.u_depth_size_inv),u_meter_to_dem:new c.Uniform1f(Je,ht.u_meter_to_dem),u_label_plane_matrix_inv:new c.UniformMatrix4f(Je,ht.u_label_plane_matrix_inv)}),-1!==T.indexOf("FOG")&&(this.fogUniforms=((Je,ht)=>({u_fog_matrix:new c.UniformMatrix4f(Je,ht.u_fog_matrix),u_fog_range:new c.Uniform2f(Je,ht.u_fog_range),u_fog_color:new c.Uniform4f(Je,ht.u_fog_color),u_fog_horizon_blend:new c.Uniform1f(Je,ht.u_fog_horizon_blend),u_fog_temporal_offset:new c.Uniform1f(Je,ht.u_fog_temporal_offset)}))(i,Ct))}setTerrainUniformValues(i,u){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in u)p[v].set(u[v])}}setFogUniformValues(i,u){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in u)p[v].location&&p[v].set(u[v])}}draw(i,u,p,v,w,T,k,G,te,he,_e,we,Re,je,He,_t){const Le=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(v),i.setColorMode(w),i.setCullFace(T);for(const nt in this.fixedUniforms)this.fixedUniforms[nt].set(k[nt]);je&&je.setUniforms(i,this.binderUniforms,we,{zoom:Re});const Ye={[Le.LINES]:2,[Le.TRIANGLES]:3,[Le.LINE_STRIP]:1}[u];for(const nt of _e.get()){const Ct=nt.vaos||(nt.vaos={});(Ct[G]||(Ct[G]=new Zo)).bind(i,this,te,je?je.getPaintVertexBuffers():[],he,nt.vertexOffset,He,_t),Le.drawElements(u,nt.primitiveLength*Ye,Le.UNSIGNED_SHORT,nt.primitiveOffset*Ye*2)}}}function Rn(f,i,u){const p=1/vi(u,1,i.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,i.transform.tileZoom)/v,T=w*(u.tileID.canonical.x+u.tileID.wrap*v),k=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[T>>16,k>>16],u_pixel_coord_lower:[65535&T,65535&k]}}const Ci=(f,i,u,p)=>{const v=i.style.light,w=v.properties.get("position"),T=[w.x,w.y,w.z],k=c.create$2();"viewport"===v.properties.get("anchor")&&(c.fromRotation(k,-i.transform.angle),c.transformMat3(T,T,k));const G=v.properties.get("color");return{u_matrix:f,u_lightpos:T,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[G.r,G.g,G.b],u_vertical_gradient:+u,u_opacity:p}},qi=(f,i,u,p,v,w,T)=>c.extend(Ci(f,i,u,p),Rn(w,i,T),{u_height_factor:-Math.pow(2,v.overscaledZ)/T.tileSize/8}),hr=f=>({u_matrix:f}),Cr=(f,i,u,p)=>c.extend(hr(f),Rn(u,i,p)),Wi=(f,i)=>({u_matrix:f,u_world:i}),br=(f,i,u,p,v)=>c.extend(Cr(f,i,u,p),{u_world:v}),tr=(f,i,u,p)=>{const v=f.transform;let w;if("map"===p.paint.get("circle-pitch-alignment")){const T=vi(u,1,v.zoom);w=[T,T]}else w=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_matrix:f.translatePosMatrix(i.projMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_device_pixel_ratio:c.exported.devicePixelRatio,u_extrude_scale:w}},ss=f=>{const i=[];return"map"===f.paint.get("circle-pitch-alignment")&&i.push("PITCH_WITH_MAP"),"map"===f.paint.get("circle-pitch-scale")&&i.push("SCALE_WITH_MAP"),i},Io=(f,i,u)=>{const p=c.EXTENT/u.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/p,i.pixelsToGLUnits[1]/p]}},os=(f,i,u=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:u}),ao=(f,i,u,p)=>({u_matrix:f,u_extrude_scale:vi(i,1,u),u_intensity:p}),ws=(f,i,u,p)=>{const v=f.transform;return{u_matrix:Ma(f,i,u,p),u_ratio:1/vi(i,1,v.zoom),u_device_pixel_ratio:c.exported.devicePixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Oi=(f,i,u,p,v)=>c.extend(ws(f,i,u,p),{u_image:0,u_image_height:v}),na=(f,i,u,p,v)=>{const w=f.transform,T=Sa(i,w);return{u_matrix:Ma(f,i,u,v),u_texsize:i.imageAtlasTexture.size,u_ratio:1/vi(i,1,w.zoom),u_device_pixel_ratio:c.exported.devicePixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Po=(f,i,u,p,v)=>{const w=Sa(i,f.transform);return c.extend(ws(f,i,u,v),{u_texsize:i.lineAtlasTexture.size,u_scale:[w,p.fromScale,p.toScale],u_image:0,u_mix:p.t})};function Sa(f,i){return 1/vi(f,1,i.tileZoom)}function Ma(f,i,u,p){return f.translatePosMatrix(p||i.tileID.projMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Xa=(f,i,u,p,v)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(T=v.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(w=v.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Ta(v.paint.get("raster-hue-rotate"))};var w,T};function Ta(f){f*=Math.PI/180;const i=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Gl=(f,i,u,p,v,w,T,k,G,te)=>{const he=v.transform;return{u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:he.cameraToCenterDistance,u_pitch:he.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:he.width/he.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:T,u_coord_matrix:k,u_is_text:+G,u_pitch_with_map:+p,u_texsize:te,u_texture:0}},Pn=(f,i,u,p,v,w,T,k,G,te,he)=>{const{cameraToCenterDistance:_e,_pitch:we}=v.transform;return c.extend(Gl(f,i,u,p,v,w,T,k,G,te),{u_gamma_scale:p?_e*Math.cos(v.terrain?0:we):1,u_device_pixel_ratio:c.exported.devicePixelRatio,u_is_halo:+he})},gr=(f,i,u,p,v,w,T,k,G,te)=>c.extend(Pn(f,i,u,p,v,w,T,k,!0,G,!0),{u_texsize_icon:te,u_texture_icon:1}),ml=(f,i,u)=>({u_matrix:f,u_opacity:i,u_color:u}),ns=(f,i,u,p,v,w)=>c.extend(function(T,k,G,te){const he=G.imageManager.getPattern(T.from.toString()),_e=G.imageManager.getPattern(T.to.toString()),{width:we,height:Re}=G.imageManager.getPixelSize(),je=Math.pow(2,te.tileID.overscaledZ),He=te.tileSize*Math.pow(2,G.transform.tileZoom)/je,_t=He*(te.tileID.canonical.x+te.tileID.wrap*je),Le=He*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:he.tl,u_pattern_br_a:he.br,u_pattern_tl_b:_e.tl,u_pattern_br_b:_e.br,u_texsize:[we,Re],u_mix:k.t,u_pattern_size_a:he.displaySize,u_pattern_size_b:_e.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/vi(te,1,G.transform.tileZoom),u_pixel_coord_upper:[_t>>16,Le>>16],u_pixel_coord_lower:[65535&_t,65535&Le]}}(p,w,u,v),{u_matrix:f,u_opacity:i}),gl={fillExtrusion:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_lightpos:new c.Uniform3f(f,i.u_lightpos),u_lightintensity:new c.Uniform1f(f,i.u_lightintensity),u_lightcolor:new c.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,i.u_vertical_gradient),u_opacity:new c.Uniform1f(f,i.u_opacity)}),fillExtrusionPattern:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_lightpos:new c.Uniform3f(f,i.u_lightpos),u_lightintensity:new c.Uniform1f(f,i.u_lightintensity),u_lightcolor:new c.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,i.u_height_factor),u_image:new c.Uniform1i(f,i.u_image),u_texsize:new c.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,i.u_scale),u_fade:new c.Uniform1f(f,i.u_fade),u_opacity:new c.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_image:new c.Uniform1i(f,i.u_image),u_texsize:new c.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,i.u_scale),u_fade:new c.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_world:new c.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_world:new c.Uniform2f(f,i.u_world),u_image:new c.Uniform1i(f,i.u_image),u_texsize:new c.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,i.u_scale),u_fade:new c.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new c.Uniform2f(f,i.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,i.u_matrix)}),collisionBox:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new c.Uniform2f(f,i.u_extrude_scale)}),collisionCircle:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new c.UniformColor(f,i.u_color),u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_overlay:new c.Uniform1i(f,i.u_overlay),u_overlay_scale:new c.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new c.Uniform1f(f,i.u_extrude_scale),u_intensity:new c.Uniform1f(f,i.u_intensity),u_matrix:new c.UniformMatrix4f(f,i.u_matrix)}),heatmapTexture:(f,i)=>({u_image:new c.Uniform1i(f,i.u_image),u_color_ramp:new c.Uniform1i(f,i.u_color_ramp),u_opacity:new c.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_image:new c.Uniform1i(f,i.u_image),u_latrange:new c.Uniform2f(f,i.u_latrange),u_light:new c.Uniform2f(f,i.u_light),u_shadow:new c.UniformColor(f,i.u_shadow),u_highlight:new c.UniformColor(f,i.u_highlight),u_accent:new c.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_image:new c.Uniform1i(f,i.u_image),u_dimension:new c.Uniform2f(f,i.u_dimension),u_zoom:new c.Uniform1f(f,i.u_zoom),u_unpack:new c.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_ratio:new c.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,i.u_units_to_pixels)}),lineGradient:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_ratio:new c.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,i.u_units_to_pixels),u_image:new c.Uniform1i(f,i.u_image),u_image_height:new c.Uniform1f(f,i.u_image_height)}),linePattern:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_texsize:new c.Uniform2f(f,i.u_texsize),u_ratio:new c.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_image:new c.Uniform1i(f,i.u_image),u_units_to_pixels:new c.Uniform2f(f,i.u_units_to_pixels),u_scale:new c.Uniform3f(f,i.u_scale),u_fade:new c.Uniform1f(f,i.u_fade)}),lineSDF:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_texsize:new c.Uniform2f(f,i.u_texsize),u_ratio:new c.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,i.u_units_to_pixels),u_image:new c.Uniform1i(f,i.u_image),u_scale:new c.Uniform3f(f,i.u_scale),u_mix:new c.Uniform1f(f,i.u_mix)}),raster:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new c.Uniform2f(f,i.u_tl_parent),u_scale_parent:new c.Uniform1f(f,i.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,i.u_buffer_scale),u_fade_t:new c.Uniform1f(f,i.u_fade_t),u_opacity:new c.Uniform1f(f,i.u_opacity),u_image0:new c.Uniform1i(f,i.u_image0),u_image1:new c.Uniform1i(f,i.u_image1),u_brightness_low:new c.Uniform1f(f,i.u_brightness_low),u_brightness_high:new c.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,i.u_spin_weights)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new c.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,i.u_size_t),u_size:new c.Uniform1f(f,i.u_size),u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,i.u_pitch),u_rotate_symbol:new c.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,i.u_fade_change),u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new c.Uniform1i(f,i.u_is_text),u_pitch_with_map:new c.Uniform1i(f,i.u_pitch_with_map),u_texsize:new c.Uniform2f(f,i.u_texsize),u_texture:new c.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new c.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,i.u_size_t),u_size:new c.Uniform1f(f,i.u_size),u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,i.u_pitch),u_rotate_symbol:new c.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,i.u_fade_change),u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new c.Uniform1i(f,i.u_is_text),u_pitch_with_map:new c.Uniform1i(f,i.u_pitch_with_map),u_texsize:new c.Uniform2f(f,i.u_texsize),u_texture:new c.Uniform1i(f,i.u_texture),u_gamma_scale:new c.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new c.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,i.u_size_t),u_size:new c.Uniform1f(f,i.u_size),u_camera_to_center_distance:new c.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,i.u_pitch),u_rotate_symbol:new c.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,i.u_fade_change),u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new c.Uniform1i(f,i.u_is_text),u_pitch_with_map:new c.Uniform1i(f,i.u_pitch_with_map),u_texsize:new c.Uniform2f(f,i.u_texsize),u_texsize_icon:new c.Uniform2f(f,i.u_texsize_icon),u_texture:new c.Uniform1i(f,i.u_texture),u_texture_icon:new c.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_opacity:new c.Uniform1f(f,i.u_opacity),u_color:new c.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_opacity:new c.Uniform1f(f,i.u_opacity),u_image:new c.Uniform1i(f,i.u_image),u_pattern_tl_a:new c.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,i.u_pattern_br_b),u_texsize:new c.Uniform2f(f,i.u_texsize),u_mix:new c.Uniform1f(f,i.u_mix),u_pattern_size_a:new c.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,i.u_scale_a),u_scale_b:new c.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,i.u_tile_units_to_pixels)}),terrainRaster:Nt,terrainDepth:Nt,skybox:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_sun_direction:new c.Uniform3f(f,i.u_sun_direction),u_cubemap:new c.Uniform1i(f,i.u_cubemap),u_opacity:new c.Uniform1f(f,i.u_opacity),u_temporal_offset:new c.Uniform1f(f,i.u_temporal_offset)}),skyboxGradient:(f,i)=>({u_matrix:new c.UniformMatrix4f(f,i.u_matrix),u_color_ramp:new c.Uniform1i(f,i.u_color_ramp),u_center_direction:new c.Uniform3f(f,i.u_center_direction),u_radius:new c.Uniform1f(f,i.u_radius),u_opacity:new c.Uniform1f(f,i.u_opacity),u_temporal_offset:new c.Uniform1f(f,i.u_temporal_offset)}),skyboxCapture:(f,i)=>({u_matrix_3f:new c.UniformMatrix3f(f,i.u_matrix_3f),u_sun_direction:new c.Uniform3f(f,i.u_sun_direction),u_sun_intensity:new c.Uniform1f(f,i.u_sun_intensity),u_color_tint_r:new c.Uniform4f(f,i.u_color_tint_r),u_color_tint_m:new c.Uniform4f(f,i.u_color_tint_m),u_luminance:new c.Uniform1f(f,i.u_luminance)})};let Fo;function zs(f,i,u,p,v,w,T){const k=f.context,G=k.gl,te=f.useProgram("collisionBox"),he=[];let _e=0,we=0;for(let nt=0;nt<p.length;nt++){const Ct=p[nt],Je=i.getTile(Ct),ht=Je.getBucket(u);if(!ht)continue;let ln=Ct.projMatrix;0===v[0]&&0===v[1]||(ln=f.translatePosMatrix(Ct.projMatrix,Je,v,w));const fn=T?ht.textCollisionBox:ht.iconCollisionBox,vn=ht.collisionCircleArray;if(vn.length>0){const ut=c.create$1(),jn=ln;c.mul$1(ut,ht.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul$1(ut,ut,ht.placementViewportMatrix),he.push({circleArray:vn,circleOffset:we,transform:jn,invTransform:ut}),_e+=vn.length/4,we=_e}fn&&(f.terrain&&f.terrain.setupElevationDraw(Je,te),te.draw(k,G.LINES,c.DepthMode.disabled,c.StencilMode.disabled,f.colorModeForRenderPass(),c.CullFaceMode.disabled,Io(ln,f.transform,Je),u.id,fn.layoutVertexBuffer,fn.indexBuffer,fn.segments,null,f.transform.zoom,null,fn.collisionVertexBuffer,fn.collisionVertexBufferExt))}if(!T||!he.length)return;const Re=f.useProgram("collisionCircle"),je=new c.StructArrayLayout2f1f2i16;je.resize(4*_e),je._trim();let He=0;for(const nt of he)for(let Ct=0;Ct<nt.circleArray.length/4;Ct++){const Je=4*Ct,ht=nt.circleArray[Je+0],ln=nt.circleArray[Je+1],fn=nt.circleArray[Je+2],vn=nt.circleArray[Je+3];je.emplace(He++,ht,ln,fn,vn,0),je.emplace(He++,ht,ln,fn,vn,1),je.emplace(He++,ht,ln,fn,vn,2),je.emplace(He++,ht,ln,fn,vn,3)}(!Fo||Fo.length<2*_e)&&(Fo=function(nt){const Ct=2*nt,Je=new c.StructArrayLayout3ui6;Je.resize(Ct),Je._trim();for(let ht=0;ht<Ct;ht++){const ln=6*ht;Je.uint16[ln+0]=4*ht+0,Je.uint16[ln+1]=4*ht+1,Je.uint16[ln+2]=4*ht+2,Je.uint16[ln+3]=4*ht+2,Je.uint16[ln+4]=4*ht+3,Je.uint16[ln+5]=4*ht+0}return Je}(_e));const _t=k.createIndexBuffer(Fo,!0),Le=k.createVertexBuffer(je,c.collisionCircleLayout.members,!0);for(const nt of he){const Ct={u_matrix:nt.transform,u_inv_matrix:nt.invTransform,u_camera_to_center_distance:(Ye=f.transform).cameraToCenterDistance,u_viewport_size:[Ye.width,Ye.height]};Re.draw(k,G.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,f.colorModeForRenderPass(),c.CullFaceMode.disabled,Ct,u.id,Le,_t,c.SegmentVector.simpleSegment(0,2*nt.circleOffset,nt.circleArray.length,nt.circleArray.length/2),null,f.transform.zoom,null,null,null)}var Ye;Le.destroy(),_t.destroy()}const ye=c.identity(new Float32Array(16));function A(f,i,u,p,v,w){const{horizontalAlign:T,verticalAlign:k}=c.getAnchorAlignment(f),G=-(T-.5)*i,te=-(k-.5)*u,he=c.evaluateVariableOffset(f,p);return new c.pointGeometry((G/v+he[0])*w,(te/v+he[1])*w)}function S(f,i,u,p,v,w,T,k,G,te,he,_e){const we=f.text.placedSymbolArray,Re=f.text.dynamicLayoutVertexArray,je=f.icon.dynamicLayoutVertexArray,He={};Re.clear();for(let _t=0;_t<we.length;_t++){const Le=we.get(_t),Ye=f.allowVerticalPlacement&&!Le.placedOrientation,nt=Le.hidden||!Le.crossTileID||Ye?null:p[Le.crossTileID];if(nt){const Ct=new c.pointGeometry(Le.anchorX,Le.anchorY),Je=_e(Ct),ht=dt(Ct,u?k:T,Je),ln=et(w.cameraToCenterDistance,ht.signedDistanceFromCamera);let fn=v.evaluateSizeForFeature(f.textSizeData,te,Le)*ln/c.ONE_EM;u&&(fn*=f.tilePixelRatio/G);const{width:vn,height:ut,anchor:jn,textOffset:Tn,textScale:gi}=nt,qn=A(jn,vn,ut,Tn,gi,fn),Gn=u?dt(Ct.add(qn),T,Je).point:ht.point.add(i?qn.rotate(-w.angle):qn),Hi=f.allowVerticalPlacement&&Le.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let Si=0;Si<Le.numGlyphs;Si++)c.addDynamicAttributes(Re,Gn,Hi);he&&Le.associatedIconIndex>=0&&(He[Le.associatedIconIndex]={shiftedAnchor:Gn,angle:Hi})}else pi(Le.numGlyphs,Re)}if(he){je.clear();const _t=f.icon.placedSymbolArray;for(let Le=0;Le<_t.length;Le++){const Ye=_t.get(Le);if(Ye.hidden)pi(Ye.numGlyphs,je);else{const nt=He[Le];if(nt)for(let Ct=0;Ct<Ye.numGlyphs;Ct++)c.addDynamicAttributes(je,nt.shiftedAnchor,nt.angle);else pi(Ye.numGlyphs,je)}}f.icon.dynamicLayoutVertexBuffer.updateData(je)}f.text.dynamicLayoutVertexBuffer.updateData(Re)}function j(f,i,u){return u.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function ge(f,i,u,p,v,w,T,k,G,te,he,_e){const we=f.context,Re=we.gl,je=f.transform,He="map"===k,_t="map"===G,Le=He&&"point"!==u.layout.get("symbol-placement"),Ye=He&&!_t&&!Le,nt=void 0!==u.layout.get("symbol-sort-key").constantOr(1);let Ct=!1;const Je=f.depthModeForSublayer(0,c.DepthMode.ReadOnly),ht=u.layout.get("text-variable-anchor"),ln=[],fn=f.terrain&&_t?["PITCH_WITH_MAP_TERRAIN"]:null;for(const vn of p){const ut=i.getTile(vn),jn=ut.getBucket(u);if(!jn)continue;const Tn=v?jn.text:jn.icon;if(!Tn||!Tn.segments.get().length)continue;const gi=Tn.programConfigurations.get(u.id),qn=v||jn.sdfIcons,Gn=v?jn.textSizeData:jn.iconSizeData,Hi=_t||0!==je.pitch,Si=f.useProgram(j(qn,v,jn),gi,fn),Er=c.evaluateSizeForZoom(Gn,je.zoom);let Ir,Zr,or,kr,ls=[0,0],ca=null;if(v){if(Zr=ut.glyphAtlasTexture,or=Re.LINEAR,Ir=ut.glyphAtlasTexture.size,jn.iconsInText){ls=ut.imageAtlasTexture.size,ca=ut.imageAtlasTexture;const Ko="composite"===Gn.kind||"camera"===Gn.kind;kr=Hi||f.options.rotating||f.options.zooming||Ko?Re.LINEAR:Re.NEAREST}}else{const Ko=1!==u.layout.get("icon-size").constantOr(0)||jn.iconsNeedLinear;Zr=ut.imageAtlasTexture,or=qn||f.options.rotating||f.options.zooming||Ko||Hi?Re.LINEAR:Re.NEAREST,Ir=ut.imageAtlasTexture.size}const wo=vi(ut,1,f.transform.zoom),Us=Yt(vn.projMatrix,_t,He,f.transform,wo),ro=f.terrain&&_t&&Le?c.invert(new Float32Array(16),Us):ye,Oa=In(vn.projMatrix,_t,He,f.transform,wo),ar=ht&&jn.hasTextData(),Jr="none"!==u.layout.get("icon-text-fit")&&ar&&jn.hasIconData();if(Le){const Ko=je.elevation;B(jn,vn.projMatrix,f,v,Us,Oa,_t,te,Ko?Lo=>Ko.getAtTileOffset(vn,Lo.x,Lo.y):null)}const Dr=f.translatePosMatrix(vn.projMatrix,ut,w,T),qr=Le||v&&ht||Jr?ye:Us,Rs=f.translatePosMatrix(Oa,ut,w,T,!0),is=qn&&0!==u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1);let ko;ko=qn?jn.iconsInText?gr(Gn.kind,Er,Ye,_t,f,Dr,qr,Rs,Ir,ls):Pn(Gn.kind,Er,Ye,_t,f,Dr,qr,Rs,v,Ir,!0):Gl(Gn.kind,Er,Ye,_t,f,Dr,qr,Rs,v,Ir);const ya={program:Si,buffers:Tn,uniformValues:ko,atlasTexture:Zr,atlasTextureIcon:ca,atlasInterpolation:or,atlasInterpolationIcon:kr,isSDF:qn,hasHalo:is,tile:ut,labelPlaneMatrixInv:ro};if(nt&&jn.canOverlap){Ct=!0;const Ko=Tn.segments.get();for(const Lo of Ko)ln.push({segments:new c.SegmentVector([Lo]),sortKey:Lo.sortKey,state:ya})}else ln.push({segments:Tn.segments,sortKey:0,state:ya})}Ct&&ln.sort((vn,ut)=>vn.sortKey-ut.sortKey);for(const vn of ln){const ut=vn.state;if(f.terrain&&f.terrain.setupElevationDraw(ut.tile,ut.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:ut.labelPlaneMatrixInv}),we.activeTexture.set(Re.TEXTURE0),ut.atlasTexture.bind(ut.atlasInterpolation,Re.CLAMP_TO_EDGE),ut.atlasTextureIcon&&(we.activeTexture.set(Re.TEXTURE1),ut.atlasTextureIcon&&ut.atlasTextureIcon.bind(ut.atlasInterpolationIcon,Re.CLAMP_TO_EDGE)),ut.isSDF){const jn=ut.uniformValues;ut.hasHalo&&(jn.u_is_halo=1,Be(ut.buffers,vn.segments,u,f,ut.program,Je,he,_e,jn)),jn.u_is_halo=0}Be(ut.buffers,vn.segments,u,f,ut.program,Je,he,_e,ut.uniformValues)}}function Be(f,i,u,p,v,w,T,k,G){const te=p.context;v.draw(te,te.gl.TRIANGLES,w,T,k,c.CullFaceMode.disabled,G,u.id,f.layoutVertexBuffer,f.indexBuffer,i,u.paint,p.transform.zoom,f.programConfigurations.get(u.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function tt(f,i,u,p,v,w,T){const k=f.context.gl,G=u.paint.get("fill-pattern"),te=G&&G.constantOr(1),he=u.getCrossfadeParameters();let _e,we,Re,je,He;T?(we=te&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=k.LINES):(we=te?"fillPattern":"fill",_e=k.TRIANGLES);for(const _t of p){const Le=i.getTile(_t);if(te&&!Le.patternsLoaded())continue;const Ye=Le.getBucket(u);if(!Ye)continue;f.prepareDrawTile(_t);const nt=Ye.programConfigurations.get(u.id),Ct=f.useProgram(we,nt);te&&(f.context.activeTexture.set(k.TEXTURE0),Le.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),nt.updatePaintBuffers(he));const Je=G.constantOr(null);if(Je&&Le.imageAtlas){const ln=Le.imageAtlas,fn=ln.patternPositions[Je.to.toString()],vn=ln.patternPositions[Je.from.toString()];fn&&vn&&nt.setConstantPatternPositions(fn,vn)}const ht=f.translatePosMatrix(_t.projMatrix,Le,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){je=Ye.indexBuffer2,He=Ye.segments2;const ln=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];Re="fillOutlinePattern"===we&&te?br(ht,f,he,Le,ln):Wi(ht,ln)}else je=Ye.indexBuffer,He=Ye.segments,Re=te?Cr(ht,f,he,Le):hr(ht);f.prepareDrawProgram(f.context,Ct,_t.toUnwrapped()),Ct.draw(f.context,_e,v,f.stencilModeForClipping(_t),w,c.CullFaceMode.disabled,Re,u.id,Ye.layoutVertexBuffer,je,He,u.paint,f.transform.zoom,nt)}}function ft(f,i,u,p,v,w,T){const k=f.context,G=k.gl,te=u.paint.get("fill-extrusion-pattern"),he=te.constantOr(1),_e=u.getCrossfadeParameters(),we=u.paint.get("fill-extrusion-opacity");for(const Re of p){const je=i.getTile(Re),He=je.getBucket(u);if(!He)continue;const _t=He.programConfigurations.get(u.id),Le=f.useProgram(he?"fillExtrusionPattern":"fillExtrusion",_t);if(f.terrain){const ht=f.terrain;if(!He.enableTerrain)continue;if(ht.setupElevationDraw(je,Le,{useMeterToDem:!0}),Gt(k,i,Re,He,u,ht),!He.centroidVertexBuffer){const ln=Le.attributes.a_centroid_pos;void 0!==ln&&G.vertexAttrib2f(ln,0,0)}}he&&(f.context.activeTexture.set(G.TEXTURE0),je.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),_t.updatePaintBuffers(_e));const Ye=te.constantOr(null);if(Ye&&je.imageAtlas){const ht=je.imageAtlas,ln=ht.patternPositions[Ye.to.toString()],fn=ht.patternPositions[Ye.from.toString()];ln&&fn&&_t.setConstantPatternPositions(ln,fn)}const nt=f.translatePosMatrix(Re.projMatrix,je,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ct=u.paint.get("fill-extrusion-vertical-gradient"),Je=he?qi(nt,f,Ct,we,Re,_e,je):Ci(nt,f,Ct,we);f.prepareDrawProgram(k,Le,Re.toUnwrapped()),Le.draw(k,k.gl.TRIANGLES,v,w,T,c.CullFaceMode.backCCW,Je,u.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,u.paint,f.transform.zoom,_t,f.terrain?He.centroidVertexBuffer:null)}}function Gt(f,i,u,p,v,w){const T=[Le=>{let Ye=Le.canonical.x-1,nt=Le.wrap;return Ye<0&&(Ye=(1<<Le.canonical.z)-1,nt--),new c.OverscaledTileID(Le.overscaledZ,nt,Le.canonical.z,Ye,Le.canonical.y)},Le=>{let Ye=Le.canonical.x+1,nt=Le.wrap;return Ye===1<<Le.canonical.z&&(Ye=0,nt++),new c.OverscaledTileID(Le.overscaledZ,nt,Le.canonical.z,Ye,Le.canonical.y)},Le=>new c.OverscaledTileID(Le.overscaledZ,Le.wrap,Le.canonical.z,Le.canonical.x,(0===Le.canonical.y?1<<Le.canonical.z:Le.canonical.y)-1),Le=>new c.OverscaledTileID(Le.overscaledZ,Le.wrap,Le.canonical.z,Le.canonical.x,Le.canonical.y===(1<<Le.canonical.z)-1?0:Le.canonical.y+1)],k=Le=>{const Ye=i.getSource().maxzoom,nt=ln=>{const fn=i.getTileByID(ln);if(fn&&fn.hasData())return fn.getBucket(v)};let Ct,Je,ht;return(Le.overscaledZ===Le.canonical.z||Le.overscaledZ>=Ye)&&(Ct=nt(Le.key)),Le.overscaledZ>=Ye&&(Je=nt(Le.calculateScaledKey(Le.overscaledZ+1))),Le.overscaledZ>Ye&&(ht=nt(Le.calculateScaledKey(Le.overscaledZ-1))),Ct||Je||ht},G=[0,0,0],te=(Le,Ye)=>(G[0]=Math.min(Le.min.y,Ye.min.y),G[1]=Math.max(Le.max.y,Ye.max.y),G[2]=c.EXTENT-Ye.min.x>Le.max.x?Ye.min.x-c.EXTENT:Le.max.x,G),he=(Le,Ye)=>(G[0]=Math.min(Le.min.x,Ye.min.x),G[1]=Math.max(Le.max.x,Ye.max.x),G[2]=c.EXTENT-Ye.min.y>Le.max.y?Ye.min.y-c.EXTENT:Le.max.y,G),_e=[(Le,Ye)=>te(Le,Ye),(Le,Ye)=>te(Ye,Le),(Le,Ye)=>he(Le,Ye),(Le,Ye)=>he(Ye,Le)],we=new c.pointGeometry(0,0);let Re,je,He;const _t=(Le,Ye,nt,Ct,Je)=>{const ht=[[Ct?nt:Le,Ct?Le:nt,0],[Ct?nt:Ye,Ct?Ye:nt,0]],ln=Je<0?c.EXTENT+Je:Je,fn=[Ct?ln:(Le+Ye)/2,Ct?(Le+Ye)/2:ln,0];return 0===nt&&Je<0||0!==nt&&Je>0?w.getForTilePoints(He,[fn],!0,je):ht.push(fn),w.getForTilePoints(u,ht,!0,Re),Math.max(ht[0][2],ht[1][2],fn[2])/w.exaggeration()};for(let Le=0;Le<4;Le++){const Ye=p.borders[Le];if(0===Ye.length&&(p.borderDone[Le]=!0),p.borderDone[Le])continue;const nt=He=T[Le](u),Ct=k(nt);if(!(Ct&&Ct.enableTerrain&&(je=w.findDEMTileFor(nt),je&&je.dem)))continue;if(!Re){const fn=w.findDEMTileFor(u);if(!fn||!fn.dem)return;Re=fn}const Je=(Le<2?1:5)-Le,ht=Ct.borders[Je];let ln=0;for(let fn=0;fn<Ye.length;fn++){const vn=p.featuresOnBorder[Ye[fn]],ut=vn.borders[Le];let jn;for(;ln<ht.length&&(jn=Ct.featuresOnBorder[ht[ln]],!(jn.borders[Je][1]>ut[0]+3));)Ct.borderDone[Je]||Ct.encodeCentroid(void 0,jn,!1),ln++;if(jn&&ln<ht.length){const Tn=ln;let gi=0;for(;!(jn.borders[Je][0]>ut[1]-3)&&(gi++,++ln!==ht.length);)jn=Ct.featuresOnBorder[ht[ln]];if(jn=Ct.featuresOnBorder[ht[Tn]],vn.intersectsCount()>1||jn.intersectsCount()>1||1!==gi){1!==gi&&(ln=Tn),p.encodeCentroid(void 0,vn,!1),Ct.borderDone[Je]||Ct.encodeCentroid(void 0,jn,!1);continue}const qn=_e[Le](vn,jn),Gn=Le%2?c.EXTENT-1:0;we.x=_t(qn[0],Math.min(c.EXTENT-1,qn[1]),Gn,Le<2,qn[2]),we.y=0,p.encodeCentroid(we,vn,!1),Ct.borderDone[Je]||Ct.encodeCentroid(we,jn,!1)}else p.encodeCentroid(void 0,vn,!1)}p.borderDone[Le]=p.needsCentroidUpdate=!0,Ct.borderDone[Je]||(Ct.borderDone[Je]=Ct.needsCentroidUpdate=!0)}(p.needsCentroidUpdate||!p.centroidVertexBuffer&&0!==p.centroidVertexArray.length)&&p.uploadCentroid(f)}const hn=new c.Color(1,0,0,1),_n=new c.Color(0,1,0,1),yi=new c.Color(0,0,1,1),Yi=new c.Color(1,0,1,1),_r=new c.Color(0,1,1,1);function Ii(f,i,u,p){sr(f,0,i+u/2,f.transform.width,u,p)}function Gi(f,i,u,p){sr(f,i-u/2,0,u,f.transform.height,p)}function sr(f,i,u,p,v,w){const T=f.context,k=T.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*c.exported.devicePixelRatio,u*c.exported.devicePixelRatio,p*c.exported.devicePixelRatio,v*c.exported.devicePixelRatio),T.clear({color:w}),k.disable(k.SCISSOR_TEST)}function Ur(f,i,u){const p=f.context,v=p.gl,w=u.projMatrix,T=f.useProgram("debug"),k=i.getTileByID(u.key);f.terrain&&f.terrain.setupElevationDraw(k,T);const G=c.DepthMode.disabled,te=c.StencilMode.disabled,he=f.colorModeForRenderPass();p.activeTexture.set(v.TEXTURE0),f.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),T.draw(p,v.LINE_STRIP,G,te,he,c.CullFaceMode.disabled,os(w,c.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);const we=k.latestRawTileData,Re=Math.floor((we&&we.byteLength||0)/1024),je=i.getTile(u).tileSize,He=512/Math.min(je,512)*(u.overscaledZ/f.transform.zoom)*.5;let _t=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(_t+=` => ${u.overscaledZ}`),function(Le,Ye){Le.initDebugOverlayCanvas();const nt=Le.debugOverlayCanvas,Ct=Le.context.gl,Je=Le.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,nt.width,nt.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(Ye,5,5),Je.strokeText(Ye,5,5),Le.debugOverlayTexture.update(nt),Le.debugOverlayTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE)}(f,`${_t} ${Re}kb`),T.draw(p,v.TRIANGLES,G,te,c.ColorMode.alphaBlended,c.CullFaceMode.disabled,os(w,c.Color.transparent,He),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}const Yr=c.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ps}=Yr;function Fr(f,i,u,p){f.emplaceBack(i,u,p)}class no{constructor(i){this.vertexArray=new c.StructArrayLayout3f12,this.indices=new c.StructArrayLayout3ui6,Fr(this.vertexArray,-1,-1,1),Fr(this.vertexArray,1,-1,1),Fr(this.vertexArray,-1,1,1),Fr(this.vertexArray,1,1,1),Fr(this.vertexArray,-1,-1,-1),Fr(this.vertexArray,1,-1,-1),Fr(this.vertexArray,-1,1,-1),Fr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Ps),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=c.SegmentVector.simpleSegment(0,0,36,12)}}function Cs(f,i,u,p,v,w){const T=f.gl,k=i.paint.get("sky-atmosphere-color"),G=i.paint.get("sky-atmosphere-halo-color"),te=i.paint.get("sky-atmosphere-sun-intensity"),he={u_matrix_3f:c.fromMat4([],p),u_sun_direction:v,u_sun_intensity:te,u_color_tint_r:[(je=k).r,je.g,je.b,je.a],u_color_tint_m:[(He=G).r,He.g,He.b,He.a],u_luminance:5e-5};var je,He;T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+w,i.skyboxTexture,0),u.draw(f,T.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,c.ColorMode.unblended,c.CullFaceMode.frontCW,he,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const ds={symbol:function(f,i,u,p,v){if("translucent"!==f.renderPass)return;const w=c.StencilMode.disabled,T=f.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,G,te,he,_e,we,Re){const je=G.transform,He="map"===_e,_t="map"===we;for(const Le of k){const Ye=he.getTile(Le),nt=Ye.getBucket(te);if(!nt||!nt.text||!nt.text.segments.get().length)continue;const Ct=c.evaluateSizeForZoom(nt.textSizeData,je.zoom),Je=vi(Ye,1,G.transform.zoom),ht=Yt(Le.projMatrix,_t,He,G.transform,Je),ln="none"!==te.layout.get("icon-text-fit")&&nt.hasIconData();if(Ct){const fn=Math.pow(2,je.zoom-Ye.tileID.overscaledZ),vn=je.elevation;S(nt,He,_t,Re,c.symbolSize,je,ht,Le.projMatrix,fn,Ct,ln,vn?ut=>vn.getAtTileOffset(Le,ut.x,ut.y):ut=>0)}}}(p,f,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v),0!==u.paint.get("icon-opacity").constantOr(1)&&ge(f,i,u,p,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),w,T),0!==u.paint.get("text-opacity").constantOr(1)&&ge(f,i,u,p,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),w,T),i.map.showCollisionBoxes&&(zs(f,i,u,p,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),zs(f,i,u,p,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,u,p){if("translucent"!==f.renderPass)return;const v=u.paint.get("circle-opacity"),w=u.paint.get("circle-stroke-width"),T=u.paint.get("circle-stroke-opacity"),k=void 0!==u.layout.get("circle-sort-key").constantOr(1);if(0===v.constantOr(1)&&(0===w.constantOr(1)||0===T.constantOr(1)))return;const G=f.context,te=G.gl,he=f.depthModeForSublayer(0,c.DepthMode.ReadOnly),_e=c.StencilMode.disabled,we=f.colorModeForRenderPass(),Re=[];for(let je=0;je<p.length;je++){const He=p[je],_t=i.getTile(He),Le=_t.getBucket(u);if(!Le)continue;const Ye=Le.programConfigurations.get(u.id),nt=ss(u),Ct={programConfiguration:Ye,program:f.useProgram("circle",Ye,nt),layoutVertexBuffer:Le.layoutVertexBuffer,indexBuffer:Le.indexBuffer,uniformValues:tr(f,He,_t,u),tile:_t};if(k){const Je=Le.segments.get();for(const ht of Je)Re.push({segments:new c.SegmentVector([ht]),sortKey:ht.sortKey,state:Ct})}else Re.push({segments:Le.segments,sortKey:0,state:Ct})}k&&Re.sort((je,He)=>je.sortKey-He.sortKey);for(const je of Re){const{programConfiguration:He,program:_t,layoutVertexBuffer:Le,indexBuffer:Ye,uniformValues:nt,tile:Ct}=je.state,Je=je.segments;f.terrain&&f.terrain.setupElevationDraw(Ct,_t,{useDepthForOcclusion:!0}),f.prepareDrawProgram(G,_t,Ct.tileID.toUnwrapped()),_t.draw(G,te.TRIANGLES,he,_e,we,c.CullFaceMode.disabled,nt,u.id,Le,Ye,Je,u.paint,f.transform.zoom,He)}},heatmap:function(f,i,u,p){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){const v=f.context,w=v.gl,T=c.StencilMode.disabled,k=new c.ColorMode([w.ONE,w.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(G,te,he){const _e=G.gl;G.activeTexture.set(_e.TEXTURE1),G.viewport.set([0,0,te.width/4,te.height/4]);let we=he.heatmapFbo;if(we)_e.bindTexture(_e.TEXTURE_2D,we.colorAttachment.get()),G.bindFramebuffer.set(we.framebuffer);else{const Re=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,Re),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.LINEAR),we=he.heatmapFbo=G.createFramebuffer(te.width/4,te.height/4,!1),function(je,He,_t,Le){const Ye=je.gl;Ye.texImage2D(Ye.TEXTURE_2D,0,Ye.RGBA,He.width/4,He.height/4,0,Ye.RGBA,je.extRenderToTextureHalfFloat?je.extTextureHalfFloat.HALF_FLOAT_OES:Ye.UNSIGNED_BYTE,null),Le.colorAttachment.set(_t)}(G,te,Re,we)}})(v,f,u),v.clear({color:c.Color.transparent});for(let G=0;G<p.length;G++){const te=p[G];if(i.hasRenderableParent(te))continue;const he=i.getTile(te),_e=he.getBucket(u);if(!_e)continue;const we=_e.programConfigurations.get(u.id),Re=f.useProgram("heatmap",we),{zoom:je}=f.transform;f.terrain&&f.terrain.setupElevationDraw(he,Re),f.prepareDrawProgram(v,Re,te.toUnwrapped()),Re.draw(v,w.TRIANGLES,c.DepthMode.disabled,T,k,c.CullFaceMode.disabled,ao(te.projMatrix,he,je,u.paint.get("heatmap-intensity")),u.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,u.paint,f.transform.zoom,we)}v.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,w){const T=v.context,k=T.gl,G=w.heatmapFbo;if(!G)return;T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,G.colorAttachment.get()),T.activeTexture.set(k.TEXTURE1);let te=w.colorRampTexture;te||(te=w.colorRampTexture=new c.Texture(T,w.colorRamp,k.RGBA)),te.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(T,k.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,v.colorModeForRenderPass(),c.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:w.paint.get("heatmap-opacity")},w.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,w.paint,v.transform.zoom)}(f,u))},line:function(f,i,u,p){if("translucent"!==f.renderPass)return;const v=u.paint.get("line-opacity"),w=u.paint.get("line-width");if(0===v.constantOr(1)||0===w.constantOr(1))return;const T=f.depthModeForSublayer(0,c.DepthMode.ReadOnly),k=f.colorModeForRenderPass(),G=u.paint.get("line-dasharray"),te=G.constantOr(1),he=u.layout.get("line-cap"),_e=u.paint.get("line-pattern"),we=_e.constantOr(1),Re=u.paint.get("line-gradient"),je=u.getCrossfadeParameters(),He=we?"linePattern":te?"lineSDF":Re?"lineGradient":"line",_t=f.context,Le=_t.gl;for(const Ye of p){const nt=i.getTile(Ye);if(we&&!nt.patternsLoaded())continue;const Ct=nt.getBucket(u);if(!Ct)continue;f.prepareDrawTile(Ye);const Je=Ct.programConfigurations.get(u.id),ht=f.useProgram(He,Je),ln=_e.constantOr(null);if(ln&&nt.imageAtlas){const Tn=nt.imageAtlas,gi=Tn.patternPositions[ln.to.toString()],qn=Tn.patternPositions[ln.from.toString()];gi&&qn&&Je.setConstantPatternPositions(gi,qn)}const fn=G.constantOr(null),vn=he.constantOr(null);if(!we&&fn&&vn&&nt.lineAtlas){const Tn=nt.lineAtlas,gi=Tn.getDash(fn.to,vn),qn=Tn.getDash(fn.from,vn);gi&&qn&&Je.setConstantPatternPositions(gi,qn)}const ut=f.terrain?Ye.projMatrix:null,jn=we?na(f,nt,u,je,ut):te?Po(f,nt,u,je,ut):Re?Oi(f,nt,u,ut,Ct.lineClipsArray.length):ws(f,nt,u,ut);if(we)_t.activeTexture.set(Le.TEXTURE0),nt.imageAtlasTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Je.updatePaintBuffers(je);else if(te)_t.activeTexture.set(Le.TEXTURE0),nt.lineAtlasTexture.bind(Le.LINEAR,Le.REPEAT),Je.updatePaintBuffers(je);else if(Re){const Tn=Ct.gradients[u.id];let gi=Tn.texture;if(u.gradientVersion!==Tn.version){let qn=256;if(u.stepInterpolant){const Gn=i.getSource().maxzoom,Hi=Ye.canonical.z===Gn?Math.ceil(1<<f.transform.maxZoom-Ye.canonical.z):1;qn=c.clamp(c.nextPowerOfTwo(Ct.maxLineLength/c.EXTENT*1024*Hi),256,_t.maxTextureSize)}Tn.gradient=c.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:qn,image:Tn.gradient||void 0,clips:Ct.lineClipsArray}),Tn.texture?Tn.texture.update(Tn.gradient):Tn.texture=new c.Texture(_t,Tn.gradient,Le.RGBA),Tn.version=u.gradientVersion,gi=Tn.texture}_t.activeTexture.set(Le.TEXTURE0),gi.bind(u.stepInterpolant?Le.NEAREST:Le.LINEAR,Le.CLAMP_TO_EDGE)}f.prepareDrawProgram(_t,ht,Ye.toUnwrapped()),ht.draw(_t,Le.TRIANGLES,T,f.stencilModeForClipping(Ye),k,c.CullFaceMode.disabled,jn,u.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,u.paint,f.transform.zoom,Je,Ct.layoutVertexBuffer2)}},fill:function(f,i,u,p){const v=u.paint.get("fill-color"),w=u.paint.get("fill-opacity");if(0===w.constantOr(1))return;const T=f.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),G=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&1===v.constantOr(c.Color.transparent).a&&1===w.constantOr(0)?"opaque":"translucent";if(f.renderPass===G){const te=f.depthModeForSublayer(1,"opaque"===f.renderPass?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly);tt(f,i,u,p,te,T,!1)}if("translucent"===f.renderPass&&u.paint.get("fill-antialias")){const te=f.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,c.DepthMode.ReadOnly);tt(f,i,u,p,te,T,!0)}},"fill-extrusion":function(f,i,u,p){const v=u.paint.get("fill-extrusion-opacity");if(0!==v&&"translucent"===f.renderPass){const w=new c.DepthMode(f.context.gl.LEQUAL,c.DepthMode.ReadWrite,f.depthRangeFor3D);if(1!==v||u.paint.get("fill-extrusion-pattern").constantOr(1))ft(f,i,u,p,w,c.StencilMode.disabled,c.ColorMode.disabled),ft(f,i,u,p,w,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const T=f.colorModeForRenderPass();ft(f,i,u,p,w,c.StencilMode.disabled,T)}}},hillshade:function(f,i,u,p){if("offscreen"!==f.renderPass&&"translucent"!==f.renderPass)return;const v=f.context,w=f.depthModeForSublayer(0,c.DepthMode.ReadOnly),T=f.colorModeForRenderPass(),k=f.terrain&&f.terrain.renderingToTexture,[G,te]="translucent"!==f.renderPass||k?[{},p]:f.stencilConfigForOverlap(p);for(const he of te){const _e=i.getTile(he);if(_e.needsHillshadePrepare&&"offscreen"===f.renderPass)Ae(f,_e,u,w,c.StencilMode.disabled,T);else if("translucent"===f.renderPass){const we=k&&f.terrain?f.terrain.stencilModeForRTTOverlap(he):G[he.overscaledZ];ee(f,he,_e,u,w,we,T)}}v.viewport.set([0,0,f.width,f.height])},raster:function(f,i,u,p,v,w){if("translucent"!==f.renderPass||0===u.paint.get("raster-opacity")||!p.length)return;const T=f.context,k=T.gl,G=i.getSource(),te=f.useProgram("raster"),he=f.colorModeForRenderPass(),_e=f.terrain&&f.terrain.renderingToTexture,[we,Re]=G instanceof oe||_e?[{},p]:f.stencilConfigForOverlap(p),je=Re[Re.length-1].overscaledZ,He=!f.options.moving;for(const _t of Re){const Le=_e?c.DepthMode.disabled:f.depthModeForSublayer(_t.overscaledZ-je,1===u.paint.get("raster-opacity")?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly,k.LESS),Ye=_t.toUnwrapped(),nt=i.getTile(_t);if(_e&&(!nt||!nt.hasData()))continue;const Ct=_e?_t.projMatrix:f.transform.calculateProjMatrix(Ye,He),Je=f.terrain&&_e?f.terrain.stencilModeForRTTOverlap(_t):we[_t.overscaledZ],ht=w?0:u.paint.get("raster-fade-duration");nt.registerFadeDuration(ht);const ln=i.findLoadedParent(_t,0),fn=X(nt,ln,i,f.transform,ht);let vn,ut;f.terrain&&f.terrain.prepareDrawTile(_t);const jn="nearest"===u.paint.get("raster-resampling")?k.NEAREST:k.LINEAR;T.activeTexture.set(k.TEXTURE0),nt.texture.bind(jn,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.activeTexture.set(k.TEXTURE1),ln?(ln.texture.bind(jn,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),vn=Math.pow(2,ln.tileID.overscaledZ-nt.tileID.overscaledZ),ut=[nt.tileID.canonical.x*vn%1,nt.tileID.canonical.y*vn%1]):nt.texture.bind(jn,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const Tn=Xa(Ct,ut||[0,0],vn||1,fn,u);f.prepareDrawProgram(T,te,Ye),G instanceof oe?te.draw(T,k.TRIANGLES,Le,c.StencilMode.disabled,he,c.CullFaceMode.disabled,Tn,u.id,G.boundsBuffer,f.quadTriangleIndexBuffer,G.boundsSegments):te.draw(T,k.TRIANGLES,Le,Je,he,c.CullFaceMode.disabled,Tn,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,i,u,p){const v=u.paint.get("background-color"),w=u.paint.get("background-opacity");if(0===w)return;const T=f.context,k=T.gl,G=f.transform,te=G.tileSize,he=u.paint.get("background-pattern");if(f.isPatternMissing(he))return;const _e=!he&&1===v.a&&1===w&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==_e)return;const we=c.StencilMode.disabled,Re=f.depthModeForSublayer(0,"opaque"===_e?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly),je=f.colorModeForRenderPass(),He=f.useProgram(he?"backgroundPattern":"background"),_t=p||G.coveringTiles({tileSize:te});he&&(T.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));const Le=u.getCrossfadeParameters();for(const Ye of _t){const nt=Ye.toUnwrapped(),Ct=p?Ye.projMatrix:f.transform.calculateProjMatrix(nt);f.prepareDrawTile(Ye);const Je=he?ns(Ct,w,f,he,{tileID:Ye,tileSize:te},Le):ml(Ct,w,v);f.prepareDrawProgram(T,He,nt),He.draw(T,k.TRIANGLES,Re,we,je,c.CullFaceMode.disabled,Je,u.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},sky:function(f,i,u){const p=u.paint.get("sky-opacity");if(0===p)return;const v=f.context,w=u.paint.get("sky-type"),T=new c.DepthMode(v.gl.LEQUAL,c.DepthMode.ReadOnly,[0,1]),k=f.frameCounter/1e3%1;"atmosphere"===w?"offscreen"===f.renderPass?u.needsSkyboxCapture(f)&&(function(G,te,he,_e){const we=G.context,Re=we.gl;let je=te.skyboxFbo;if(!je){je=te.skyboxFbo=we.createFramebuffer(32,32,!1),te.skyboxGeometry=new no(we),te.skyboxTexture=we.gl.createTexture(),Re.bindTexture(Re.TEXTURE_CUBE_MAP,te.skyboxTexture),Re.texParameteri(Re.TEXTURE_CUBE_MAP,Re.TEXTURE_WRAP_S,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_CUBE_MAP,Re.TEXTURE_WRAP_T,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_CUBE_MAP,Re.TEXTURE_MIN_FILTER,Re.LINEAR),Re.texParameteri(Re.TEXTURE_CUBE_MAP,Re.TEXTURE_MAG_FILTER,Re.LINEAR);for(let Ye=0;Ye<6;++Ye)Re.texImage2D(Re.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Re.RGBA,32,32,0,Re.RGBA,Re.UNSIGNED_BYTE,null)}we.bindFramebuffer.set(je.framebuffer),we.viewport.set([0,0,32,32]);const He=te.getCenter(G,!0),_t=G.useProgram("skyboxCapture"),Le=new Float64Array(16);c.identity(Le),c.rotateY(Le,Le,.5*-Math.PI),Cs(we,te,_t,Le,He,0),c.identity(Le),c.rotateY(Le,Le,.5*Math.PI),Cs(we,te,_t,Le,He,1),c.identity(Le),c.rotateX(Le,Le,.5*-Math.PI),Cs(we,te,_t,Le,He,2),c.identity(Le),c.rotateX(Le,Le,.5*Math.PI),Cs(we,te,_t,Le,He,3),c.identity(Le),Cs(we,te,_t,Le,He,4),c.identity(Le),c.rotateY(Le,Le,Math.PI),Cs(we,te,_t,Le,He,5),we.viewport.set([0,0,G.width,G.height])}(f,u),u.markSkyboxValid(f)):"sky"===f.renderPass&&function(G,te,he,_e,we){const Re=G.context,je=Re.gl,He=G.transform,_t=G.useProgram("skybox");Re.activeTexture.set(je.TEXTURE0),je.bindTexture(je.TEXTURE_CUBE_MAP,te.skyboxTexture);const Le={u_matrix:He.skyboxMatrix,u_sun_direction:te.getCenter(G,!1),u_cubemap:0,u_opacity:_e,u_temporal_offset:we};G.prepareDrawProgram(Re,_t),_t.draw(Re,je.TRIANGLES,he,c.StencilMode.disabled,G.colorModeForRenderPass(),c.CullFaceMode.backCW,Le,"skybox",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(f,u,T,p,k):"gradient"===w&&"sky"===f.renderPass&&function(G,te,he,_e,we){const Re=G.context,je=Re.gl,He=G.transform,_t=G.useProgram("skyboxGradient");te.skyboxGeometry||(te.skyboxGeometry=new no(Re)),Re.activeTexture.set(je.TEXTURE0);let Le=te.colorRampTexture;Le||(Le=te.colorRampTexture=new c.Texture(Re,te.colorRamp,je.RGBA)),Le.bind(je.LINEAR,je.CLAMP_TO_EDGE);const Ye=(nt=He.skyboxMatrix,Ct=te.getCenter(G,!1),Je=te.paint.get("sky-gradient-radius"),ht=_e,ln=we,{u_matrix:nt,u_color_ramp:0,u_center_direction:Ct,u_radius:c.degToRad(Je),u_opacity:ht,u_temporal_offset:ln});var nt,Ct,Je,ht,ln;G.prepareDrawProgram(Re,_t),_t.draw(Re,je.TRIANGLES,he,c.StencilMode.disabled,G.colorModeForRenderPass(),c.CullFaceMode.backCW,Ye,"skyboxGradient",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(f,u,T,p,k)},debug:function(f,i,u){for(let p=0;p<u.length;p++)Ur(f,i,u[p])},custom:function(f,i,u){const p=f.context,v=u.implementation;if("offscreen"===f.renderPass){const w=v.prerender;w&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),w.call(v,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(c.StencilMode.disabled);const w="3d"===v.renderingMode?new c.DepthMode(f.context.gl.LEQUAL,c.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,c.DepthMode.ReadOnly);p.setDepthMode(w),v.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class Ro{constructor(i,u){this.context=new Ze(i),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=c.SourceCache.maxUnderzooming+c.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new eo,this.gpuTimers={},this.frameCounter=0}updateTerrain(i,u){const p=!!i&&!!i.terrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Pe(this,i));const v=this._terrain;this.transform.elevation=p?v:null,v.update(i,this.transform,u)}_updateFog(i){const u=i.fog;if(!u||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,v]=u.getFovAdjustedRange(this.transform._fov);if(p>v)return void(this.transform.fogCullDistSq=null);const w=p+.78*(v-p);this.transform.fogCullDistSq=w*w}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,u){if(this.width=i*c.exported.devicePixelRatio,this.height=u*c.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._layers[p].resize()}setup(){const i=this.context,u=new c.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(c.EXTENT,0),u.emplaceBack(0,c.EXTENT),u.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,c.posAttributes.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const p=new c.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(c.EXTENT,0),p.emplaceBack(0,c.EXTENT),p.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=i.createVertexBuffer(p,c.posAttributes.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const v=new c.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(c.EXTENT,0,c.EXTENT,0),v.emplaceBack(0,c.EXTENT,0,c.EXTENT),v.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,me.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const w=new c.StructArrayLayout2i4;w.emplaceBack(-1,-1),w.emplaceBack(1,-1),w.emplaceBack(-1,1),w.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(w,c.posAttributes.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const T=new c.StructArrayLayout1ui2;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(T);const k=new c.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k),this.emptyTexture=new c.Texture(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA),this.identityMat=c.create$1();const G=this.context.gl;this.stencilClearMode=new c.StencilMode({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.loadTimeStamps.push(c.window.performance.now())}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(i,u.TRIANGLES,c.DepthMode.disabled,this.stencilClearMode,c.ColorMode.disabled,c.CullFaceMode.disabled,Da(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u,p){if(!(u&&this.currentStencilSource!==u.id&&i.isTileClipped()&&p&&p.length))return;this.currentStencilSource=u.id;const v=this.context,w=v.gl;this.nextStencilID+p.length>256&&this.clearStencil(),v.setColorMode(c.ColorMode.disabled),v.setDepthMode(c.DepthMode.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of p){const G=this._tileClippingMaskIDs[k.key]=this.nextStencilID++;T.draw(v,w.TRIANGLES,c.DepthMode.disabled,new c.StencilMode({func:w.ALWAYS,mask:0},G,255,w.KEEP,w.KEEP,w.REPLACE),c.ColorMode.disabled,c.CullFaceMode.disabled,Da(k.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new c.StencilMode({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const u=this.context.gl;return new c.StencilMode({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((T,k)=>k.overscaledZ-T.overscaledZ),v=p[p.length-1].overscaledZ,w=p[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const T={};for(let k=0;k<w;k++)T[k+v]=new c.StencilMode({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[T,p]}return[{[v]:c.StencilMode.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;if(this._showOverdrawInspector){const u=1/8;return new c.ColorMode([i.CONSTANT_COLOR,i.ONE],new c.Color(u,u,u,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?c.ColorMode.unblended:c.ColorMode.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return c.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new c.DepthMode(p||this.context.gl.LEQUAL,u,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const p=this.style.order,v=this.style._sourceCaches;for(const te in v){const he=v[te];he.used&&he.prepare(this.context)}const w={},T={},k={};for(const te in v){const he=v[te];w[te]=he.getVisibleCoordinates(),T[te]=w[te].slice().reverse(),k[te]=he.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let te=0;te<p.length;te++)if(this.style._layers[p[te]].is3D()){this.opaquePassCutoff=te;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),!c.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const te of p){const he=this.style._layers[te],_e=i._getLayerSourceCache(he);if(!he.hasOffscreenPass()||he.isHidden(this.transform.zoom))continue;const we=_e?T[_e.id]:void 0;("custom"===he.type||he.isSky()||we&&we.length)&&this.renderLayer(this,_e,he,we)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let G=c.Color.transparent;if(this.style.fog&&(G=this.style.fog.properties.get("color")),this.context.clear({color:u.showOverdrawInspector?c.Color.black:G,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const te=this.style._layers[p[this.currentLayer]],he=i._getLayerSourceCache(te);if(te.isSky())continue;const _e=he?T[he.id]:void 0;this._renderTileClippingMasks(te,he,_e),this.renderLayer(this,he,te,_e)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const te=this.style._layers[p[this.currentLayer]],he=i._getLayerSourceCache(te);te.isSky()&&this.renderLayer(this,he,te,he?T[he.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;){const te=this.style._layers[p[this.currentLayer]],he=i._getLayerSourceCache(te);if(te.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(te)){if(te.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const _e=he?("symbol"===te.type?k:T)[he.id]:void 0;this._renderTileClippingMasks(te,he,he?w[he.id]:void 0),this.renderLayer(this,he,te,_e),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let te=null;c.values(this.style._layers).forEach(he=>{const _e=i._getLayerSourceCache(he);_e&&!he.isHidden(this.transform.zoom)&&(!te||te.getSource().maxzoom<_e.getSource().maxzoom)&&(te=_e)}),te&&this.options.showTileBoundaries&&ds.debug(this,te,te.getVisibleCoordinates())}this.options.showPadding&&function(te){const he=te.transform.padding;Ii(te,te.transform.height-(he.top||0),3,hn),Ii(te,he.bottom||0,3,_n),Gi(te,he.left||0,3,yi),Gi(te,te.transform.width-(he.right||0),3,Yi);const _e=te.transform.centerPoint;var we,Re,je,He;sr(we=te,(Re=_e.x)-1,(je=te.transform.height-_e.y)-10,2,20,He=_r),sr(we,Re-10,je-1,20,2,He)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%c.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(c.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,u,p,v){p.isHidden(this.transform.zoom)||("background"===p.type||"sky"===p.type||"custom"===p.type||v&&v.length)&&(this.id=p.id,this.gpuTimingStart(p),ds[p.type](i,u,p,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),p.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const p in i){const v=i[p],w=this.context.extTimerQuery,T=w.getQueryObjectEXT(v.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(v.query),u[p]=T}return u}translatePosMatrix(i,u,p,v,w){if(!p[0]&&!p[1])return i;const T=w?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(T){const te=Math.sin(T),he=Math.cos(T);p=[p[0]*he-p[1]*te,p[0]*te+p[1]*he]}const k=[w?p[0]:vi(u,p[0],this.transform.zoom),w?p[1]:vi(u,p[1],this.transform.zoom),0],G=new Float32Array(16);return c.translate(G,i,k),G}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,u=this.style&&this.style.fog,p=[];return this.terrain&&!this.terrain.renderingToTexture&&p.push("TERRAIN"),u&&!i&&0!==u.getOpacity(this.transform.pitch)&&p.push("FOG"),i&&p.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&p.push("OVERDRAW_INSPECTOR"),p}useProgram(i,u,p){this.cache=this.cache||{};const v=p||[],w=this.currentGlobalDefines().concat(v),T=cn.cacheKey(i,w,u);return this.cache[T]||(this.cache[T]=new cn(this.context,i,Mo[i],u,gl[i],w)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(i){this.terrain&&this.terrain.prepareDrawTile(i)}prepareDrawProgram(i,u,p){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const w=v.getOpacity(this.transform.pitch);0!==w&&u.setFogUniformValues(i,((T,k,G,te)=>{const he=k.properties.get("color"),_e=T.frameCounter/1e3%1,we=[he.r/he.a,he.g/he.a,he.b/he.a,te];return{u_fog_matrix:G?T.transform.calculateFogTileMatrix(G):T.identityMat,u_fog_range:k.getFovAdjustedRange(T.transform._fov),u_fog_color:we,u_fog_horizon_blend:k.properties.get("horizon-blend"),u_fog_temporal_offset:_e}})(this,v,p,w))}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,u=i.createTexture();return i.bindTexture(i.TEXTURE_2D,u),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&0!==i.getOpacity(this.transform.pitch)}}class Bs{constructor(i=0,u=0,p=0,v=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=v}interpolate(i,u,p){return null!=u.top&&null!=i.top&&(this.top=c.number(i.top,u.top,p)),null!=u.bottom&&null!=i.bottom&&(this.bottom=c.number(i.bottom,u.bottom,p)),null!=u.left&&null!=i.left&&(this.left=c.number(i.left,u.left,p)),null!=u.right&&null!=i.right&&(this.right=c.number(i.right,u.right,p)),this}getCenter(i,u){const p=c.clamp((this.left+i-this.right)/2,0,i),v=c.clamp((this.top+u-this.bottom)/2,0,u);return new c.pointGeometry(p,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Bs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function hs(f,i){return[f[4*i],f[4*i+1],f[4*i+2],f[4*i+3]]}function qs(f,i,u){f[4*i+0]=u[0],f[4*i+1]=u[1],f[4*i+2]=u[2],f[4*i+3]=u[3]}function qo(f,i){const u=hs(f,3);c.fromQuat(f,i),qs(f,3,u)}function Kr(f,i){qs(f,3,[i[0],i[1],i[2],1])}function lo(f,i){const u=c.identity$1([]);return c.rotateZ$1(u,u,-i),c.rotateX$1(u,u,-f),u}function Tr(f,i){const u=[f[0],f[1],0],p=[i[0],i[1],0];if(c.length(u)>=1e-15){const T=c.normalize([],u);c.scale(p,T,c.dot(p,T)),i[0]=p[0],i[1]=p[1]}const v=c.cross([],i,f);if(c.len(v)<1e-15)return null;const w=Math.atan2(-v[1],v[0]);return lo(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),w)}class mi{constructor(i,u){this.position=i,this.orientation=u}get position(){return this._position}set position(i){this._position=this._renderWorldCopies?function(u){if(!u)return;const p=Array.isArray(u)?new c.MercatorCoordinate(u[0],u[1],u[2]):u;return p.x=c.wrap(p.x,0,1),p}(i):i}lookAtPoint(i,u){if(this.orientation=null,!this.position)return;const p=this._elevation?this._elevation.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(i)):0,v=this.position,w=c.MercatorCoordinate.fromLngLat(i,p),T=[w.x-v.x,w.y-v.y,w.z-v.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=Tr(T,u)}setPitchBearing(i,u){this.orientation=lo(c.degToRad(i),c.degToRad(-u))}}class Pi{constructor(i,u){this._transform=c.identity([]),this._orientation=c.identity$1([]),u&&(this._orientation=u,qo(this._transform,this._orientation)),i&&Kr(this._transform,i)}get mercatorPosition(){const i=this.position;return new c.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=hs(this._transform,3);return[i[0],i[1],i[2]]}set position(i){Kr(this._transform,i)}get orientation(){return this._orientation}set orientation(i){this._orientation=i,qo(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,u){this._orientation=lo(i,u),qo(this._transform,this._orientation)}forward(){const i=hs(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=hs(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=hs(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,u){const p=new Float64Array(16);return c.invert(p,this.getWorldToCamera(i,u)),p}getWorldToCameraPosition(i,u,p){const v=this.position;c.scale(v,v,-i);const w=new Float64Array(16);return c.fromScaling(w,[p,p,p]),c.translate(w,w,v),w[10]*=u,w}getWorldToCamera(i,u){const p=new Float64Array(16),v=new Float64Array(4),w=this.position;return c.conjugate(v,this._orientation),c.scale(w,w,-i),c.fromQuat(p,v),c.translate(p,p,w),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=u,p[9]*=u,p[10]*=u,p[11]*=u,p}getCameraToClipPerspective(i,u,p,v){const w=new Float64Array(16);return c.perspective(w,i,u,p,v),w}getDistanceToElevation(i){const u=0===i?0:c.mercatorZfromAltitude(i,this.position[1]),p=this.forward();return(u-this.position[2])/p[2]}clone(){return new Pi([...this.position],[...this.orientation])}}class zi{constructor(i,u,p,v,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===w||w,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=null==p?0:p,this._maxPitch=null==v?60:v,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new Pi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const i=new zi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._cameraZoom=this._cameraZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,i?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(i){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),i&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return c.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.wrap(i,-180,180)*Math.PI/180;var p,v,w,T,k,G,te,he,_e,we;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(p=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),v=this.rotationMatrix,T=this.angle,k=(w=this.rotationMatrix)[0],G=w[1],te=w[2],he=w[3],_e=Math.sin(T),we=Math.cos(T),v[0]=k*we+te*_e,v[1]=G*we+he*_e,v[2]=k*-_e+te*we,v[3]=G*-_e+he*we)}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const i=this._elevation.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(this.center),-1);return-1===i?(this._cameraZoom=null,!1):(this._centerAltitude=i,!0)}_updateCameraOnTerrain(){const i=this.cameraToCenterDistance/this.worldSize,u=c.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(u+i)}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let v=0,w=0;for(let T=0;T<u.length;T++){const k=new c.pointGeometry(u[T][0]*this.width,p+u[T][1]*(this.height-p)),G=i.pointCoordinate(k);if(!G)continue;const te=1/Math.hypot(G[0]-this._camera.position[0],G[1]-this._camera.position[1]);v+=G[3]*te,w+=te}return 0===w?NaN:v/w}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const i=this._cameraZoom,u=this._elevation.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(this.center)),p=c.mercatorZfromAltitude(u,this.center.lat),v=this._mercatorZfromZoom(i),w=this._mercatorZfromZoom(this._maxZoom),T=Math.max(v-p,w);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[u.x,u.y,u.z]:[i.x,i.y,i.z];const v=c.length(c.sub([],this._camera.position,p));return c.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let u=!1;if(i.orientation&&!c.exactEquals(i.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];c.exactEquals$1(p,this._camera.position)||(this._setCameraPosition(p),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,u=new mi;return u.position=new c.MercatorCoordinate(i[0],i[1],i[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this._renderWorldCopies,u}_setCameraOrientation(i){if(!c.length$1(i))return!1;c.normalize$1(i,i);const u=c.transformQuat([],[0,0,-1],i),p=c.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const v=Tr(u,p);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(i){const u=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;i[2]=c.clamp(i[2],v/p,v/u),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.pointGeometry(0,0)),v=this.pointCoordinate(new c.pointGeometry(this.width,0)),w=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),T=this.pointCoordinate(new c.pointGeometry(0,this.height)),k=Math.floor(Math.min(p.x,v.x,w.x,T.x)),G=Math.floor(Math.max(p.x,v.x,w.x,T.x)),te=1;for(let he=k-te;he<=G+te;he++)0!==he&&u.push(new c.UnwrappedTileID(he,i))}return u}coveringTiles(i){let u=this.coveringZoomLevel(i);const p=u,v=this.elevation&&!i.isTerrainDEM;if(void 0!==i.minzoom&&u<i.minzoom)return[];void 0!==i.maxzoom&&u>i.maxzoom&&(u=i.maxzoom);const w=c.MercatorCoordinate.fromLngLat(this.center),T=1<<u,k=[T*w.x,T*w.y,0],G=kt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u),te=this.pointCoordinate(this.getCameraPoint()),he=T*c.mercatorZfromAltitude(1,this.center.lat),_e=this._camera.position[2]/c.mercatorZfromAltitude(1,this.center.lat),we=[T*te.x,T*te.y,_e],Re=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),je=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?u:0,He=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_t=i.isTerrainDEM?-He:this._elevation?this._elevation.getMinElevationBelowMSL():0,Le=ut=>({aabb:new Kt([ut*T,0,_t],[(ut+1)*T,T,He]),zoom:0,x:0,y:0,wrap:ut,fullyVisible:!1}),Ye=[],nt=[],Ct=u,Je=i.reparseOverscaled?p:u,ht=ut=>{if(!this._elevation||!ut.tileID)return;const jn=this._elevation.getMinMaxForTile(ut.tileID),Tn=ut.aabb;jn?(Tn.min[2]=jn.min,Tn.max[2]=jn.max,Tn.center[2]=(Tn.min[2]+Tn.max[2])/2):(ut.shouldSplit=vn(ut),ut.shouldSplit||(Tn.min[2]=Tn.max[2]=Tn.center[2]=this._centerAltitude))},ln=ut=>ut*ut,fn=ln((_e-this._centerAltitude)*he),vn=ut=>{if(ut.zoom<je)return!0;if(ut.zoom===Ct)return!1;if(null!=ut.shouldSplit)return ut.shouldSplit;const jn=ut.aabb.distanceX(we),Tn=ut.aabb.distanceY(we);let gi=fn;v&&(gi=ln(ut.aabb.distanceZ(we)*he));const qn=jn*jn+Tn*Tn+gi;return qn<ln((1<<Ct-ut.zoom)*Re*((Gn,Hi)=>{if(Hi*ln(.707)<Gn)return 1;const Si=Math.sqrt(Hi/Gn);return Si/(1.4144271570014144+(Math.pow(1.1,Si-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(gi,fn),qn))};if(this._renderWorldCopies)for(let ut=1;ut<=3;ut++)Ye.push(Le(-ut)),Ye.push(Le(ut));for(Ye.push(Le(0));Ye.length>0;){const ut=Ye.pop(),jn=ut.x,Tn=ut.y;let gi=ut.fullyVisible;if(!gi){const qn=ut.aabb.intersects(G);if(0===qn)continue;gi=2===qn}if(ut.zoom!==Ct&&vn(ut))for(let qn=0;qn<4;qn++){const Gn=(jn<<1)+qn%2,Hi=(Tn<<1)+(qn>>1),Si={aabb:ut.aabb.quadrant(qn),zoom:ut.zoom+1,x:Gn,y:Hi,wrap:ut.wrap,fullyVisible:gi,tileID:void 0,shouldSplit:void 0};v&&(Si.tileID=new c.OverscaledTileID(ut.zoom+1===Ct?Je:ut.zoom+1,ut.wrap,ut.zoom+1,Gn,Hi),ht(Si)),Ye.push(Si)}else{const qn=ut.zoom===Ct?Je:ut.zoom;if(i.minzoom&&i.minzoom>qn)continue;const Gn=k[0]-(.5+jn+(ut.wrap<<ut.zoom))*(1<<u-ut.zoom),Hi=k[1]-.5-Tn,Si=ut.tileID?ut.tileID:new c.OverscaledTileID(qn,ut.wrap,ut.zoom,jn,Tn);nt.push({tileID:Si,distanceSq:Gn*Gn+Hi*Hi})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq;nt.splice(0,nt.length,...nt.filter(jn=>{const Tn=[0,0,0,1],gi=[c.EXTENT,c.EXTENT,0,1],qn=this.calculateFogTileMatrix(jn.tileID.toUnwrapped());c.transformMat4(Tn,Tn,qn),c.transformMat4(gi,gi,qn);const Gn=c.getAABBPointSquareDist(Tn,gi);if(0===Gn)return!0;let Hi=!1;const Si=this.horizonLineFromTop();if(Gn>ut&&0!==Si){const Er=this.calculateProjMatrix(jn.tileID.toUnwrapped());let Ir;v&&this._elevation&&(Ir=this._elevation.getMinMaxForTile(jn.tileID)),Ir||(Ir={min:_t,max:He});const Zr=c.furthestTileCorner(this.bearing),or=[Zr[0]*c.EXTENT,Zr[1]*c.EXTENT,Ir.max];c.transformMat4$1(or,or,Er),Hi=(1-or[1])*this.height*.5<Si}return Gn<ut||Hi}))}return nt.sort((ut,jn)=>ut.distanceSq-jn.distanceSq).map(ut=>ut.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(i.lng)*this.worldSize,c.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new c.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),v=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(i),T=new c.MercatorCoordinate(w.x-(p.x-v.x),w.y-(p.y-v.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(i){this.center=this.coordinateLocation(i),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this._coordinatePoint(this.locationCoordinate(i),!1)}locationPoint3D(i){return this._coordinatePoint(this.locationCoordinate(i),!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i){return c.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointRayIntersection(i,u){const p=null!=u?u:this._centerAltitude,v=[i.x,i.y,0,1],w=[i.x,i.y,1,1];c.transformMat4(v,v,this.pixelMatrixInverse),c.transformMat4(w,w,this.pixelMatrixInverse);const T=w[3];c.scale$2(v,v,1/v[3]),c.scale$2(w,w,1/T);const k=v[2],G=w[2];return{p0:v,p1:w,t:k===G?0:(p-k)/(G-k)}}screenPointToMercatorRay(i){const u=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return c.transformMat4(u,u,this.pixelMatrixInverse),c.transformMat4(p,p,this.pixelMatrixInverse),c.scale$2(u,u,1/u[3]),c.scale$2(p,p,1/p[3]),u[2]=c.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,p[2]=c.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,c.scale$2(u,u,1/this.worldSize),c.scale$2(p,p,1/this.worldSize),new St([u[0],u[1],u[2]],c.normalize([],c.sub([],p,u)))}rayIntersectionCoordinate(i){const{p0:u,p1:p,t:v}=i,w=c.mercatorZfromAltitude(u[2],this._center.lat),T=c.mercatorZfromAltitude(p[2],this._center.lat);return new c.MercatorCoordinate(c.number(u[0],p[0],v)/this.worldSize,c.number(u[1],p[1],v)/this.worldSize,c.number(w,T,v))}pointCoordinate(i){const u=this.horizonLineFromTop(!1),p=new c.pointGeometry(i.x,Math.max(u,i.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(p))}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);const u=this.elevation;let p=this.elevation.pointCoordinate(i);if(p)return new c.MercatorCoordinate(p[0],p[1],p[2]);let v=0,w=this.horizonLineFromTop();if(i.y>w)return this.pointCoordinate(i);const T=.02*w,k=i.clone();for(let G=0;G<10&&w-v>T;G++){k.y=c.number(v,w,.66);const te=u.pointCoordinate(k);te?(w=k.y,p=te):v=k.y}return p?new c.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){if(this.elevation)return!this.elevation.pointCoordinate(i);{const u=this.horizonLineFromTop();return i.y<u}}_coordinatePoint(i,u){const p=u&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,v=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return c.transformMat4(v,v,this.pixelMatrix),v[3]>0?new c.pointGeometry(v[0]/v[3],v[1]/v[3]):new c.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new c.LngLatBounds).extend(this.pointLocation(new c.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new c.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new c.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new c.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const i=this.elevation,u=i.visibleDemTiles.reduce((v,w)=>{if(w.dem){const T=w.dem.tree;v.min=Math.min(v.min,T.minimums[0]),v.max=Math.max(v.max,T.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});u.min*=i.exaggeration(),u.max*=i.exaggeration();const p=this.horizonLineFromTop();return[new c.pointGeometry(0,p),new c.pointGeometry(this.width,p),new c.pointGeometry(this.width,this.height),new c.pointGeometry(0,this.height)].reduce((v,w)=>v.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(w,u.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(w,u.max)))),new c.LngLatBounds)}horizonLineFromTop(i=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,p=this.height/2-.97*u;return i?Math.max(0,p):p}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u){const p=i.canonical,v=u/this.zoomScale(p.z),w=p.x+Math.pow(2,p.z)*i.wrap,T=c.identity(new Float64Array(16));return c.translate(T,T,[w*v,p.y*v,0]),c.scale$1(T,T,[v/c.EXTENT,v/c.EXTENT,1]),T}calculateFogTileMatrix(i){const u=i.key,p=this._fogTileMatrixCache;if(p[u])return p[u];const v=this.calculatePosMatrix(i,this.cameraWorldSize);return c.multiply(v,this.worldToFogMatrix,v),p[u]=new Float32Array(v),p[u]}calculateProjMatrix(i,u=!1){const p=i.key,v=u?this._alignedProjMatrixCache:this._projMatrixCache;if(v[p])return v[p];const w=this.calculatePosMatrix(i,this.worldSize);return c.multiply(w,u?this.alignedProjMatrix:this.projMatrix,w),v[p]=new Float32Array(w),v[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const u=this._camera.position,p=this._camera.forward();if(u[2]<=0||p[2]>=0)return;const v=c.mercatorZfromAltitude(1,this._center.lat);u[2]/=v,p[2]/=v,c.normalize(p,p);const w=i.raycast(u,p,i.exaggeration());if(w){const T=c.scaleAndAdd([],u,p,w),k=new c.MercatorCoordinate(T[0],T[1],c.mercatorZfromAltitude(T[2],c.latFromMercatorY(T[1]))),G=this._camera.position,te=k.z+c.length([k.x-G[0],k.y-G[1],k.z-G[2]]);this._cameraZoom=this._zoomFromMercatorZ(te),this._centerAltitude=k.toAltitude(),this._center=k.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const u=i.getAtPointOrZero(this._camera.mercatorPosition),p=this._minimumHeightOverTerrain()*Math.cos(c.degToRad(this._maxPitch)),v=c.mercatorZfromAltitude(u,this._center.lat),w=this._camera.position[2]-v;if(w<p){const T=c.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),k=this._camera.mercatorPosition,G=[T.x-k.x,T.y-k.y,T.z-k.z],te=c.length(G);G[2]-=p-w;const he=c.length(G);if(0===he)return;c.scale(G,G,te/he),this._camera.position=[T.x-G[0],T.y-G[1],T.z-G[2]],this._camera.orientation=Tr(G,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,v,w=-90,T=90,k=-180,G=180;const te=this.size,he=this._unmodified;if(this.latRange){const Re=this.latRange;w=c.mercatorYfromLat(Re[1])*this.worldSize,T=c.mercatorYfromLat(Re[0])*this.worldSize,i=T-w<te.y?te.y/(T-w):0}if(this.lngRange){const Re=this.lngRange;k=c.mercatorXfromLng(Re[0])*this.worldSize,G=c.mercatorXfromLng(Re[1])*this.worldSize,u=G-k<te.x?te.x/(G-k):0}const _e=this.point,we=Math.max(u||0,i||0);if(we)return this.center=this.unproject(new c.pointGeometry(u?(G+k)/2:_e.x,i?(T+w)/2:_e.y)),this.zoom+=this.scaleZoom(we),this._unmodified=he,void(this._constraining=!1);if(this.latRange){const Re=_e.y,je=te.y/2;Re-je<w&&(v=w+je),Re+je>T&&(v=T-je)}if(this.lngRange){const Re=_e.x,je=te.x/2;Re-je<k&&(p=k+je),Re+je>G&&(p=G-je)}void 0===p&&void 0===v||(this.center=this.unproject(new c.pointGeometry(void 0!==p?p:_e.x,void 0!==v?v:_e.y))),this._constrainCameraAltitude(),this._unmodified=he,this._constraining=!1}_minZoomForBounds(){const i=(v,w)=>Math.log2(v/(this.tileSize*Math.abs(w[1]-w[0])));let u=0;if(this.latRange){const v=this.latRange;u=i(this.height,[c.mercatorYfromLat(v[0]),c.mercatorYfromLat(v[1])])}let p=0;if(this.lngRange){const v=this.lngRange;p=i(this.width,[c.mercatorXfromLng(v[0]),c.mercatorXfromLng(v[1])])}return Math.max(u,p)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const u=this.pixelsPerMeter;this._updateCameraState();const p=Math.PI/2+this._pitch,v=this.fovAboveCenter,w=this.elevation?this.elevation.getMinElevationBelowMSL()*u:0,T=(this._camera.position[2]*this.worldSize-w)/Math.cos(this._pitch),k=Math.sin(v)*T/Math.sin(c.clamp(Math.PI-p-v,.01,Math.PI-.01)),G=this.point,te=G.x,he=G.y,_e=Math.cos(Math.PI/2-this._pitch)*k+T,we=Math.min(1.01*_e,T*(1/this._horizonShift)),Re=this.height/50,je=this._camera.getWorldToCamera(this.worldSize,u),He=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,Re,we);He[8]=2*-i.x/this.width,He[9]=2*i.y/this.height;let _t=c.mul$1([],He,je);this.mercatorMatrix=c.scale$1([],_t,[this.worldSize,this.worldSize,this.worldSize/u]),this.projMatrix=_t,this.invProjMatrix=c.invert(new Float64Array(16),this.projMatrix);const Le=new Float32Array(16);c.identity(Le),c.scale$1(Le,Le,[1,-1,1]),c.rotateX(Le,Le,this._pitch),c.rotateZ(Le,Le,this.angle);const Ye=c.perspective(new Float32Array(16),this._fov,this.width/this.height,Re,we),nt=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ye[8]=2*-i.x/this.width,Ye[9]=2*(i.y+nt)/this.height,this.skyboxMatrix=c.multiply(Le,Ye,Le);const Ct=this.width%2/2,Je=this.height%2/2,ht=Math.cos(this.angle),ln=Math.sin(this.angle),fn=te-Math.round(te)+ht*Ct+ln*Je,vn=he-Math.round(he)+ht*Je+ln*Ct,ut=new Float64Array(_t);if(c.translate(ut,ut,[fn>.5?fn-1:fn,vn>.5?vn-1:vn,0]),this.alignedProjMatrix=ut,_t=c.create$1(),c.scale$1(_t,_t,[this.width/2,-this.height/2,1]),c.translate(_t,_t,[1,-1,0]),this.labelPlaneMatrix=_t,_t=c.create$1(),c.scale$1(_t,_t,[1,-1,1]),c.translate(_t,_t,[-1,-1,0]),c.scale$1(_t,_t,[2/this.width,2/this.height,1]),this.glCoordMatrix=_t,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),_t=c.invert(new Float64Array(16),this.pixelMatrix),!_t)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_t,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,u=this.cameraPixelsPerMeter,p=this._camera.position,v=1/this.height,w=[i,i,u];c.scale(w,w,v),c.scale(p,p,-1),c.multiply$1(p,p,w);const T=c.create$1();c.translate(T,T,p),c.scale$1(T,T,w),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,u,v)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const i=this._camera.forward(),u=this.cameraToCenterDistance,p=this.point,v=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-c.mercatorZfromAltitude(this._centerAltitude,this.center.lat),w=this.cameraToCenterDistance/v;this._camera.position=[p.x/this.worldSize-i[0]*u/w,p.y/this.worldSize-i[1]*u/w,c.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-i[2]*u/w]}_translateCameraConstrained(i){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=i[2];let v=1;p>0&&(v=Math.min((u-this._camera.position[2])/p,1)),this._camera.position=c.scaleAndAdd([],this._camera.position,i,v),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,u=this._camera.forward(),{pitch:p,bearing:v}=this._camera.getPitchBearing(),w=c.mercatorZfromAltitude(this._centerAltitude,this.center.lat),T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(c.degToRad(this._maxPitch)),k=Math.max((i[2]-w)/Math.cos(p),T),G=this._zoomFromMercatorZ(k);c.scaleAndAdd(i,i,u,k),this._pitch=c.clamp(p,c.degToRad(this.minPitch),c.degToRad(this.maxPitch)),this.angle=c.wrap(v,-Math.PI,Math.PI),this._setZoom(c.clamp(G,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new c.MercatorCoordinate(i[0],i[1],i[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(i,u){const p=Math.min(i.x,u.x),v=Math.max(i.x,u.x),w=Math.min(i.y,u.y),T=Math.max(i.y,u.y),k=[new c.pointGeometry(p,w),new c.pointGeometry(v,T),new c.pointGeometry(p,T),new c.pointGeometry(v,w)],G=this._renderWorldCopies?-3:0,te=this._renderWorldCopies?4:1;for(const he of k){const _e=this.pointRayIntersection(he);if(_e.t<0)return!0;const we=this.rayIntersectionCoordinate(_e);if(we.x<G||we.y<0||we.x>te||we.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+c.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new c.pointGeometry(0,0),new c.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,u){const p=c.length(c.sub([],this._camera.position,i)),v=this._zoomFromMercatorZ(p)+u;return p-this._mercatorZfromZoom(v)}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,i))}}function pr(f,i){let u=!1,p=null;const v=()=>{p=null,u&&(f(),p=setTimeout(v,i),u=!1)};return()=>(u=!0,p||v(),p)}class Es{constructor(i){this._hashName=i&&encodeURIComponent(i),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=pr(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,c.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return c.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,v=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),T=Math.round(u.lng*w)/w,k=Math.round(u.lat*w)/w,G=this._map.getBearing(),te=this._map.getPitch();let he="";if(he+=i?`/${T}/${k}/${p}`:`${p}/${k}/${T}`,(G||te)&&(he+="/"+Math.round(10*G)/10),te&&(he+=`/${Math.round(te)}`),this._hashName){const _e=this._hashName;let we=!1;const Re=c.window.location.hash.slice(1).split("&").map(je=>{const He=je.split("=")[0];return He===_e?(we=!0,`${He}=${he}`):je}).filter(je=>je);return we||Re.push(`${_e}=${he}`),`#${Re.join("&")}`}return`#${he}`}_getCurrentHash(){const i=c.window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(u=p)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=c.window.location.href.replace(/(#.+)?$/,this.getHashString());c.window.history.replaceState(c.window.history.state,null,i)}}const Ws={linearity:.3,easing:c.bezier(0,0,.3,1)},as=c.extend({deceleration:2500,maxSpeed:1400},Ws),Ys=c.extend({deceleration:20,maxSpeed:1400},Ws),Br=c.extend({deceleration:1e3,maxSpeed:360},Ws),Wo=c.extend({deceleration:1e3,maxSpeed:90},Ws);class Ks{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const w=Vs(u.pan.mag(),p,c.extend({},as,i||{}));v.offset=u.pan.mult(w.amount/u.pan.mag()),v.center=this._map.transform.center,Oo(v,w)}if(u.zoom){const w=Vs(u.zoom,p,Ys);v.zoom=this._map.transform.zoom+w.amount,Oo(v,w)}if(u.bearing){const w=Vs(u.bearing,p,Br);v.bearing=this._map.transform.bearing+c.clamp(w.amount,-179,179),Oo(v,w)}if(u.pitch){const w=Vs(u.pitch,p,Wo);v.pitch=this._map.transform.pitch+w.amount,Oo(v,w)}if(v.zoom||v.bearing){const w=void 0===u.pinchAround?u.around:u.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),c.extend(v,{noMoveStart:!0})}}function Oo(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function Vs(f,i,u){const{maxSpeed:p,linearity:v,deceleration:w}=u,T=c.clamp(f*v/(i/1e3),-p,p),k=Math.abs(T)/(w*v);return{easing:u.easing,duration:1e3*k,amount:T*(k/2)}}class Qr extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,v={}){const w=xe.mousePos(u.getCanvasContainer(),p),T=u.unproject(w);super(i,c.extend({point:w,lngLat:T,originalEvent:p},v)),this._defaultPrevented=!1,this.target=u}}class ia extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const v="touchend"===i?p.changedTouches:p.touches,w=xe.touchPos(u.getCanvasContainer(),v),T=w.map(G=>u.unproject(G)),k=w.reduce((G,te,he,_e)=>G.add(te.div(_e.length)),new c.pointGeometry(0,0));super(i,{points:w,point:k,lngLats:T,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Pc extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Ja{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Pc(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Qr(i.type,this._map,i))}mouseup(i){this._map.fire(new Qr(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Qr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Qr(i.type,this._map,i))}mouseover(i){this._map.fire(new Qr(i.type,this._map,i))}mouseout(i){this._map.fire(new Qr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ia(i.type,this._map,i))}touchmove(i){this._map.fire(new ia(i.type,this._map,i))}touchend(i){this._map.fire(new ia(i.type,this._map,i))}touchcancel(i){this._map.fire(new ia(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _s{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Qr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Qr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fc{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&0===i.button&&(xe.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=p,this._box||(this._box=xe.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const w=Math.min(v.x,p.x),T=Math.max(v.x,p.x),k=Math.min(v.y,p.y),G=Math.max(v.y,p.y);this._map._requestDomTask(()=>{this._box&&(xe.setTransform(this._box,`translate(${w}px,${k}px)`),this._box.style.width=T-w+"px",this._box.style.height=G-k+"px")})}mouseupWindow(i,u){if(!this._active||0!==i.button)return;const p=this._startPos,v=u;if(this.reset(),xe.suppressClick(),p.x!==v.x||p.y!==v.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:w=>w.fitScreenCoordinates(p,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(xe.remove(this._box),this._box=null),xe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.Event(i,{originalEvent:u}))}}function Ga(f,i){const u={};for(let p=0;p<f.length;p++)u[f[p].identifier]=i[p];return u}class uc{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(v){const w=new c.pointGeometry(0,0);for(const T of v)w._add(T);return w.div(v.length)}(u),this.touches=Ga(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const v=Ga(p,u);for(const w in this.touches){const T=this.touches[w],k=v[w];(!k||k.dist(T)>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ia{constructor(i){this.singleTap=new uc(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const v=this.singleTap.touchend(i,u,p);if(v){const w=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(w&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class el{constructor(){this._zoomIn=new Ia({numTouches:1,numTaps:2}),this._zoomOut=new Ia({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const v=this._zoomIn.touchend(i,u,p),w=this._zoomOut.touchend(i,u,p);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(v)},{originalEvent:i})}):w?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(w)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _l={0:1,2:2};class Fs{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const p=xe.mouseButton(i);this._correctButton(i,p)&&(this._lastPoint=u,this._eventButton=p)}mousemoveWindow(i,u){const p=this._lastPoint;if(p)if(i.preventDefault(),function(v,w){const T=_l[w];return void 0===v.buttons||(v.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(p,u)}mouseupWindow(i){this._lastPoint&&xe.mouseButton(i)===this._eventButton&&(this._moved&&xe.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yl extends Fs{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return 0===u&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class Yo extends Fs{_correctButton(i,u){return 0===u&&i.ctrlKey||2===u}_move(i,u){const p=.8*(u.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class vl extends Fs{_correctButton(i,u){return 0===u&&i.ctrlKey||2===u}_move(i,u){const p=-.5*(u.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class co{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const v=Ga(p,u),w=new c.pointGeometry(0,0),T=new c.pointGeometry(0,0);let k=0;for(const te in v){const he=v[te],_e=this._touches[te];_e&&(w._add(he),T._add(he.sub(_e)),k++,v[te]=he)}if(this._touches=v,k<this._minTouches||!T.mag())return;const G=T.div(k);return this._sum._add(G),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(k),panDelta:G}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ra{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,p){return{}}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[v,w]=this._firstTwoTouches,T=Pa(p,u,v),k=Pa(p,u,w);if(!T||!k)return;const G=this._aroundCenter?null:T.add(k).div(2);return this._move([T,k],G,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,T=Pa(p,u,v),k=Pa(p,u,w);T&&k||(this._active&&xe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pa(f,i,u){for(let p=0;p<f.length;p++)if(f[p].identifier===u)return i[p]}function sa(f,i){return Math.log(f/i)/Math.LN2}class xl extends ra{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(sa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:sa(this._distance,p),pinchAround:u}}}function ru(f,i){return 180*f.angleWith(i)/Math.PI}class dc extends ra{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ru(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=ru(i,this._startVector);return Math.abs(p)<u}}function Fa(f){return Math.abs(f.y)>Math.abs(f.x)}class oa extends ra{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Fa(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){const v=i[0].sub(this._lastPoints[0]),w=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,w,p.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+w.y)/2*-.5}}gestureBeginsVertically(i,u,p){if(void 0!==this._valid)return this._valid;const v=i.mag()>=2,w=u.mag()>=2;if(!v&&!w)return;if(!v||!w)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==u.y>0;return Fa(i)&&Fa(u)&&T}}const Rc={panStep:100,bearingStep:15,pitchStep:10};class tl{constructor(){const i=Rc;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,v=0,w=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),w=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),w=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:k=>{const G=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:$a,zoom:u?Math.round(G)+u*(i.shiftKey?2:1):G,bearing:k.getBearing()+p*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-w*this._panStep,-T*this._panStep],center:k.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $a(f){return f*(2-f)}const si=4.000244140625;class bl{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let u=i.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=c.exported.now(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==u&&u%si==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=xe.mousePos(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,u=()=>i._terrainEnabled()?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(0!==this._delta){const G="wheel"===this._type&&Math.abs(this._delta)>si?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&0!==te&&(te=1/te);const he=u(),_e=Math.pow(2,he),we="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):_e;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(we*te))),"wheel"===this._type&&(this._startZoom=u(),this._easing=this._smoothOutEasing(200)),this._delta=0}const p="number"==typeof this._targetZoom?this._targetZoom:u(),v=this._startZoom,w=this._easing;let T,k=!1;if("wheel"===this._type&&v&&w){const G=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),te=w(G);T=c.number(v,p,te),G<1?this._frameId||(this._frameId=!0):k=!0}else T=p,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:T-u(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.ease;if(this._prevEase){const p=this._prevEase,v=(c.exported.now()-p.start)/p.duration,w=p.easing(v+.01)-p.easing(v),T=.27/Math.sqrt(w*w+1e-4)*.01,k=Math.sqrt(.0729-T*T);u=c.bezier(T,k,.25,1)}return this._prevEase={start:c.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class wl{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Cl{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ra{constructor(){this._tap=new Ia({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=u[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,u,p))}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=u[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){this._tapTime?this._swipePoint&&0===p.length&&this.reset():this._tap.touchend(i,u,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hc{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fc{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $l{constructor(i,u,p,v){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const El=f=>f.zoom||f.drag||f.pitch||f.rotate;class su extends c.Event{}class L{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,u){const p=c.sub([],u,i);this.radius=c.length(p[2]<0?c.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){c.div(i,i,this.constants),c.normalize(i,i),c.mul$2(i,i,this.constants);const u=c.scale([],i,this.radius);if(u[2]>0){const p=c.scale([],[0,0,1],c.dot(u,[0,0,1])),v=c.scale([],c.normalize([],[u[0],u[1],0]),this.radius),w=c.add([],u,c.scale([],c.sub([],c.add([],v,p),u),2));u[0]=w[0],u[1]=w[1]}return u}}function P(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class M{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ks(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new L,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),c.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[c.window,"blur",void 0]];for(const[v,w,T]of this._listeners)xe.addEventListener(v,w,v===c.window.document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,u,p]of this._listeners)xe.removeEventListener(i,u,i===c.window.document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ja(u,i));const v=u.boxZoom=new Fc(u,i);this._add("boxZoom",v);const w=new el,T=new Cl;u.doubleClickZoom=new wl(T,w),this._add("tapZoom",w),this._add("clickZoom",T);const k=new Ra;this._add("tapDragZoom",k);const G=u.touchPitch=new oa;this._add("touchPitch",G);const te=new Yo(i),he=new vl(i);u.dragRotate=new fc(i,te,he),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",he,["mouseRotate"]);const _e=new yl(i),we=new co(i);u.dragPan=new hc(p,_e,we),this._add("mousePan",_e),this._add("touchPan",we,["touchZoom","touchRotate"]);const Re=new dc,je=new xl;u.touchZoomRotate=new $l(p,je,Re,k),this._add("touchRotate",Re,["touchPan","touchZoom"]),this._add("touchZoom",je,["touchPan","touchRotate"]),this._add("blockableMapEvent",new _s(u));const He=u.scrollZoom=new bl(u,this);this._add("scrollZoom",He,["mousePan"]);const _t=u.keyboard=new tl;this._add("keyboard",_t);for(const Le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[Le]&&u[Le].enable(i[Le])}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(El(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,p){for(const v in i)if(v!==p&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}handleEvent(i,u){if("blur"===i.type)return void this.stop(!0);this._updatingCamera=!0;const p="renderFrame"===i.type,v=p?void 0:i,w={needsRenderFrame:!1},T={},k={},G=i.touches?this._getMapTouches(i.touches):void 0,te=G?xe.touchPos(this._el,G):p?void 0:xe.mousePos(this._el,i);for(const{handlerName:we,handler:Re,allowed:je}of this._handlers){if(!Re.isEnabled())continue;let He;this._blockedByActive(k,je,we)?Re.reset():Re[u||i.type]&&(He=Re[u||i.type](i,te,G),this.mergeHandlerResult(w,T,He,we,v),He&&He.needsRenderFrame&&this._triggerRenderFrame()),(He||Re.isActive())&&(k[we]=Re)}const he={};for(const we in this._previousActiveHandlers)k[we]||(he[we]=v);this._previousActiveHandlers=k,(Object.keys(he).length||P(w))&&(this._changes.push([w,T,he]),this._triggerRenderFrame()),(Object.keys(k).length||P(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:_e}=w;_e&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_e(this._map))}mergeHandlerResult(i,u,p,v,w){if(!p)return;c.extend(i,p);const T={handlerName:v,originalEvent:p.originalEvent||w};void 0!==p.zoomDelta&&(u.zoom=T),void 0!==p.panDelta&&(u.drag=T),void 0!==p.pitchDelta&&(u.pitch=T),void 0!==p.bearingDelta&&(u.rotate=T)}_applyChanges(){const i={},u={},p={};for(const[v,w,T]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new c.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),void 0!==v.around&&(i.around=v.around),void 0!==v.aroundCoord&&(i.aroundCoord=v.aroundCoord),void 0!==v.pinchAround&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),c.extend(u,w),c.extend(p,T);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const v=this._map,w=v.transform,T=Ye=>[Ye.x,Ye.y,Ye.z];if((Ye=>{const nt=this._eventsInProgress.drag;return nt&&!this._handlersById[nt.handlerName].isActive()})()&&!P(i)){const Ye=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",Ye!==w.zoom&&this._map._update(!0)}if(!P(i))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:G,bearingDelta:te,pitchDelta:he,around:_e,aroundCoord:we,pinchAround:Re}=i;void 0!==Re&&(_e=Re),(Ye=>u.drag&&!this._eventsInProgress.drag)()&&_e&&(this._dragOrigin=T(w.pointCoordinate3D(_e)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",v._stop(!0),_e=_e||v.transform.centerPoint,te&&(w.bearing+=te),he&&(w.pitch+=he),w._updateCameraState();const je=[0,0,0];if(k){const Ye=w.screenPointToMercatorRay(_e),nt=w.screenPointToMercatorRay(_e.sub(k)),Ct=this._trackingEllipsoid.projectRay(Ye.dir),Je=this._trackingEllipsoid.projectRay(nt.dir);je[0]=Je[0]-Ct[0],je[1]=Je[1]-Ct[1]}const He=w.zoom,_t=[0,0,0];if(G){const Ye=T(we||w.pointCoordinate3D(_e)),nt={dir:c.normalize([],c.sub([],Ye,w._camera.position))},Ct=w.screenPointToMercatorRay(w.centerPoint);if(nt.dir[2]<0){const Je=c.altitudeFromMercatorZ(Ye[2],Ye[1]),ht=w.rayIntersectionCoordinate(w.pointRayIntersection(w.centerPoint,Je)),ln=w.zoomDeltaToMovement(T(ht),G)*(Ct.dir[2]/nt.dir[2]);c.scale(_t,nt.dir,ln)}else if(w._terrainEnabled()){const Je=w.zoomDeltaToMovement(Ye,G);c.scale(_t,nt.dir,Je)}}const Le=c.add(je,je,_t);w._translateCameraConstrained(Le),G&&Math.abs(w.zoom-He)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const v=El(this._eventsInProgress),w=El(i),T={};for(const he in i){const{originalEvent:_e}=i[he];this._eventsInProgress[he]||(T[`${he}start`]=_e),this._eventsInProgress[he]=i[he]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const he in T)this._fireEvent(he,T[he]);w&&this._fireEvent("move",w.originalEvent);for(const he in i){const{originalEvent:_e}=i[he];this._fireEvent(he,_e)}const k={};let G;for(const he in this._eventsInProgress){const{handlerName:_e,originalEvent:we}=this._eventsInProgress[he];this._handlersById[_e].isActive()||(delete this._eventsInProgress[he],G=u[_e]||we,k[`${he}end`]=G)}for(const he in k)this._fireEvent(he,k[he]);const te=El(this._eventsInProgress);if(p&&(v||w)&&!te){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_e=we=>0!==we&&-this._bearingSnap<we&&we<this._bearingSnap;he?(_e(he.bearing||this._map.getBearing())&&(he.bearing=0),this._map.easeTo(he,{originalEvent:G})):(this._map.fire(new c.Event("moveend",{originalEvent:G})),_e(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new su("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Y extends c.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=c.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,c.extend({offset:i},u),p)}panTo(i,u,p){return this.easeTo(c.extend({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(c.extend({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(c.extend({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,c.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=c.LngLatBounds.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_extendCameraOptions(i){const u={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=c.extend({padding:u,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const p=i.padding;i.padding={top:p,bottom:p,right:p,left:p}}return i.padding=c.extend(u,i.padding),i}_cameraForBoxAndBearing(i,u,p,v){const w=this._extendCameraOptions(v),T=this.transform,k=T.padding,G=T.project(c.LngLat.convert(i)),te=T.project(c.LngLat.convert(u)),he=G.rotate(-c.degToRad(p)),_e=te.rotate(-c.degToRad(p)),we=new c.pointGeometry(Math.max(he.x,_e.x),Math.max(he.y,_e.y)),Re=new c.pointGeometry(Math.min(he.x,_e.x),Math.min(he.y,_e.y)),je=we.sub(Re),He=(T.width-(k.left+k.right+w.padding.left+w.padding.right))/je.x,_t=(T.height-(k.top+k.bottom+w.padding.top+w.padding.bottom))/je.y;if(_t<0||He<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Le=Math.min(T.scaleZoom(T.scale*Math.min(He,_t)),w.maxZoom),Ye="number"==typeof w.offset.x?new c.pointGeometry(w.offset.x,w.offset.y):c.pointGeometry.convert(w.offset),nt=new c.pointGeometry((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(p*Math.PI/180),Ct=Ye.add(nt).mult(T.scale/T.zoomScale(Le));return{center:T.unproject(G.add(te).div(2).sub(Ct)),zoom:Le,bearing:p}}_cameraForBox(i,u,p,v,w){const T=this._extendCameraOptions(w);p=p||0,v=v||0,i=c.LngLat.convert(i),u=c.LngLat.convert(u);const k=this.transform.clone();k.padding=T.padding;const G=this.getFreeCameraOptions(),te=new c.LngLat(.5*(i.lng+u.lng),.5*(i.lat+u.lat)),he=.5*(p+v);if(k._camera.position[2]<c.mercatorZfromAltitude(he,te.lat))return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");G.lookAtPoint(te),k.setFreeCameraOptions(G);const _e=c.MercatorCoordinate.fromLngLat(i),we=c.MercatorCoordinate.fromLngLat(u),Re=k.pointRayIntersection(k.centerPoint,he),je=[(He=k.rayIntersectionCoordinate(Re)).x,He.y,He.z];var He;const _t=k.screenPointToMercatorRay(k.centerPoint);let Le,Ye=0;do{const nt=Math.floor(k.zoom),Ct=1<<nt,Je=Math.min(Ct*_e.x,Ct*we.x),ht=Math.min(Ct*_e.y,Ct*we.y),ln=Math.max(Ct*_e.x,Ct*we.x),fn=Math.max(Ct*_e.y,Ct*we.y),vn=new Kt([Je,ht,p],[ln,fn,v]),ut=kt.fromInvProjectionMatrix(k.invProjMatrix,k.worldSize,nt);if(2!==vn.intersects(ut)){Le&&(k._camera.position=c.scaleAndAdd([],k._camera.position,_t.dir,-Le),k._updateStateFromCamera());break}const jn=c.sub([],k._camera.position,je);Le=.5*c.length(jn),k._camera.position=c.scaleAndAdd([],k._camera.position,_t.dir,Le);try{k._updateStateFromCamera()}catch(Tn){return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ye<10);return{center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}_raycastElevationBox(i,u){const p=this.transform.elevation;if(!p)return;const v=new c.pointGeometry(i.x,u.y),w=new c.pointGeometry(u.x,i.y),T=p.pointCoordinate(i);if(!T)return;const k=p.pointCoordinate(u);if(!k)return;const G=p.pointCoordinate(v);if(!G)return;const te=p.pointCoordinate(w);if(!te)return;const he=new c.MercatorCoordinate(T[0],T[1]).toLngLat(),_e=new c.MercatorCoordinate(k[0],k[1]).toLngLat(),we=new c.MercatorCoordinate(G[0],G[1]).toLngLat(),Re=new c.MercatorCoordinate(te[0],te[1]).toLngLat(),je=Math.min(he.lng,Math.min(_e.lng,Math.min(we.lng,Re.lng))),He=Math.min(he.lat,Math.min(_e.lat,Math.min(we.lat,Re.lat))),_t=Math.max(he.lng,Math.max(_e.lng,Math.max(we.lng,Re.lng))),Le=Math.max(he.lat,Math.max(_e.lat,Math.max(we.lat,Re.lat))),Ye=Math.min(T[3],Math.min(k[3],Math.min(G[3],te[3]))),nt=Math.max(T[3],Math.max(k[3],Math.max(G[3],te[3])));return{minLngLat:new c.LngLat(je,He),maxLngLat:new c.LngLat(_t,Le),minAltitude:Ye,maxAltitude:nt}}fitScreenCoordinates(i,u,p,v,w){let T,k,G,te;const he=c.pointGeometry.convert(i),_e=c.pointGeometry.convert(u),we=this._raycastElevationBox(he,_e);if(we)T=we.minLngLat,k=we.maxLngLat,G=we.minAltitude,te=we.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(he,_e))return this;T=this.transform.pointLocation(he),k=this.transform.pointLocation(_e)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(i)),this.transform.pointLocation(c.pointGeometry.convert(u)),p,v):this._cameraForBox(T,k,G,te,v),v,w)}_fitInternal(i,u,p){return i?(delete(u=c.extend(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this.transform;let v=!1,w=!1,T=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(v=!0,p.zoom=+i.zoom),void 0!==i.center&&(p.center=c.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(w=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch),null==i.padding||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this.fire(new c.Event("movestart",u)).fire(new c.Event("move",u)),v&&this.fire(new c.Event("zoomstart",u)).fire(new c.Event("zoom",u)).fire(new c.Event("zoomend",u)),w&&this.fire(new c.Event("rotatestart",u)).fire(new c.Event("rotate",u)).fire(new c.Event("rotateend",u)),T&&this.fire(new c.Event("pitchstart",u)).fire(new c.Event("pitch",u)).fire(new c.Event("pitchend",u)),this.fire(new c.Event("moveend",u))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,u){this.stop();const p=this.transform,v=p.zoom,w=p.pitch,T=p.bearing;p.setFreeCameraOptions(i);const k=v!==p.zoom,G=w!==p.pitch,te=T!==p.bearing;return this.fire(new c.Event("movestart",u)).fire(new c.Event("move",u)),k&&this.fire(new c.Event("zoomstart",u)).fire(new c.Event("zoom",u)).fire(new c.Event("zoomend",u)),te&&this.fire(new c.Event("rotatestart",u)).fire(new c.Event("rotate",u)).fire(new c.Event("rotateend",u)),G&&this.fire(new c.Event("pitchstart",u)).fire(new c.Event("pitch",u)).fire(new c.Event("pitchend",u)),this.fire(new c.Event("moveend",u)),this}easeTo(i,u){this._stop(!1,i.easeId),(!1===(i=c.extend({offset:[0,0],duration:500,easing:c.ease},i)).animate||!i.essential&&c.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,v=this.getZoom(),w=this.getBearing(),T=this.getPitch(),k=this.getPadding(),G="zoom"in i?+i.zoom:v,te="bearing"in i?this._normalizeBearing(i.bearing,w):w,he="pitch"in i?+i.pitch:T,_e="padding"in i?i.padding:p.padding,we=c.pointGeometry.convert(i.offset);let Re=p.centerPoint.add(we);const je=p.pointLocation(Re),He=c.LngLat.convert(i.center||je);this._normalizeCenter(He);const _t=p.project(je),Le=p.project(He).sub(_t),Ye=p.zoomScale(G-v);let nt,Ct;i.around&&(nt=c.LngLat.convert(i.around),Ct=p.locationPoint(nt));const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||G!==v,this._rotating=this._rotating||w!==te,this._pitching=this._pitching||he!==T,this._padding=!p.isPaddingEqual(_e),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Je),this._ease(ht=>{if(this._zooming&&(p.zoom=c.number(v,G,ht)),this._rotating&&(p.bearing=c.number(w,te,ht)),this._pitching&&(p.pitch=c.number(T,he,ht)),this._padding&&(p.interpolatePadding(k,_e,ht),Re=p.centerPoint.add(we)),nt)p.setLocationAtPoint(nt,Ct);else{const ln=p.zoomScale(p.zoom-v),fn=G>v?Math.min(2,Ye):Math.max(.5,Ye),vn=Math.pow(fn,1-ht),ut=p.unproject(_t.add(Le.mult(ht*vn)).mult(ln));p.setLocationAtPoint(p.renderWorldCopies?ut.wrap():ut,Re)}this._fireMoveEvents(u)},ht=>{p.recenterOnTerrain(),this._afterEase(u,ht)},i),this}_prepareEase(i,u,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",u||p.moving||this.fire(new c.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new c.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new c.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new c.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new c.Event("move",i)),this._zooming&&this.fire(new c.Event("zoom",i)),this._rotating&&this.fire(new c.Event("rotate",i)),this._pitching&&this.fire(new c.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.transform.cameraElevationReference="ground";const p=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.Event("zoomend",i)),v&&this.fire(new c.Event("rotateend",i)),w&&this.fire(new c.Event("pitchend",i)),this.fire(new c.Event("moveend",i))}flyTo(i,u){if(!i.essential&&c.exported.prefersReducedMotion){const Gn=c.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Gn,u)}this.stop(),i=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},i);const p=this.transform,v=this.getZoom(),w=this.getBearing(),T=this.getPitch(),k=this.getPadding(),G="zoom"in i?c.clamp(+i.zoom,p.minZoom,p.maxZoom):v,te="bearing"in i?this._normalizeBearing(i.bearing,w):w,he="pitch"in i?+i.pitch:T,_e="padding"in i?i.padding:p.padding,we=p.zoomScale(G-v),Re=c.pointGeometry.convert(i.offset);let je=p.centerPoint.add(Re);const He=p.pointLocation(je),_t=c.LngLat.convert(i.center||He);this._normalizeCenter(_t);const Le=p.project(He),Ye=p.project(_t).sub(Le);let nt=i.curve;const Ct=Math.max(p.width,p.height),Je=Ct/we,ht=Ye.mag();if("minZoom"in i){const Gn=c.clamp(Math.min(i.minZoom,v,G),p.minZoom,p.maxZoom),Hi=Ct/p.zoomScale(Gn-v);nt=Math.sqrt(Hi/ht*2)}const ln=nt*nt;function fn(Gn){const Hi=(Je*Je-Ct*Ct+(Gn?-1:1)*ln*ln*ht*ht)/(2*(Gn?Je:Ct)*ln*ht);return Math.log(Math.sqrt(Hi*Hi+1)-Hi)}function vn(Gn){return(Math.exp(Gn)-Math.exp(-Gn))/2}function ut(Gn){return(Math.exp(Gn)+Math.exp(-Gn))/2}const jn=fn(0);let Tn=function(Gn){return ut(jn)/ut(jn+nt*Gn)},gi=function(Gn){return Ct*((ut(jn)*(vn(Hi=jn+nt*Gn)/ut(Hi))-vn(jn))/ln)/ht;var Hi},qn=(fn(1)-jn)/nt;if(Math.abs(ht)<1e-6||!isFinite(qn)){if(Math.abs(Ct-Je)<1e-6)return this.easeTo(i,u);const Gn=Je<Ct?-1:1;qn=Math.abs(Math.log(Je/Ct))/nt,gi=function(){return 0},Tn=function(Hi){return Math.exp(Gn*nt*Hi)}}return i.duration="duration"in i?+i.duration:1e3*qn/("screenSpeed"in i?+i.screenSpeed/nt:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=w!==te,this._pitching=he!==T,this._padding=!p.isPaddingEqual(_e),this._prepareEase(u,!1),this._ease(Gn=>{const Hi=Gn*qn,Si=1/Tn(Hi);p.zoom=1===Gn?G:v+p.scaleZoom(Si),this._rotating&&(p.bearing=c.number(w,te,Gn)),this._pitching&&(p.pitch=c.number(T,he,Gn)),this._padding&&(p.interpolatePadding(k,_e,Gn),je=p.centerPoint.add(Re));const Er=1===Gn?_t:p.unproject(Le.add(Ye.mult(gi(Hi))).mult(Si));p.setLocationAtPoint(p.renderWorldCopies?Er.wrap():Er,je),p._updateCenterElevation(),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){!1===p.animate||0===p.duration?(i(1),u()):(this._easeStart=c.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=c.wrap(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}}class ue{constructor(i={}){this.options=i,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const u=this.options&&this.options.compact;return this._map=i,this._container=xe.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=xe.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=xe.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===u&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){xe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(i){const p=u.reduce((v,w,T)=>(w.value&&(v+=`${w.key}=${w.value}${T<u.length-1?"&":""}`),v),"?");i.href=`${c.config.FEEDBACK_URL}/${p}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>"string"!=typeof v?"":v)):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style._sourceCaches;for(const v in u){const w=u[v];if(w.used){const T=w.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i.sort((v,w)=>v.length-w.length),i=i.filter((v,w)=>{for(let T=w+1;T<i.length;T++)if(i[T].indexOf(v)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Te{constructor(){c.bindAll(["_updateLogo"],this),c.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=xe.create("div","mapboxgl-ctrl");const u=xe.create("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){xe.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(0===Object.entries(i).length)return!0;for(const u in i){const p=i[u].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class lt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const v of p)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function At(f,i,u){if(f=new c.LngLat(f.lng,f.lat),i){const p=new c.LngLat(f.lng-360,f.lat),v=new c.LngLat(f.lng+360,f.lat),w=360*Math.ceil(Math.abs(f.lng-u.center.lng)/360),T=u.locationPoint(f).distSqr(i),k=i.x<0||i.y<0||i.x>u.width||i.y>u.height;u.locationPoint(p).distSqr(i)<T&&(k||Math.abs(p.lng-u.center.lng)<w)?f=p:u.locationPoint(v).distSqr(i)<T&&(k||Math.abs(v.lng-u.center.lng)<w)&&(f=v)}for(;Math.abs(f.lng-u.center.lng)>180;){const p=u.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}const mn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function li(f,i,u){const p=f.classList;for(const v in mn)p.remove(`mapboxgl-${u}-anchor-${v}`);p.add(`mapboxgl-${u}-anchor-${i}`)}class Di extends c.Evented{constructor(i,u){if(super(),(i instanceof c.window.HTMLElement||u)&&(i=c.extend({element:i},u)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=xe.create("div"),this._element.setAttribute("aria-label","Map marker");const p=xe.createNS("http://www.w3.org/2000/svg","svg"),v=41,w=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${v}px`),p.setAttributeNS(null,"width",`${w}px`),p.setAttributeNS(null,"viewBox",`0 0 ${w} ${v}`);const T=xe.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const k=xe.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const G=xe.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(3.0, 29.0)"),G.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ye of te){const nt=xe.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",Ye.rx),nt.setAttributeNS(null,"ry",Ye.ry),G.appendChild(nt)}const he=xe.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"fill",this._color);const _e=xe.createNS("http://www.w3.org/2000/svg","path");_e.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),he.appendChild(_e);const we=xe.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"fill","#000000");const Re=xe.createNS("http://www.w3.org/2000/svg","path");Re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),we.appendChild(Re);const je=xe.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),je.setAttributeNS(null,"fill","#FFFFFF");const He=xe.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _t=xe.createNS("http://www.w3.org/2000/svg","circle");_t.setAttributeNS(null,"fill","#000000"),_t.setAttributeNS(null,"opacity","0.25"),_t.setAttributeNS(null,"cx","5.5"),_t.setAttributeNS(null,"cy","5.5"),_t.setAttributeNS(null,"r","5.4999962");const Le=xe.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#FFFFFF"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962"),He.appendChild(_t),He.appendChild(Le),k.appendChild(G),k.appendChild(he),k.appendChild(we),k.appendChild(je),k.appendChild(He),p.appendChild(k),p.setAttributeNS(null,"height",v*this._scale+"px"),p.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(p),this._offset=c.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),li(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),xe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const u=38.1,p=13.5,v=Math.sqrt(Math.pow(p,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-u],"bottom-left":[v,-1*(u-p+v)],"bottom-right":[-v,-1*(u-p+v)],left:[p,-1*(u-p)],right:[-p,-1*(u-p)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,p=i.charCode||i.keyCode;"Space"!==u&&"Enter"!==u&&32!==p&&13!==p||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,p=this._element;this._popup&&(u===p||p.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_evaluateOpacity(){const i=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(i))return void this._clearFadeTimer();const u=this._map.unproject(i);let p=!1;if(this._map.getTerrain()){const w=this._map.getFreeCameraOptions();if(w.position){const T=w.position.toLngLat();p=T.distanceTo(u)<.9*T.distanceTo(this._lngLat)}}const v=(1-this._map._queryFogOpacity(u))*(p?.2:1);this._element.style.opacity=`${v}`,this._popup&&this._popup._setOpacity(`${v}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(i){const u=this._map.transform;return!!i&&i.x>=0&&i.x<u.width&&i.y>=0&&i.y<u.height}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=At(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?p="rotateX(0deg)":"map"===this._pitchAlignment&&(p=`rotateX(${this._map.getPitch()}deg)`),i&&"moveend"!==i.type||(this._pos=this._pos.round()),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&xe.setTransform(this._element,`${mn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${u}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})}_transformedOffset(){if(!this._defaultMarker)return this._offset;const i=this._map.transform,u=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&u._rotate(i.angle),"map"===this._pitchAlignment&&(u.y*=Math.cos(i._pitch)),u}getOffset(){return this._offset}setOffset(i){return this._offset=c.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class nr{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const u=c.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,u,p){this._start=this.getValue(u),this._end=i,this._startTime=u,this._endTime=u+p}}const Rr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:yr,HTMLElement:io,ImageBitmap:uo}=c.window,aa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function _a(f){f.parentNode&&f.parentNode.removeChild(f)}const nl={showCompass:!0,showZoom:!0,visualizePitch:!1};class la{constructor(i,u,p=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Yo({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new vl({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),xe.addEventListener(u,"mousedown",this.mousedown),xe.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),xe.addEventListener(u,"touchmove",this.touchmove),xe.addEventListener(u,"touchend",this.touchend),xe.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),xe.disableDrag()}move(i,u){const p=this.map,v=this.mouseRotate.mousemoveWindow(i,u);if(v&&v.bearingDelta&&p.setBearing(p.getBearing()+v.bearingDelta),this.mousePitch){const w=this.mousePitch.mousemoveWindow(i,u);w&&w.pitchDelta&&p.setPitch(p.getPitch()+w.pitchDelta)}}off(){const i=this.element;xe.removeEventListener(i,"mousedown",this.mousedown),xe.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),xe.removeEventListener(i,"touchmove",this.touchmove),xe.removeEventListener(i,"touchend",this.touchend),xe.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){xe.enableDrag(),xe.removeEventListener(c.window,"mousemove",this.mousemove),xe.removeEventListener(c.window,"mouseup",this.mouseup)}mousedown(i){this.down(c.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),xe.mousePos(this.element,i)),xe.addEventListener(c.window,"mousemove",this.mousemove),xe.addEventListener(c.window,"mouseup",this.mouseup)}mousemove(i){this.move(i,xe.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=xe.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=xe.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Xr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let il,Al=0,Hl=!1;const Hf={maxWidth:100,unit:"metric"};function oh(f,i,u){const p=u&&u.maxWidth||100,v=f._container.clientHeight/2,w=f.unproject([0,v]),T=f.unproject([p,v]),k=w.distanceTo(T);if(u&&"imperial"===u.unit){const G=3.2808*k;G>5280?Zl(i,p,G/5280,f._getUIString("ScaleControl.Miles"),f):Zl(i,p,G,f._getUIString("ScaleControl.Feet"),f)}else u&&"nautical"===u.unit?Zl(i,p,k/1852,f._getUIString("ScaleControl.NauticalMiles"),f):k>=1e3?Zl(i,p,k/1e3,f._getUIString("ScaleControl.Kilometers"),f):Zl(i,p,k,f._getUIString("ScaleControl.Meters"),f)}function Zl(f,i,u,p,v){const w=function(k){const G=Math.pow(10,`${Math.floor(k)}`.length-1);let te=k/G;return te=te>=10?10:te>=5?5:te>=3?3:te>=2?2:te>=1?1:function(he){const _e=Math.pow(10,Math.ceil(-Math.log(he)/Math.LN10));return Math.round(he*_e)/_e}(te),G*te}(u),T=w/u;v._requestDomTask(()=>{f.style.width=i*T+"px",f.innerHTML=`${w}&nbsp;${p}`})}const ah={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},lh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ch(f){if(f){if("number"==typeof f){const i=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,f),"top-left":new c.pointGeometry(i,i),"top-right":new c.pointGeometry(-i,i),bottom:new c.pointGeometry(0,-f),"bottom-left":new c.pointGeometry(i,-i),"bottom-right":new c.pointGeometry(-i,-i),left:new c.pointGeometry(f,0),right:new c.pointGeometry(-f,0)}}if(f instanceof c.pointGeometry||Array.isArray(f)){const i=c.pointGeometry.convert(f);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.pointGeometry.convert(f.center||[0,0]),top:c.pointGeometry.convert(f.top||[0,0]),"top-left":c.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(f["top-right"]||[0,0]),bottom:c.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(f["bottom-right"]||[0,0]),left:c.pointGeometry.convert(f.left||[0,0]),right:c.pointGeometry.convert(f.right||[0,0])}}return ch(new c.pointGeometry(0,0))}const ou={version:c.version,supported:Xe,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends Y{constructor(f){if(null!=(f=c.extend({},aa,f)).minZoom&&null!=f.maxZoom&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=f.minPitch&&null!=f.maxPitch&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=f.minPitch&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=f.maxPitch&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new zi(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._renderTaskQueue=new lt,this._domRenderTaskQueue=new lt,this._controls=[],this._markers=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Rr,f.locale),this._clickTolerance=f.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new nr(0),this._requestManager=new c.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,"string"==typeof f.container){if(this._container=c.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof io))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==c.window&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new M(this,f),this._hash=f.hash&&new Es("string"==typeof f.hash&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,c.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.attributionControl&&this.addControl(new ue({customAttribution:f.customAttribution})),this._logoControl=new Te,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new c.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(void 0===i&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return-1!==i.indexOf("bottom")?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){const i=this._containerDimensions(),u=i[0],p=i[1];this._resizeCanvas(u,p),this.transform.resize(u,p),this.painter.resize(u,p);const v=!this._moving;return v&&(this.stop(),this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f))),this.fire(new c.Event("resize",f)),v&&this.fire(new c.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(c.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=null==f?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=null==f?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=null==f?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=null==f?85:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint3D(c.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(c.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(f,i,u){if("mouseenter"===f||"mouseover"===f){let p=!1;return{layer:i,listener:u,delegates:{mousemove:w=>{const T=this.getLayer(i)?this.queryRenderedFeatures(w.point,{layers:[i]}):[];T.length?p||(p=!0,u.call(this,new Qr(f,this,w.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===f||"mouseout"===f){let p=!1;return{layer:i,listener:u,delegates:{mousemove:T=>{(this.getLayer(i)?this.queryRenderedFeatures(T.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Qr(f,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,u.call(this,new Qr(f,this,T.originalEvent)))}}}}{const p=v=>{const w=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];w.length&&(v.features=w,u.call(this,v),delete v.features)};return{layer:i,listener:u,delegates:{[f]:p}}}}on(f,i,u){if(void 0===u)return super.on(f,i);const p=this._createDelegatedListener(f,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const v in p.delegates)this.on(v,p.delegates[v]);return this}once(f,i,u){if(void 0===u)return super.once(f,i);const p=this._createDelegatedListener(f,i,u);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(f,i,u){return void 0===u?super.off(f,i):(this._delegatedListeners&&this._delegatedListeners[f]&&(p=>{const v=this._delegatedListeners[f];for(let w=0;w<v.length;w++){const T=v[w];if(T.layer===i&&T.listener===u){for(const k in T.delegates)this.off(k,T.delegates[k]);return v.splice(w,1),this}}})(),this)}queryRenderedFeatures(f,i){return this.style?(void 0!==i||void 0===f||f instanceof c.pointGeometry||Array.isArray(f)||(i=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}queryTerrainElevation(f,i){const u=this.transform.elevation;return u?(i=c.extend({},{exaggerated:!0},i),u.getAtPoint(c.MercatorCoordinate.fromLngLat(f),null,i.exaggerated)):null}setStyle(f,i){return!1!==(i=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(null==i)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),f&&(this.style=new us(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof f?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new us(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if("string"==typeof f){const u=this._requestManager.normalizeStyleURL(f),p=this._requestManager.transformRequest(u,c.ResourceType.Style);c.getJSON(p,(v,w)=>{v?this.fire(new c.ErrorEvent(v)):w&&this._updateDiff(w,i)})}else"object"==typeof f&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(u){c.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){const i=this.style&&this.style._getSourceCaches(f);if(0!==i.length)return i.every(u=>u.loaded());this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const i in f){const u=f[i]._tiles;for(const p in u){const v=u[p];if("loaded"!==v.state&&"errored"!==v.state)return!1}}return!0}addSourceType(f,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,u)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:u=1,sdf:p=!1,stretchX:v,stretchY:w,content:T}={}){if(this._lazyInitEmptyStyle(),i instanceof yr||uo&&i instanceof uo){const{width:k,height:G,data:te}=c.exported.getImageData(i);this.style.addImage(f,{data:new c.RGBAImage({width:k,height:G},te),pixelRatio:u,stretchX:v,stretchY:w,content:T,sdf:p,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:G,data:te}=i,he=i;this.style.addImage(f,{data:new c.RGBAImage({width:k,height:G},new Uint8Array(te)),pixelRatio:u,stretchX:v,stretchY:w,content:T,sdf:p,version:0,userImage:he}),he.onAdd&&he.onAdd(this,f)}}}updateImage(f,i){const u=this.style.getImage(f);if(!u)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof yr||uo&&i instanceof uo?c.exported.getImageData(i):i,{width:v,height:w,data:T}=p;return void 0===v||void 0===w?this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):v!==u.data.width||w!==u.data.height?this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(u.data.replace(T,!(i instanceof yr||uo&&i instanceof uo)),void this.style.updateImage(f,u))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){c.getImage(this._requestManager.transformRequest(f,c.ResourceType.Image),(u,p)=>{i(u,p instanceof yr?c.exported.getImageData(p):p)})}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,u){return this.style.setLayerZoomRange(f,i,u),this._update(!0)}setFilter(f,i,u={}){return this.style.setFilter(f,i,u),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,u,p={}){return this.style.setPaintProperty(f,i,u,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,u,p={}){return this.style.setLayoutProperty(f,i,u,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(c.LngLat.convert(f),this.transform):0}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_containerDimensions(){let f=0,i=0;return this._container&&(f=this._container.clientWidth||400,i=this._container.clientHeight||300),[f,i]}_detectMissingCSS(){"rgb(250, 128, 114)"!==c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=xe.create("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=xe.create("div","mapboxgl-canvas-container",f);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=xe.create("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1]);const p=this._controlContainer=xe.create("div","mapboxgl-control-container",f),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{v[w]=xe.create("div",`mapboxgl-ctrl-${w}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const u=c.exported.devicePixelRatio||1;this._canvas.width=u*f,this._canvas.height=u*i,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);-1!==i&&this._markers.splice(i,1)}_setupPainter(){const f=c.extend({},Xe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(c.storeAuthState(i,!0),this.painter=new Ro(i,this.transform),this.on("data",u=>{"source"===u.dataType&&this.painter.setTileLoadedFlag(!0)}),c.exported$1.testSupport(i)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.isMoving()&&this.loaded()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;const u=this.painter.context.extTimerQuery,p=c.exported.now();this.listens("gpu-timing-frame")&&(i=u.createQueryEXT(),u.beginQueryEXT(u.TIME_ELAPSED_EXT,i));let v=this._updateAverageElevation(p);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;let w=!1;const T=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,te=c.exported.now();this.style.zoomHistory.update(G,te);const he=new c.EvaluationParameters(G,{now:te,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_e=he.crossFadingFactor();1===_e&&_e===this._crossFadingFactor||(w=!0,this._crossFadingFactor=_e),this.style.update(he)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,T,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const G=c.exported.now()-p;u.endQueryEXT(u.TIME_ELAPSED_EXT,i),setTimeout(()=>{const te=u.getQueryObjectEXT(i,u.QUERY_RESULT_EXT)/1e6;u.deleteQueryEXT(i),this.fire(new c.Event("gpu-timing-frame",{cpuTime:G,gpuTime:te}))},50)}if(this.listens("gpu-timing-layer")){const G=this.painter.collectGpuTimers();setTimeout(()=>{const te=this.painter.queryGpuTimers(G);this.fire(new c.Event("gpu-timing-layer",{layerTimes:te}))},50)}const k=this._sourcesDirty||this._styleDirty||this._placementDirty||v;if(k||this._repaint)this.triggerRepaint();else{const G=!this.isMoving()&&this.loaded();if(G&&(v=this._updateAverageElevation(p,!0)),v)this.triggerRepaint();else if(this._triggerFrame(!1),G&&(this.fire(new c.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const te=this._calculateSpeedIndex();this.fire(new c.Event("speedindexcompleted",{speedIndex:te})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(f,i=!1){const u=p=>(this.transform.averageElevation=p,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&u(0);if((i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const p=this.transform.averageElevation;let v=this.transform.sampleAverageElevation();isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const w=Math.abs(p-v);if(w>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(v),u(v);this._averageElevation.easeTo(v,f,300)}else if(w>1e-4)return this._averageElevation.jumpTo(v),u(v)}return!!this._averageElevation.isEasing(f)&&u(this._averageElevation.getValue(f))}_authenticate(){c.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===c.AUTH_ERR_MSG||401===f.status)){const i=this.painter.context.gl;c.storeAuthState(i,!1),this._logoControl instanceof Te&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new c.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),c.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const u=this.painter.context.gl,p=u.createFramebuffer();function v(w){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,w,0);const T=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,T),T}return u.bindFramebuffer(u.FRAMEBUFFER,p),this._canvasPixelComparison(v(f),i.canvasCopies.map(v),i.timeStamps)}_canvasPixelComparison(f,i,u){let p=u[1]-u[0];const v=f.length/4;for(let w=0;w<i.length;w++){const T=i[w];let k=0;for(let G=0;G<T.length;G+=4)T[G]===f[G]&&T[G+1]===f[G+1]&&T[G+2]===f[G+2]&&T[G+3]===f[G+3]&&(k+=1);p+=(u[w+2]-u[w+1])*(1-k/v)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==c.window&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),_a(this._canvasContainer),_a(this._controlContainer),_a(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),c.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=c.exported.frame(i=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(i)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){c.setCacheLimits(f,i)}get version(){return c.version}},NavigationControl:class{constructor(f){this.options=c.extend({},nl,f),this._container=xe.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),xe.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),xe.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=xe.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const f=this._map.getZoom(),i=f===this._map.getMaxZoom(),u=f===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=f)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new la(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){xe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,i){const u=xe.create("button",f,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(f,i){const u=this._map._getUIString(`NavigationControl.${i}`);f.title=u,f.setAttribute("aria-label",u)}},GeolocateControl:class extends c.Evented{constructor(f){super(),this.options=c.extend({},Xr,f),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=pr(this._updateMarkerRotation,20)}onAdd(f){var i;return this._map=f,this._container=xe.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==il?i(il):void 0!==c.window.navigator.permissions?c.window.navigator.permissions.query({name:"geolocation"}).then(u=>{il="denied"!==u.state,i(il)}):(il=!!c.window.navigator.geolocation,i(il)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),xe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Al=0,Hl=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),u=f.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new c.LngLat(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,p=this._map.getBearing(),v=c.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),v,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new c.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,i=this._map.unproject([0,f]),u=this._map.unproject([100,f]),p=i.distanceTo(u)/100,v=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&Hl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=xe.create("button","mapboxgl-ctrl-geolocate",this._container),xe.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===f){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=xe.create("div","mapboxgl-user-location"),this._dotElement.appendChild(xe.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(xe.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Di({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=xe.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Di({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:!0===f.absolute&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Al--,Hl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Al++,Al>1?(f={maximumAge:6e5,timeout:0},Hl=!0):(f=this.options.positionOptions,Hl=!1),this._geolocationWatchID=c.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else c.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{c.window.addEventListener("ondeviceorientationabsolute"in c.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==c.window.DeviceMotionEvent&&"function"==typeof c.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(i=>{"granted"===i&&f()}).catch(console.error):f()}_clearWatch(){c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),c.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),c.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ue,ScaleControl:class{constructor(f){this.options=c.extend({},Hf,f),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){oh(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=xe.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){xe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,oh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof c.window.HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in c.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=xe.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){xe.remove(this._controlContainer),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!c.window.document.fullscreenEnabled&&!c.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=xe.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);xe.create("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(c.window.document.fullscreenElement||c.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends c.Evented{constructor(f){super(),this.options=c.extend(Object.create(ah),f),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&xe.remove(this._content),this._container&&(xe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=c.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(c.window.document.createTextNode(f))}setHTML(f){const i=c.window.document.createDocumentFragment(),u=c.window.document.createElement("body");let p;for(u.innerHTML=f;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=xe.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=xe.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=xe.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=xe.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(w=>this._container.classList.add(w)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=At(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const i=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let u=this.options.anchor;const p=ch(this.options.offset);if(!u){const w=this._container.offsetWidth,T=this._container.offsetHeight;let k;k=i.y+p.bottom.y<T?["top"]:i.y>this._map.transform.height-T?["bottom"]:[],i.x<w/2?k.push("left"):i.x>this._map.transform.width-w/2&&k.push("right"),u=0===k.length?"bottom":k.join("-")}const v=i.add(p[u]).round();this._map._requestDomTask(()=>{this._container&&u&&(xe.setTransform(this._container,`${mn[u]} translate(${v.x}px,${v.y}px)`),li(this._container,u,"popup"))})}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(lh);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._content&&(this._content.style.opacity=f),this._tip&&(this._tip.style.opacity=f)}},Marker:Di,Style:us,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,FreeCameraOptions:mi,Evented:c.Evented,config:c.config,prewarm:function(){Ge().acquire(W)},clearPrewarmedResources:function(){const f=Ee;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(W),Ee=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(f){c.config.ACCESS_TOKEN=f},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(f){c.config.API_URL=f},get workerCount(){return $.workerCount},set workerCount(f){$.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){c.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:c.exported.setNow,restoreNow:c.exported.restoreNow};return ou}),x}()},6215:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{X:()=>Se});var x=ne(9765),I=ne(7971);class Se extends x.xQ{constructor(Xe){super(),this._value=Xe}get value(){return this.getValue()}_subscribe(Xe){const Ie=super._subscribe(Xe);return Ie&&!Ie.closed&&Xe.next(this._value),Ie}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I.N;return this._value}next(Xe){super.next(this._value=Xe)}}},7574:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{y:()=>Ke});var x=ne(7393),Se=ne(9181),c=ne(6490),Ie=ne(6554),_=ne(4487);var Oe=ne(2494);let Ke=(()=>{class Pt{constructor(Dt){this._isScalar=!1,Dt&&(this._subscribe=Dt)}lift(Dt){const St=new Pt;return St.source=this,St.operator=Dt,St}subscribe(Dt,St,kt){const{operator:Kt}=this,Ft=function(Pt,Qt,Dt){if(Pt){if(Pt instanceof x.L)return Pt;if(Pt[Se.b])return Pt[Se.b]()}return Pt||Qt||Dt?new x.L(Pt,Qt,Dt):new x.L(c.c)}(Dt,St,kt);if(Ft.add(Kt?Kt.call(Ft,this.source):this.source||Oe.v.useDeprecatedSynchronousErrorHandling&&!Ft.syncErrorThrowable?this._subscribe(Ft):this._trySubscribe(Ft)),Oe.v.useDeprecatedSynchronousErrorHandling&&Ft.syncErrorThrowable&&(Ft.syncErrorThrowable=!1,Ft.syncErrorThrown))throw Ft.syncErrorValue;return Ft}_trySubscribe(Dt){try{return this._subscribe(Dt)}catch(St){Oe.v.useDeprecatedSynchronousErrorHandling&&(Dt.syncErrorThrown=!0,Dt.syncErrorValue=St),function(Pt){for(;Pt;){const{closed:Qt,destination:Dt,isStopped:St}=Pt;if(Qt||St)return!1;Pt=Dt&&Dt instanceof x.L?Dt:null}return!0}(Dt)?Dt.error(St):console.warn(St)}}forEach(Dt,St){return new(St=st(St))((kt,Kt)=>{let Ft;Ft=this.subscribe(Mn=>{try{Dt(Mn)}catch(Jt){Kt(Jt),Ft&&Ft.unsubscribe()}},Kt,kt)})}_subscribe(Dt){const{source:St}=this;return St&&St.subscribe(Dt)}[Ie.L](){return this}pipe(...Dt){return 0===Dt.length?this:function(Pt){return 0===Pt.length?_.y:1===Pt.length?Pt[0]:function(Dt){return Pt.reduce((St,kt)=>kt(St),Dt)}}(Dt)(this)}toPromise(Dt){return new(Dt=st(Dt))((St,kt)=>{let Kt;this.subscribe(Ft=>Kt=Ft,Ft=>kt(Ft),()=>St(Kt))})}}return Pt.create=Qt=>new Pt(Qt),Pt})();function st(Pt){if(Pt||(Pt=Oe.v.Promise||Promise),!Pt)throw new Error("no Promise impl found");return Pt}},6490:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{c:()=>Se});var x=ne(2494),I=ne(4449);const Se={closed:!0,next(c){},error(c){if(x.v.useDeprecatedSynchronousErrorHandling)throw c;(0,I.z)(c)},complete(){}}},9765:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{Yc:()=>_,xQ:()=>ve});var x=ne(7574),I=ne(7393),Se=ne(5319),c=ne(7971),Xe=ne(8858),Ie=ne(9181);class _ extends I.L{constructor(Ke){super(Ke),this.destination=Ke}}let ve=(()=>{class Oe extends x.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ie.b](){return new _(this)}lift(st){const Pt=new xe(this,this);return Pt.operator=st,Pt}next(st){if(this.closed)throw new c.N;if(!this.isStopped){const{observers:Pt}=this,Qt=Pt.length,Dt=Pt.slice();for(let St=0;St<Qt;St++)Dt[St].next(st)}}error(st){if(this.closed)throw new c.N;this.hasError=!0,this.thrownError=st,this.isStopped=!0;const{observers:Pt}=this,Qt=Pt.length,Dt=Pt.slice();for(let St=0;St<Qt;St++)Dt[St].error(st);this.observers.length=0}complete(){if(this.closed)throw new c.N;this.isStopped=!0;const{observers:st}=this,Pt=st.length,Qt=st.slice();for(let Dt=0;Dt<Pt;Dt++)Qt[Dt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(st){if(this.closed)throw new c.N;return super._trySubscribe(st)}_subscribe(st){if(this.closed)throw new c.N;return this.hasError?(st.error(this.thrownError),Se.w.EMPTY):this.isStopped?(st.complete(),Se.w.EMPTY):(this.observers.push(st),new Xe.W(this,st))}asObservable(){const st=new x.y;return st.source=this,st}}return Oe.create=(Ke,st)=>new xe(Ke,st),Oe})();class xe extends ve{constructor(Ke,st){super(),this.destination=Ke,this.source=st}next(Ke){const{destination:st}=this;st&&st.next&&st.next(Ke)}error(Ke){const{destination:st}=this;st&&st.error&&this.destination.error(Ke)}complete(){const{destination:Ke}=this;Ke&&Ke.complete&&this.destination.complete()}_subscribe(Ke){const{source:st}=this;return st?this.source.subscribe(Ke):Se.w.EMPTY}}},8858:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{W:()=>I});var x=ne(5319);class I extends x.w{constructor(c,Xe){super(),this.subject=c,this.subscriber=Xe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const c=this.subject,Xe=c.observers;if(this.subject=null,!Xe||0===Xe.length||c.isStopped||c.closed)return;const Ie=Xe.indexOf(this.subscriber);-1!==Ie&&Xe.splice(Ie,1)}}},7393:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{L:()=>_});var x=ne(9105),I=ne(6490),Se=ne(5319),c=ne(9181),Xe=ne(2494),Ie=ne(4449);class _ extends Se.w{constructor(Oe,Ke,st){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=I.c;break;case 1:if(!Oe){this.destination=I.c;break}if("object"==typeof Oe){Oe instanceof _?(this.syncErrorThrowable=Oe.syncErrorThrowable,this.destination=Oe,Oe.add(this)):(this.syncErrorThrowable=!0,this.destination=new ve(this,Oe));break}default:this.syncErrorThrowable=!0,this.destination=new ve(this,Oe,Ke,st)}}[c.b](){return this}static create(Oe,Ke,st){const Pt=new _(Oe,Ke,st);return Pt.syncErrorThrowable=!1,Pt}next(Oe){this.isStopped||this._next(Oe)}error(Oe){this.isStopped||(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Oe){this.destination.next(Oe)}_error(Oe){this.destination.error(Oe),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Oe}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Oe,this}}class ve extends _{constructor(Oe,Ke,st,Pt){super(),this._parentSubscriber=Oe;let Qt,Dt=this;(0,x.m)(Ke)?Qt=Ke:Ke&&(Qt=Ke.next,st=Ke.error,Pt=Ke.complete,Ke!==I.c&&(Dt=Object.create(Ke),(0,x.m)(Dt.unsubscribe)&&this.add(Dt.unsubscribe.bind(Dt)),Dt.unsubscribe=this.unsubscribe.bind(this))),this._context=Dt,this._next=Qt,this._error=st,this._complete=Pt}next(Oe){if(!this.isStopped&&this._next){const{_parentSubscriber:Ke}=this;Xe.v.useDeprecatedSynchronousErrorHandling&&Ke.syncErrorThrowable?this.__tryOrSetError(Ke,this._next,Oe)&&this.unsubscribe():this.__tryOrUnsub(this._next,Oe)}}error(Oe){if(!this.isStopped){const{_parentSubscriber:Ke}=this,{useDeprecatedSynchronousErrorHandling:st}=Xe.v;if(this._error)st&&Ke.syncErrorThrowable?(this.__tryOrSetError(Ke,this._error,Oe),this.unsubscribe()):(this.__tryOrUnsub(this._error,Oe),this.unsubscribe());else if(Ke.syncErrorThrowable)st?(Ke.syncErrorValue=Oe,Ke.syncErrorThrown=!0):(0,Ie.z)(Oe),this.unsubscribe();else{if(this.unsubscribe(),st)throw Oe;(0,Ie.z)(Oe)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Oe}=this;if(this._complete){const Ke=()=>this._complete.call(this._context);Xe.v.useDeprecatedSynchronousErrorHandling&&Oe.syncErrorThrowable?(this.__tryOrSetError(Oe,Ke),this.unsubscribe()):(this.__tryOrUnsub(Ke),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Oe,Ke){try{Oe.call(this._context,Ke)}catch(st){if(this.unsubscribe(),Xe.v.useDeprecatedSynchronousErrorHandling)throw st;(0,Ie.z)(st)}}__tryOrSetError(Oe,Ke,st){if(!Xe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ke.call(this._context,st)}catch(Pt){return Xe.v.useDeprecatedSynchronousErrorHandling?(Oe.syncErrorValue=Pt,Oe.syncErrorThrown=!0,!0):((0,Ie.z)(Pt),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Oe}=this;this._context=null,this._parentSubscriber=null,Oe.unsubscribe()}}},5319:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{w:()=>Ie});var x=ne(9796),I=ne(1555),Se=ne(9105);const Xe=(()=>{function ve(xe){return Error.call(this),this.message=xe?`${xe.length} errors occurred during unsubscription:\n${xe.map((Oe,Ke)=>`${Ke+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=xe,this}return ve.prototype=Object.create(Error.prototype),ve})();class Ie{constructor(xe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,xe&&(this._ctorUnsubscribe=!0,this._unsubscribe=xe)}unsubscribe(){let xe;if(this.closed)return;let{_parentOrParents:Oe,_ctorUnsubscribe:Ke,_unsubscribe:st,_subscriptions:Pt}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Oe instanceof Ie)Oe.remove(this);else if(null!==Oe)for(let Qt=0;Qt<Oe.length;++Qt)Oe[Qt].remove(this);if((0,Se.m)(st)){Ke&&(this._unsubscribe=void 0);try{st.call(this)}catch(Qt){xe=Qt instanceof Xe?_(Qt.errors):[Qt]}}if((0,x.k)(Pt)){let Qt=-1,Dt=Pt.length;for(;++Qt<Dt;){const St=Pt[Qt];if((0,I.K)(St))try{St.unsubscribe()}catch(kt){xe=xe||[],kt instanceof Xe?xe=xe.concat(_(kt.errors)):xe.push(kt)}}}if(xe)throw new Xe(xe)}add(xe){let Oe=xe;if(!xe)return Ie.EMPTY;switch(typeof xe){case"function":Oe=new Ie(xe);case"object":if(Oe===this||Oe.closed||"function"!=typeof Oe.unsubscribe)return Oe;if(this.closed)return Oe.unsubscribe(),Oe;if(!(Oe instanceof Ie)){const Pt=Oe;Oe=new Ie,Oe._subscriptions=[Pt]}break;default:throw new Error("unrecognized teardown "+xe+" added to Subscription.")}let{_parentOrParents:Ke}=Oe;if(null===Ke)Oe._parentOrParents=this;else if(Ke instanceof Ie){if(Ke===this)return Oe;Oe._parentOrParents=[Ke,this]}else{if(-1!==Ke.indexOf(this))return Oe;Ke.push(this)}const st=this._subscriptions;return null===st?this._subscriptions=[Oe]:st.push(Oe),Oe}remove(xe){const Oe=this._subscriptions;if(Oe){const Ke=Oe.indexOf(xe);-1!==Ke&&Oe.splice(Ke,1)}}}var ve;function _(ve){return ve.reduce((xe,Oe)=>xe.concat(Oe instanceof Xe?Oe.errors:Oe),[])}Ie.EMPTY=((ve=new Ie).closed=!0,ve)},2494:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{v:()=>I});let x=!1;const I={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Se){if(Se){const c=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+c.stack)}else x&&console.log("RxJS: Back to a better error behavior. Thank you. <3");x=Se},get useDeprecatedSynchronousErrorHandling(){return x}}},5345:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{IY:()=>c,Ds:()=>Ie,ft:()=>ve});var x=ne(7393),I=ne(7574),Se=ne(7444);class c extends x.L{constructor(Oe){super(),this.parent=Oe}_next(Oe){this.parent.notifyNext(Oe)}_error(Oe){this.parent.notifyError(Oe),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ie extends x.L{notifyNext(Oe){this.destination.next(Oe)}notifyError(Oe){this.destination.error(Oe)}notifyComplete(){this.destination.complete()}}function ve(xe,Oe){if(Oe.closed)return;if(xe instanceof I.y)return xe.subscribe(Oe);let Ke;try{Ke=(0,Se.s)(xe)(Oe)}catch(st){Oe.error(st)}return Ke}},2441:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{c:()=>Xe,N:()=>Ie});var x=ne(9765),I=ne(7574),Se=ne(5319),c=ne(1307);class Xe extends I.y{constructor(Ke,st){super(),this.source=Ke,this.subjectFactory=st,this._refCount=0,this._isComplete=!1}_subscribe(Ke){return this.getSubject().subscribe(Ke)}getSubject(){const Ke=this._subject;return(!Ke||Ke.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ke=this._connection;return Ke||(this._isComplete=!1,Ke=this._connection=new Se.w,Ke.add(this.source.subscribe(new _(this.getSubject(),this))),Ke.closed&&(this._connection=null,Ke=Se.w.EMPTY)),Ke}refCount(){return(0,c.x)()(this)}}const Ie=(()=>{const Oe=Xe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Oe._subscribe},_isComplete:{value:Oe._isComplete,writable:!0},getSubject:{value:Oe.getSubject},connect:{value:Oe.connect},refCount:{value:Oe.refCount}}})();class _ extends x.Yc{constructor(Ke,st){super(Ke),this.connectable=st}_error(Ke){this._unsubscribe(),super._error(Ke)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ke=this.connectable;if(Ke){this.connectable=null;const st=Ke._connection;Ke._refCount=0,Ke._subject=null,Ke._connection=null,st&&st.unsubscribe()}}}},8071:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{z:()=>c});var x=ne(5917),I=ne(3282);function c(...Xe){return(0,I.J)(1)((0,x.of)(...Xe))}},1439:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{P:()=>c});var x=ne(7574),I=ne(4402),Se=ne(9193);function c(Xe){return new x.y(Ie=>{let _;try{_=Xe()}catch(xe){return void Ie.error(xe)}return(_?(0,I.D)(_):(0,Se.c)()).subscribe(Ie)})}},9193:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{E:()=>I,c:()=>Se});var x=ne(7574);const I=new x.y(Xe=>Xe.complete());function Se(Xe){return Xe?function(Xe){return new x.y(Ie=>Xe.schedule(()=>Ie.complete()))}(Xe):I}},5758:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{D:()=>Ie});var x=ne(7574),I=ne(9796),Se=ne(8002),c=ne(1555),Xe=ne(4402);function Ie(...ve){if(1===ve.length){const xe=ve[0];if((0,I.k)(xe))return _(xe,null);if((0,c.K)(xe)&&Object.getPrototypeOf(xe)===Object.prototype){const Oe=Object.keys(xe);return _(Oe.map(Ke=>xe[Ke]),Oe)}}if("function"==typeof ve[ve.length-1]){const xe=ve.pop();return _(ve=1===ve.length&&(0,I.k)(ve[0])?ve[0]:ve,null).pipe((0,Se.U)(Oe=>xe(...Oe)))}return _(ve,null)}function _(ve,xe){return new x.y(Oe=>{const Ke=ve.length;if(0===Ke)return void Oe.complete();const st=new Array(Ke);let Pt=0,Qt=0;for(let Dt=0;Dt<Ke;Dt++){const St=(0,Xe.D)(ve[Dt]);let kt=!1;Oe.add(St.subscribe({next:Kt=>{kt||(kt=!0,Qt++),st[Dt]=Kt},error:Kt=>Oe.error(Kt),complete:()=>{Pt++,(Pt===Ke||!kt)&&(Qt===Ke&&Oe.next(xe?xe.reduce((Kt,Ft,Mn)=>(Kt[Ft]=st[Mn],Kt),{}):st),Oe.complete())}}))}})}},4402:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{D:()=>Dt});var x=ne(7574),I=ne(7444),Se=ne(5319),c=ne(6554),_=ne(4087),ve=ne(377),Ke=ne(4072),st=ne(9489);function Dt(St,kt){return kt?function(St,kt){if(null!=St){if(function(St){return St&&"function"==typeof St[c.L]}(St))return function(St,kt){return new x.y(Kt=>{const Ft=new Se.w;return Ft.add(kt.schedule(()=>{const Mn=St[c.L]();Ft.add(Mn.subscribe({next(Jt){Ft.add(kt.schedule(()=>Kt.next(Jt)))},error(Jt){Ft.add(kt.schedule(()=>Kt.error(Jt)))},complete(){Ft.add(kt.schedule(()=>Kt.complete()))}}))})),Ft})}(St,kt);if((0,Ke.t)(St))return function(St,kt){return new x.y(Kt=>{const Ft=new Se.w;return Ft.add(kt.schedule(()=>St.then(Mn=>{Ft.add(kt.schedule(()=>{Kt.next(Mn),Ft.add(kt.schedule(()=>Kt.complete()))}))},Mn=>{Ft.add(kt.schedule(()=>Kt.error(Mn)))}))),Ft})}(St,kt);if((0,st.z)(St))return(0,_.r)(St,kt);if(function(St){return St&&"function"==typeof St[ve.hZ]}(St)||"string"==typeof St)return function(St,kt){if(!St)throw new Error("Iterable cannot be null");return new x.y(Kt=>{const Ft=new Se.w;let Mn;return Ft.add(()=>{Mn&&"function"==typeof Mn.return&&Mn.return()}),Ft.add(kt.schedule(()=>{Mn=St[ve.hZ](),Ft.add(kt.schedule(function(){if(Kt.closed)return;let Jt,qt;try{const dn=Mn.next();Jt=dn.value,qt=dn.done}catch(dn){return void Kt.error(dn)}qt?Kt.complete():(Kt.next(Jt),this.schedule())}))})),Ft})}(St,kt)}throw new TypeError((null!==St&&typeof St||St)+" is not observable")}(St,kt):St instanceof x.y?St:new x.y((0,I.s)(St))}},6693:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{n:()=>c});var x=ne(7574),I=ne(5015),Se=ne(4087);function c(Xe,Ie){return Ie?(0,Se.r)(Xe,Ie):new x.y((0,I.V)(Xe))}},2759:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{R:()=>Ie});var x=ne(7574),I=ne(9796),Se=ne(9105),c=ne(8002);function Ie(Ke,st,Pt,Qt){return(0,Se.m)(Pt)&&(Qt=Pt,Pt=void 0),Qt?Ie(Ke,st,Pt).pipe((0,c.U)(Dt=>(0,I.k)(Dt)?Qt(...Dt):Qt(Dt))):new x.y(Dt=>{_(Ke,st,function(kt){Dt.next(arguments.length>1?Array.prototype.slice.call(arguments):kt)},Dt,Pt)})}function _(Ke,st,Pt,Qt,Dt){let St;if(function(Ke){return Ke&&"function"==typeof Ke.addEventListener&&"function"==typeof Ke.removeEventListener}(Ke)){const kt=Ke;Ke.addEventListener(st,Pt,Dt),St=()=>kt.removeEventListener(st,Pt,Dt)}else if(function(Ke){return Ke&&"function"==typeof Ke.on&&"function"==typeof Ke.off}(Ke)){const kt=Ke;Ke.on(st,Pt),St=()=>kt.off(st,Pt)}else if(function(Ke){return Ke&&"function"==typeof Ke.addListener&&"function"==typeof Ke.removeListener}(Ke)){const kt=Ke;Ke.addListener(st,Pt),St=()=>kt.removeListener(st,Pt)}else{if(!Ke||!Ke.length)throw new TypeError("Invalid event target");for(let kt=0,Kt=Ke.length;kt<Kt;kt++)_(Ke[kt],st,Pt,Qt,Dt)}Qt.add(St)}},6682:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{T:()=>Xe});var x=ne(7574),I=ne(4869),Se=ne(3282),c=ne(6693);function Xe(...Ie){let _=Number.POSITIVE_INFINITY,ve=null,xe=Ie[Ie.length-1];return(0,I.K)(xe)?(ve=Ie.pop(),Ie.length>1&&"number"==typeof Ie[Ie.length-1]&&(_=Ie.pop())):"number"==typeof xe&&(_=Ie.pop()),null===ve&&1===Ie.length&&Ie[0]instanceof x.y?Ie[0]:(0,Se.J)(_)((0,c.n)(Ie,ve))}},5917:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{of:()=>c});var x=ne(4869),I=ne(6693),Se=ne(4087);function c(...Xe){let Ie=Xe[Xe.length-1];return(0,x.K)(Ie)?(Xe.pop(),(0,Se.r)(Xe,Ie)):(0,I.n)(Xe)}},205:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{_:()=>I});var x=ne(7574);function I(c,Xe){return new x.y(Xe?Ie=>Xe.schedule(Se,0,{error:c,subscriber:Ie}):Ie=>Ie.error(c))}function Se({error:c,subscriber:Xe}){Xe.error(c)}},5304:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{K:()=>I});var x=ne(5345);function I(Xe){return function(_){const ve=new Se(Xe),xe=_.lift(ve);return ve.caught=xe}}class Se{constructor(Ie){this.selector=Ie}call(Ie,_){return _.subscribe(new c(Ie,this.selector,this.caught))}}class c extends x.Ds{constructor(Ie,_,ve){super(Ie),this.selector=_,this.caught=ve}error(Ie){if(!this.isStopped){let _;try{_=this.selector(Ie,this.caught)}catch(Oe){return void super.error(Oe)}this._unsubscribeAndRecycle();const ve=new x.IY(this);this.add(ve);const xe=(0,x.ft)(_,ve);xe!==ve&&this.add(xe)}}}},4612:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b:()=>I});var x=ne(9773);function I(Se,c){return(0,x.zg)(Se,c,1)}},4395:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b:()=>Se});var x=ne(7393),I=ne(3637);function Se(_,ve=I.P){return xe=>xe.lift(new c(_,ve))}class c{constructor(ve,xe){this.dueTime=ve,this.scheduler=xe}call(ve,xe){return xe.subscribe(new Xe(ve,this.dueTime,this.scheduler))}}class Xe extends x.L{constructor(ve,xe,Oe){super(ve),this.dueTime=xe,this.scheduler=Oe,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(ve){this.clearDebounce(),this.lastValue=ve,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ie,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:ve}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(ve)}}clearDebounce(){const ve=this.debouncedSubscription;null!==ve&&(this.remove(ve),ve.unsubscribe(),this.debouncedSubscription=null)}}function Ie(_){_.debouncedNext()}},7519:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{x:()=>I});var x=ne(7393);function I(Xe,Ie){return _=>_.lift(new Se(Xe,Ie))}class Se{constructor(Ie,_){this.compare=Ie,this.keySelector=_}call(Ie,_){return _.subscribe(new c(Ie,this.compare,this.keySelector))}}class c extends x.L{constructor(Ie,_,ve){super(Ie),this.keySelector=ve,this.hasKey=!1,"function"==typeof _&&(this.compare=_)}compare(Ie,_){return Ie===_}_next(Ie){let _;try{const{keySelector:xe}=this;_=xe?xe(Ie):Ie}catch(xe){return this.destination.error(xe)}let ve=!1;if(this.hasKey)try{const{compare:xe}=this;ve=xe(this.key,_)}catch(xe){return this.destination.error(xe)}else this.hasKey=!0;ve||(this.key=_,this.destination.next(Ie))}}},5435:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{h:()=>I});var x=ne(7393);function I(Xe,Ie){return function(ve){return ve.lift(new Se(Xe,Ie))}}class Se{constructor(Ie,_){this.predicate=Ie,this.thisArg=_}call(Ie,_){return _.subscribe(new c(Ie,this.predicate,this.thisArg))}}class c extends x.L{constructor(Ie,_,ve){super(Ie),this.predicate=_,this.thisArg=ve,this.count=0}_next(Ie){let _;try{_=this.predicate.call(this.thisArg,Ie,this.count++)}catch(ve){return void this.destination.error(ve)}_&&this.destination.next(Ie)}}},8939:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{x:()=>Se});var x=ne(7393),I=ne(5319);function Se(Ie){return _=>_.lift(new c(Ie))}class c{constructor(_){this.callback=_}call(_,ve){return ve.subscribe(new Xe(_,this.callback))}}class Xe extends x.L{constructor(_,ve){super(_),this.add(new I.w(ve))}}},8002:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{U:()=>I});var x=ne(7393);function I(Xe,Ie){return function(ve){if("function"!=typeof Xe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ve.lift(new Se(Xe,Ie))}}class Se{constructor(Ie,_){this.project=Ie,this.thisArg=_}call(Ie,_){return _.subscribe(new c(Ie,this.project,this.thisArg))}}class c extends x.L{constructor(Ie,_,ve){super(Ie),this.project=_,this.count=0,this.thisArg=ve||this}_next(Ie){let _;try{_=this.project.call(this.thisArg,Ie,this.count++)}catch(ve){return void this.destination.error(ve)}this.destination.next(_)}}},3282:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{J:()=>Se});var x=ne(9773),I=ne(4487);function Se(c=Number.POSITIVE_INFINITY){return(0,x.zg)(I.y,c)}},9773:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{zg:()=>c});var x=ne(8002),I=ne(4402),Se=ne(5345);function c(ve,xe,Oe=Number.POSITIVE_INFINITY){return"function"==typeof xe?Ke=>Ke.pipe(c((st,Pt)=>(0,I.D)(ve(st,Pt)).pipe((0,x.U)((Qt,Dt)=>xe(st,Qt,Pt,Dt))),Oe)):("number"==typeof xe&&(Oe=xe),Ke=>Ke.lift(new Xe(ve,Oe)))}class Xe{constructor(xe,Oe=Number.POSITIVE_INFINITY){this.project=xe,this.concurrent=Oe}call(xe,Oe){return Oe.subscribe(new Ie(xe,this.project,this.concurrent))}}class Ie extends Se.Ds{constructor(xe,Oe,Ke=Number.POSITIVE_INFINITY){super(xe),this.project=Oe,this.concurrent=Ke,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(xe){this.active<this.concurrent?this._tryNext(xe):this.buffer.push(xe)}_tryNext(xe){let Oe;const Ke=this.index++;try{Oe=this.project(xe,Ke)}catch(st){return void this.destination.error(st)}this.active++,this._innerSub(Oe)}_innerSub(xe){const Oe=new Se.IY(this),Ke=this.destination;Ke.add(Oe);const st=(0,Se.ft)(xe,Oe);st!==Oe&&Ke.add(st)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(xe){this.destination.next(xe)}notifyComplete(){const xe=this.buffer;this.active--,xe.length>0?this._next(xe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{x:()=>I});var x=ne(7393);function I(){return function(Ie){return Ie.lift(new Se(Ie))}}class Se{constructor(Ie){this.connectable=Ie}call(Ie,_){const{connectable:ve}=this;ve._refCount++;const xe=new c(Ie,ve),Oe=_.subscribe(xe);return xe.closed||(xe.connection=ve.connect()),Oe}}class c extends x.L{constructor(Ie,_){super(Ie),this.connectable=_}_unsubscribe(){const{connectable:Ie}=this;if(!Ie)return void(this.connection=null);this.connectable=null;const _=Ie._refCount;if(_<=0)return void(this.connection=null);if(Ie._refCount=_-1,_>1)return void(this.connection=null);const{connection:ve}=this,xe=Ie._connection;this.connection=null,xe&&(!ve||xe===ve)&&xe.unsubscribe()}}},8819:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{B:()=>_});var x=ne(2441);var c=ne(1307),Xe=ne(9765);function Ie(){return new Xe.xQ}function _(){return ve=>(0,c.x)()(function(ve,xe){return function(Ke){let st;st="function"==typeof ve?ve:function(){return ve};const Pt=Object.create(Ke,x.N);return Pt.source=Ke,Pt.subjectFactory=st,Pt}}(Ie)(ve))}},9761:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{O:()=>Se});var x=ne(8071),I=ne(4869);function Se(...c){const Xe=c[c.length-1];return(0,I.K)(Xe)?(c.pop(),Ie=>(0,x.z)(c,Ie,Xe)):Ie=>(0,x.z)(c,Ie)}},3190:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{w:()=>c});var x=ne(8002),I=ne(4402),Se=ne(5345);function c(_,ve){return"function"==typeof ve?xe=>xe.pipe(c((Oe,Ke)=>(0,I.D)(_(Oe,Ke)).pipe((0,x.U)((st,Pt)=>ve(Oe,st,Ke,Pt))))):xe=>xe.lift(new Xe(_))}class Xe{constructor(ve){this.project=ve}call(ve,xe){return xe.subscribe(new Ie(ve,this.project))}}class Ie extends Se.Ds{constructor(ve,xe){super(ve),this.project=xe,this.index=0}_next(ve){let xe;const Oe=this.index++;try{xe=this.project(ve,Oe)}catch(Ke){return void this.destination.error(Ke)}this._innerSub(xe)}_innerSub(ve){const xe=this.innerSubscription;xe&&xe.unsubscribe();const Oe=new Se.IY(this),Ke=this.destination;Ke.add(Oe),this.innerSubscription=(0,Se.ft)(ve,Oe),this.innerSubscription!==Oe&&Ke.add(this.innerSubscription)}_complete(){const{innerSubscription:ve}=this;(!ve||ve.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ve){this.destination.next(ve)}}},5257:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{q:()=>c});var x=ne(7393),I=ne(7108),Se=ne(9193);function c(_){return ve=>0===_?(0,Se.c)():ve.lift(new Xe(_))}class Xe{constructor(ve){if(this.total=ve,this.total<0)throw new I.W}call(ve,xe){return xe.subscribe(new Ie(ve,this.total))}}class Ie extends x.L{constructor(ve,xe){super(ve),this.total=xe,this.count=0}_next(ve){const xe=this.total,Oe=++this.count;Oe<=xe&&(this.destination.next(ve),Oe===xe&&(this.destination.complete(),this.unsubscribe()))}}},6782:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{R:()=>I});var x=ne(5345);function I(Xe){return Ie=>Ie.lift(new Se(Xe))}class Se{constructor(Ie){this.notifier=Ie}call(Ie,_){const ve=new c(Ie),xe=(0,x.ft)(this.notifier,new x.IY(ve));return xe&&!ve.seenValue?(ve.add(xe),_.subscribe(ve)):ve}}class c extends x.Ds{constructor(Ie){super(Ie),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},3342:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b:()=>c});var x=ne(7393);function I(){}var Se=ne(9105);function c(_,ve,xe){return function(Ke){return Ke.lift(new Xe(_,ve,xe))}}class Xe{constructor(ve,xe,Oe){this.nextOrObserver=ve,this.error=xe,this.complete=Oe}call(ve,xe){return xe.subscribe(new Ie(ve,this.nextOrObserver,this.error,this.complete))}}class Ie extends x.L{constructor(ve,xe,Oe,Ke){super(ve),this._tapNext=I,this._tapError=I,this._tapComplete=I,this._tapError=Oe||I,this._tapComplete=Ke||I,(0,Se.m)(xe)?(this._context=this,this._tapNext=xe):xe&&(this._context=xe,this._tapNext=xe.next||I,this._tapError=xe.error||I,this._tapComplete=xe.complete||I)}_next(ve){try{this._tapNext.call(this._context,ve)}catch(xe){return void this.destination.error(xe)}this.destination.next(ve)}_error(ve){try{this._tapError.call(this._context,ve)}catch(xe){return void this.destination.error(xe)}this.destination.error(ve)}_complete(){try{this._tapComplete.call(this._context)}catch(ve){return void this.destination.error(ve)}return this.destination.complete()}}},4087:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{r:()=>Se});var x=ne(7574),I=ne(5319);function Se(c,Xe){return new x.y(Ie=>{const _=new I.w;let ve=0;return _.add(Xe.schedule(function(){ve!==c.length?(Ie.next(c[ve++]),Ie.closed||_.add(this.schedule())):Ie.complete()})),_})}},6465:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{o:()=>Se});var x=ne(5319);class I extends x.w{constructor(Xe,Ie){super()}schedule(Xe,Ie=0){return this}}class Se extends I{constructor(Xe,Ie){super(Xe,Ie),this.scheduler=Xe,this.work=Ie,this.pending=!1}schedule(Xe,Ie=0){if(this.closed)return this;this.state=Xe;const _=this.id,ve=this.scheduler;return null!=_&&(this.id=this.recycleAsyncId(ve,_,Ie)),this.pending=!0,this.delay=Ie,this.id=this.id||this.requestAsyncId(ve,this.id,Ie),this}requestAsyncId(Xe,Ie,_=0){return setInterval(Xe.flush.bind(Xe,this),_)}recycleAsyncId(Xe,Ie,_=0){if(null!==_&&this.delay===_&&!1===this.pending)return Ie;clearInterval(Ie)}execute(Xe,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _=this._execute(Xe,Ie);if(_)return _;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Xe,Ie){let ve,_=!1;try{this.work(Xe)}catch(xe){_=!0,ve=!!xe&&xe||new Error(xe)}if(_)return this.unsubscribe(),ve}_unsubscribe(){const Xe=this.id,Ie=this.scheduler,_=Ie.actions,ve=_.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ve&&_.splice(ve,1),null!=Xe&&(this.id=this.recycleAsyncId(Ie,Xe,null)),this.delay=null}}},6102:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{v:()=>I});let x=(()=>{class Se{constructor(Xe,Ie=Se.now){this.SchedulerAction=Xe,this.now=Ie}schedule(Xe,Ie=0,_){return new this.SchedulerAction(this,Xe).schedule(_,Ie)}}return Se.now=()=>Date.now(),Se})();class I extends x{constructor(c,Xe=x.now){super(c,()=>I.delegate&&I.delegate!==this?I.delegate.now():Xe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(c,Xe=0,Ie){return I.delegate&&I.delegate!==this?I.delegate.schedule(c,Xe,Ie):super.schedule(c,Xe,Ie)}flush(c){const{actions:Xe}=this;if(this.active)return void Xe.push(c);let Ie;this.active=!0;do{if(Ie=c.execute(c.state,c.delay))break}while(c=Xe.shift());if(this.active=!1,Ie){for(;c=Xe.shift();)c.unsubscribe();throw Ie}}}},3637:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{P:()=>c});var x=ne(6465);const c=new(ne(6102).v)(x.o)},377:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{hZ:()=>I});const I="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{L:()=>x});const x="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b:()=>x});const x="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{W:()=>I});const I=(()=>{function Se(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Se.prototype=Object.create(Error.prototype),Se})()},7971:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{N:()=>I});const I=(()=>{function Se(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Se.prototype=Object.create(Error.prototype),Se})()},4449:(Jn,Lt,ne)=>{"use strict";function x(I){setTimeout(()=>{throw I},0)}ne.d(Lt,{z:()=>x})},4487:(Jn,Lt,ne)=>{"use strict";function x(I){return I}ne.d(Lt,{y:()=>x})},9796:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{k:()=>x});const x=Array.isArray||(I=>I&&"number"==typeof I.length)},9489:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{z:()=>x});const x=I=>I&&"number"==typeof I.length&&"function"!=typeof I},9105:(Jn,Lt,ne)=>{"use strict";function x(I){return"function"==typeof I}ne.d(Lt,{m:()=>x})},1555:(Jn,Lt,ne)=>{"use strict";function x(I){return null!==I&&"object"==typeof I}ne.d(Lt,{K:()=>x})},5639:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{b:()=>I});var x=ne(7574);function I(Se){return!!Se&&(Se instanceof x.y||"function"==typeof Se.lift&&"function"==typeof Se.subscribe)}},4072:(Jn,Lt,ne)=>{"use strict";function x(I){return!!I&&"function"!=typeof I.subscribe&&"function"==typeof I.then}ne.d(Lt,{t:()=>x})},4869:(Jn,Lt,ne)=>{"use strict";function x(I){return I&&"function"==typeof I.schedule}ne.d(Lt,{K:()=>x})},7444:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{s:()=>Ke});var x=ne(5015),I=ne(4449),c=ne(377),Ie=ne(6554),ve=ne(9489),xe=ne(4072),Oe=ne(1555);const Ke=st=>{if(st&&"function"==typeof st[Ie.L])return(st=>Pt=>{const Qt=st[Ie.L]();if("function"!=typeof Qt.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Qt.subscribe(Pt)})(st);if((0,ve.z)(st))return(0,x.V)(st);if((0,xe.t)(st))return(st=>Pt=>(st.then(Qt=>{Pt.closed||(Pt.next(Qt),Pt.complete())},Qt=>Pt.error(Qt)).then(null,I.z),Pt))(st);if(st&&"function"==typeof st[c.hZ])return(st=>Pt=>{const Qt=st[c.hZ]();for(;;){let Dt;try{Dt=Qt.next()}catch(St){return Pt.error(St),Pt}if(Dt.done){Pt.complete();break}if(Pt.next(Dt.value),Pt.closed)break}return"function"==typeof Qt.return&&Pt.add(()=>{Qt.return&&Qt.return()}),Pt})(st);{const Qt=`You provided ${(0,Oe.K)(st)?"an invalid object":`'${st}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Qt)}}},5015:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{V:()=>x});const x=I=>Se=>{for(let c=0,Xe=I.length;c<Xe&&!Se.closed;c++)Se.next(I[c]);Se.complete()}},158:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{q:()=>c});var x=ne(2305),I=ne(7716);const Se=[{path:"public",loadChildren:()=>Promise.resolve().then(ne.bind(ne,5755)).then(Xe=>Xe.PublicModule)},{path:"auth",loadChildren:()=>ne.e(111).then(ne.bind(ne,1111)).then(Xe=>Xe.AuthModule)},{path:"dashboard",loadChildren:()=>ne.e(298).then(ne.bind(ne,298)).then(Xe=>Xe.DashboardModule)}];let c=(()=>{class Xe{}return Xe.\u0275fac=function(_){return new(_||Xe)},Xe.\u0275mod=I.oAB({type:Xe}),Xe.\u0275inj=I.cJS({imports:[[x.Bz.forRoot(Se)],x.Bz]}),Xe})()},5642:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{K:()=>Ie});var x=ne(8583),I=ne(158),Se=ne(8657),c=ne(5566),Xe=ne(7716);let Ie=(()=>{class _{}return _.\u0275fac=function(xe){return new(xe||_)},_.\u0275mod=Xe.oAB({type:_}),_.\u0275inj=Xe.cJS({imports:[[x.ez,I.q,Se.q,c.o9]]}),_})()},8657:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{q:()=>ts});var x=ne(1095),Se=(ne(6237),ne(2458)),c=ne(7716);let Ai=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[Se.BQ],Se.BQ]}),Ne})();var Ri=ne(2680),ci=ne(6627),ni=ne(8583),rn=(ne(9490),ne(9765),ne(6782),ne(9761),ne(369),ne(8345),ne(6461),ne(3679),ne(1769));let ui=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[Se.uc,Se.si,Se.BQ,Se.us,ni.ez],Se.uc,Se.BQ,Se.us,rn.t]}),Ne})();ne(946);let Q=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[Se.uc,Se.BQ],Se.uc,Se.BQ]}),Ne})();var O=ne(521),le=ne(1306);ne(2759),ne(6682),ne(5435),ne(8002),ne(7393),ne(7519),ne(5257),ne(4395),ne(7238);let _i=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[ni.ez,Se.BQ,O.ud,le.ZD],le.ZD,Se.BQ]}),Ne})(),wr=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[Se.BQ],Se.BQ]}),Ne})(),ts=(()=>{class Ne{}return Ne.\u0275fac=function(se){return new(se||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[x.ot,Ai,Ri.Is,Q,ci.Ps,ui,_i,wr]}),Ne})()},5755:(Jn,Lt,ne)=>{"use strict";ne.r(Lt),ne.d(Lt,{PublicModule:()=>ri});var x=ne(8583),I=ne(5566),Se=ne(8657),c=ne(5642),Xe=ne(158),Ie=ne(2305),_=ne(7716);let ve=(()=>{class Ze{constructor(){this.pathAssets="../../../assets/"}getFavoritosChef(){return[{nombre:"Surtido de quesos extreme\xf1os",submensaje:"miel y frutos secos",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Jam\xf3n ib\xe9rico",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Carrillada a la extreme\xf1a",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Solomillo de cerdo",submensaje:"roquefort, pimienta, almendra, mostaza o moscatel",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Gambones a la plancha",submensaje:"12 unidades",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}getEntrantes(){return[{nombre:"Tomate ali\xf1ado con anchoas",precio:7,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Ensalada de ahumados",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Ensalada de rulo de cabra",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Ensalada mixta",precio:8,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Ensaladilla rusa",precio:6,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Ensaladilla de gambas",precio:8,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Surtido de ib\xe9ricos",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Jam\xf3n ib\xe9rico",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Lomo ib\xe9rico",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Surtido de quesos extreme\xf1os",submensaje:"Miel y frutos secos",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Croquetas de jam\xf3n",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Croquetas de merluza y gambas",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Patatas a las tres salsas",submensaje:"Roquefort, brabas, ali oli...",precio:4,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Huevos rotos con jam\xf3n",precio:7,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Consom\xe9 extreme\xf1o",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Sopa de marisco",precio:7,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Gazpacho",precio:4.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Salmorejo",precio:4.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Revuelto de ajetes con gambas",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Revuelto de esp\xe1rragos trigueros y gambas",submensaje:"Temporada",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Revuelto de criadillas",submensaje:"Temporada",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Revuelto de setas y jam\xf3n",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}getCarnes(){return[{nombre:"Carne al ajillo",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Carne con tomate",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Carne a la brasa",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Prueba de cerdo",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"San jacobo casero",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Secreto de cerdo ib\xe9rico",precio:13,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Pluma de cerdo ib\xe9rico",precio:13,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Codillo de cerdo",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Carrillada a la extreme\xf1a",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Solomillo de cerdo",submensaje:"Roquefort, pimienta, almendra, mostaza o moscatel",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Solomillo de cerdo ib\xe9rico",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Solomillo de ternera",precio:18,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Chulet\xf3n de ternera",submensaje:"600 gr.",precio:18,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Pechuga de pollo a la mostaza",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Brocheta de pollo y bacon",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Pollo en pepitoria",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}getArroces(){return[{nombre:"Arroz negro",submensaje:"Con calamares, langostinos y ali oli",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Paella mixta",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Arroz caldoso de marisco",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Arroz con liebre",submensaje:"Temporada",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Risotto de pollo y verduras",precio:14,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}getPescados(){return[{nombre:"Mariscada",submensaje:"Cuerpo, gambas y langostinos - por encargo",precio:30,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Calamares a la romana",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Sepia a la plancha",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Bacalao a la dorada",precio:9,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Bacalao a la nata",precio:11,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Bacalao al horno",precio:13,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Pulpo a la brasa",precio:15,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Dorada asada con ensalada",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"At\xfan a la plancha guarnecido",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Salm\xf3n a la plancha",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Gambones a la plancha",submensaje:"12 unidades",precio:12,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Gambas al ajillo",precio:10,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}getPostres(){return[{nombre:"Las papas de Mar\xeda",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Flan de huevo de Carmen",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Coulant de chocolate con bola de helado heladino",precio:4,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Serradura",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Arroz con leche",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Cremosito de lim\xf3n",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Natillas caseras",precio:3,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Sopa de mango con fruta natural y sorbete",precio:5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Tarta de fruta",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Peras al vino",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"},{nombre:"Tarta Wisky",precio:3.5,pathFoto:this.pathAssets+"plato-generico.jpeg"}]}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275prov=_.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})();var xe=ne(5618);let Oe=(()=>{class Ze{}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-barra-titulo"]],inputs:{titulo:"titulo"},decls:5,vars:1,consts:[[1,"borde-top-favoritos-chef-titulo"],[1,"favoritos-chef-titulo"],[1,"animate__animated","animate__fadeIn","animate__delay-1s"],[1,"borde-bottom-favoritos-chef-titulo"]],template:function(Ce,me){1&Ce&&(_._UZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._uU(3),_.qZA(),_.qZA(),_._UZ(4,"div",3)),2&Ce&&(_.xp6(3),_.Oqu(me.titulo))},styles:['.borde-top-favoritos-chef-titulo[_ngcontent-%COMP%]{height:10px;margin-top:-20px;background:linear-gradient(to bottom,transparent,var(--color-negro-fondo))}.favoritos-chef-titulo[_ngcontent-%COMP%]{background-color:var(--color-negro-fondo);color:#fff;text-shadow:1px 2px 3px var(--color-texto-blanco);font-size:30px;font-weight:500;padding:25px;text-align:center;font-family:"Merienda",sans-serif}.borde-bottom-favoritos-chef-titulo[_ngcontent-%COMP%]{height:10px;background:linear-gradient(to top,var(--color-fondo-claro),var(--color-negro-fondo))}']}),Ze})();var Ke=ne(3490),st=ne(8030);function Pt(Ze,ze){if(1&Ze){const Ce=_.EpF();_.TgZ(0,"span",1),_.TgZ(1,"a",2),_.TgZ(2,"img",3),_.NdJ("mouseout",function(){const K=_.CHM(Ce).$implicit;return K.pathUsed=K.path})("mouseover",function(){const K=_.CHM(Ce).$implicit;return K.pathUsed=K.pathHover}),_.qZA(),_.qZA(),_.qZA()}if(2&Ze){const Ce=ze.$implicit;_.Q6J("title",Ce.title),_.xp6(1),_.Q6J("href",Ce.src,_.LSH),_.xp6(1),_.Q6J("src",Ce.pathUsed,_.LSH)}}let Qt=(()=>{class Ze{constructor(Ce){this.enlacesService=Ce,this.redesSociales=this.enlacesService.getRedesSociales()}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(Ke.v))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-barra-redes-sociales"]],decls:1,vars:1,consts:[["class","icono-red-social",3,"title",4,"ngFor","ngForOf"],[1,"icono-red-social",3,"title"],[3,"href"],[3,"src","mouseout","mouseover"]],template:function(Ce,me){1&Ce&&_.YNc(0,Pt,3,3,"span",0),2&Ce&&_.Q6J("ngForOf",me.redesSociales)},directives:[x.sg],styles:[".icono-red-social[_ngcontent-%COMP%]{width:20px;height:20px}.icono-red-social[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin:10px;cursor:pointer;transition:all 1s ease-in-out}.icono-red-social[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transition:all 1s ease-in-out}"]}),Ze})();function Dt(Ze,ze){if(1&Ze&&(_.TgZ(0,"span",15),_._uU(1),_.qZA()),2&Ze){const Ce=ze.$implicit;_.Q6J("routerLink",Ce.path),_.xp6(1),_.hij(" ",Ce.text," ")}}let St=(()=>{class Ze{constructor(Ce){this.enlaceService=Ce,this.options=this.enlaceService.getOpciones(),this.redesSociales=this.enlaceService.getRedesSociales(),this.enlacesLegales=this.enlaceService.getEnlacesLegales()}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(Ke.v))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-footer"]],decls:31,vars:1,consts:[["fxLayout","column",1,"container"],["fxLayout","row wrap","fxLayoutAlign","center center",1,"superior"],["ngClass.xs","mt20","ngClass.sm","mt20","fxFlex","33","fxFlex.sm","49","fxFlex.xs","98",1,"direccion","datos"],[1,"mb10"],["src","../../../assets/llamada-telefonica-blanco.svg"],["src","../../../assets/email-blanco.svg"],["fxFlex","33","fxFlex.sm","49","fxFlex.xs","98",1,"icono-restaurante","datos"],["src","../../../assets/logo-restaurante-sin-copy.png"],["ngClass.xs","mb20","ngClass.sm","mb20 mt20","fxFlex","33","fxFlex.sm","98","fxFlex.xs","98",1,"horario","datos"],[1,"redes-sociales"],["fxLayout","row wrap","fxLayout.xs","column","fxFlexAlign","center",1,"enlaces-contenido-legal"],["class","enlace-legal",3,"routerLink",4,"ngFor","ngForOf"],[1,"developer"],[1,"enlace-developer"],["href","https://sergiogdev.com/","target","_blank"],[1,"enlace-legal",3,"routerLink"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"span"),_._uU(4,"Plaza Mayor, 28"),_.qZA(),_.TgZ(5,"span",3),_._uU(6,"10600 Plasencia (C\xe1ceres)"),_.qZA(),_.TgZ(7,"span",3),_._UZ(8,"img",4),_._uU(9," 6XX XXX XXX"),_.qZA(),_.TgZ(10,"span"),_._UZ(11,"img",5),_._uU(12," info@restauranteamoremio.com"),_.qZA(),_.qZA(),_.TgZ(13,"div",6),_._UZ(14,"img",7),_.qZA(),_.TgZ(15,"div",8),_.TgZ(16,"span",3),_._uU(17,"Abrimos de lunes a domingo"),_.qZA(),_.TgZ(18,"span"),_._uU(19,"Desde las 7:30 de la ma\xf1ana"),_.qZA(),_.TgZ(20,"span"),_._uU(21,"Hasta la 1:00 de la noche"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(22,"div",9),_._UZ(23,"app-barra-redes-sociales"),_.qZA(),_.TgZ(24,"div",10),_.YNc(25,Dt,2,2,"span",11),_.qZA(),_.qZA(),_.TgZ(26,"div",12),_._uU(27," \xa9 2022 Restaurante Amore Mio. Desarrollado por "),_.TgZ(28,"span",13),_.TgZ(29,"a",14),_._uU(30,"SergioGDev"),_.qZA(),_.qZA(),_.qZA()),2&Ce&&(_.xp6(25),_.Q6J("ngForOf",me.enlacesLegales))},directives:[xe.xw,xe.Wh,st.oO,xe.yH,Qt,xe.XD,x.sg,Ie.rH],styles:['.container[_ngcontent-%COMP%]{background-color:var(--color-gris-fondo);text-align:center}.developer[_ngcontent-%COMP%], .redes-sociales[_ngcontent-%COMP%], .enlaces-contenido-legal[_ngcontent-%COMP%]{color:var(--color-texto-blanco)}.superior[_ngcontent-%COMP%]{color:#fff}.icono-restaurante[_ngcontent-%COMP%]{text-align:center;width:100%;height:130px;margin:30px 0}.icono-restaurante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border-radius:2%;background-color:#fff;border:3px solid var(--color-dorado)}.enlace-legal[_ngcontent-%COMP%]{margin:10px 20px;font-size:14px;color:var(--color-texto-blanco);cursor:pointer;transition:.15s all linear}.enlace-legal[_ngcontent-%COMP%]:hover{color:var(--color-dorado);transition:.15s all linear}.enlaces-contenido-legal[_ngcontent-%COMP%], .redes-sociales[_ngcontent-%COMP%]{text-align:center}.enlace-legal[_ngcontent-%COMP%], .developer[_ngcontent-%COMP%]{font-family:"Cairo",sans-serif}.developer[_ngcontent-%COMP%]{background-color:var(--color-negro-fondo);color:var(--color-texto-blanco);font-size:14px;height:50px;text-align:center;padding-top:30px}.enlace-developer[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:var(--color-fondo-claro);cursor:pointer;transition:.15s all linear;text-decoration:none}.enlace-developer[_ngcontent-%COMP%]:hover{transition:.15s all linear}.datos[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-family:"Cairo",sans-serif;font-size:16px;line-height:20px}.datos[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:16px;margin-right:5px}.mb10[_ngcontent-%COMP%]{margin-bottom:10px}.mt20[_ngcontent-%COMP%]{margin-top:20px}.mb20[_ngcontent-%COMP%]{margin-bottom:20px}.negrita[_ngcontent-%COMP%]{font-weight:900}']}),Ze})(),kt=(()=>{class Ze{}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-item-plato"]],inputs:{itemPlato:"itemPlato"},decls:12,vars:7,consts:[[1,"container","animate__animated","animate__fadeInUp","animate__delay-2s"],[1,"borde-superior"],["fxLayout","row wrap",1,"item-plato"],["fxFlex","80",1,"nombre-plato"],[1,"nombre-plato"],[1,"descripcion-plato",3,"fxShow"],["fxFlex","20",1,"precio-plato"],[1,"borde-inferior"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_._UZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"span",4),_._uU(5),_.qZA(),_.TgZ(6,"span",5),_._uU(7),_.qZA(),_.qZA(),_.TgZ(8,"div",6),_._uU(9),_.ALo(10,"number"),_.qZA(),_.qZA(),_._UZ(11,"div",7),_.qZA()),2&Ce&&(_.xp6(5),_.Oqu(me.itemPlato.nombre),_.xp6(1),_.Q6J("fxShow",me.itemPlato.submensaje),_.xp6(1),_.hij(" (",me.itemPlato.submensaje,") "),_.xp6(2),_.hij(" ",_.xi3(10,4,me.itemPlato.precio,"1.2-2")," \u20ac "))},directives:[xe.xw,xe.yH,st.b8],pipes:[x.JJ],styles:['.container[_ngcontent-%COMP%]{box-shadow:1px 2px 3px var(--tono-box-shadow)}.item-plato[_ngcontent-%COMP%]{font-family:"Cairo",sans-serif;color:var(--color-negro-fondo);background-color:#fff;padding:10px 0}.borde-inferior[_ngcontent-%COMP%], .borde-superior[_ngcontent-%COMP%], .item-plato[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.borde-superior[_ngcontent-%COMP%]{height:10px}.borde-inferior[_ngcontent-%COMP%]{height:10px}.nombre-plato[_ngcontent-%COMP%]{font-weight:900;font-size:16px}.descripcion-plato[_ngcontent-%COMP%]{font-weight:100;font-size:14px}.precio-plato[_ngcontent-%COMP%]{font-size:16px;margin-top:3px;color:var(--color-dorado-oscuro);text-align:right}.foto-item-plato[_ngcontent-%COMP%]{width:100%;border-radius:100%}.borde-superior[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom,transparent,white);height:5px}.borde-inferior[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom,white,transparent);height:5px}']}),Ze})();function Kt(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",18),_._uU(1),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.hij(" ",Ce," ")}}function Ft(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",19),_._UZ(1,"app-item-plato",20),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}let Mn=(()=>{class Ze{constructor(Ce){this.platosService=Ce,this.nombreRestaurante="Restaurante Amore Mio",this.nombreRestauranteResponsive="restaurante\nCaf\xe9 Comidas",this.localizacion="Plasencia (C\xe1ceres)",this.descripcionTitulo="Restaurante Amore Mio",this.descripcionSubtitulo="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard.",this.descripcionTexto=["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla finibus orci erat, sed interdum enim consectetur ut. Integer eu turpis dignissim, porttitor risus ac, placerat nibh.","Duis tincidunt neque ex, et euismod ante vehicula ut. Suspendisse bibendum rutrum elementum. Curabitur commodo commodo pretium. Vivamus in porta nulla, eu ultrices metus. Nulla convallis mollis imperdiet. Cras id lacus non turpis cursus dapibus feugiat vestibulum lorem. Vivamus condimentum tortor eu faucibus cursus.","Maecenas ac dolor eu purus porttitor dapibus et vitae leo. Sed eget accumsan neque, porttitor viverra magna. Interdum et malesuada fames ac ante ipsum primis in faucibus.Duis a nulla eget leo laoreet porttitor in eu arcu. Maecenas sapien dui, tincidunt a efficitur at, vestibulum at justo. Nunc ut condimentum ligula, non convallis urna. Duis aliquam, diam vitae faucibus placerat, elit tellus aliquam nibh, sit amet porta tortor erat ut metus."],this.tituloFavoritosChef="Nuestras sugerencias",this.pathAssets="../../../assets/",this.vPlatos=this.platosService.getFavoritosChef()}ngOnInit(){window.scroll({top:0,left:0})}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(ve))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-inicio"]],decls:24,vars:7,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"nombre-container"],["fxFlex","100",1,"nombre-restaurante","animate__animated","animate__fadeIn"],[1,"localizacion-restaurante","animate__animated","animate__fadeIn"],["fxLayout","row wrap","fxLayoutAlign","center",1,"descripcion-restaurante"],["fxFlexAlign","center","fxFlex","50","fxFlex.sm","100","fxFlex.xs","100",1,"dibujo-restaurante","animate__animated","animate__fadeInLeft"],["src","../../../assets/foto-restaurante-3.jpg"],["fxFlex","50","fxFlex.sm","100","fxFlex.xs","100",1,"texto-restaurante","animate__animated","animate__fadeInRight"],[1,"titulo"],[1,"subtitulo"],["class","texto",4,"ngFor","ngForOf"],[3,"titulo"],["fxLayout","row wrap","fxLayoutAlign","center",1,"favoritos-chef"],["fxFlex","60","fxFlex.xs","98",4,"ngFor","ngForOf"],[1,"ver-menu-completo-container"],["routerLink","/menu",1,"ver-menu-completo"],[1,"texto"],["fxFlex","60","fxFlex.xs","98"],[3,"itemPlato"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_._uU(7),_.qZA(),_.qZA(),_.qZA(),_.TgZ(8,"div",6),_.TgZ(9,"div",7),_._UZ(10,"img",8),_.qZA(),_.TgZ(11,"div",9),_.TgZ(12,"div",10),_._uU(13),_.qZA(),_.TgZ(14,"div",11),_._uU(15),_.qZA(),_.YNc(16,Kt,2,1,"div",12),_.qZA(),_.qZA(),_._UZ(17,"app-barra-titulo",13),_.TgZ(18,"div",14),_.YNc(19,Ft,2,1,"div",15),_.qZA(),_.TgZ(20,"div",16),_.TgZ(21,"div",17),_._uU(22," Ver men\xfa completo "),_.qZA(),_.qZA(),_._UZ(23,"app-footer"),_.qZA()),2&Ce&&(_.xp6(5),_.hij(" ",me.nombreRestaurante," "),_.xp6(2),_.hij(" ",me.localizacion," "),_.xp6(6),_.Oqu(me.descripcionTitulo),_.xp6(2),_.hij("",me.descripcionSubtitulo," "),_.xp6(1),_.Q6J("ngForOf",me.descripcionTexto),_.xp6(1),_.Q6J("titulo",me.tituloFavoritosChef),_.xp6(2),_.Q6J("ngForOf",me.vPlatos))},directives:[xe.Wh,xe.xw,xe.yH,xe.XD,x.sg,Oe,Ie.rH,St,kt],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(foto-restaurante-1.7695efce0d0249086fba.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.nombre-restaurante[_ngcontent-%COMP%], .localizacion-restaurante[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff}.nombre-restaurante[_ngcontent-%COMP%]{padding-top:300px;font-size:45px;font-weight:900}.localizacion-restaurante[_ngcontent-%COMP%]{font-size:30px;font-weight:100;margin-top:50px;padding-bottom:120px}.descripcion-restaurante[_ngcontent-%COMP%]{margin-bottom:10px;padding:40px 0;background-color:var(--tono5-transparente)}.dibujo-restaurante[_ngcontent-%COMP%]{padding:30px;text-align:center}.dibujo-restaurante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:500px;box-shadow:1px 2px 3px var(--tono-box-shadow)}.texto-restaurante[_ngcontent-%COMP%]{padding:30px}.texto-restaurante[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px;font-family:"Cairo",serif}.texto-restaurante[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:32px;margin-bottom:25px;font-weight:900;color:var(--color-dorado)}.texto-restaurante[_ngcontent-%COMP%]   .subtitulo[_ngcontent-%COMP%]{font-size:20px;line-height:25px;margin-bottom:20px;font-weight:500;color:var(--color-dorado)}.texto-restaurante[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{font-size:14px}.borde-top-favoritos-chef-titulo[_ngcontent-%COMP%]{height:20px;background:linear-gradient(to bottom,transparent,var(--color-negro-fondo))}.favoritos-chef-titulo[_ngcontent-%COMP%]{background-color:var(--color-negro-fondo);color:#fff;text-shadow:1px 2px 3px #f0ffe680;font-size:30px;font-weight:500;padding:25px;text-align:center;font-family:"Merienda",sans-serif}.borde-bottom-favoritos-chef-titulo[_ngcontent-%COMP%]{height:20px;background:linear-gradient(to top,var(--color-fondo-claro),var(--color-negro-fondo))}.ver-menu-completo-container[_ngcontent-%COMP%]{padding:30px 10px 50px;text-align:center;display:block}.favoritos-chef[_ngcontent-%COMP%], .ver-menu-completo-container[_ngcontent-%COMP%]{background-color:var(--color-fondo-claro);padding-top:40px}.ver-menu-completo[_ngcontent-%COMP%]{padding:18px 40px;border:2px solid var(--color-dorado-oscuro);border-radius:2px;color:var(--color-dorado-oscuro);font-family:"Merienda",sans-serif;font-size:15px;font-feature-settings:"smcp";font-variant:small-caps;display:inline-block;transition:.1s all linear;cursor:pointer;background-color:#fff}.ver-menu-completo[_ngcontent-%COMP%]:hover{background-color:var(--color-dorado-oscuro);color:#fff;border:2px solid var(--color-negro-fondo);transition:.1s all linear}']}),Ze})();const Jt=function(Ze,ze,Ce){return{"menu-item-scrolled":Ze,"menu-item-normal":ze,"link-selected":Ce}};function qt(Ze,ze){if(1&Ze){const Ce=_.EpF();_.TgZ(0,"div",10),_.NdJ("click",function(){const K=_.CHM(Ce).$implicit;return _.oxw().tituloSeleccionado=K}),_._uU(1),_.qZA()}if(2&Ze){const Ce=ze.$implicit,me=_.oxw();_.Q6J("ngClass",_.kEZ(2,Jt,me.scrollable,!me.scrollable,me.tituloSeleccionado===Ce)),_.xp6(1),_.hij(" ",Ce," ")}}function dn(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",11),_.TgZ(1,"span",12),_._uU(2),_.qZA(),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(2),_.Oqu(Ce.tituloEntrantes)}}function Hn(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",15),_._UZ(1,"app-item-plato",16),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}function Ai(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",13),_.YNc(1,Hn,2,1,"div",14),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(1),_.Q6J("ngForOf",Ce.vEntrantes)}}function Ri(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",11),_.TgZ(1,"span",12),_._uU(2),_.qZA(),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(2),_.Oqu(Ce.tituloCarnes)}}function ci(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",15),_._UZ(1,"app-item-plato",16),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}function ni(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",13),_.YNc(1,ci,2,1,"div",14),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(1),_.Q6J("ngForOf",Ce.vCarnes)}}function zn(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",11),_.TgZ(1,"span",12),_._uU(2),_.qZA(),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(2),_.Oqu(Ce.tituloArroces)}}function Ln(Ze,ze){1&Ze&&(_.TgZ(0,"div",17),_.TgZ(1,"span",18),_._uU(2,"Tiempo de elaboraci\xf3n: 40 minutos para dos personas."),_.qZA(),_.qZA())}function ii(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",15),_._UZ(1,"app-item-plato",16),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}function On(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",13),_.YNc(1,ii,2,1,"div",14),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(1),_.Q6J("ngForOf",Ce.vArroces)}}function vi(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",11),_.TgZ(1,"span",12),_._uU(2),_.qZA(),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(2),_.Oqu(Ce.tituloPescados)}}function xi(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",15),_._UZ(1,"app-item-plato",16),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}function fi(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",13),_.YNc(1,xi,2,1,"div",14),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(1),_.Q6J("ngForOf",Ce.vPescados)}}function Ki(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",11),_.TgZ(1,"span",12),_._uU(2),_.qZA(),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(2),_.Oqu(Ce.tituloPostres)}}function rn(Ze,ze){1&Ze&&(_.TgZ(0,"div",17),_.TgZ(1,"span",18),_._uU(2,"Pregunta por nuestra carta de helados"),_.qZA(),_.qZA())}function Ut(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",15),_._UZ(1,"app-item-plato",16),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("itemPlato",Ce)}}function an(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",13),_.YNc(1,Ut,2,1,"div",14),_.qZA()),2&Ze){const Ce=_.oxw();_.xp6(1),_.Q6J("ngForOf",Ce.vPostres)}}const ct=function(Ze,ze){return{"barra-menu-scrolled":Ze,"barra-menu-normal":ze}};let Et=(()=>{class Ze{constructor(Ce){this.platosService=Ce,this.tituloEntrantes="Entrantes",this.tituloCarnes="Carnes",this.tituloArroces="Arroces",this.tituloPescados="Pescados",this.tituloPostres="Postres",this.vSecciones=[this.tituloEntrantes,this.tituloCarnes,this.tituloArroces,this.tituloPescados,this.tituloPostres],this.tituloSeleccionado="Entrantes",this.vEntrantes=this.platosService.getEntrantes(),this.vCarnes=this.platosService.getCarnes(),this.vArroces=this.platosService.getArroces(),this.vPescados=this.platosService.getPescados(),this.vPostres=this.platosService.getPostres(),this.responsive=window.innerWidth<959,this.scrollable=!(!this.responsive&&window.pageXOffset<300)}ngOnInit(){window.scroll({top:0,left:0})}hacerScrollable(Ce){this.responsive=window.innerWidth<959,this.scrollable=!(!this.responsive&&window.pageYOffset<300)}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(ve))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-menu"]],hostBindings:function(Ce,me){1&Ce&&_.NdJ("scroll",function(K){return me.hacerScrollable(K)},!1,_.Jf7)},decls:22,vars:17,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],["fxLayout.xs","column",3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","titulo-carta",4,"ngIf"],["class","carta","fxLayout","row wrap","fxLayoutAlign","center",4,"ngIf"],["class","subtitulo",4,"ngIf"],[3,"ngClass","click"],[1,"titulo-carta"],[1,"animate__animated","animate__fadeIn","animate__delay-1s"],["fxLayout","row wrap","fxLayoutAlign","center",1,"carta"],["fxFlex","60","fxFlex.xs","98",4,"ngFor","ngForOf"],["fxFlex","60","fxFlex.xs","98"],[3,"itemPlato"],[1,"subtitulo"],[1,"animate__animated","animate__fadeIn"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Nuestra carta "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.YNc(7,qt,2,6,"div",6),_.qZA(),_._UZ(8,"div"),_.YNc(9,dn,3,1,"div",7),_.YNc(10,Ai,2,1,"div",8),_.YNc(11,Ri,3,1,"div",7),_.YNc(12,ni,2,1,"div",8),_.YNc(13,zn,3,1,"div",7),_.YNc(14,Ln,3,0,"div",9),_.YNc(15,On,2,1,"div",8),_.YNc(16,vi,3,1,"div",7),_.YNc(17,fi,2,1,"div",8),_.YNc(18,Ki,3,1,"div",7),_.YNc(19,rn,3,0,"div",9),_.YNc(20,an,2,1,"div",8),_._UZ(21,"app-footer"),_.qZA()),2&Ce&&(_.xp6(6),_.Q6J("ngClass",_.WLB(14,ct,me.scrollable,!me.scrollable)),_.xp6(1),_.Q6J("ngForOf",me.vSecciones),_.xp6(2),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloEntrantes),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloEntrantes),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloCarnes),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloCarnes),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloArroces),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloArroces),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloArroces),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloPescados),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloPescados),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloPostres),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloPostres),_.xp6(1),_.Q6J("ngIf",me.tituloSeleccionado===me.tituloPostres))},directives:[xe.Wh,xe.xw,xe.yH,x.mk,st.oO,x.sg,x.O5,St,kt],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(fondo-carta.d5b0f53bbdace8c204e0.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.subtitulo[_ngcontent-%COMP%], .carta-helados[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);font-weight:900;text-align:center;font-size:1.3em;padding:20px 5px 5px}.carta-helados[_ngcontent-%COMP%]{font-family:"Cairo",sans-serif}.subtitulo[_ngcontent-%COMP%]{font-family:"Merienda",sans-serif}.carta[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);padding:20px 0 50px}.titulo-carta[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);color:var(--color-negro-fondo);text-shadow:1px 1px 1px var(--color-negro-fondo);font-size:30px;font-weight:500;padding:30px 10px 25px;text-align:center;font-family:"Merienda",sans-serif}.pbot60[_ngcontent-%COMP%]{padding-bottom:60px}.container-menu[_ngcontent-%COMP%]{height:320}.barra-menu-normal[_ngcontent-%COMP%], .barra-menu-scrolled[_ngcontent-%COMP%]{width:100%;height:auto;padding-top:20px;padding-bottom:10px;align-items:center;text-align:center;color:#fff;background:#303030}.barra-menu-normal[_ngcontent-%COMP%] + div[_ngcontent-%COMP%], .barra-menu-scrolled[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#303030,transparent);height:10px}.barra-menu-responsive[_ngcontent-%COMP%]{display:none}.menu-item-normal[_ngcontent-%COMP%], .menu-item-scrolled[_ngcontent-%COMP%]{cursor:pointer;padding:10px 15px;font-size:16px;font-family:"Cairo",serif;transition:border .2s ease-in right;text-transform:uppercase;display:inline-block}.menu-item-normal[_ngcontent-%COMP%]{margin:0 1px;animation:menu-item-anim;transition:margin .3s}.menu-item-scrolled[_ngcontent-%COMP%]{animation:menu-item-anim reverse;transition:margin .3s ease-out}.menu-item-normal[_ngcontent-%COMP%]:after, .menu-item-scrolled[_ngcontent-%COMP%]:after{content:"";display:block;width:0;height:2px;background:var(--tono4);transition:width .3s;margin-top:5px}.link-selected[_ngcontent-%COMP%]:after{content:"";display:block;width:0;height:2px;background:var(--tono5);margin-top:5px;width:100%}.menu-item-normal[_ngcontent-%COMP%]:hover:after, .menu-item-scrolled[_ngcontent-%COMP%]:hover:after{width:100%}']}),Ze})(),tn=(()=>{class Ze{constructor(){this.pathAssets="../../../assets/"}getBodegaEncinaBlanca(){return[{nombre:"Vino tinto Encina Blanca 9 Cepas de Alburquerque",mensaje:"Es un vino corpulento, de gran finura, que a\xfana la fruta fresca y sabrosa con taninos amables y maderas en boca que lo convierte en un tinto capaz de satisfacer a los amantes de las variedades singulares.",precio:17,pathFoto:this.pathAssets+"9-cepas-alburquerque.jpeg"},{nombre:"Vino verdejo Encina Blanca de Alburquerque",mensaje:"\xdanico, sorprendente y completamente diferente a los vinos tradicionales de esta variedad. Fermentado lentamente, redondeado con sus l\xedas m\xe1s finas, mimado para obtener su mejor versi\xf3n.",precio:15,pathFoto:this.pathAssets+"verdejo-encina-blanca-alburquerque.jpeg"},{nombre:"Vino blanco Encina Blanca de Alburquerque",mensaje:"La singularidad de este vino est\xe1 reforzada por la diversidad de variedades aut\xf3ctonas minoritarias que se emplean en su elaboraci\xf3n y la complejidad sensorial que le aportan cada una de ellas.",precio:5,pathFoto:this.pathAssets+"blanco-encina-blanca-alburquerque.png"},{nombre:"Vino espumoso Encina Blanca de Alburquerque",mensaje:"Suave, afrutado y dulce, sus finas y refrescantes burbujas llenar\xe1n de elegancia su mesa, para vestirla de velada especial y \xfanica.",precio:12,pathFoto:this.pathAssets+"espumoso-encina-blanca-alburquerque.jpeg"}]}getExtremadura(){return[{nombre:"Vino tinto Alaude",mensaje:"Joven frutado y de gran frescura elaborado con uvas Tempranillo y Cabernet Sauvignon. Ideal para maridaje con carnes rojas y pescados blancos y quesos, este vino te sorprender\xe1 en la potencia de su paso afrutado y equilibrado.",precio:12,pathFoto:this.pathAssets+"alaude.jpeg"},{nombre:"Vino tinto Habla del Silencio",mensaje:"En nariz ofrece aromas de frutos rojos y negros, acompa\xf1ados por notas especiadas que recuerdan a la pimienta y bals\xe1micas como la menta. Es un vino sabroso, complejo y muy vivo.",precio:16,pathFoto:this.pathAssets+"habla-del-silencio.jpeg"},{nombre:"Vino tinto Coloma Merlot",mensaje:"Complejo y elegante con aromas de ciruela, cereza, chocolate y confituras. Sabor intenso y aterciopelado, completado con taninos dulces que hacen de este, un vino sabroso, suave y equilibrado.",precio:18,pathFoto:this.pathAssets+"coloma-merlot.jpeg"}]}getRiberaDelDuero(){return[{nombre:"Vino tinto Finca Resalso Roble",mensaje:"Tempranillo joven Ribera del Duero que destaca sobretodo por su versatilidad a la hora de maridad. Puede maridar con carnes blancas, embutidos, cualquier aperitivo...",precio:12,pathFoto:this.pathAssets+"finca-resalso.jpeg"},{nombre:"Vino tinto Mart\xedn Berdugo Roble",mensaje:"Ribera joven con punto extra de complejidad, este monovarietal de Tempranillo de Bodega y Vi\xf1edos Mart\xedn Berdugo preserva todo su breve crianza en roble.",precio:13,pathFoto:this.pathAssets+"martin-berdugo-roble.jpeg"},{nombre:"Vino tinto Pruno",mensaje:"Las variedades Tempranillo Cabernet sauvignon y el trabajo en bodega dan lugar a un tinto goloso, con adictivos recuerdos de tofe, fruta madura y regaliz. Todo un caramelo para los aficionados a los tintos de la Ribera del Duero.",precio:17,pathFoto:this.pathAssets+"pruno.jpeg"},{nombre:"Vino tinto Emilio Moro Crianza",mensaje:"Intenso y elegante con aromas de frutos negros maduros muy varietales seguidos de notas pulidas propias de su crianza, especias y sutiles tostados. Conjunto complejo y elegante.",precio:28,pathFoto:this.pathAssets+"emilio-moro-crianza.jpeg"},{nombre:"Vino tinto Pago de los Capellares Crianza",mensaje:"Con aromas de fruta roja madura, toques bals\xe1micos. Su paso por boca es suave, llenando el paladar de exquisitos sabores a ciruela y ar\xe1ndano, con un final largo y elegante. Destaca su equilibrio y acidez viva.",precio:39,pathFoto:this.pathAssets+"pago-capellares-criaz.jpeg"},{nombre:"Vino tinto PSI de Pingus",mensaje:"Un tinto fresco, con mucho sabor a fruta, de la mano del conocido ingeniero agr\xf3nomo y en\xf3logo Peter Sisseck. Proviene de cepas viejas de una edad media de m\xe1s de 30 a\xf1os cultivadas en microparcelas de la peque\xf1a bodega Dominio de Pingus.",precio:68,pathFoto:this.pathAssets+"psi-pingus.jpeg"}]}getRioja(){return[{nombre:"Vino tinto Luis Ca\xf1as Crianza",mensaje:"En boca es amplio y carnoso, encontramos un vino con volumenn y buen equilibrio. Final con nervio, elegante y afrutado, con una tanicidad que nos hace salivar reclam\xe1ndonos otro trago.",precio:17,pathFoto:this.pathAssets+"luis-canas-crianza.jpeg"}]}getOtrasDenominaciones(){return[{nombre:"Vino tinto Flor de Vetus (Toro)",mensaje:"La fruta es m\xe1s oscura y hay m\xe1s tanino, pero tambi\xe9n hay buena frescura y equilibrio, y termina muy sabroso, con un toque casi salado. Persistente final agradable.",precio:13,pathFoto:this.pathAssets+"flor-vetus-toro.png"},{nombre:"Vino tinto Senda de las Moradas (Madrid)",mensaje:"Garnacha muy varietal con aromas florales, de ciruela y monte bajo sobre un fondo muy mineral, caracter\xedstico del suelo gran\xedtico. Prevalece la variedad sobre una sutil madera.",precio:15,pathFoto:this.pathAssets+"senda-moradas-madrid.jpeg"},{nombre:"Vino tinto Portugu\xe9s Carlos Reynolds",mensaje:"El aroma presenta frutas frescas en un perfecto casamiento con la madera, que revelan en la boca con taninos finos y elegantes, en un conjunto de larga y agradable persistencia.",precio:16,pathFoto:this.pathAssets+"portugues-carlos-reynolds.jpeg"},{nombre:"Vino tinto Tres Picos (Campo de Borja)",mensaje:"Su buena concentraci\xf3n arom\xe1tica, con fruta roja y matices florales en primer plano, lo convierten en un excellente ejemplar de la mejor Garnacha aragonesa.",precio:24,pathFoto:this.pathAssets+"tres-picos-campo-borja.jpeg"}]}getBlancosVerdejosAlbarinnos(){return[{nombre:"Vino blanco Dulce Eva (Extremadura)",mensaje:"Aporta matices frutales, como e pomelo, la manzana asada y tropicales: tambi\xe9n florales, como el geranio. Tiene nun paso muy agradable, dulce pero no dulz\xf3n, ni empalagoso. Deja un buen recuerdo frutal.",precio:6,pathFoto:this.pathAssets+"dulce-eva.jpeg"},{nombre:"Vino blanco Godello Sonrisa de Tares",mensaje:"Godello muy fresco y varietal que cautivar\xe1 a los aficionados a los blancos. Notas arom\xe1ticas de c\xedtricos, manzana verde, nectarina, flores blancas. Un paso por boca refrescante y persistente.",precio:13,pathFoto:this.pathAssets+"godello-sonrisa-tares.jpeg"},{nombre:"Vino blanco Protos (Rueda)",mensaje:"En boca es un vino seco, con una acidez natural moderada y equilibrada que le da frescura y alegr\xeda en boca. La crianza sobre l\xedas finas aportan en boca redondez, cuerpo y una buena estructura.",precio:11,pathFoto:this.pathAssets+"protos-rueda.jpeg"},{nombre:"Vino blanco Naia (Rueda)",mensaje:"Potente y sabroso. Vino muy frutal, con una frescura equilibrada y un largo posgusto en el que reaparecen amplificados todos estos matices. Un vino complejo, elegante y muy equilibrado.",precio:14,pathFoto:this.pathAssets+"naia-rueda.jpeg"},{nombre:"Vino blanco Albari\xf1o Santiago Ru\xedz 2019",mensaje:"Santiago Ru\xedz es uno de esos albari\xf1os que no pueden escapar a la atenci\xf3n de cualquier aficionado a los blancos gallegos al estar elaborado por uno de los considerados padres de la variedad reina de R\xedas Baixas.",precio:19,pathFoto:this.pathAssets+"albarinno-santiago-ruiz.jpeg"}]}getEspumososSobremesa(){return[{nombre:"Cava Agusti Torello Brut Reserva",mensaje:"Destaca por sus notas frescas y afrutadas. Conjuga el car\xe1cter de las tres variedades t\xedpicas con la tipicidad de unas vi\xf1as de m\xe1s de 30 a\xf1os.",precio:17,pathFoto:this.pathAssets+"agusti-torello-brut-reserva.jpeg"},{nombre:"Vino sobremesa Naranja Oliveros",mensaje:"Aroma espectacular con una profunda reminiscencia de naranja, caf\xe9 y notas tostadas. Incre\xedble final bals\xe1mico. Color caoba muy oscuro debido a la oxidaci\xf3n en barricas de roble americano.",precio:16,pathFoto:this.pathAssets+"naranja-oliveros.jpg"}]}getVinosDelPaseante(){return[{nombre:"Vino tinto (Menc\xeda) La Escucha 2018",mensaje:"En las tierras empinadas de oscura pizarra, las vi\xf1as acogen una viticultura \xedntima y esmerada. La sabidur\xeda capaz de conservar la magia de los vinos de Menc\xeda. Aroma intenso, taninos sedosos y agradable frescor.",precio:14,pathFoto:this.pathAssets+"mencia-la-escucha.png"},{nombre:"Vino blanco (Verdejo) La Charla 2020",mensaje:"Sobre la tierra pedregosa se extiende un mar de vi\xf1edos de Verdejo. Tersas, doradas, sus uvas ofrecen la armon\xeda del aroma a fruta madura, y ligeras notas de frescor verde anisado.",precio:10,pathFoto:this.pathAssets+"verdejo-la-charla.jpeg"},{nombre:"Vino blanco (Godello) La Duda 2020",mensaje:"Por su elegancia, La Duda combina my bien con todo tipo de pescados y mariscos. Con ensaladas tibias y quesos cremosos. Tambi\xe9n es un buen acompa\xf1ante de arroces con pescado y de tapeo gastron\xf3mico.",precio:13,pathFoto:this.pathAssets+"godello-la-duda.jpeg"},{nombre:"Vino tinto (Garnacha) El Pispa 2019",mensaje:"Vivo y sabroso, Vinos del Paseante - El pispa es un vino tinto con un perfecto equilibrio de fruta madura, toques minerales y notas de torrefacci\xf3n.",precio:12,pathFoto:this.pathAssets+"garnacha-el-pispa.jpeg"}]}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275prov=_.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})(),pn=(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-item-vinacoteca"]],inputs:{item:"item"},decls:12,vars:8,consts:[["fxLayout","row wrap",1,"item-vino","animate__animated","animate__fadeInUp","animate__delay-2s"],["fxFlex","35",1,"marco-foto-item-vino"],[1,"foto-item-vino",3,"src"],["fxFlex","60",1,"container-descripcion"],[1,"nombre-vino"],[1,"descripcion-vino",3,"fxShow"],[1,"precio-vino"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"img",2),_.qZA(),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_.TgZ(5,"div",4),_._uU(6),_.qZA(),_.TgZ(7,"div",5),_._uU(8),_.qZA(),_.qZA(),_.TgZ(9,"div",6),_._uU(10),_.ALo(11,"number"),_.qZA(),_.qZA(),_.qZA()),2&Ce&&(_.xp6(2),_.Q6J("src",me.item.pathFoto,_.LSH),_.xp6(4),_.hij(" ",me.item.nombre," "),_.xp6(1),_.Q6J("fxShow",me.item.mensaje),_.xp6(1),_.hij(" ",me.item.mensaje," "),_.xp6(2),_.hij(" ",_.xi3(11,5,me.item.precio,"1.2-2")," \u20ac "))},directives:[xe.xw,xe.yH,st.b8],pipes:[x.JJ],styles:['.item-vino[_ngcontent-%COMP%]{margin:10px;box-shadow:1px 1px 5px var(--tono-box-shadow);border-radius:2px;font-family:"Cairo",sans-serif;color:var(--color-negro-fondo);background-color:#fff;padding:15px 5px}.nombre-vino[_ngcontent-%COMP%]{font-weight:900;font-size:20px;margin-bottom:10px;line-height:20px}.descripcion-vino[_ngcontent-%COMP%]{font-weight:100;font-size:14px;margin-bottom:15px;line-height:16px}.container-descripcion[_ngcontent-%COMP%]{margin-left:10px}.marco-foto-item-vino[_ngcontent-%COMP%]{border-right:5px;background-color:#fff;border-radius:2px;height:200px;text-align:center;display:flex;overflow:hidden;align-items:center;justify-content:center}.precio-vino[_ngcontent-%COMP%]{font-size:18px;margin-top:3px;color:var(--color-dorado-oscuro)}.foto-item-vino[_ngcontent-%COMP%]{height:100%}']}),Ze})();function An(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function Bn(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function di(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function Ei(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function Vn(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function ki(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function Mi(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}function Ti(Ze,ze){if(1&Ze&&(_.TgZ(0,"div",9),_._UZ(1,"app-item-vinacoteca",10),_.qZA()),2&Ze){const Ce=ze.$implicit;_.xp6(1),_.Q6J("item",Ce)}}let er=(()=>{class Ze{constructor(Ce){this.vinacotecaService=Ce,this.vEncinaBlanca=this.vinacotecaService.getBodegaEncinaBlanca(),this.vExtremadura=this.vinacotecaService.getExtremadura(),this.vRiberaDuero=this.vinacotecaService.getRiberaDelDuero(),this.vRioja=this.vinacotecaService.getRioja(),this.vOtrasDenominaciones=this.vinacotecaService.getOtrasDenominaciones(),this.vBlancosVerdejosAlbarinnos=this.vinacotecaService.getBlancosVerdejosAlbarinnos(),this.vEspumososSobremesa=this.vinacotecaService.getEspumososSobremesa(),this.vPaseante=this.vinacotecaService.getVinosDelPaseante(),this.tEncinaBlanca="Bodega Encina Blanca de Alburquerque",this.tExtremadura="Extremadura",this.tRiberaDuero="Ribera del Duero",this.tRioja="Rioja",this.tOtrasDenominaciones="Otras Denominaciones",this.tBlancosVerdejosAlbarinnos="Blancos / Verdejos / Albari\xf1os",this.tEspumososSobremesa="Vinos Espumosos y Sobremesa",this.tPaseante="Vinos del Paseante"}ngOnInit(){window.scroll({top:0,left:0})}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(tn))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-vinacoteca"]],decls:47,vars:16,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],[1,"titulo-carta"],[1,"animate__animated","animate__fadeIn","animate__delay-1s"],["fxLayout","row wrap","fxLayoutAlign","center",1,"carta"],["fxFlex","40","fxFlex.xs","98",4,"ngFor","ngForOf"],["fxFlex","40","fxFlex.xs","98"],[3,"item"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Nuestros vinos "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.TgZ(7,"span",6),_._uU(8),_.qZA(),_.qZA(),_.TgZ(9,"div",7),_.YNc(10,An,2,1,"div",8),_.qZA(),_.TgZ(11,"div",5),_.TgZ(12,"span",6),_._uU(13),_.qZA(),_.qZA(),_.TgZ(14,"div",7),_.YNc(15,Bn,2,1,"div",8),_.qZA(),_.TgZ(16,"div",5),_.TgZ(17,"span",6),_._uU(18),_.qZA(),_.qZA(),_.TgZ(19,"div",7),_.YNc(20,di,2,1,"div",8),_.qZA(),_.TgZ(21,"div",5),_.TgZ(22,"span",6),_._uU(23),_.qZA(),_.qZA(),_.TgZ(24,"div",7),_.YNc(25,Ei,2,1,"div",8),_.qZA(),_.TgZ(26,"div",5),_.TgZ(27,"span",6),_._uU(28),_.qZA(),_.qZA(),_.TgZ(29,"div",7),_.YNc(30,Vn,2,1,"div",8),_.qZA(),_.TgZ(31,"div",5),_.TgZ(32,"span",6),_._uU(33),_.qZA(),_.qZA(),_.TgZ(34,"div",7),_.YNc(35,ki,2,1,"div",8),_.qZA(),_.TgZ(36,"div",5),_.TgZ(37,"span",6),_._uU(38),_.qZA(),_.qZA(),_.TgZ(39,"div",7),_.YNc(40,Mi,2,1,"div",8),_.qZA(),_.TgZ(41,"div",5),_.TgZ(42,"span",6),_._uU(43),_.qZA(),_.qZA(),_.TgZ(44,"div",7),_.YNc(45,Ti,2,1,"div",8),_.qZA(),_._UZ(46,"app-footer"),_.qZA()),2&Ce&&(_.xp6(8),_.Oqu(me.tEncinaBlanca),_.xp6(2),_.Q6J("ngForOf",me.vEncinaBlanca),_.xp6(3),_.Oqu(me.tExtremadura),_.xp6(2),_.Q6J("ngForOf",me.vExtremadura),_.xp6(3),_.Oqu(me.tRiberaDuero),_.xp6(2),_.Q6J("ngForOf",me.vRiberaDuero),_.xp6(3),_.Oqu(me.tRioja),_.xp6(2),_.Q6J("ngForOf",me.vRioja),_.xp6(3),_.Oqu(me.tOtrasDenominaciones),_.xp6(2),_.Q6J("ngForOf",me.vOtrasDenominaciones),_.xp6(3),_.Oqu(me.tBlancosVerdejosAlbarinnos),_.xp6(2),_.Q6J("ngForOf",me.vBlancosVerdejosAlbarinnos),_.xp6(3),_.Oqu(me.tEspumososSobremesa),_.xp6(2),_.Q6J("ngForOf",me.vEspumososSobremesa),_.xp6(3),_.Oqu(me.tPaseante),_.xp6(2),_.Q6J("ngForOf",me.vPaseante))},directives:[xe.Wh,xe.xw,xe.yH,x.sg,St,pn],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(foto-restaurante-4.26388ef58e2f6aff9172.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.subtitulo[_ngcontent-%COMP%], .carta-helados[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);font-weight:900;text-align:center;font-size:1.3em;padding:20px 5px 5px}.carta-helados[_ngcontent-%COMP%]{font-family:"Cairo",sans-serif}.subtitulo[_ngcontent-%COMP%]{font-family:"Merienda",sans-serif}.carta[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);padding:20px 0}.titulo-carta[_ngcontent-%COMP%]{background-color:var(--tono5-transparente);color:var(--color-negro-fondo);text-shadow:1px 1px 1px var(--color-negro-fondo);font-size:30px;line-height:50px;font-weight:500;padding:50px 10px 25px;text-align:center;font-family:"Merienda",sans-serif}.pbot60[_ngcontent-%COMP%]{padding-bottom:60px}']}),Ze})();var Zi=ne(2958),ei=ne(2340);let oi=(()=>{class Ze{constructor(){this.center=[-6.08978,40.02984],this.center2=[-6.08978,40.02984],this.zoom=17,this.container="mapa"}ngOnInit(){window.scroll({top:0,left:0})}ngAfterViewInit(){Zi.accessToken=ei.N.mapboxToken;var Ce=new Zi.Map({container:this.container,style:"mapbox://styles/mapbox/streets-v11",center:this.center2,zoom:this.zoom,scrollZoom:!1});(new Zi.Marker).setLngLat(this.center2).addTo(Ce)}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-contacto"]],decls:25,vars:0,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],["fxLayout","row wrap","fxLayoutAlign","center",1,"contacto"],["fxFlex","50","fxFlex.sm","100","fxFlex.xs","100",1,"izquierdo"],[1,"icono-restaurante"],["src","../../../assets/logo-restaurante-sin-copy.png"],[1,"datos"],[1,"negrita"],[1,"negrita","mb20"],["id","mapa","fxFlex","50","fxFlex.sm","100","fxFlex.xs","100"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Contacta con nosotros "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.TgZ(7,"div",6),_.TgZ(8,"div",7),_._UZ(9,"img",8),_.qZA(),_.TgZ(10,"div",9),_.TgZ(11,"span",10),_._uU(12,"Plaza Mayor, 28"),_.qZA(),_.TgZ(13,"span",11),_._uU(14,"10600 Plasencia (C\xe1ceres)"),_.qZA(),_.TgZ(15,"span"),_._uU(16,"Tel\xe9fono"),_.qZA(),_.TgZ(17,"span",11),_._uU(18,"6XX XXX XXX"),_.qZA(),_.TgZ(19,"span"),_._uU(20,"Correo electr\xf3nico"),_.qZA(),_.TgZ(21,"span",10),_._uU(22,"info@restauranteamoremio.com"),_.qZA(),_.qZA(),_.qZA(),_._UZ(23,"div",12),_.qZA(),_._UZ(24,"app-footer"),_.qZA())},directives:[xe.Wh,xe.xw,xe.yH,St],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(foto-restaurante-6.2ddfe51248baff76e086.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.contacto[_ngcontent-%COMP%]{background-color:var(--tono5)}.izquierdo[_ngcontent-%COMP%]{text-align:center;font-family:"Cairo",sans-serif;line-height:22px;margin-bottom:30px}.icono-restaurante[_ngcontent-%COMP%]{text-align:center;width:100%;height:200px;margin:30px 0}.icono-restaurante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border-radius:10px;border:2px solid var(--color-negro-fondo);background-color:#fff}.datos[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block}.mb20[_ngcontent-%COMP%]{margin-bottom:20px}.negrita[_ngcontent-%COMP%]{font-weight:900}#mapa[_ngcontent-%COMP%]{height:550px;width:auto}']}),Ze})(),en=(()=>{class Ze{constructor(){this.responsable="restaurante",this.domicilio="Avenida Aurelio Cabrera, 9, Alburquerque (Badajoz)",this.nif="",this.email="info@restaurante.com",this.telefono="+34 6XX XXX XXX"}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-aviso-legal"]],decls:135,vars:9,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],[1,"texto"],[1,"titulo-parrafo"],[1,"parrafo"],[1,"negrita"],["type","a"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Aviso legal "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.TgZ(7,"div",6),_._uU(8," Titular de la web "),_.qZA(),_.TgZ(9,"div",7),_._uU(10),_.qZA(),_.TgZ(11,"div",7),_.TgZ(12,"ul"),_.TgZ(13,"li"),_.TgZ(14,"span",8),_._uU(15,"Responsable:"),_.qZA(),_._uU(16),_.qZA(),_.TgZ(17,"li"),_.TgZ(18,"span",8),_._uU(19,"NIF:"),_.qZA(),_._uU(20),_.qZA(),_.TgZ(21,"li"),_.TgZ(22,"span",8),_._uU(23,"Domicilio:"),_.qZA(),_._uU(24),_.qZA(),_.TgZ(25,"li"),_.TgZ(26,"span",8),_._uU(27,"Email:"),_.qZA(),_._uU(28),_.qZA(),_.qZA(),_.qZA(),_._UZ(29,"br"),_.TgZ(30,"div",7),_._uU(31," El titular del presente sitio web, act\xfaa como responsable de tratamientos que contienen datos de car\xe1cter personal, debidamente detallados en el registro de actividades de tratamientos de datos. "),_.qZA(),_.TgZ(32,"div",7),_._uU(33," Para comunicarse con nosotros, ponemos a su disposici\xf3n diferentes medios de contacto que detallamos a continuaci\xf3n: "),_.qZA(),_.TgZ(34,"div",7),_.TgZ(35,"ul"),_.TgZ(36,"li"),_.TgZ(37,"span",8),_._uU(38,"Horario:"),_.qZA(),_._uU(39," De lunes a domingo, de 7:30 de la ma\xf1ana a 01:00 de la noche"),_.qZA(),_.TgZ(40,"li"),_.TgZ(41,"span",8),_._uU(42,"Tel\xe9fono:"),_.qZA(),_._uU(43),_.qZA(),_.TgZ(44,"li"),_.TgZ(45,"span",8),_._uU(46,"Direcci\xf3n:"),_.qZA(),_._uU(47),_.qZA(),_.TgZ(48,"li"),_.TgZ(49,"span",8),_._uU(50,"Email:"),_.qZA(),_._uU(51),_.qZA(),_.qZA(),_.qZA(),_.TgZ(52,"div",7),_._uU(53," La direcci\xf3n postal detallada y la direcci\xf3n de correo electr\xf3nico detalladas en el p\xe1rrafo anterior, son las \xfanicas v\xe1lidas para el ejercicio de los derechos de acceso, rectificaci\xf3n, supresi\xf3n, limitaci\xf3n del tratamiento u oposici\xf3n, que podr\xe1 hacerlos efectivo mediante escrito acreditando su identidad. "),_.qZA(),_.TgZ(54,"div",7),_._uU(55," Igualmente podr\xe1 revocar en ambas direcciones, cualquier autorizaci\xf3n previamente otorgada en los formularios disponibles en este sitio web. "),_.qZA(),_.TgZ(56,"div",6),_._uU(57," Objeto "),_.qZA(),_.TgZ(58,"div",7),_._uU(59),_.qZA(),_.TgZ(60,"div",7),_._uU(61," La navegaci\xf3n por el sitio web de EL PROPIETARIO DE LA WEB le atribuye la condici\xf3n de USUARIO del mismo y conlleva su aceptaci\xf3n plena y sin reservas de todas y cada una de las condiciones publicadas en este aviso legal, advirtiendo de que dichas condiciones podr\xe1n ser modificadas sin notificaci\xf3n previa por parte de EL PROPIETARIO DE LA WEB, en cuyo caso se proceder\xe1 a su publicaci\xf3n y aviso con la m\xe1xima antelaci\xf3n posible. "),_.qZA(),_.TgZ(62,"div",7),_._uU(63," Por ello es recomendable leer atentamente su contenido en caso de desear acceder y hacer uso de la informaci\xf3n y de los servicios ofrecidos desde este sitio web. "),_.qZA(),_.TgZ(64,"div",7),_._uU(65," El usuario adem\xe1s, se obliga a hacer un uso correcto del sitio web de conformidad con las leyes, la buena fe, el orden p\xfablico, los usos del tr\xe1fico y el presente Aviso Legal, y responder\xe1 frente a EL PROPIETARIO DE LA WEB o frente a terceros, de cualesquiera da\xf1os y perjuicios que pudieran causarse como consecuencia del incumplimiento de dicha obligaci\xf3n. "),_.qZA(),_.TgZ(66,"div",7),_._uU(67," Cualquier utilizaci\xf3n distinta a la autorizada est\xe1 expresamente prohibida, pudiendo EL PROPIETARIO DE LA WEB denegar o retirar el acceso y su uso en cualquier momento. "),_.qZA(),_.TgZ(68,"div",6),_._uU(69," Condiciones de acceso y utilizaciones de la web "),_.qZA(),_.TgZ(70,"div",7),_._uU(71," El sitio web y sus servicios son de acceso libre y gratuito. No obstante, PROPIETARIO DE LA WEB puede condicionar la utilizaci\xf3n de algunos de los servicios ofrecidos en su web a la previa cumplimentaci\xf3n del correspondiente formulario. "),_.qZA(),_.TgZ(72,"div",7),_._uU(73," El usuario garantiza la autenticidad y actualidad de todos aquellos datos que comunique a PROPIETARIO DE LA WEB y ser\xe1 el \xfanico responsable de las manifestaciones falsas o inexactas que realice. "),_.qZA(),_.TgZ(74,"div",7),_._uU(75," El usuario se compromete expresamente a hacer un uso adecuado de los contenidos y servicios de PROPIETARIO DE LA WEB y a no emplearlos para, entre otros: "),_.qZA(),_.TgZ(76,"ol",9),_.TgZ(77,"li"),_._uU(78,"Difundir contenidos delictivos, violentos, pornogr\xe1ficos, racistas, xen\xf3fobos, ofensivos, de apolog\xeda del terrorismo o, en general, contrarios a la ley o al orden p\xfablico."),_.qZA(),_.TgZ(79,"li"),_._uU(80,"Introducir en la red virus inform\xe1ticos o realizar actuaciones susceptibles de alterar, estropear, interrumpir o generar errores o da\xf1os en los documentos electr\xf3nicos, datos o sistemas f\xedsicos y l\xf3gicos de PROPIETARIO DE LA WEB o de terceras personas; as\xed como obstaculizar el acceso de otros usuarios al sitio web y a sus servicios mediante el consumo masivo de los recursos inform\xe1ticos a trav\xe9s de los cuales PROPIETARIO DE LA WEB presta sus servicios."),_.qZA(),_.TgZ(81,"li"),_._uU(82,"Intentar acceder a las cuentas de correo electr\xf3nico de otros usuarios o a \xe1reas restringidas de los sistemas inform\xe1ticos de PROPIETARIO DE LA WEB o de terceros y, en su caso, extraer informaci\xf3n."),_.qZA(),_.TgZ(83,"li"),_._uU(84,"Vulnerar los derechos de propiedad intelectual o industrial, as\xed como violar la confidencialidad de la informaci\xf3n de PROPIETARIO DE LA WEB o de terceros."),_.qZA(),_.TgZ(85,"li"),_._uU(86,"Suplantar la identidad de cualquier otro usuario."),_.qZA(),_.TgZ(87,"li"),_._uU(88,"Reproducir, copiar, distribuir, poner a disposici\xf3n de, o cualquier otra forma de comunicaci\xf3n p\xfablica, transformar o modificar los contenidos, a menos que se cuente con la autorizaci\xf3n del titular de los correspondientes derechos o ello resulte legalmente permitido."),_.qZA(),_.TgZ(89,"li"),_._uU(90,"Recabar datos con finalidad publicitaria y de remitir publicidad de cualquier clase y comunicaciones con fines de venta u otras de naturaleza comercial sin que medie su previa solicitud o consentimiento."),_.qZA(),_.qZA(),_.TgZ(91,"div",7),_._uU(92," Todos los contenidos del sitio web, como textos, fotograf\xedas, gr\xe1ficos, im\xe1genes, iconos, tecnolog\xeda, software, as\xed como su dise\xf1o gr\xe1fico y c\xf3digos fuente, constituyen una obra cuya propiedad pertenece a PROPIETARIO DE LA WEB, sin que puedan entenderse cedidos al usuario ninguno de los derechos de explotaci\xf3n sobre los mismos m\xe1s all\xe1 de lo estrictamente necesario para el correcto uso de la web. "),_.qZA(),_.TgZ(93,"div",7),_._uU(94," En definitiva, los usuarios que accedan a este sitio web pueden visualizar los contenidos y efectuar, en su caso, copias privadas autorizadas siempre que los elementos reproducidos no sean cedidos posteriormente a terceros, ni se instalen a servidores conectados a redes, ni sean objeto de ning\xfan tipo de explotaci\xf3n. "),_.qZA(),_.TgZ(95,"div",7),_._uU(96," Asimismo, todas las marcas, nombres comerciales o signos distintivos de cualquier clase que aparecen en el sitio web son propiedad de PROPIETARIO DE LA WEB, sin que pueda entenderse que el uso o acceso al mismo atribuya al usuario derecho alguno sobre los mismos. "),_.qZA(),_.TgZ(97,"div",7),_._uU(98," La distribuci\xf3n, modificaci\xf3n, cesi\xf3n o comunicaci\xf3n p\xfablica de los contenidos y cualquier otro acto que no haya sido expresamente autorizado por el titular de los derechos de explotaci\xf3n quedan prohibidos. "),_.qZA(),_.TgZ(99,"div",7),_._uU(100," El establecimiento de un hiperenlace no implica en ning\xfan caso la existencia de relaciones entre PROPIETARIO DE LA WEB y el propietario del sitio web en la que se establezca, ni la aceptaci\xf3n y aprobaci\xf3n por parte de PROPIETARIO DE LA WEB de sus contenidos o servicios. "),_.qZA(),_.TgZ(101,"div",7),_._uU(102," PROPIETARIO DE LA WEB no se responsabiliza del uso que cada usuario le d\xe9 a los materiales puestos a disposici\xf3n en este sitio web ni de las actuaciones que realice en base a los mismos. "),_.qZA(),_.TgZ(103,"div",6),_._uU(104," Responsabilidad "),_.qZA(),_.TgZ(105,"div",7),_._uU(106," El prestador se exime de cualquier tipo de responsabilidad derivada de la informaci\xf3n publicada en su sitio web, siempre que esta informaci\xf3n haya sido manipulada o introducida por un tercero ajeno al mismo. "),_.qZA(),_.TgZ(107,"div",7),_._uU(108," En el caso de que cualquier usuario o un tercero considere que existen hechos o circunstancias que revelen el car\xe1cter il\xedcito de la utilizaci\xf3n de cualquier contenido y/o de la realizaci\xf3n de cualquier actividad en las p\xe1ginas web incluidas o accesibles a trav\xe9s del sitio web, deber\xe1 enviar una notificaci\xf3n al prestador identific\xe1ndose debidamente y especificando las supuestas infracciones. "),_.qZA(),_.TgZ(109,"div",6),_._uU(110," Exclusi\xf3n de garant\xedas y de responsabilidad en el acceso y la utilizaci\xf3n "),_.qZA(),_.TgZ(111,"div",7),_._uU(112," El contenido del presente sitio web es de car\xe1cter general y tiene una finalidad meramente informativa, sin que se garantice plenamente el acceso a todos los contenidos, ni su exhaustividad, correcci\xf3n, vigencia o actualidad, ni su idoneidad o utilidad para un objetivo espec\xedfico. "),_.qZA(),_.TgZ(113,"div",7),_._uU(114," PROPIETARIO DE LA WEB excluye, hasta donde permite el ordenamiento jur\xeddico, cualquier responsabilidad por los da\xf1os y perjuicios de toda naturaleza derivados de: "),_.qZA(),_.TgZ(115,"ol",9),_.TgZ(116,"li"),_._uU(117,"La imposibilidad de acceso al sitio web o la falta de veracidad, exactitud, exhaustividad y/o actualidad de los contenidos, as\xed como la existencia de vicios y defectos de toda clase de los contenidos transmitidos, difundidos, almacenados, puestos a disposici\xf3n, a los que se haya accedido a trav\xe9s del sitio web o de los servicios que se ofrecen."),_.qZA(),_.TgZ(118,"li"),_._uU(119,"La presencia de virus o de otros elementos en los contenidos que puedan producir alteraciones en los sistemas inform\xe1ticos, documentos electr\xf3nicos o datos de los usuarios."),_.qZA(),_.TgZ(120,"li"),_._uU(121,"El incumplimiento de las leyes, la buena fe, el orden p\xfablico, los usos del tr\xe1fico y el presente aviso legal como consecuencia del uso incorrecto del sitio web. En particular, y a modo ejemplificativo, PROPIETARIO DE LA WEB no se hace responsable de las actuaciones de terceros que vulneren derechos de propiedad intelectual e industrial, secretos empresariales, derechos al honor, a la intimidad personal y familiar y a la propia imagen, as\xed como la normativa en materia de competencia desleal y publicidad il\xedcita."),_.qZA(),_.qZA(),_.TgZ(122,"div",7),_._uU(123," Asimismo, PROPIETARIO DE LA WEB declina cualquier responsabilidad respecto a la informaci\xf3n que se halle fuera de esta web y no sea gestionada directamente por nuestro webmaster. La funci\xf3n de los links que aparecen en esta web es exclusivamente la de informar al usuario sobre la existencia de otras fuentes susceptibles de ampliar los contenidos que ofrece este sitio web. PROPIETARIO DE LA WEB no garantiza ni se responsabiliza del funcionamiento o accesibilidad de los sitios enlazados; ni sugiere, invita o recomienda la visita a los mismos, por lo que tampoco ser\xe1 responsable del resultado obtenido. PROPIETARIO DE LA WEB no se responsabiliza del establecimiento de hiperv\xednculos por parte de terceros. "),_.qZA(),_.TgZ(124,"div",6),_._uU(125," Procedimiento en caso de realizaci\xf3n de actividades de car\xe1cter il\xedcito "),_.qZA(),_.TgZ(126,"div",7),_._uU(127," En el caso de que cualquier usuario o un tercero considere que existen hechos o circunstancias que revelen el car\xe1cter il\xedcito de la utilizaci\xf3n de cualquier contenido y/o de la realizaci\xf3n de cualquier actividad en las p\xe1ginas web incluidas o accesibles a trav\xe9s del sitio web, deber\xe1 enviar una notificaci\xf3n a PROPIETARIO DE LA WEB identific\xe1ndose debidamente y especificando las supuestas infracciones. "),_.qZA(),_.TgZ(128,"div",7),_._uU(129," La informaci\xf3n administrativa facilitada a trav\xe9s del sitio web no sustituye la publicidad legal de las leyes, normativas, planes, disposiciones generales y actos que tengan que ser publicados formalmente a los diarios oficiales de las administraciones p\xfablicas, que constituyen el \xfanico instrumento que da fe de su autenticidad y contenido. La informaci\xf3n disponible en este sitio web debe entenderse como una gu\xeda sin prop\xf3sito de validez legal. "),_.qZA(),_.TgZ(130,"div",6),_._uU(131," Pol\xedticas de enlaces "),_.qZA(),_.TgZ(132,"div",7),_._uU(133," Desde el sitio web, es posible que se redirija a contenidos de terceros sitios web. Dado que el prestador no puede controlar siempre los contenidos introducidos por los terceros en sus sitios web, no implica en ning\xfan caso la existencia de relaci\xf3n entre el prestador y el propietario del sitio web en la que se establezca, ni aceptaci\xf3n o aprobaci\xf3n de sus contenidos o servicios. Desde esta web, no asume ning\xfan tipo de responsabilidad respecto a dichos contenidos. En todo caso, el prestador manifiesta que proceder\xe1 a la retirada inmediata de cualquier contenido que pudiera contravenir la legislaci\xf3n nacional o internacional, la moral o el orden p\xfablico, procediendo a la retirada inmediata de la redirecci\xf3n a dicho sitio web, poniendo en conocimiento de las autoridades competentes el contenido en cuesti\xf3n. "),_.qZA(),_.qZA(),_._UZ(134,"app-footer"),_.qZA()),2&Ce&&(_.xp6(10),_.hij(" Cumpliendo con lo previsto en la Ley 34/2002 de 11 de julio, de servicios de la sociedad de la informaci\xf3n y comercio electr\xf3nico el visitante queda informado de que el presente sitio web www.restaurante.com, es propiedad de ",me.responsable,", cuyo responsable es: "),_.xp6(6),_.hij(" ",me.responsable,""),_.xp6(4),_.hij(" ",me.nif,""),_.xp6(4),_.hij(" ",me.domicilio,""),_.xp6(4),_.hij(" ",me.email,""),_.xp6(15),_.hij(" ",me.telefono,""),_.xp6(4),_.hij(" ",me.domicilio,""),_.xp6(4),_.hij(" ",me.email,""),_.xp6(8),_.hij(" El presente aviso legal regula el uso y utilizaci\xf3n del sitio web www.restaurante.com, del que es titular ",me.responsable," (en adelante, EL PROPIETARIO DE LA WEB). "))},directives:[xe.Wh,xe.xw,xe.yH,St],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(fondo-legal.ebe0e60020fd7a259e21.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.texto[_ngcontent-%COMP%]{background-color:var(--color-fondo-claro);padding:80px 50px;font-family:"Cairo",sans-serif}.titulo-parrafo[_ngcontent-%COMP%]{font-weight:900;font-size:26px;text-align:center}.parrafo[_ngcontent-%COMP%]{font-weight:100;font-size:16px;text-align:justify;margin:10px 0;line-height:18px}']}),Ze})(),at=(()=>{class Ze{constructor(){this.responsable="restaurante",this.domicilio="Plaza Mayor, 28. Plasencia (C\xe1ceres)",this.nif="",this.email="info@restaurante.com",this.telefono="+34 6XX XXX XXX"}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-politica-privacidad"]],decls:137,vars:7,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],[1,"texto"],[1,"titulo-parrafo"],[1,"parrafo"],["type","1"],[1,"subtitulo-parrafo"],[1,"negrita"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Pol\xedtica de privacidad "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.TgZ(7,"div",6),_._uU(8," Protecci\xf3n de datos personales - Privacidad "),_.qZA(),_.TgZ(9,"div",7),_._uU(10," El prestador se encuentra profundamente comprometido con el cumplimiento de la normativa en protecci\xf3n de datos de car\xe1cter personal, y garantiza el cumplimiento \xedntegro de las obligaciones dispuestas, as\xed como la implementaci\xf3n de las medidas de seguridad t\xe9cnicas y organizativas, de Protecci\xf3n de Datos de Car\xe1cter Personal (LOPD) y el Reglamento General de Protecci\xf3n de Datos de Europa UE 2016/679 (RGPD). "),_.qZA(),_.TgZ(11,"div",7),_._uU(12," El prestador pone a disposici\xf3n de los usuarios la Pol\xedtica de Privacidad de la entidad informando a los usuarios respecto a los siguientes aspectos: "),_.qZA(),_.TgZ(13,"ol",8),_.TgZ(14,"li"),_._uU(15,"Datos del Responsable del tratamiento"),_.qZA(),_.TgZ(16,"li"),_._uU(17,"Finalidad"),_.qZA(),_.TgZ(18,"li"),_._uU(19,"Legitimaci\xf3n"),_.qZA(),_.TgZ(20,"li"),_._uU(21,"Destinatarios"),_.qZA(),_.TgZ(22,"li"),_._uU(23,"Procedencia"),_.qZA(),_.TgZ(24,"li"),_._uU(25,"Informaci\xf3n adiccional"),_.qZA(),_.qZA(),_.TgZ(26,"div",7),_._uU(27," Cuando precisemos obtener informaci\xf3n personal por su parte, siempre se solicita que nos la proporcione de manera voluntariamente y de forma expresa. "),_.qZA(),_.TgZ(28,"div",7),_._uU(29," En cumplimiento la normativa en Protecci\xf3n de Datos de Car\xe1cter Personal, consiente expl\xedcitamente a que los datos personales facilitados, sean tratados bajo nuestra responsabilidad, para realizar las siguientes finalidades: "),_.qZA(),_.TgZ(30,"ol",8),_.TgZ(31,"li"),_._uU(32,"Gestionar nuestra relaci\xf3n y ofrecerle el servicio solicitado personalizado."),_.qZA(),_.TgZ(33,"li"),_._uU(34),_.qZA(),_.TgZ(35,"li"),_._uU(36,"Remisi\xf3n de comunicaciones comerciales publicitarias sobre nuestros productos por e-mail, fax, SMS, MMS, comunidades sociales o cualesquier otro medio electr\xf3nico o f\xedsico, presente o futuro, que posibilite realizar comunicaci\xf3n comerciales."),_.qZA(),_.TgZ(37,"li"),_._uU(38,"Tratamiento de su CV para selecci\xf3n de personal."),_.qZA(),_.qZA(),_.TgZ(39,"div",7),_._uU(40," Todos los datos solicitados son obligatorios, de no facilitarlos, ser\xeda imposible llevar a cabo la finalidad para la que se solicitan en cada caso. "),_.qZA(),_.TgZ(41,"div",6),_._uU(42," Informaci\xf3n del tratamiento "),_.qZA(),_.TgZ(43,"div",7),_._uU(44," Seg\xfan lo dispuesto en el Reglamento General de Protecci\xf3n de Datos UE 2016/679, el usuario debe recibir informaci\xf3n puntual y concreta del responsable del tratamiento y los usos y fines del mismo. Para ello, se indica la siguiente informaci\xf3n: "),_.qZA(),_.TgZ(45,"div",9),_._uU(46," \xbfQui\xe9n es el responsable del tratamiento de sus datos? "),_.qZA(),_.TgZ(47,"ul"),_.TgZ(48,"li"),_.TgZ(49,"span",10),_._uU(50,"Identidad:"),_.qZA(),_._uU(51),_.qZA(),_.TgZ(52,"li"),_.TgZ(53,"span",10),_._uU(54,"CIF:"),_.qZA(),_.qZA(),_.TgZ(55,"li"),_.TgZ(56,"span",10),_._uU(57,"Tel\xe9fono:"),_.qZA(),_._uU(58),_.qZA(),_.TgZ(59,"li"),_.TgZ(60,"span",10),_._uU(61,"Direcci\xf3n:"),_.qZA(),_._uU(62),_.qZA(),_.TgZ(63,"li"),_.TgZ(64,"span",10),_._uU(65,"Email:"),_.qZA(),_._uU(66),_.qZA(),_.qZA(),_.TgZ(67,"div",9),_._uU(68," \xbfCon qu\xe9 finalidad tratamos sus datos personales? "),_.qZA(),_.TgZ(69,"div",7),_._uU(70),_.qZA(),_.TgZ(71,"ol",8),_.TgZ(72,"li"),_._uU(73,"Realizar la gesti\xf3n administrativa, contable y fiscal de nuestros clientes sobre los servicios solicitados, atender su solicitud a trav\xe9s de los diferentes formularios a su disposici\xf3n en la web y enviarle comunicaciones comerciales, inclusive por v\xeda electr\xf3nica sobre nuestros productos y servicios."),_.qZA(),_.TgZ(74,"li"),_._uU(75,"Realizar la gesti\xf3n administrativa, contable y fiscal de los servicios contratados, as\xed como de las personas de contacto de los proveedores."),_.qZA(),_.TgZ(76,"li"),_._uU(77,"En lo relacionado con el departamento jur\xeddico, el marco de la relaci\xf3n cliente-abogado para la prestaci\xf3n el servicio solicitado, y ser\xe1n tratados con la finalidad de ejercer el correcto asesoramiento y la defensa jur\xeddica efectiva, as\xed como la propia gesti\xf3n fiscal, contable y administrativa."),_.qZA(),_.TgZ(78,"li"),_._uU(79,"Sobre nuestra relaci\xf3n con nuestros clientes de corredur\xeda de seguros, tratamos sus datos con la finalidad de la gesti\xf3n fiscal, contable, administrativa y comercial, as\xed como cualquier gesti\xf3n que se encuentre entre las facultades atribuidas legalmente para el desempe\xf1o como mediador de seguros."),_.qZA(),_.TgZ(80,"li"),_._uU(81,"Gestionar los Curr\xedculum Vitae recibidos y realizar los procesos de selecci\xf3n de personal."),_.qZA(),_.qZA(),_.TgZ(82,"div",9),_._uU(83," \xbfPor cu\xe1nto tiempo conservaremos sus datos? "),_.qZA(),_.TgZ(84,"div",7),_._uU(85," Los datos se conservar\xe1n: "),_.qZA(),_.TgZ(86,"ol",8),_.TgZ(87,"li"),_._uU(88,"Mientras se mantenga la relaci\xf3n contractual o durante los a\xf1os necesarios para cumplir con las obligaciones legales."),_.qZA(),_.TgZ(89,"li"),_._uU(90,"En lo relativo al env\xedo de comunicaciones promocionales, mientras no solicite la supresi\xf3n de sus datos."),_.qZA(),_.TgZ(91,"li"),_._uU(92,"En referencia a los curr\xedculums, 5 a\xf1os a partir de la \xfaltima interacci\xf3n."),_.qZA(),_.qZA(),_.TgZ(93,"div",9),_._uU(94," \xbfCu\xe1l es la legitimaci\xf3n para el tratamiento de sus datos? "),_.qZA(),_.TgZ(95,"div",7),_._uU(96," Le indicamos la base legal para el tratamiento de sus datos: "),_.qZA(),_.TgZ(97,"ul"),_.TgZ(98,"li"),_._uU(99,"Ejecuci\xf3n de un contrato: prestaci\xf3n de los servicios solicitados y atender a su solicitud."),_.qZA(),_.TgZ(100,"li"),_._uU(101,"Ejecuci\xf3n de un contrato: Realizar la gesti\xf3n administrativa, contable y fiscal de los servicios contratados, as\xed como de las personas de contacto de los proveedores."),_.qZA(),_.TgZ(102,"li"),_._uU(103,"Inter\xe9s leg\xedtimo del Responsable: Env\xedo de comunicaciones comerciales sobre nuestros productos y servicios, incluido por v\xeda electr\xf3nica."),_.qZA(),_.TgZ(104,"li"),_._uU(105,"Consentimiento del interesado: Por el registro o atenci\xf3n de su solicitud en los formularios web a su disposici\xf3n."),_.qZA(),_.TgZ(106,"li"),_._uU(107,"Consentimiento del interesado: El tratamiento de sus datos para la atenci\xf3n y estudio de pr\xf3ximas solicitudes de presupuesto o contrataci\xf3n de productos aseguradores, incluso con compa\xf1\xedas o corredur\xedas distintas a la actual."),_.qZA(),_.TgZ(108,"li"),_._uU(109,"Consentimiento del interesado: Gestionar los Curr\xedculum Vitae recibidos y realizar los procesos de selecci\xf3n de personal."),_.qZA(),_.TgZ(110,"li"),_._uU(111,"Cumplimiento de una obligaci\xf3n legal: Cumplimiento de las obligaciones establecidas en la Ley 1/2000, de 7 de enero, de Enjuiciamiento Civil."),_.qZA(),_.TgZ(112,"li"),_._uU(113,"Cumplimiento de obligaciones legales: Cumplimiento de las obligaciones establecidas en la Ley 26/2006 de 17 de julio de mediaci\xf3n en seguros y reaseguros."),_.qZA(),_.qZA(),_.TgZ(114,"div",9),_._uU(115," \xbfTransferencias de datos a terceros pa\xedses? "),_.qZA(),_.TgZ(116,"div",7),_._uU(117," No est\xe1n previstas transferencias de datos a terceros pa\xedses. "),_.qZA(),_.TgZ(118,"div",6),_._uU(119," Propiedad intelectual "),_.qZA(),_.TgZ(120,"div",7),_._uU(121," El sitio web, incluyendo dise\xf1os, logotipos, texto y/o gr\xe1ficos que son propiedad del prestador o en su caso dispone de licencia o autorizaci\xf3n expresa por parte de los autores. Todos los contenidos del sitio web se encuentran debidamente protegidos por la normativa de propiedad intelectual e industrial, as\xed como inscritos en los registros p\xfablicos correspondientes. "),_.qZA(),_.TgZ(122,"div",7),_._uU(123," Los dise\xf1os, logotipos, texto y/o gr\xe1ficos ajenos al prestador y que pudieran aparecer en el sitio web, pertenecen a sus respectivos propietarios, siendo ellos mismos responsables de cualquier posible controversia que pudiera suscitarse respecto a los mismos. En todo caso, el prestador cuenta con la autorizaci\xf3n expresa y previa por parte de los mismos. "),_.qZA(),_.TgZ(124,"div",6),_._uU(125," Menores de edad (14 a\xf1os) "),_.qZA(),_.TgZ(126,"div",7),_._uU(127),_.qZA(),_.TgZ(128,"div",6),_._uU(129," Ley aplicable y jurisdicci\xf3n "),_.qZA(),_.TgZ(130,"div",7),_._uU(131," Para la resoluci\xf3n de todas las controversias o cuestiones relacionadas con el presente sitio web o de las actividades en \xe9l desarrolladas, ser\xe1 de aplicaci\xf3n la legislaci\xf3n espa\xf1ola, a la que se someten expresamente las partes, siendo competentes para la resoluci\xf3n de todos los conflictos derivados o relacionados con su uso los Juzgados y Tribunales de la provincia del titular de la web. "),_.qZA(),_.TgZ(132,"div",7),_._uU(133," Las condiciones presentes se regir\xe1n por la legislaci\xf3n espa\xf1ola vigente. "),_.qZA(),_.TgZ(134,"div",7),_._uU(135," La lengua utilizada ser\xe1 el Castellano. "),_.qZA(),_.qZA(),_._UZ(136,"app-footer"),_.qZA()),2&Ce&&(_.xp6(34),_.hij("La tramitaci\xf3n de consultas, asesoramiento, encargos, solicitudes o cualquier tipo de petici\xf3n que sea realizada por el usuario a trav\xe9s de cualquiera de las formas de contacto que se ponen a disposici\xf3n del usuario en el sitio web de ",me.responsable,"."),_.xp6(17),_.hij(" ",me.responsable,""),_.xp6(7),_.hij(" ",me.telefono,""),_.xp6(4),_.hij(" ",me.domicilio,""),_.xp6(4),_.hij(" ",me.email,""),_.xp6(4),_.hij(" En ",me.responsable," tratamos la informaci\xf3n que nos facilitan las personas interesadas con el fin de realizar las siguientes finalidades: "),_.xp6(57),_.hij(" ATENCI\xd3N: Para la utilizaci\xf3n de los servicios que ofrece el sitio web, los menores de 14 a\xf1os, deber\xe1n, previamente, haber obtenido autorizaci\xf3n de sus padres, tutores o representantes legales, puesto que \xe9stos deber\xe1n responder por los actos realizados por los menores que se encuentren a su cargo, correspondi\xe9ndoles toda la responsabilidad a la hora de determinar los contenidos y servicios a los que puedan tener acceso. Esta autorizaci\xf3n, podr\xe1n realizarla a trav\xe9s del correo electr\xf3nico: ",me.email," "))},directives:[xe.Wh,xe.xw,xe.yH,St],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(fondo-legal.ebe0e60020fd7a259e21.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.texto[_ngcontent-%COMP%]{background-color:var(--color-fondo-claro);padding:80px 50px;font-family:"Cairo",sans-serif}.titulo-parrafo[_ngcontent-%COMP%]{font-weight:900;font-size:26px;text-align:center}.subtitulo-parrafo[_ngcontent-%COMP%]{font-weight:900;font-size:22px;text-align:center}.parrafo[_ngcontent-%COMP%]{font-weight:100;font-size:16px;text-align:justify;margin:10px 0;line-height:18px}.negrita[_ngcontent-%COMP%]{font-weight:900}']}),Ze})(),xt=(()=>{class Ze{constructor(){this.responsable="restaurante",this.domicilio="Plaza Mayor, 28. Plasencia (C\xe1ceres)",this.nif="",this.email="info@restaurante.com",this.telefono="+34 6XX XXX XXX"}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-politica-cookies"]],decls:56,vars:0,consts:[[1,"container"],[1,"panel-superior"],[1,"cortina-transparente"],["fxLayoutAlign","center","fxLayout","column",1,"titulo-container"],["fxFlex","100",1,"titulo","animate__animated","animate__fadeIn"],[1,"texto"],[1,"parrafo"],[1,"titulo-parrafo"],[1,"negrita"],["href","http://support.mozilla.org/es/kb/habilitar-y-deshabilitar-cookies-que-los-sitios-we"],["href","http://support.google.com/chrome/bin/answer.py?hl=es&answer=95647"],["href","http://windows.microsoft.com/es-es/windows7/how-to-manage-cookies-in-internet-explorer-9"],["href","http://support.apple.com/kb/ph5042"],["href","http://help.opera.com/Windows/11.50/es-ES/cookies.html"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_.TgZ(4,"div",4),_._uU(5," Pol\xedtica de cookies "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",5),_.TgZ(7,"div",6),_._uU(8," Le informamos que esta p\xe1gina web utiliza cookies para analizar la navegaci\xf3n de usuarios. Estos archivos se instalan en el equipo desde el que accedes a este sitio web con las finalidades que se describen en esta p\xe1gina. "),_.qZA(),_.TgZ(9,"div",7),_._uU(10," \xbfQu\xe9 son las cookies? "),_.qZA(),_.TgZ(11,"div",6),_._uU(12," Una cookie es un fichero que se descarga en su ordenador al acceder a determinadas p\xe1ginas web. Las cookies permiten a una p\xe1gina web, entre otras cosas, almacenar y recuperar informaci\xf3n sobre h\xe1bitos de navegaci\xf3n de un usuario o de su equipo y, dependiendo de la informaci\xf3n que contengan y de la forma que utilice su equipo, pueden utilizarse para reconocer al usuario. Solamente el equipo que la instal\xf3 podr\xe1 leer su contenido, que, por otra parte, ser\xe1 an\xf3nimo. "),_.qZA(),_.TgZ(13,"div",6),_._uU(14," Aunque se instalen en tu disco duro, al ser s\xf3lo texto o n\xfameros, no son capaces por s\xed mismas de acceder a informaci\xf3n personal de tu ordenador, ni de trasmitir virus, tan solo rastrean la navegaci\xf3n sobre un sitio web. "),_.qZA(),_.TgZ(15,"div",7),_._uU(16," \xbfPara qu\xe9 utiliza las cookies esta p\xe1gina web y cu\xe1les son? "),_.qZA(),_.TgZ(17,"div",6),_._uU(18," Esta p\xe1gina web utiliza las cookies para una serie de finalidades, incluidas: "),_.qZA(),_.TgZ(19,"ul"),_.TgZ(20,"li"),_.TgZ(21,"span",8),_._uU(22,"An\xe1lisis:"),_.qZA(),_._uU(23," son aquellas cookies que bien, tratadas por nosotros o por terceros, nos permiten cuantificar el n\xfamero de usuarios y as\xed realizar la medici\xf3n y an\xe1lisis estad\xedstico de la utilizaci\xf3n que hacen los usuarios del servicio. Para ello se analiza su navegaci\xf3n en nuestra p\xe1gina web con el fin de mejorar la experiencia del usuario. "),_.qZA(),_.qZA(),_.TgZ(24,"div",7),_._uU(25," \xbfC\xf3mo puedo desactivar o eliminar estas cookies? "),_.qZA(),_.TgZ(26,"div",6),_._uU(27," Puede usted permitir, bloquear o eliminar las cookies instaladas en su equipo mediante la configuraci\xf3n de las opciones del navegador instalado en su ordenador. "),_.qZA(),_.TgZ(28,"ul"),_.TgZ(29,"li"),_._uU(30,"Firefox: "),_.TgZ(31,"a",9),_._uU(32,"http://support.mozilla.org/es/kb/habilitar-y-deshabilitar-cookies-que-los-sitios-we"),_.qZA(),_.qZA(),_.TgZ(33,"li"),_._uU(34,"Chrome: "),_.TgZ(35,"a",10),_._uU(36,"http://support.google.com/chrome/bin/answer.py?hl=es&answer=95647"),_.qZA(),_.qZA(),_.TgZ(37,"li"),_._uU(38,"Explorer: "),_.TgZ(39,"a",11),_._uU(40,"http://windows.microsoft.com/es-es/windows7/how-to-manage-cookies-in-internet-explorer-9"),_.qZA(),_.qZA(),_.TgZ(41,"li"),_._uU(42,"Safari: "),_.TgZ(43,"a",12),_._uU(44,"http://support.apple.com/kb/ph5042"),_.qZA(),_.qZA(),_.TgZ(45,"li"),_._uU(46,"Opera: "),_.TgZ(47,"a",13),_._uU(48,"http://help.opera.com/Windows/11.50/es-ES/cookies.html"),_.qZA(),_.qZA(),_.TgZ(49,"li"),_._uU(50,"Otros navegadores: consulte la documentaci\xf3n del navegador que tenga instalado."),_.qZA(),_.qZA(),_.TgZ(51,"div",7),_._uU(52," Actualizaciones y cambios en la pol\xedtica de privacidad "),_.qZA(),_.TgZ(53,"div",6),_._uU(54," El propietario de este sitio web puede modificar esta Pol\xedtica de Cookies en funci\xf3n de exigencias legislativas, reglamentarias, o con la finalidad de adaptar dicha pol\xedtica a las instrucciones dictadas por la Agencia Espa\xf1ola de Protecci\xf3n de Datos, por ello se aconseja a los Usuarios que la visiten peri\xf3dicamente. "),_.qZA(),_.qZA(),_._UZ(55,"app-footer"),_.qZA())},directives:[xe.Wh,xe.xw,xe.yH,St],styles:['.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.panel-superior[_ngcontent-%COMP%]{width:100%;background-image:url(fondo-legal.ebe0e60020fd7a259e21.jpg);background-position:center;background-size:cover}.cortina-transparente[_ngcontent-%COMP%]{background-color:#0009}.titulo[_ngcontent-%COMP%]{display:block;width:100%;font-weight:300;text-align:center;line-height:50px;z-index:10;font-family:"Merienda",sans-serif;color:#fff;padding-top:250px;padding-bottom:100px;font-size:45px;font-weight:900}.texto[_ngcontent-%COMP%]{background-color:var(--color-fondo-claro);padding:80px 50px;font-family:"Cairo",sans-serif}.titulo-parrafo[_ngcontent-%COMP%]{font-weight:900;font-size:26px;text-align:center}.subtitulo-parrafo[_ngcontent-%COMP%]{font-weight:900;font-size:22px;text-align:center}.parrafo[_ngcontent-%COMP%]{font-weight:100;font-size:16px;text-align:justify;margin:10px 0;line-height:18px}.negrita[_ngcontent-%COMP%]{font-weight:900}a[_ngcontent-%COMP%]{color:var(--color-dorado-oscuro)}']}),Ze})(),xn=(()=>{class Ze{constructor(){}ngOnInit(){}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-reserva-modal"]],decls:5,vars:0,consts:[[1,"titulo"],[1,"telefono"],["href","tel:+34924400169"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_._uU(1," \xa1Ll\xe1manos!\n"),_.qZA(),_.TgZ(2,"div",1),_.TgZ(3,"a",2),_._uU(4,"6XX XXX XXX"),_.qZA(),_.qZA())},styles:['.titulo[_ngcontent-%COMP%]{font-weight:900;font-size:26px}.titulo[_ngcontent-%COMP%], .telefono[_ngcontent-%COMP%]{text-align:center;font-family:"Merienda",sans-serif}.telefono[_ngcontent-%COMP%]{font-size:20px;padding:10px 25px;border:2px solid var(--color-dorado);margin:20px}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--color-dorado);border:none}']}),Ze})();var sn=ne(2680),Un=ne(1769);const ui=function(Ze,ze){return{"toolbar-item-scrolled":Ze,"toolbar-item-normal":ze}};function Xn(Ze,ze){if(1&Ze&&(_.TgZ(0,"span",15),_._uU(1),_.qZA()),2&Ze){const Ce=ze.$implicit,me=_.oxw();_.Q6J("routerLink",Ce.path)("ngClass",_.WLB(3,ui,me.scrollable,!me.scrollable)),_.xp6(1),_.hij(" ",Ce.text," ")}}const Xt=function(Ze){return{open:Ze}};function Zn(Ze,ze){if(1&Ze){const Ce=_.EpF();_.TgZ(0,"span",16),_.NdJ("click",function(){return _.CHM(Ce),_.oxw().pulsarBotonMenuResponsive()}),_._uU(1),_.qZA()}if(2&Ze){const Ce=ze.$implicit,me=_.oxw();_.Q6J("routerLink",Ce.path)("ngClass",_.VKq(3,Xt,me.menuOpen)),_.xp6(1),_.hij(" ",Ce.text," ")}}function Bi(Ze,ze){if(1&Ze){const Ce=_.EpF();_.TgZ(0,"span",17),_.TgZ(1,"img",18),_.NdJ("mouseout",function(){const K=_.CHM(Ce).$implicit;return K.pathResponsive=K.pathNegro})("mouseover",function(){const K=_.CHM(Ce).$implicit;return K.pathResponsive=K.path}),_.qZA(),_.qZA()}if(2&Ze){const Ce=ze.$implicit;_.Q6J("title",Ce.title),_.xp6(1),_.Q6J("src",Ce.pathResponsive,_.LSH)}}const cr=function(Ze,ze){return{"toolbar-scrolled":Ze,"toolbar-normal":ze}},Ui=function(Ze,ze){return{"redes-sociales-scrolled":Ze,"redes-sociales-normal":ze}},Kn=function(Ze,ze,Ce){return{"icono-restaurante-responsive":Ze,"icono-restaurante-scrollable":ze,"icono-restaurante-normal":Ce}},vt=function(Ze,ze){return{"barra-enlaces-scrolled":Ze,"barra-enlaces-normal":ze}},Wt=function(Ze,ze){return{"reservar-scrollable":Ze,"reservar-normal":ze}},pe=function(Ze){return{"display-none":Ze}},ke=function(Ze,ze){return{"open animate__animated animate__slideInDown":Ze,"display-none":ze}},jt=[{path:"",component:(()=>{class Ze{constructor(Ce,me){this.enlacesService=Ce,this.dialog=me,this.options=this.enlacesService.getOpciones(),this.redesSociales=this.enlacesService.getRedesSociales(),this.responsive=window.innerWidth<959,this.scrollable=!(!this.responsive&&window.pageXOffset<80),this.menuOpen=!1}hacerScrollable(Ce){this.responsive=window.innerWidth<959,this.scrollable=!(!this.responsive&&window.pageYOffset<80)}pulsarBotonMenuResponsive(){if(this.menuOpen=!this.menuOpen,this.menuOpen){var Ce=window.scrollX,me=window.scrollY;window.onscroll=function(){window.scrollTo(Ce,me)}}else window.onscroll=function(){}}openDialog(){this.dialog.open(xn)}}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)(_.Y36(Ke.v),_.Y36(sn.uw))},Ze.\u0275cmp=_.Xpm({type:Ze,selectors:[["app-toolbar"]],hostBindings:function(Ce,me){1&Ce&&_.NdJ("scroll",function(K){return me.hacerScrollable(K)},!1,_.Jf7)},decls:22,vars:43,consts:[[1,"toolbar-padre",3,"scroll","resize"],[1,"animate__animated","animate__fadeIn",3,"ngClass"],[3,"ngClass"],["src","../../../assets/logo-restaurante-sin-copy.png"],["fxShow.xs","false","fxShow.sm","false","routerLinkActive","link-selected",3,"routerLink","ngClass",4,"ngFor","ngForOf"],["fxShow.xs","false","fxShow.sm","false",3,"ngClass","click"],[1,"content-boton-menu",3,"ngClass","click"],["fxShow.gt","false","fxShow.md","false",1,"boton-menu",3,"ngClass"],[1,"boton-menu-burguer"],[1,"menu-responsive",3,"ngClass"],["class","toolbar-item-responsive","routerLinkActive","link-responsive-selected",3,"routerLink","ngClass","click",4,"ngFor","ngForOf"],["routerLinkActive","link-responsive-selected",1,"toolbar-item-responsive",3,"ngClass","click"],[1,"redes-sociales-responsive",3,"ngClass"],["class","icono-red-social",3,"title",4,"ngFor","ngForOf"],[1,"container"],["fxShow.xs","false","fxShow.sm","false","routerLinkActive","link-selected",3,"routerLink","ngClass"],["routerLinkActive","link-responsive-selected",1,"toolbar-item-responsive",3,"routerLink","ngClass","click"],[1,"icono-red-social",3,"title"],[3,"src","mouseout","mouseover"]],template:function(Ce,me){1&Ce&&(_.TgZ(0,"div",0),_.NdJ("scroll",function(K){return me.hacerScrollable(K)},!1,_.Jf7)("resize",function(K){return me.hacerScrollable(K)},!1,_.Jf7),_.TgZ(1,"div",1),_._UZ(2,"app-barra-redes-sociales",2),_.TgZ(3,"div",2),_._UZ(4,"img",3),_.qZA(),_.TgZ(5,"div",2),_.YNc(6,Xn,2,6,"span",4),_.qZA(),_.TgZ(7,"div",5),_.NdJ("click",function(){return me.openDialog()}),_.TgZ(8,"span"),_._uU(9,"Reservar"),_.qZA(),_.qZA(),_.TgZ(10,"div",6),_.NdJ("click",function(){return me.pulsarBotonMenuResponsive()}),_.TgZ(11,"div",7),_._UZ(12,"div",8),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"div",9),_.YNc(14,Zn,2,5,"span",10),_.TgZ(15,"span",11),_.NdJ("click",function(){return me.openDialog()}),_._uU(16," Reservar "),_.qZA(),_._UZ(17,"mat-divider",2),_.TgZ(18,"div",12),_.YNc(19,Bi,2,2,"span",13),_.qZA(),_.qZA(),_.TgZ(20,"div",14),_._UZ(21,"router-outlet"),_.qZA(),_.qZA()),2&Ce&&(_.xp6(1),_.Q6J("ngClass",_.WLB(14,cr,me.scrollable,!me.scrollable)),_.xp6(1),_.Q6J("ngClass",_.WLB(17,Ui,me.scrollable,!me.scrollable)),_.xp6(1),_.Q6J("ngClass",_.kEZ(20,Kn,me.responsive,!me.responsive&&me.scrollable,!me.responsive&&!me.scrollable)),_.xp6(2),_.Q6J("ngClass",_.WLB(24,vt,me.scrollable,!me.scrollable)),_.xp6(1),_.Q6J("ngForOf",me.options),_.xp6(1),_.Q6J("ngClass",_.WLB(27,Wt,me.scrollable,!me.scrollable)),_.xp6(3),_.Q6J("ngClass",_.VKq(30,pe,!me.responsive)),_.xp6(1),_.Q6J("ngClass",_.VKq(32,Xt,me.menuOpen)),_.xp6(2),_.Q6J("ngClass",_.WLB(34,ke,me.menuOpen,!me.responsive)),_.xp6(1),_.Q6J("ngForOf",me.options),_.xp6(1),_.Q6J("ngClass",_.VKq(37,Xt,me.menuOpen)),_.xp6(2),_.Q6J("ngClass",_.VKq(39,pe,!me.responsive)),_.xp6(1),_.Q6J("ngClass",_.VKq(41,pe,!me.responsive)),_.xp6(1),_.Q6J("ngForOf",me.redesSociales))},directives:[x.mk,st.oO,Qt,x.sg,st.b8,Ie.Od,Un.d,Ie.lC,Ie.rH],styles:['.toolbar-normal[_ngcontent-%COMP%], .toolbar-scrolled[_ngcontent-%COMP%]{top:0;left:0;right:0;z-index:999}.toolbar-normal[_ngcontent-%COMP%]{position:absolute;height:180px;background:linear-gradient(to bottom,rgba(0,0,0,.8),rgba(0,0,0,0));transition:height .3s ease-out,background .3s ease-in}.toolbar-scrolled[_ngcontent-%COMP%], .toolbar-responsive[_ngcontent-%COMP%]{position:fixed;height:100px;background-color:var(--color-negro-fondo);transition:height .3s ease-out .1s,background .3s ease-in}.barra-enlaces-normal[_ngcontent-%COMP%], .barra-enlaces-scrolled[_ngcontent-%COMP%]{width:100%;height:80px;position:absolute;top:0;left:0;right:0;align-items:center;text-align:center;color:var(--color-texto-blanco);background-color:transparent}.barra-enlaces-normal[_ngcontent-%COMP%]{padding-top:120px}.barra-enlaces-scrolled[_ngcontent-%COMP%]{padding-top:30px}.barra-enlaces-responsive[_ngcontent-%COMP%]{display:none}.toolbar-item-normal[_ngcontent-%COMP%], .toolbar-item-scrolled[_ngcontent-%COMP%]{cursor:pointer;padding:10px 15px;font-size:16px;font-family:"Cairo",serif;transition:border .2s ease-in right;text-transform:uppercase;display:inline-block}.toolbar-item-normal[_ngcontent-%COMP%]{margin:0 5px;animation:toolbar-item-anim;transition:margin .3s}.toolbar-item-scrolled[_ngcontent-%COMP%]{margin:0 1px;animation:toolbar-item-anim reverse;transition:margin .3s ease-out}.toolbar-item-normal[_ngcontent-%COMP%]:after, .toolbar-item-scrolled[_ngcontent-%COMP%]:after{content:"";display:block;width:0;height:2px;background:var(--tono5);transition:width .3s;margin-top:5px}.link-selected[_ngcontent-%COMP%]:after{content:"";display:block;width:0;height:2px;background:var(--tono4);margin-top:5px;width:100%}.toolbar-item-normal[_ngcontent-%COMP%]:hover:after, .toolbar-item-scrolled[_ngcontent-%COMP%]:hover:after{width:100%}.icono-restaurante-normal[_ngcontent-%COMP%], .icono-restaurante-scrollable[_ngcontent-%COMP%], .icono-restaurante-responsive[_ngcontent-%COMP%]{position:absolute;top:50px}.icono-restaurante-normal[_ngcontent-%COMP%], .icono-restaurante-scrollable[_ngcontent-%COMP%]{left:5%}.icono-restaurante-responsive[_ngcontent-%COMP%]{left:calc(50% - 41px)}.icono-restaurante-normal[_ngcontent-%COMP%]{width:200px;top:80px;transition:width .3s ease-out}.icono-restaurante-scrollable[_ngcontent-%COMP%], .icono-restaurante-responsive[_ngcontent-%COMP%]{width:80px;top:8px;transition:width .3s ease-out}.icono-restaurante-normal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .icono-restaurante-scrollable[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .icono-restaurante-responsive[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2%;border:3px solid var(--color-dorado);background-color:#fff;transition:all .3s linear}.redes-sociales-normal[_ngcontent-%COMP%]{position:absolute;top:20px;right:5%;left:5%;text-align:center}.redes-sociales-scrolled[_ngcontent-%COMP%]{display:none}.redes-sociales-normal[_ngcontent-%COMP%]{z-index:5}.icono-red-social[_ngcontent-%COMP%]{width:20px;height:20px}.icono-red-social[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin:10px;cursor:pointer;transition:all 1s ease-in-out}.icono-red-social[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transition:all 1s ease-in-out}.reservar-normal[_ngcontent-%COMP%], .reservar-scrollable[_ngcontent-%COMP%]{position:absolute;right:5%;padding:12px 20px;background-color:var(--color-negro-fondo);color:var(--color-texto-blanco);border:2px solid var(--tono5);border-radius:2%;font-size:16px;font-family:"Cairo",serif;text-transform:uppercase;cursor:pointer}.reservar-normal[_ngcontent-%COMP%]{background-color:transparent;top:115px;transition:background-color .3s ease-out}.reservar-normal[_ngcontent-%COMP%]:hover{background-color:var(--color-negro-fondo);transition:all .1s linear}.reservar-scrollable[_ngcontent-%COMP%]{background-color:var(--color-negro-fondo);top:25px;transition:background-color .3s ease-out}.reservar-scrollable[_ngcontent-%COMP%]:hover{color:var(--color-negro-fondo);background-color:var(--color-fondo-claro);transition:all .1s linear}.content-boton-menu[_ngcontent-%COMP%]{position:absolute;display:flex;top:25px;right:25px}.boton-menu[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:40px;height:40px;cursor:pointer;transition:all .3s ease-in-out}.boton-menu-burguer[_ngcontent-%COMP%]{width:20px;height:3px;background-color:var(--color-fondo-claro);border-radius:5px;transition:all .3s ease-in-out}.boton-menu-burguer[_ngcontent-%COMP%]:before, .boton-menu-burguer[_ngcontent-%COMP%]:after{content:"";position:absolute;width:20px;height:3px;background-color:var(--color-fondo-claro);border-radius:5px;transition:all .3s ease-in-out}.boton-menu-burguer[_ngcontent-%COMP%]:before{transform:translateY(-8px)}.boton-menu-burguer[_ngcontent-%COMP%]:after{transform:translateY(8px)}.boton-menu.open[_ngcontent-%COMP%]   .boton-menu-burguer[_ngcontent-%COMP%]{transform:translate(-50px);background:transparent}.boton-menu.open[_ngcontent-%COMP%]   .boton-menu-burguer[_ngcontent-%COMP%]:before{transform:rotate(45deg) translate(35px,-35px)}.boton-menu.open[_ngcontent-%COMP%]   .boton-menu-burguer[_ngcontent-%COMP%]:after{transform:rotate(-45deg) translate(35px,35px)}.menu-responsive[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;height:0%;z-index:500;background-color:var(--tono5);border-bottom:2px solid var(--color-negro-fondo)}.menu-responsive.open[_ngcontent-%COMP%]{padding-top:40%}.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.container.menu-opened[_ngcontent-%COMP%]{display:none}.toolbar-item-responsive[_ngcontent-%COMP%]{display:none}.toolbar-item-responsive.open[_ngcontent-%COMP%]{display:block;text-align:center;font-family:"Merriweather",serif;text-transform:uppercase;padding:15px 0;font-size:20px;color:var(--color-negro-fondo)}.link-responsive-selected[_ngcontent-%COMP%]{text-decoration:underline}.mat-divider[_ngcontent-%COMP%]{display:block;margin:30px;border-top-width:1px;background:var(--color-fondo-claro);border-top-style:solid}.redes-sociales-responsive[_ngcontent-%COMP%]{text-align:center}.display-none[_ngcontent-%COMP%]{display:none}@keyframes toolbar-item-anim{0%{margin:0 10px}40%{margin:0 14px}to{margin:0 2px}}@keyframes toolbar-anim{0%{height:90px}to{height:100px}}@keyframes icono-restaurante-anim{0%{left:calc(50% - 75px)}to{left:5%}}@keyframes toolbar-item-hover-anim{0%{border-bottom:0px solid var(--tono4)}to{border-bottom:2px solid var(--tono4)}}@media screen and (max-width: 595px){.toolbar[_ngcontent-%COMP%]{padding:0 10px}.menu-responsive.open[_ngcontent-%COMP%]{padding-top:40%;height:85%}}@media screen and (min-width: 597px) and (max-width: 959px){.toolbar[_ngcontent-%COMP%]{padding:0 10px}.menu-responsive.open[_ngcontent-%COMP%]{padding-top:20%;height:90%}}']}),Ze})(),children:[{path:"inicio",component:Mn},{path:"menu",component:Et},{path:"vinacoteca",component:er},{path:"contacto",component:oi},{path:"aviso-legal",component:en},{path:"politica-privacidad",component:at},{path:"politica-cookies",component:xt},{path:"**",redirectTo:"inicio"}]}];let Dn=(()=>{class Ze{}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275mod=_.oAB({type:Ze}),Ze.\u0275inj=_.cJS({imports:[[Ie.Bz.forChild(jt)],Ie.Bz]}),Ze})(),ri=(()=>{class Ze{}return Ze.\u0275fac=function(Ce){return new(Ce||Ze)},Ze.\u0275mod=_.oAB({type:Ze}),Ze.\u0275inj=_.cJS({imports:[[x.ez,Se.q,c.K,Xe.q,Se.q,I.o9,Dn]]}),Ze})()},3490:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{v:()=>I});var x=ne(7716);let I=(()=>{class Se{constructor(){this.pathAssets="../../../assets/"}getOpciones(){return[{text:"Inicio",path:"/inicio"},{text:"Men\xfa",path:"/menu"},{text:"Vinacoteca",path:"/vinacoteca"},{text:"Contacto",path:"/contacto"}]}getEnlacesLegales(){return[{text:"Aviso legal",path:"/aviso-legal"},{text:"Pol\xedtica de privacidad",path:"/politica-privacidad"},{text:"Pol\xedtica de cookies",path:"/politica-cookies"}]}getOpcionesConfiguracion(){return[{text:"Inicio",path:"/dashboard/configuracion-inicio",icono:"home"},{text:"Men\xfa",path:"/dashboard/configuracion-menu",icono:"restaurant"},{text:"Vinacoteca",path:"/dashboard/configuracion-vinacoteca",icono:"local_drink"},{text:"Contacto",path:"/dashboard/configuarcion-contacto",icono:"contact_mail"},{text:"Logout",path:"/inicio",icono:"highlight_off"}]}getRedesSociales(){return[{title:"Facebook",src:"https://www.facebook.com/",path:this.pathAssets+"facebook-blanco.svg",pathNegro:this.pathAssets+"facebook-negro.svg",pathHover:this.pathAssets+"facebook-dorado.svg",pathUsed:this.pathAssets+"facebook-blanco.svg",pathResponsive:this.pathAssets+"facebook-negro.svg"},{title:"TripAdvisor",src:"https://www.tripadvisor.com/",path:this.pathAssets+"tripadvisor-blanco.svg",pathNegro:this.pathAssets+"tripadvisor-negro.svg",pathHover:this.pathAssets+"tripadvisor-dorado.svg",pathUsed:this.pathAssets+"tripadvisor-blanco.svg",pathResponsive:this.pathAssets+"tripadvisor-negro.svg"},{title:"Email",src:"mailto:info@restauranteam.com",path:this.pathAssets+"email-blanco.svg",pathNegro:this.pathAssets+"email-negro.svg",pathHover:this.pathAssets+"email-dorado.svg",pathUsed:this.pathAssets+"email-blanco.svg",pathResponsive:this.pathAssets+"email-negro.svg"},{title:"Tel\xe9fono",src:"XXXXXXXXX",path:this.pathAssets+"llamada-telefonica-blanco.svg",pathNegro:this.pathAssets+"llamada-telefonica-negro.svg",pathHover:this.pathAssets+"llamada-telefonica-dorado.svg",pathUsed:this.pathAssets+"llamada-telefonica-blanco.svg",pathResponsive:this.pathAssets+"llamada-telefonica-negro.svg"}]}}return Se.\u0275fac=function(Xe){return new(Xe||Se)},Se.\u0275prov=x.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},2340:(Jn,Lt,ne)=>{"use strict";ne.d(Lt,{N:()=>x});const x={production:!0,mapboxToken:"pk.eyJ1Ijoic2VyZ2lvZ2RldiIsImEiOiJja3J2eXF5NGkwYmtkMm9ucWI0dmY5Mmh2In0.wMl5fcVD7wi7Wy1OeiV5jg",backendUrl:"http://localhost:3000/api"}},1845:(Jn,Lt,ne)=>{"use strict";var x=ne(9075),I=ne(7716),Se=ne(158),c=ne(2305);let Xe=(()=>{class Ke{constructor(){this.title="Restaurante Amore Mio"}}return Ke.\u0275fac=function(Pt){return new(Pt||Ke)},Ke.\u0275cmp=I.Xpm({type:Ke,selectors:[["app-root"]],decls:1,vars:0,template:function(Pt,Qt){1&Pt&&I._UZ(0,"router-outlet")},directives:[c.lC],styles:[""]}),Ke})();var Ie=ne(5642),_=ne(5755),ve=ne(1841);let xe=(()=>{class Ke{}return Ke.\u0275fac=function(Pt){return new(Pt||Ke)},Ke.\u0275mod=I.oAB({type:Ke,bootstrap:[Xe]}),Ke.\u0275inj=I.cJS({providers:[],imports:[[x.b2,Se.q,Ie.K,_.PublicModule,ve.JF]]}),Ke})();ne(2340).N.production&&(0,I.G48)(),x.q6().bootstrapModule(xe).catch(Ke=>console.error(Ke))}},Jn=>{Jn(Jn.s=1845)}]);